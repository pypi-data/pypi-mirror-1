<html
    xmlns="http://www.w3.org/1999/xhtml"
    xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="here/main_template/macros/master"
    i18n:domain="cmfquestionnaire">
<body>
  <tal:block metal:fill-slot="main">

  <h1 class="documentFirstHeading"
      tal:content="here/Title">
    Title
  </h1>

  <form action="questionnaire_group_form"
        class="enable_autofocus"
        name="questionnaire_group_form"
        method="post"
        tal:attributes="action string:${here/absolute_url}/${template/id}">

    <input type="hidden"
            name="form.submitted"
            value="1"/>

    <fieldset tal:define="group python:here.getGroup(request.groupId)"
              tal:condition="group">
      <legend i18n:translate="label_group_info">Group Information</legend>

      <input type="hidden"
             name="groupId"
             value="g0"
             tal:attributes="value group/id"/>

      <div class="field">
        <label for="newTitle"
               i18n:translate="label_title">Title</label>
        <div class="formHelp"
             i18n:translate="help_title">
          Enter the title of the question group.
        </div>
        <input type="text"
               name="newTitle"
               class="blurrable firstToFocus"
               id="newTitle"
               size="30"
               tal:attributes="value group/title"/>
      </div>

      <div class="field">
        <label for="newScale"
               i18n:translate="label_scale">Scale</label>
        <div class="formHelp"
             i18n:translate="help_scale">
          Enter the scale for the question group.
        </div>
        <input type="text"
               name="newScale"
               class="blurrable"
               id="newScale"
               size="2"
               tal:attributes="value group/scale"/>
      </div>

      <div class="field">
        <label for="newLegend"
               i18n:translate="label_legend">Legend</label>
        <div class="formHelp"
             i18n_translate="help_legend">
          Enter the legend for the question group.
        </div>
        <textarea id="newLegend"
                  name="newLegend"
                  rows="3"
                  cols="20"
                  tal:define="options python:group['options']"
                  tal:attributes="rows python:len(options)"
                  tal:content="python:'\n'.join(options)"></textarea>
      </div>

      <div class="field">
        <label for="newDescription"
               i18n:translate="label_description">Description</label>
        <div class="formHelp"
             i18n_translate="help_description">
          Enter the description of the question group.
        </div>
        <textarea id="newDescription"
                  name="newDescription"
                  rows="3"
                  cols="40"
                  tal:content="group/description"></textarea>
      </div>

      <input type="submit"
             class="standalone"
             name="form.button.updateGroup"
             value="Update"
             i18n:attributes="value"/>
    </fieldset>

    <fieldset tal:define="questions python:here.getQuestionsInGroup(request.groupId)">
      <legend i18n:translate="label_questions">Questions</legend>

      <table class="listing"
             tal:condition="questions">
        <thead>
          <tr>
            <th class="nosort"></th>
            <th class="nosort"
                i18n:translate="label_no">No</th>
            <th class="nosort"
                i18n:translate="label_question">Question</th>
          </tr>
        </thead>
        <tbody>
          <tal:block tal:repeat="question questions">
          <tr tal:define="n repeat/question/number"
              tal:attributes="class python:test(n%2==1, 'odd', 'even')">
            <td>
              <input type="checkbox"
                     name="questionIds:list"
                     value="0"
                     tal:attributes="value question/id"/>
            </td>
            <td tal:content="repeat/question/number">Question number</td>
            <td tal:content="question/text">Question text</td>
          </tr>
          </tal:block>
        </tbody>
      </table>

      <input type="submit"
             class="context"
             name="form.button.deleteQuestions"
             value="Delete"
             tal:condition="questions"
             i18n:attributes="value"/>

      <div class="field"
           style="margin-top: 1ex">
        <label for="question"
               i18n:translate="label_question_text">Question Text</label>
        <div class="formHelp"></div>

        <input type="text"
               id="question"
               name="question"
               size="80"/>
      </div>

      <input type="submit"
             class="context"
             name="form.button.addQuestion"
             value="Add Question"
             i18n:attributes="value"/>
    </fieldset>
  </form>
  </tal:block>
</body>
</html>
