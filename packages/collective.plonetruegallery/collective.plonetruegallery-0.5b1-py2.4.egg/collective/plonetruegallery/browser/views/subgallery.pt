<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="optilux.cinemacontent">
<metal:doctype fill-slot="doctype"><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"></metal:doctype>
<body>

<metal:css fill-slot="css_slot">
    <link 	rel="stylesheet" 
			tal:attributes="href string:${context/++resource++plonetruegallery.smoothgallery}/css/jd.gallery.css" 	
			media="screen" 
			charset="utf-8" />
    <style tal:content="context/generateCSS" />
</metal:css>
<metal:js fill-slot="javascript_head_slot">
	<script type="text/javascript" 
			tal:attributes="src string:++resource++plonetruegallery.smoothgallery/scripts/mootools.v1.11.js" ></script>
	<script type="text/javascript"
			tal:attributes="src string:++resource++plonetruegallery.smoothgallery/scripts/jd.gallery.js"></script>
	<script type="text/javascript"
			tal:attributes="src string:++resource++plonetruegallery.smoothgallery/scripts/jd.gallery.transitions.js"></script>
</metal:js>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">

	<script type="text/javascript" tal:content="context/generateJavascript" />
	
	<h1 tal:content="context/Title" />
	<div class="galleryContent">
		<div id="myGallery" tal:condition="python: len(view.images()) > 0">
			<tal:repeatImages tal:repeat="image view/images">
				<div class="imageElement">
					<h3 tal:content="image/Title" />
					<p tal:content="image/Description" />
					<tal:comment replace="nothing"> 
						I get the image url this way so I don't have to "wake up" or call "getObject" for every image.
						Otherwise, it might be very slow with a lot of images
					</tal:comment>
	                <a tal:attributes="href string:${context/absolute_url}/${image/id}" title="open image" class="open" />
					<img tal:attributes="src python: context.getImageUrl(image)" class="full" />
					<img tal:attributes="src python: context.getThumbUrl(image)" class="thumbnail" />
				</div>
			</tal:repeatImages>
		</div>
	</div>
    </tal:main-macro>
</metal:main>

</body>
</html>

