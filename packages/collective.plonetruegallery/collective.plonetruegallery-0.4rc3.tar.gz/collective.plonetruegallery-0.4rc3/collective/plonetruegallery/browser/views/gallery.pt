<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="optilux.cinemacontent">
	<metal:doctype fill-slot="doctype"><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"></metal:doctype>
<body>

<metal:css fill-slot="css_slot">
	<link 	rel="stylesheet" 
			tal:attributes="href string:${context/++resource++plonetruegallery.smoothgallery}/css/jd.gallery.css" 	
			media="screen" 
			charset="utf-8" />
    <style tal:content="context/generateCSS" />
    <style>
    #content a[href^="http:"], #content a.link-external {
        background:none;
        padding:0px;
    }
    </style>
</metal:css>
<metal:js fill-slot="javascript_head_slot">
	<script type="text/javascript" 
			tal:attributes="src string:++resource++plonetruegallery.smoothgallery/scripts/mootools.v1.11.js" ></script>
	<script type="text/javascript"
			tal:attributes="src string:++resource++plonetruegallery.smoothgallery/scripts/jd.gallery.js"></script>
	<script type="text/javascript"
			tal:condition="view/isGallerySet"
			tal:attributes="src string:++resource++plonetruegallery.smoothgallery/scripts/jd.gallery.set.js"></script>
	<script type="text/javascript"
			tal:attributes="src string:++resource++plonetruegallery.smoothgallery/scripts/jd.gallery.transitions.js"></script>
</metal:js>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">
	<script type="text/javascript" tal:content="context/generateJavascript" />
	
	<h1 tal:content="context/Title" />
	<div class="galleryContent">
	<tal:con tal:condition="view/isGallerySet">
		<div id="myGallery">
			<tal:iterategalleries tal:repeat="gallery view/galleries">
				<tal:gallery tal:define="images python: view.images(gallery)">
				<div    class="galleryElement" 
				        tal:attributes="id string:gallery${repeat/gallery/number}"
				        tal:condition="python: images and len(images) > 0">
					<h2 tal:content="gallery/Title" />
					<tal:repeatImages tal:repeat="image images">
						<div class="imageElement">
							<h3 tal:content="image/title" />
							<p tal:content="image/description" />
							<a tal:attributes="href image/link" title="open image" class="open" />
							<img tal:attributes="src image/image_url;
							                     width image/width;
							                     height image/height" class="full" />
							<img tal:attributes="src image/thumb_url" class="thumbnail" />
						</div>
					</tal:repeatImages>
				</div>
				</tal:gallery>
			</tal:iterategalleries>
		</div>
	</tal:con>
	<tal:con tal:condition="python: not view.isGallerySet()"
	         tal:define="images view/images">
		<div id="myGallery" tal:condition="python: images and len(images) > 0">
			<tal:repeatImages tal:repeat="image images">
				<div    class="imageElement">
					<h3 tal:content="image/title" />
					<p tal:content="image/description" />
                    <a tal:attributes="href image/link" title="open image" class="open" />
					<img tal:attributes="src image/image_url;
					                     width image/width;
					                     height image/height" class="full" />
					<img tal:attributes="src image/thumb_url" class="thumbnail" />
				</div>
			</tal:repeatImages>
		</div>
	</tal:con>
	</div>
    </tal:main-macro>
</metal:main>

</body>
</html>

