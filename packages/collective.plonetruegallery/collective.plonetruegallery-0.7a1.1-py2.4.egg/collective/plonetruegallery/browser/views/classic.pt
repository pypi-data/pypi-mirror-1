<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="collective.plonetruegallery">

<metal:js fill-slot="javascript_head_slot">
	<script type="text/javascript"
	        tal:content="python: view.displayer.javascript()">
    </script>
</metal:js>
<metal:css fill-slot="css_slot">
	<style tal:content="python: view.displayer.css()"/>
</metal:css>
<body>
<metal:main fill-slot="main">
<tal:defs tal:define="images view/firstpage">
    <tal:main-macro metal:define-macro="main">
		<div id="plone-true-gallery"
		     tal:condition="python: len(images) > 0"
		     tal:attributes="
		        class string:kssattr-imagePage-1 kssattr-numberOfImages-${view/adapter/number_of_images}">
			<!--
				controllable event so I can choose when to load more images
			-->
			<input type="button" id="loadMoreImages" style="display:none" />
	        <ul class="carousel jcarousel-skin-truegallery">
	        	<tal:thumbs tal:repeat="image images">
					<li>
					    <img tal:attributes="
					        src image/thumb_url; 
							class string:kssattr-index-${repeat/image/index}"
						/>
					</li>
				</tal:thumbs>
	        </ul>
	        <div class="view">
				<div id="media-guide">
					<ul>
						<li class="first"></li>
						<li class="prev"></li>
						<li class="pause"></li>
						<li class="play"></li>
						<li class="next"></li>
						<li class="last"></li>
					</ul>
				</div>
				
				<tal:images tal:repeat="image python: view.firstpage()">
					<div tal:attributes="class string:image kssattr-link-${image/link} kssattr-index-${repeat/image/index}">
						<img tal:attributes="src image/image_url" />
						<h2 tal:content="image/title" />
						<p tal:content="image/description" />
					</div>
				</tal:images>
	        </div>
			<div class="info">
				<h2></h2>
				<p></p>
				<a target="_blank" i18n:translate="label_view_full_size_image">click here to view full sized image</a>
			</div>
		</div>
		<div tal:condition="python: len(images) == 0 and not context.containsSubGalleries()">
		    <p i18n:translate="label_no_images_in_gallery">There are no images in this gallery.</p>
		</div>
		<tal:subgallery 
		    tal:replace="structure python: view.subgallery_template()" />
    </tal:main-macro>
</tal:defs>
</metal:main>
</body>
</html>

