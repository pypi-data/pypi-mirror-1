<div id="contentActionMenu" 
     tal:define="menu view/menu"
     tal:condition="view/available"
     i18n:domain="plone">

  <ul id="contentActionMenus">
    <li>
      <a href="toggle_edit_toolbar" 
	 class="hideToolbar">Hide toolbar</a>
    </li>
    <li>
      <a class="lightboxthis kssattr-url-@@select_default_view"
	 tal:attributes="href string:@@select_default_view">Default view</a>
    </li>
    <li>
      <a id="addcontent"	 
	 class="lightboxthis kssattr-url-folder_factories"
	 tal:attributes="href string:folder_factories">
	Add new
      </a>
    </li> 
    <li>
      <a href="#"
	 class="lightboxthis kssattr-url-@@delete_confirmation"
	 tal:attributes="href string:${view/getCurrentObjectUrl}/delete_confirmation">Delete</a>
    </li>
    <tal:extras repeat="menuItem menu">
      <tal:menu condition="python: menuItem['title'].find('actions') != -1">
	<tal:item repeat="subItem menuItem/submenu">
	  <li tal:condition="python: subItem['title'].lower() not in 
			     ['delete', 'cut', 'copy', 'rename', ]">
	    <a tal:content="subItem/title"
	       tal:attributes="href subItem/action" />
	  </li>
	</tal:item>
      </tal:menu>
    </tal:extras>

  </ul>


  <ul id="contentStateMenu"
      tal:define="menuItem python: menu[0]">

    <li tal:condition="here/getIcon"
	class="icon">
      <img tal:attributes="title here/Type; alt here/Type;
			   src here/getIcon" />
    </li>

    <tal:state condition="menuItem/extra/stateTitle | nothing">
      <li class="plone-contentmenu-workflow">
	State: <span tal:content="menuItem/extra/stateTitle"></span>
      </li>
      
      <tal:block tal:define="submenu menuItem/submenu"
		 tal:repeat="subMenuItem submenu">
	<li tal:condition="not: subMenuItem/extra/separator">
          <a href="#"
             tal:condition="subMenuItem/action"
             tal:attributes="href subMenuItem/action;
                             title subMenuItem/description;
                             id subMenuItem/extra/id | nothing;
                             class subMenuItem/extra/class | nothing"
             i18n:attributes="title">
            <span tal:omit-tag=""
                  tal:condition="subMenuItem/selected"
                  >&bull;</span>
            <img width="16"
		 height="16"
		 tal:condition="subMenuItem/icon"
		 tal:attributes="src subMenuItem/icon;
				 alt subMenuItem/description"
		 i18n:attributes="alt;"/>
            <span tal:content="structure subMenuItem/title"
                  i18n:translate=""
                  class="subMenuTitle">
              Title
            </span>
          </a>
          <div tal:condition="not:subMenuItem/action"
               tal:attributes="id subMenuItem/extra/id | nothing;
                               class subMenuItem/extra/class | nothing">
            <span tal:omit-tag=""
                  tal:condition="subMenuItem/selected"
                  >&bull;</span>
            <img width="16"
		 height="16"
		 tal:condition="subMenuItem/icon"
		 tal:attributes="src subMenuItem/icon;
				 alt subMenuItem/description"
		 i18n:attributes="alt;"/>
            <span tal:content="structure subMenuItem/title"
                  i18n:translate=""
                  class="subMenuTitle">
              Title
            </span>
          </div>
	</li>
      </tal:block>
    </tal:state>
  </ul>

  <div class="clear"></div>
</div>
