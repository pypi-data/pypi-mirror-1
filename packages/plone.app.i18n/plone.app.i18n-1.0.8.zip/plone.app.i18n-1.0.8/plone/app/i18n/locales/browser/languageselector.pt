<tal:language
    tal:condition="view/available">

    <ul id="portal-languageselector"
        tal:define="showFlags view/showFlags;
                    languages view/languages;
                    here_url context/absolute_url;">

        <li tal:condition="showFlags"
            tal:define="portal_url view/portal_url;"
            tal:repeat="lang languages">
            <span tal:define="code lang/code;
                              selected lang/selected"
                  tal:omit-tag="selected">

                <a href=""
                   tal:define="flag lang/flag|nothing;
                               name lang/native|lang/name"
                   tal:attributes="href string:${here_url}/switchLanguage?set_language=${code};
                                   title name">
                    <tal:flag condition="flag">
                        <img width="14"
                             height="11"
                             alt=""
                             tal:attributes="src string:${portal_url}${flag};
                                             title python: name;
                                             class python: selected and 'currentItem' or '';" />
                    </tal:flag>
                    <tal:nonflag condition="not: flag">
                        <span tal:replace="code">language code</span>
                    </tal:nonflag>
                </a>

            </span>
        </li>

        <li tal:condition="not: showFlags">
            <select style="font-size: 94%;"
                    onchange=""
                    tal:attributes="onchange string:window.location='${here_url}/switchLanguage?set_language=' + this.options[this.selectedIndex].value">
                <option tal:repeat="lang languages"
                        tal:content="lang/native|lang/name"
                        tal:attributes="selected lang/selected;
                                        value lang/code">Language</option>
            </select>
        </li>

    </ul>
</tal:language>
