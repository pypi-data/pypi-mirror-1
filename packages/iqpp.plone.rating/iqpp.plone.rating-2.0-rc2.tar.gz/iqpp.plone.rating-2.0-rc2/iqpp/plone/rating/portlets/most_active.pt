<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="iqpp.plone.rating">
<body>
<div metal:define-macro="portlet"
     tal:define="objects view/getMostActiveObjects">

    <dl class="portlet" 
        id="portlet-most-active">

        <dt class="portletHeader">
            <span class="portletTopLeft"></span>
                <tal:block tal:content="view/Title">
                    Most Active Rated                    
                </tal:block>
            <span class="portletTopRight"></span>
        </dt>

        <dd class="portletItem odd"
            tal:condition="not:objects"
            i18n:translate="no_daily_ratings">
            There are no ratings today
        </dd>    
        
        <tal:newsitems tal:repeat="obj objects">
            <dd tal:define="oddrow repeat/obj/odd;
                            plone_view context/@@plone;
                            getIcon nocall:plone_view/getIcon;
                            item_icon python:getIcon(obj);"
                 tal:attributes="class python:oddrow and 'portletItem even' or 'portletItem odd'">
                                 
                <a href="."
                   tal:attributes="href obj/getURL">
                   <img tal:replace="structure item_icon/html_tag" />                   
                   <span tal:content="string:${obj/pretty_title_or_id} (${obj/amount_of_ratings})">                    
                       Title
                   </span> 
                </a>    
            </dd>
        </tal:newsitems>
    </dl>

</div>
</body>
</html>
