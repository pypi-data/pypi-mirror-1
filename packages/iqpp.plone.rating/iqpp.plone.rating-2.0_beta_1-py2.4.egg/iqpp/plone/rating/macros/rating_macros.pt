<metal:block define-macro="rating_form">
    <form action="#"  
          tal:attributes="action context/absolute_url"
          method="post"
          enctype="multipart/form-data"
          tal:define="rating_view context/@@ratingView;
                      rating_details_view context/@@ratingDetailsView">

        <select name="rating_value"
                tal:define="my_rating python:rating_view.getRating('plone')">
            <option value="please_rate">
                Please Rate
            </option>
            <tal:repeat tal:repeat="score python:rating_details_view.getScores('plone')">
                <option tal:attributes="value score;
                                        selected python:score == my_rating"
                        tal:content="score">
                    1
                </option>
            </tal:repeat>  
        </select>   

        <input type="hidden"
               name="rating_id"
               value="plone" />
    
        <input style="margin-top:10px"
               class="context"
               id="rate"
               name="rate:method" 
               value="Rate" 
               type="submit"
               i18n:attributes="value" />

    </form>
</metal:block>

<metal:block define-macro="average_rating">
    <span tal:define="rating_view context/@@ratingDetailsView"
          tal:content="python:rating_view.getAverageRating('plone')">
        42.42
    </span>      
</metal:block>

<metal:block define-macro="amount_of_ratings">
    <span tal:define="rating_view context/@@ratingDetailsView"
          tal:content="python:rating_view.getAmountOfRatings('plone')">
        42
    </span>
    <span i18n:translate="voices_label">
        Voices
    </span>    
</metal:block>

<metal:block define-macro="rating">
    <span tal:define="rating_view context/@@ratingDetailsView"
          tal:content="python:rating_view.getRating('plone')">
        2.0
    </span>
</metal:block>

<metal:block define-macro="ratings"
             tal:define="rating_view context/@@ratingDetailsView">
    <table class="listing">
        <tr>
            <th i18n:translate="name_label">
                Name
            </th>
            <th i18n:translate="score_label">
                Score
            </th>
            <th i18n:translate="timestamp_label">
                Timestamp
            </th>
        </tr>      
        <tr tal:repeat="rating python:rating_view.getRatings('plone')">
            <td tal:content="rating/fullname">
                John Dow
            </td>
            <td tal:content="rating/value">
                42
            </td>
            <td tal:content="rating/timestamp">
                July 23, 2006
            </td>      
        </tr>
    </table>    
</metal:block>