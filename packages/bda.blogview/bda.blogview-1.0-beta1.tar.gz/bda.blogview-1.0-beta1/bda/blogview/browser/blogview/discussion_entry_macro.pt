<tal:discussion-macro metal:define-macro="discussion"
                      tal:define="cb nocall:here/CookedBody|nothing;
                                  text python:cb and cb(stx_level=2) or '';
                                  len_text python:len(text.strip())">

  <div class="stx"
       style="margin-bottom: 10px;"
       tal:condition="text"
       tal:attributes="class python:test(context.Format() in ('text/structured',
                                             'text/x-rst', ), 'stx', 'plain')">
      <div tal:replace="structure text" />
  </div>

</tal:discussion-macro>