#!/usr/bin/env python
#
import os
import sys

os.system("rm -fv `find . | grep \.pyc$`")
os.system("rm -fv MANIFEST")
os.system("python setup.py sdist")

print "Copying distribution to download location..."
import sys
sys.path.append('./src')
from kforge import __version__
cmd = "scp dist/kforge-%s.tar.gz appropriatesoftware.net:awf/system/domains/AppropriateSoftwareFoundation.org/provide/docs" % __version__
print cmd
os.system(cmd)

print "Committing release product..."
cmd = "svn add dist dist/kforge-%s.tar.gz" % __version__
print cmd
if os.system(cmd):
    sys.exit(1)
cmd = "svn ci dist/kforge-%s.tar.gz -m\"Created new distribution for kforge %s\"" % (__version__, __version__)
print cmd
if os.system(cmd):
    sys.exit(1)

