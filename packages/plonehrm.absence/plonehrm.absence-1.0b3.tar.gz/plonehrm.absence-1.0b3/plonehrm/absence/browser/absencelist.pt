<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      xml:lang="en"
      lang="en"
      i18n:domain="absence">
  <body>
    <div metal:fill-slot="main">

      <h1 i18n:translate="head_absencelist">
        Absencelist
      </h1>
      <p class="discreet"
         i18n:translate="label_most_recent_first">
        Most recent first
      </p>

      <table
          tal:define="absencelist view/get_absence_list"
          tal:condition="absencelist"
          class="absencelist listing"
          cellspacing="0"
          cellpadding="0">
        <tal:block define="toLocalizedTime nocall:context/@@plone/toLocalizedTime;">
          <tr class="notedate-absencelist-header">
            <th nowrap="true"
                i18n:translate="heading_illness">Illness</th>
            <th nowrap="true"
                i18n:translate="heading_sick_since">sick since</th>
            <th nowrap="true"
                i18n:translate="heading_healthy_since">healthy since</th>
          </tr>
          <tal:block tal:repeat="absence absencelist">
            <tr tal:define="oddrow repeat/absence/odd;"
                tal:attributes="class python:oddrow and 'odd' or 'even'">
              
              <td tal:content="absence/text"
                  tal:attributes="class python:absence.end_date and 'employee_healthy' or 'employee_sick'" />
              
              <td class="notedate-absencelist" nowrap="true">
                (<span tal:replace="python:toLocalizedTime(absence.start_date.isoformat())">
                10-8-2007
                </span>)
              </td>
              <td class="notedate-absencelist" nowrap="true">
                <tal:end_date condition="absence/end_date">
                  (<span tal:replace="python:toLocalizedTime(absence.end_date.isoformat())">
                  10-8-2007
                  </span>)
                </tal:end_date>
                
              </td>
            </tr>
          </tal:block>
        </tal:block>
      </table>
    </div>
  </body>
</html>