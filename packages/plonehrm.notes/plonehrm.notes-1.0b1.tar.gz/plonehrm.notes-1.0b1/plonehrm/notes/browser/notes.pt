<div id="notes"
     i18n:domain="notes">

  <dl class="module">
    <dt class="moduleHeader"
        i18n:translate="head_notes">
        Notes
    </dt>
    <dd class="moduleItem lastItem">
      <form name="add_note"
            method="post"
            id="addnoteform"
            action=""
            tal:attributes="action string:${context/absolute_url}/@@addnote"
            tal:condition="python:view.checkPermission('plonehrm: Add note', context)">
            <input name="text"
                   value=""
                   type="text"
                   size="30"
                   id="new-note"
                   class="notesfield" />
            <input value="Add note"
                   id="submit-note"
                   i18n:attributes="value label_add_note;"
                   type="submit"  />
      </form>
      <table tal:define="notes view/getNotes"
        tal:condition="notes"
        class="noteslist"
        cellspacing="0"
        cellpadding="0">
        <tal:block define="toLocalizedTime nocall:context/@@plone/toLocalizedTime;">
          <tr tal:repeat="note notes">
            <td class="notesbullet">
              &nbsp;
            </td>
            <td tal:content="note/text"
              class="notestext">
               Note text.
            </td>
            <td class="notedate"
              nowrap="true">
               (<span tal:replace="python:toLocalizedTime(note.date)">
                  10-8-2007
               </span>)
            </td>
            <td class="remove-note">
            <img src="delete_icon.gif"
                 id="remove-#"
                 alt="Remove this note"
                 tal:attributes="src string:${context/@@plone_portal_state/portal_url}/delete_icon.gif;
                                 id string:remove-${repeat/note/number};" />
          </td>
        </tr>
        </tal:block>
      </table>
    </dd>
  </dl>
</div>
