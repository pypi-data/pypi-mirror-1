<div id="notes"
     i18n:domain="notes"
     tal:condition="python: view.checkPermission('plonehrm: view notes viewlet', context)">


  <dl class="module">
    <dt class="moduleHeader">
       
      <a class="moduleButton"
         tal:attributes="href string:${here/absolute_url}/notes_listing">
        <img src="folder_icon.gif"
             alt="Show all notes"
             title="Show all notes"
             i18n:attributes="title show_all_notes;
			      alt show_all_notes;" />
      </a>
      <a class="moduleButton" href=""
	 id="add_note_button"
         tal:condition="python:view.checkPermission('plonehrm: Add note', context)">
        <img src="add_icon.gif"
             alt="Add note"
             title="Add note"
             i18n:attributes="title label_add_note;
                              alt label_add_note;" />
      </a>

      <span tal:omit-tag=""
      		i18n:translate="head_notes">Notes</span>
    </dt>
    <dd class="moduleItem lastItem">

      <!-- We are in list mode, so we show the note list. -->
      <tal:block condition="view/show_list">
	<table tal:define="notes view/getNotes"
               tal:condition="notes"
               class="noteslist"
               cellspacing="0"
               cellpadding="0">
          <tal:block define="toLocalizedTime nocall:context/@@plone/toLocalizedTime;">
            <tr tal:repeat="note notes">
              <td class="notes-bullet">
		&nbsp;
              </td>
              <td tal:content="note/text"
		  class="notestext">
		Note text.
              </td>
              <td title="datum aangemaakt" class="notedate discreet"
		  nowrap="true">
		<span tal:replace="python:toLocalizedTime(note.date)">
                  10-8-2007
		</span>
              </td>
              <td class="remove-note">
		<img src="delete_icon.gif"
                     id="remove-#"
                     alt="Remove this note"
                     tal:attributes="src string:${context/@@plone_portal_state/portal_url}/delete_icon.gif;
                                     id string:remove-${repeat/note/number};"
		     tal:condition="python: view.checkPermission('plonehrm: manage notes', context)"/>
              </td>
            </tr>
          </tal:block>
	</table>
      </tal:block>

      <!-- We are in add mode, so we show the add form. -->
      <tal:block condition="not: view/show_list">
	<form name="add_note"
              method="post"
              id="addnoteform"
              action=""
              tal:attributes="action string:${context/absolute_url}/@@addnote">

	  <textarea id="new-note" rows="3" cols="50"></textarea>
          <input value="Add note"
                 id="submit-note"
                 class="context"
                 i18n:attributes="value label_add_note;"
                 type="submit"  />
          <input value="Cancel"
                 id="cancel-note"
                 class="context"
		 i18n:domain="plone"
                 i18n:attributes="value label_cancel;"
                 type="submit"  />

	</form>
      </tal:block>
    </dd>
  </dl>
</div>
