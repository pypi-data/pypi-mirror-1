#!/usr/bin/env python

""" 


"""

__author__ = 'Elena "of Valhalla" Grandi'
__version__ = '20090318'
__copyright__ = '2009 Elena Grandi'
__license__ = 'LGPL'

import sys,optparse
import dumb

def create_bookmark(url,directory,data={}):
    bm=dumb.Bookmark(None,directory,url=url)
    for item in data:
        bm.set_value(item,data[item])
    bm.save()

def main():
    parser = optparse.OptionParser()
    parser.add_option('--title','-t')
    parser.add_option('--command-line','-l')
    parser.add_option('--comment','-c')
    parser.add_option('--opener','-o')
    parser.add_option('--tag','-T')
    opt, arg = parser.parse_args()
    
    if len(arg) > 0:
        url = arg[0]
        if len(arg) > 1:
            directory = arg[1]
        else:
            directory = '.'
    else:
        sys.exit('Usage:  dumb-add [-t Title] [-l Command-line] [-c Comment] [-o opener] [-T "tag1 [...]"] url [collection]')

    data = {}
    if opt.title != None:
        data['title'] = opt.title
    if opt.command_line != None:
        data['cline'] = opt.command_line
    if opt.comment != None:
        data['comment'] = opt.comment
    if opt.opener != None:
        data['opener'] = opt.opener.split()
    if opt.tag != None:
        data['tag'] = opt.tag.split()

    create_bookmark(url, directory, data)


if __name__ == '__main__': main()
