<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      metal:use-macro="here/main_template/macros/master" 
      i18n:domain="DigestoContentTypes" >
<head>
</head>
<body>
    <div metal:fill-slot="main">

    <h1>Administraci&oacute;n de Abreviaturas</h1>

    <form tal:attributes="action string:${here/absolute_url}/set_abbreviations;" method="post">
    <input type="hidden" name="form.submitted" value="1" />
    <table border="0" align="center" class="abbreviations">
    <thead>
    <tr>
    <th>Emisor</th>
    <th>Tipo</th>
    <th>Abreviatura</th>
    </tr>
    </thead>
    <tbody>

    <div tal:define="abbreviations python:context.getAbbreviations()">
    <tal:sources-loop tal:define="items here/sources | nothing" tal:repeat="item items">

        <tal:kinds-loop tal:define="source python: item.get('source')" tal:repeat="kind python: item.get('kinds')">
        <tr>
        <td tal:content="source">
        </td>

        <td tal:content="kind">
        </td>

        <td align="center">
        <input type="hidden" name="abbreviations.source:records" tal:attributes="value source;"/>
        <input type="hidden" name="abbreviations.kind:records" tal:attributes="value kind;"/>
        <tal:hasabbr tal:condition="abbreviations">
        <input type="text" name="abbreviations.value:records" size="5" tal:attributes="value python: abbreviations.get((source,kind));">
        </tal:hasabbr>
        <tal:nothasabbr tal:condition="not: abbreviations">
        <input type="text" name="abbreviations.value:records" size="5" tal:attributes="value nothing;">
        </tal:nothasabbr>
        </td>

        </tr>

        </tal:kinds-loop>
    </tal:sources-loop>
    </div>

    </tbody>
    </table>
    <input type="submit" name="submit" value="Guardar" class="context"/>
    <input type="submit" value="Cancelar" name="form.button.cancel" class="standalone"/>
    </form>

    </div>

</body>
</html>

