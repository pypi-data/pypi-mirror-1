===============
recipe template
===============

Check that the directory does not exist::

    >>> rmdir(tempdir, 'plone.recipe.example')

Go to a directory::

    >>> cd(tempdir)

Then use paster::

    >>> sh('paster create -t recipe plone.recipe.example --no-interactive')
    paster create -t recipe plone.recipe.example --no-interactive
    ...

Let's check the content::

    >>> package_dir = os.path.join(tempdir, 'plone.recipe.example', 
    ...                            'plone', 'recipe', 'plonerecipeexample')
    >>> ls(package_dir)
    README.txt
    __init__.py
    tests

Let's check how the recipe looks like::

    >>> recipe = open(os.path.join(package_dir, '__init__.py')).read()
    >>> print recipe
    # -*- coding: utf-8 -*-
    """Recipe plonerecipeexample"""
    <BLANKLINE>
    from zc.buildout import UserError
    <BLANKLINE>
    class Recipe(object):
        """zc.buildout recipe"""
    <BLANKLINE>
        def __init__(self, buildout, name, options):
            self.buildout, self.name, self.options = buildout, name, options
    <BLANKLINE>
        def install(self):
            """Installer"""
            # XXX Implement recipe functionality here
    <BLANKLINE>
            # Return files that were created by the recipe. The buildout
            # will remove all returned files upon reinstall.
        return tuple()
    <BLANKLINE>
        def update(self):
            """Updater"""
            pass

Now let's try to run the recipe own tests::

    >>> cd(os.path.join(tempdir, 'plone.recipe.example'))
    >>> import sys
    >>> python_ = sys.executable
    >>> res = read_sh('%s setup.py test' % python_)
    >>> res.strip().endswith('OK')
    True


