<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="jyu.portalview">
  
  <head>
    <metal:css fill-slot="css_slot">
      <style type="text/css" media="all" tal:define="css view/prefixedStyles"
             tal:condition="css" tal:content="css">
        .portalViewBox-id { background: blue; }
      </style>
      <tal:menubar condition="view/menuBarEnabled">
        <style type="text/css" media="all" tal:condition="view/breadCrumbsHidden">
          #portal-breadcrumbs {
            display: none;
          }
        </style>
      </tal:menubar>
    </metal:css>
    <script type="text/javascript" metal:fill-slot="javascript_head_slot"
            tal:condition="view/menuBarEnabled">
      jq(document).ready(function() {
	jq("#portalview-menubar li").hover(
          function() { jq(this).children("ul").show(); },
          function() { jq(this).children("ul").hide(); }
        );
      });
    </script>
  </head>
  
  <body>
    
    <div metal:fill-slot="main" id="portalview" class="portalView">
      
      <tal:portalview tal:define="columns view/columns">
        <tal:column repeat="column columns">
       	  <div metal:define-macro="column"
               tal:attributes="id column/wrapper/id;
                               class column/wrapper/class">
            <div tal:attributes="id column/id;
                                 class column/class">
              <tal:box repeat="box column/boxes">
                <tal:subcolumn tal:condition="exists:box/boxes"
                               tal:define="column box">
                  <div metal:use-macro="view/template/macros/column" />
                </tal:subcolumn>
                <tal:supported condition="exists:box/object/portalview-boxview">
                  <div tal:define="box_view box/object/portalview-boxview;
                                   box_view python:box_view.strip()"
                       tal:condition="box_view"
                       tal:attributes="id box/wrapper/id;
                                       class box/wrapper/class">
                    <div tal:attributes="id box/id;
                                         class box/class">
                      <tal:toolbox condition="view/boxToolsEnabled">
                        <div class="portalViewBoxTools">
                          <a href="#" i18n:translate="" class="portalViewColumnListLink"
                             tal:attributes="href string:${box/object/absolute_url}/../folder_contents"
                             title="Re-order column contents" i18n:attributes="title">Folder</a>
                          <a href="#" i18n:translate="" class="portalViewBoxEditLink"
                             tal:attributes="href string:${box/object/absolute_url}/edit"
                             title="Edit boxed content" i18n:attributes="title">Edit</a>
                        </div>
                      </tal:toolbox>
                      <tal:content tal:replace="structure box_view">
                        Portal View Box
                      </tal:content>
                    </div>
                  </div>
                </tal:supported>
              </tal:box>
            </div>
	        </div>
        </tal:column>
      </tal:portalview>

      <div class="visualClear"></div>

    </div>

  </body>
</html>
