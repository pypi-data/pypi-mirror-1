<tal:topics define="items view/queryCatalog;
                    toLocalizedTime nocall:context/@@plone/toLocalizedTime;
                    today python:toLocalizedTime(modules['DateTime'].now());"
            condition="python: len(items)">
  <a tal:condition="view/feedlink" class="portalViewBoxFeedLink" i18n:domain="jyu.portalview" title="RSS feed" i18n:attributes="title" tal:attributes="href view/feedlink">RSS</a>
  <div class="portletHeader" tal:content="here/title" />
  <p class="portletItem discreet" tal:condition="here/Description|nothing" tal:content="here/Description">Kuvaus</p>
  <ul>
  <tal:repeat tal:repeat="item items">
    <tal:item tal:define="oddrow repeat/item/odd">
      <li class="oddrow" 
          tal:attributes="class python:oddrow and 'portletItem even' or 'portletItem odd'"
          tal:define="item_start item/start|nothing;
                      item_end item/end|nothing;
                      description python:item.get('description', None) or item.Title">
        <metal:title define-macro="title">
          <a href="#" tal:attributes="href python:view.toRelativeUrl(item.getPath());
                                      title description">
            <span tal:replace="item/Title">
              Title
          </span></a>
          <span class="portletItemDetails" tal:condition="python:item.portal_type in ['Event']"
                tal:define="start python:view.toLocalizedTime(item_start);">
            <span tal:omit-tag="" tal:condition="python: start != today" tal:content="start">19.02.2007</span>
            <tal:time condition="python:item_start.Time() != '00:00:00' and start == today">
              <span tal:omit-tag="" i18n:domain="jyu.portalview" i18n:translate="">at</span>
              <span tal:omit-tag="" tal:content="python:view.toLocalizedTime(item_start, time_only=1)">12:00</span>
            </tal:time>
            <tal:ends condition="item_end">
              <span tal:omit-tag="" tal:define="end python:view.toLocalizedTime(item_end)"
                    tal:condition="python: start != today and start != end"
                    tal:content="structure string:&ndash; ${end}">&ndash; 20.02.2007</span>
            </tal:ends>
          </span>
          <span class="portletItemDetails" 
                tal:condition="python:item.portal_type not in ['Event']">
            <span tal:omit-tag="" tal:content="python:toLocalizedTime(item.Date)">19.02.2007</span>
          </span>
        </metal:title>
      </li>
    </tal:item>
  </tal:repeat>
  </ul>
  <p class="portletFooter portalViewBoxMore" tal:define="link view/moreUrl" tal:condition="link">
    <a href="" i18n:domain="jyu.portalview" i18n:attributes="title" tal:attributes="href link"
       class="link-plain" title="Show more..." i18n:translate="box_morelink">
      More&hellip;
    </a>
  </p>
</tal:topics>
