<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<div class="page">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>5. Frequently Asked Questions &mdash; Py4J</title>
    <link rel="stylesheet" href="_static/py4jdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  'true'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Py4J" href="index.html" />
    <link rel="next" title="6. Changelog" href="changelog.html" />
    <link rel="prev" title="4. Py4J Java API" href="py4j_java.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="6. Changelog"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="py4j_java.html" title="4. Py4J Java API"
             accesskey="P">previous</a> |</li>
    <li><a href="index.html">Home</a> |</li>
	<li><a href="download.html">Download</a> |</li>
	<li><a href="contents.html">Documentation</a> |</li>
	<li><a href="https://sourceforge.net/apps/trac/py4j/wiki">Trac</a> |</li>
	<li><a href="about.html">About</a> &raquo;</li>
 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="contents.html">On This Page</a></h3>
            <ul>
<li><a class="reference external" href="">5. Frequently Asked Questions</a><ul>
<li><a class="reference external" href="#how-to-turn-logging-on-off">5.1. How to turn logging on/off?</a></li>
<li><a class="reference external" href="#how-to-prevent-memory-leak">5.2. How to prevent memory leak?</a></li>
<li><a class="reference external" href="#is-py4j-thread-safe">5.3. Is Py4J thread-safe?</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="py4j_java.html"
                                  title="previous chapter">4. Py4J Java API</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="changelog.html"
                                  title="next chapter">6. Changelog</a></p>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="frequently-asked-questions">
<h1>5. Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="summary">
<p class="topic-title first">Summary</p>
<ul class="simple">
<li><a class="reference internal" href="#how-to-turn-logging-on-off" id="id2">How to turn logging on/off?</a></li>
<li><a class="reference internal" href="#how-to-prevent-memory-leak" id="id3">How to prevent memory leak?</a></li>
<li><a class="reference internal" href="#is-py4j-thread-safe" id="id4">Is Py4J thread-safe?</a></li>
</ul>
</div>
<div class="section" id="how-to-turn-logging-on-off">
<h2><a class="toc-backref" href="#id2">5.1. How to turn logging on/off?</a><a class="headerlink" href="#how-to-turn-logging-on-off" title="Permalink to this headline">¶</a></h2>
<p>In Java, simply call <tt class="docutils literal"><span class="pre">GatewayServer.turnLoggingOn()</span></tt> or <tt class="docutils literal"><span class="pre">GatewayServer.turnLoggingOn()</span></tt>. Py4J-java uses the
<tt class="docutils literal"><span class="pre">java.util.logging</span></tt> framework. To get fined-grained control over the logging behavior, just obtain a Logger instance
by calling <tt class="docutils literal"><span class="pre">Logger.getLogger(&quot;py4j&quot;)</span></tt>. You can also look at the <a class="reference external" href="http://java.sun.com/javase/6/docs/technotes/guides/logging/overview.html">Java Logging Overview</a>
for more information on this framework.</p>
<p>In Python, logging can be enabled this way:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&quot;py4j&quot;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-prevent-memory-leak">
<h2><a class="toc-backref" href="#id3">5.2. How to prevent memory leak?</a><a class="headerlink" href="#how-to-prevent-memory-leak" title="Permalink to this headline">¶</a></h2>
<p>Every time that an object is returned by the Java Gateway, it is cached in a map by the gateway. If the same object is
returned multiple times, it might be cached under different names. As long as the gateway is not shut down on the Java
side, the objects are still referenced by the cache and will <strong>never</strong> be garbage collected. This is to ensure that a
Python program does not access a dead Java object and that multiple Python programs connected to the same gateway can
access the same objects.</p>
<p>You can manually interact with the cache by calling the protected method <a class="reference external" href="_static/javadoc/py4j/DefaultGateway.html#getBindings()">DefaultGateway.getBindings()</a>
from your custom Gateway implementation. We plan to implement a few methods to make cache management easier and we might
change the main cache management strategy in the future.</p>
</div>
<div class="section" id="is-py4j-thread-safe">
<h2><a class="toc-backref" href="#id4">5.3. Is Py4J thread-safe?</a><a class="headerlink" href="#is-py4j-thread-safe" title="Permalink to this headline">¶</a></h2>
<p>The short answer is: it&#8217;s complicated. Multiple Python programs can connect to the same Java gateway. When this happens,
each connection is executed by its own Java thread, so each thread can access the Gateway (and any Java object in the
JVM) concurrently.</p>
<p>As of version 0.1., we recommend that you serialize the accesses to the JVM by extending the <a class="reference external" href="_static/javadoc/index.html?py4j/DefaultSynchronizedGateway.html">DefaultSynchronizedGateway</a>
instead of the <a class="reference external" href="_static/javadoc/index.html?py4j/DefaultGateway.html">DefaultGateway</a>. This will ensure that only one
Java method is executed at a time.</p>
<p>When we will implement a better cache management strategy and dynamic invocation strategy (i.e., how Java methods are
called), we will make Py4J completely thread-safe without requiring you to serialize the access to the JVM. Obviously,
if your application is not thread-safe, but want multiple Python programs to access it concurrently, you will still need
to extend <a class="reference external" href="_static/javadoc/index.html?py4j/DefaultSynchronizedGateway.html">DefaultSynchronizedGateway</a>.</p>
</div>
</div>


          </div>
		  		
				<div class="helpbar">
					<h3>Questions/Feedback?</h3>
					<ul>
						<li>Try the <a href="faq.html">FAQ</a> -- It answers many questions.</li>
						<li>Search for information in the <a href="http://sourceforge.net/mailarchive/forum.php?forum_name=py4j-users">archives of the py4j-users mailing list</a>, or <a href="https://lists.sourceforge.net/lists/listinfo/py4j-users">post a question</a>.</li>
						<li>Check out the <a href="http://sourceforge.net/apps/trac/py4j/wiki/HowTos">user-contributed how-tos</a> or contribute one yourself.</li>
						<li>If you notice errors with this documentation, <a href="http://sourceforge.net/apps/trac/py4j/newticket">open a ticket</a> and let us know. Please, only open a ticket for feedback or improvements on the docs. To get help, use the links above!</li>
					</ul>
				</div>
				
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog.html" title="6. Changelog"
             >next</a> |</li>
        <li class="right" >
          <a href="py4j_java.html" title="4. Py4J Java API"
             >previous</a> |</li>
    <li><a href="index.html">Home</a> |</li>
	<li><a href="download.html">Download</a> |</li>
	<li><a href="contents.html">Documentation</a> |</li>
	<li><a href="https://sourceforge.net/apps/trac/py4j/wiki">Trac</a> |</li>
	<li><a href="about.html">About</a> &raquo;</li>
 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Barthélémy Dagenais.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.2.
    </div>
  </div>
  </body>
  

</html>