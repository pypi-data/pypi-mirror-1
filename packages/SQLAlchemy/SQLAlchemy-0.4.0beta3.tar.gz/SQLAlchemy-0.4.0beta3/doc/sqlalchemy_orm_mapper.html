<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>SQLAlchemy 0.4 Documentation - module sqlalchemy.orm.mapper</title>
	
    
    <link rel="stylesheet" href="style.css"></link>
    <link rel="stylesheet" href="docs.css"></link>
    <link href="syntaxhighlight.css" rel="stylesheet" type="text/css"></link>
    <script src="scripts.js"></script>

    <link rel="stylesheet" href="docutil.css"></link>



</head>
<body>








<div id="topanchor"><a name="top">&nbsp;</a></div>


<h1>SQLAlchemy 0.4 Documentation</h1>

<div id="pagecontrol"><a href="index.html">Multiple Pages</a> | <a href="documentation.html">One Page</a></div>

<div class="versionheader">Version: 0.4   Last Updated: 08/16/07 11:15:18</div>












    <div class="topnav">

    
    <div class="navbanner">
        <a href="index.html">Table of Contents</a>
        
    <div class="prevnext">
            Up: <a href="docstrings.html">API Documentation</a>

               |   
            Previous: <a href="sqlalchemy_orm_interfaces.html">module sqlalchemy.orm.interfaces</a>

               |   
            Next: <a href="sqlalchemy_orm_properties.html">module sqlalchemy.orm.properties</a>
    </div>

        <h2>module sqlalchemy.orm.mapper</h2>
    </div>

	
	
    <ul>
        
        <li><a style="" href="sqlalchemy_orm_mapper.html#docstrings_sqlalchemy.orm.mapper_modfunc">Module Functions</a></li>
        
	        <li>
                
    <ul>
        
        <li><a style="" href="sqlalchemy_orm_mapper.html#docstrings_sqlalchemy.orm.mapper_modfunc_class_mapper">class_mapper()</a></li>
        
        
        <li><a style="" href="sqlalchemy_orm_mapper.html#docstrings_sqlalchemy.orm.mapper_modfunc_object_mapper">object_mapper()</a></li>
        
    </ul>

	        </li>
        
        <li><a style="" href="sqlalchemy_orm_mapper.html#docstrings_sqlalchemy.orm.mapper_Mapper">class Mapper(object)</a></li>
        
    </ul>

	</div>



    

    
    
    <A name="docstrings_sqlalchemy.orm.mapper"></a>
    
    <div class="sectionL2">

    <h3>module sqlalchemy.orm.mapper</h3>
    
    
    

        
    
    <A name="docstrings_sqlalchemy.orm.mapper_modfunc"></a>
    
    <div class="sectionL3">

    <h3>Module Functions</h3>
    
    
                
    <div class="darkcell">
    
    <A name="docstrings_sqlalchemy.orm.mapper_modfunc_class_mapper"></a>
    <b>def class_mapper(<i>class_</i>, <i>entity_name=None</i>, <i>compile=True</i>)</b>
    <div class="docstring">
    <p>Given a class and optional entity_name, return the primary Mapper associated with the key.</p>
<p>If no mapper can be located, raises <tt class="docutils literal"><span class="pre">InvalidRequestError</span></tt>.</p>

    </div>
    </div>

                
    <div class="darkcell">
    
    <A name="docstrings_sqlalchemy.orm.mapper_modfunc_object_mapper"></a>
    <b>def object_mapper(<i>object</i>, <i>entity_name=None</i>, <i>raiseerror=True</i>)</b>
    <div class="docstring">
    <p>Given an object, return the primary Mapper associated with the object instance.</p>
<dl class="docutils">
<dt>object</dt>
<dd>The object instance.</dd>
<dt>entity_name</dt>
<dd>Entity name of the mapper to retrieve, if the given instance is
transient.  Otherwise uses the entity name already associated
with the instance.</dd>
<dt>raiseerror</dt>
<dd>Defaults to True: raise an <tt class="docutils literal"><span class="pre">InvalidRequestError</span></tt> if no mapper can
be located.  If False, return None.</dd>
</dl>

    </div>
    </div>

        

    </div>




            
    

    
    
    <A name="docstrings_sqlalchemy.orm.mapper_Mapper"></a>
    
    <div class="sectionL3">

    <h3>class Mapper(object)</h3>
    
    
    <div class="darkcell"><p>Define the correlation of class attributes to database table
columns.</p>
<p>Instances of this class should be constructed via the
<tt class="docutils literal"><span class="pre">sqlalchemy.orm.mapper()</span></tt> function.</p>
</div>
    

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def __init__(<i>self</i>, <i>class_</i>, <i>local_table</i>, <i>properties=None</i>, <i>primary_key=None</i>, <i>non_primary=False</i>, <i>inherits=None</i>, <i>inherit_condition=None</i>, <i>inherit_foreign_keys=None</i>, <i>extension=None</i>, <i>order_by=False</i>, <i>allow_column_override=False</i>, <i>entity_name=None</i>, <i>always_refresh=False</i>, <i>version_id_col=None</i>, <i>polymorphic_on=None</i>, <i>_polymorphic_map=None</i>, <i>polymorphic_identity=None</i>, <i>polymorphic_fetch=None</i>, <i>concrete=False</i>, <i>select_table=None</i>, <i>allow_null_pks=False</i>, <i>batch=True</i>, <i>column_prefix=None</i>, <i>include_properties=None</i>, <i>exclude_properties=None</i>)</b>
    <div class="docstring">
    <p>Construct a new mapper.</p>
<p>Mappers are normally constructed via the <a href="sqlalchemy_orm.html#docstrings_sqlalchemy.orm_modfunc_mapper">mapper()</a>
function.  See for details.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def add_properties(<i>self</i>, <i>dict_of_properties</i>)</b>
    <div class="docstring">
    <p>Add the given dictionary of properties to this mapper,
using <cite>add_property</cite>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def add_property(<i>self</i>, <i>key</i>, <i>prop</i>)</b>
    <div class="docstring">
    <p>Add an indiviual MapperProperty to this mapper.</p>
<p>If the mapper has not been compiled yet, just adds the
property to the initial properties dictionary sent to the
constructor.  If this Mapper has already been compiled, then
the given MapperProperty is compiled immediately.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def canload(<i>self</i>, <i>instance</i>)</b>
    <div class="docstring">
    <p>return true if this mapper is capable of loading the given instance</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def cascade_callable(<i>self</i>, <i>type</i>, <i>object</i>, <i>callable_</i>, <i>recursive=None</i>, <i>halt_on=None</i>)</b>
    <div class="docstring">
    <p>Execute a callable for each element in an object graph, for
all relations that meet the given cascade rule.</p>
<dl class="docutils">
<dt>type</dt>
<dd>The name of the cascade rule (i.e. save-update, delete, etc.)</dd>
<dt>object</dt>
<dd>The lead object instance.  child items will be processed per
the relations defined for this object's mapper.</dd>
<dt>callable_</dt>
<dd>The callable function.</dd>
<dt>recursive</dt>
<dd>Used by the function for internal context during recursive
calls, leave as None.</dd>
</dl>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def cascade_iterator(<i>self</i>, <i>type</i>, <i>object</i>, <i>recursive=None</i>, <i>halt_on=None</i>)</b>
    <div class="docstring">
    <p>Iterate each element in an object graph, for all relations
taht meet the given cascade rule.</p>
<dl class="docutils">
<dt>type</dt>
<dd>The name of the cascade rule (i.e. save-update, delete,
etc.)</dd>
<dt>object</dt>
<dd>The lead object instance.  child items will be processed per
the relations defined for this object's mapper.</dd>
<dt>recursive</dt>
<dd>Used by the function for internal context during recursive
calls, leave as None.</dd>
</dl>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def common_parent(<i>self</i>, <i>other</i>)</b>
    <div class="docstring">
    <p>Return true if the given mapper shares a common inherited parent as this mapper.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def compile(<i>self</i>)</b>
    <div class="docstring">
    <p>Compile this mapper into its final internal format.</p>
<p>This is the <em>external</em> version of the method which is not
reentrant.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def delete_obj(<i>self</i>, <i>objects</i>, <i>uowtransaction</i>)</b>
    <div class="docstring">
    <p>Issue <tt class="docutils literal"><span class="pre">DELETE</span></tt> statements for a list of objects.</p>
<p>This is called within the context of a UOWTransaction during a
flush operation.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def dispose(<i>self</i>)</b>
    <div class="docstring">
    
    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def get_attr_by_column(<i>self</i>, <i>obj</i>, <i>column</i>, <i>raiseerror=True</i>)</b>
    <div class="docstring">
    <p>Return an instance attribute using a Column as the key.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def get_property(<i>self</i>, <i>key</i>, <i>resolve_synonyms=False</i>, <i>raiseerr=True</i>)</b>
    <div class="docstring">
    <p>return MapperProperty with the given key.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def get_select_mapper(<i>self</i>)</b>
    <div class="docstring">
    <p>Return the mapper used for issuing selects.</p>
<p>This mapper is the same mapper as <cite>self</cite> unless the
select_table argument was specified for this mapper.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def get_session(<i>self</i>)</b>
    <div class="docstring">
    <p>Return the contextual session provided by the mapper
extension chain, if any.</p>
<p>Raise <tt class="docutils literal"><span class="pre">InvalidRequestError</span></tt> if a session cannot be retrieved
from the extension chain.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def has_eager(<i>self</i>)</b>
    <div class="docstring">
    <p>Return True if one of the properties attached to this
Mapper is eager loading.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def identity_key_from_instance(<i>self</i>, <i>instance</i>)</b>
    <div class="docstring">
    <p>Return the identity key for the given instance, based on
its primary key attributes.</p>
<p>This value is typically also found on the instance itself
under the attribute name <cite>_instance_key</cite>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def identity_key_from_primary_key(<i>self</i>, <i>primary_key</i>)</b>
    <div class="docstring">
    <p>Return an identity-map key for use in storing/retrieving an
item from an identity map.</p>
<dl class="docutils">
<dt>primary_key</dt>
<dd>A list of values indicating the identifier.</dd>
</dl>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def identity_key_from_row(<i>self</i>, <i>row</i>)</b>
    <div class="docstring">
    <p>Return an identity-map key for use in storing/retrieving an
item from the identity map.</p>
<dl class="docutils">
<dt>row</dt>
<dd>A <tt class="docutils literal"><span class="pre">sqlalchemy.engine.base.RowProxy</span></tt> instance or a
dictionary corresponding result-set <tt class="docutils literal"><span class="pre">ColumnElement</span></tt>
instances to their values within a row.</dd>
</dl>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def instances(<i>self</i>, <i>cursor</i>, <i>session</i>, <i>*mappers</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>Return a list of mapped instances corresponding to the rows
in a given ResultProxy.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def is_assigned(<i>self</i>, <i>instance</i>)</b>
    <div class="docstring">
    <p>Return True if this mapper handles the given instance.</p>
<p>This is dependent not only on class assignment but the
optional <cite>entity_name</cite> parameter as well.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def isa(<i>self</i>, <i>other</i>)</b>
    <div class="docstring">
    <p>Return True if the given mapper inherits from this mapper.</p>

    </div>
    </div>

                    
         <div class="darkcell">
         <A name=""></a>
         <b>iterate_properties = property()</b>
         <div class="docstring">
         <p>returns an iterator of all MapperProperty objects.</p>

         </div> 
         </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def iterate_to_root(<i>self</i>)</b>
    <div class="docstring">
    
    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def polymorphic_iterator(<i>self</i>)</b>
    <div class="docstring">
    <p>Iterate through the collection including this mapper and
all descendant mappers.</p>
<p>This includes not just the immediately inheriting mappers but
all their inheriting mappers as well.</p>
<p>To iterate through an entire hierarchy, use
<tt class="docutils literal"><span class="pre">mapper.base_mapper.polymorphic_iterator()</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def populate_instance(<i>self</i>, <i>selectcontext</i>, <i>instance</i>, <i>row</i>, <i>ispostselect=None</i>, <i>**flags</i>)</b>
    <div class="docstring">
    <p>populate an instance from a result row.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def primary_key_from_instance(<i>self</i>, <i>instance</i>)</b>
    <div class="docstring">
    <p>Return the list of primary key values for the given
instance.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def primary_mapper(<i>self</i>)</b>
    <div class="docstring">
    <p>Return the primary mapper corresponding to this mapper's class key (class + entity_name).</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def register_dependencies(<i>self</i>, <i>uowcommit</i>, <i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>Register <tt class="docutils literal"><span class="pre">DependencyProcessor</span></tt> instances with a
<tt class="docutils literal"><span class="pre">unitofwork.UOWTransaction</span></tt>.</p>
<p>This call <cite>register_dependencies</cite> on all attached
<tt class="docutils literal"><span class="pre">MapperProperty</span></tt> instances.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def save_obj(<i>self</i>, <i>objects</i>, <i>uowtransaction</i>, <i>postupdate=False</i>, <i>post_update_cols=None</i>, <i>single=False</i>)</b>
    <div class="docstring">
    <p>Issue <tt class="docutils literal"><span class="pre">INSERT</span></tt> and/or <tt class="docutils literal"><span class="pre">UPDATE</span></tt> statements for a list of objects.</p>
<p>This is called within the context of a UOWTransaction during a
flush operation.</p>
<p><cite>save_obj</cite> issues SQL statements not just for instances mapped
directly by this mapper, but for instances mapped by all
inheriting mappers as well.  This is to maintain proper insert
ordering among a polymorphic chain of instances. Therefore
save_obj is typically called only on a <em>base mapper</em>, or a
mapper which does not inherit from any other mapper.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def set_attr_by_column(<i>self</i>, <i>obj</i>, <i>column</i>, <i>value</i>)</b>
    <div class="docstring">
    <p>Set the value of an instance attribute using a Column as the key.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def translate_row(<i>self</i>, <i>tomapper</i>, <i>row</i>)</b>
    <div class="docstring">
    <p>Translate the column keys of a row into a new or proxied
row that can be understood by another mapper.</p>
<p>This can be used in conjunction with populate_instance to
populate an instance using an alternate mapper.</p>

    </div>
    </div>


    

            <a href="#top">back to section top</a>
    </div>



    

    </div>





    <div class="bottomnav">
        
    <div class="prevnext">
            Up: <a href="docstrings.html">API Documentation</a>

               |   
            Previous: <a href="sqlalchemy_orm_interfaces.html">module sqlalchemy.orm.interfaces</a>

               |   
            Next: <a href="sqlalchemy_orm_properties.html">module sqlalchemy.orm.properties</a>
    </div>

    </div>








</body>
</html>






