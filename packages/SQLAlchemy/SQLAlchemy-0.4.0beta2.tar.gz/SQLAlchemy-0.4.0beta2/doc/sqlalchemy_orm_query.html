<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>SQLAlchemy 0.4 Documentation - module sqlalchemy.orm.query</title>
	
    
    <link rel="stylesheet" href="style.css"></link>
    <link rel="stylesheet" href="docs.css"></link>
    <link href="syntaxhighlight.css" rel="stylesheet" type="text/css"></link>
    <script src="scripts.js"></script>

    <link rel="stylesheet" href="docutil.css"></link>



</head>
<body>








<div id="topanchor"><a name="top">&nbsp;</a></div>


<h1>SQLAlchemy 0.4 Documentation</h1>

<div id="pagecontrol"><a href="index.html">Multiple Pages</a> | <a href="documentation.html">One Page</a></div>

<div class="versionheader">Version: 0.4   Last Updated: 08/14/07 11:13:06</div>












    <div class="topnav">

    
    <div class="navbanner">
        <a href="index.html">Table of Contents</a>
        
    <div class="prevnext">
            Up: <a href="docstrings.html">API Documentation</a>

               |   
            Previous: <a href="sqlalchemy_orm_properties.html">module sqlalchemy.orm.properties</a>

               |   
            Next: <a href="sqlalchemy_orm_session.html">module sqlalchemy.orm.session</a>
    </div>

        <h2>module sqlalchemy.orm.query</h2>
    </div>

	
	
    <ul>
        
        <li><a style="" href="sqlalchemy_orm_query.html#docstrings_sqlalchemy.orm.query_Query">class Query(object)</a></li>
        
    </ul>

	</div>



    

    
    
    <A name="docstrings_sqlalchemy.orm.query"></a>
    
    <div class="sectionL2">

    <h3>module sqlalchemy.orm.query</h3>
    
    
    


            
    

    
    
    <A name="docstrings_sqlalchemy.orm.query_Query"></a>
    
    <div class="sectionL3">

    <h3>class Query(object)</h3>
    
    
    <div class="darkcell"><p>Encapsulates the object-fetching operations provided by Mappers.</p>
</div>
    

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def __init__(<i>self</i>, <i>class_or_mapper</i>, <i>session=None</i>, <i>entity_name=None</i>)</b>
    <div class="docstring">
    <p>Construct a new <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def add_column(<i>self</i>, <i>column</i>, <i>id=None</i>)</b>
    <div class="docstring">
    <p>add a SQL ColumnElement to the list of result columns to be returned.</p>
<p>This will have the effect of all result-returning methods returning a tuple
of results, the first element being an instance of the primary class for this
Query, and subsequent elements matching columns or entities which were
specified via add_column or add_entity.</p>
<p>When adding columns to the result, its generally desireable to add
limiting criterion to the query which can associate the primary entity
of this Query along with the additional columns, if the column is based on a
table or selectable that is not the primary mapped selectable.  The Query selects
from all tables with no joining criterion by default.</p>
<blockquote>
<dl class="docutils">
<dt>column</dt>
<dd>a string column name or sql.ColumnElement to be added to the results.</dd>
</dl>
</blockquote>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def add_entity(<i>self</i>, <i>entity</i>, <i>alias=None</i>, <i>id=None</i>)</b>
    <div class="docstring">
    <p>add a mapped entity to the list of result columns to be returned.</p>
<p>This will have the effect of all result-returning methods returning a tuple
of results, the first element being an instance of the primary class for this
Query, and subsequent elements matching columns or entities which were
specified via add_column or add_entity.</p>
<p>When adding entities to the result, its generally desireable to add
limiting criterion to the query which can associate the primary entity
of this Query along with the additional entities.  The Query selects
from all tables with no joining criterion by default.</p>
<blockquote>
<dl class="docutils">
<dt>entity</dt>
<dd>a class or mapper which will be added to the results.</dd>
<dt>alias</dt>
<dd>a sqlalchemy.sql.Alias object which will be used to select rows.  this
will match the usage of the given Alias in filter(), order_by(), etc. expressions</dd>
<dt>id</dt>
<dd>a string ID matching that given to query.join() or query.outerjoin(); rows will be
selected from the aliased join created via those methods.</dd>
</dl>
</blockquote>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def all(<i>self</i>)</b>
    <div class="docstring">
    <p>Return the results represented by this <tt class="docutils literal"><span class="pre">Query</span></tt> as a list.</p>
<p>This results in an execution of the underlying query.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def apply_avg(<i>self</i>, <i>col</i>)</b>
    <div class="docstring">
    <p>apply the SQL <tt class="docutils literal"><span class="pre">avg()</span></tt> function against the given column to the
query and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def apply_max(<i>self</i>, <i>col</i>)</b>
    <div class="docstring">
    <p>apply the SQL <tt class="docutils literal"><span class="pre">max()</span></tt> function against the given column to the
query and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def apply_min(<i>self</i>, <i>col</i>)</b>
    <div class="docstring">
    <p>apply the SQL <tt class="docutils literal"><span class="pre">min()</span></tt> function against the given column to the
query and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def apply_sum(<i>self</i>, <i>col</i>)</b>
    <div class="docstring">
    <p>apply the SQL <tt class="docutils literal"><span class="pre">sum()</span></tt> function against the given column to the
query and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def autoflush(<i>self</i>, <i>setting</i>)</b>
    <div class="docstring">
    
    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def avg(<i>self</i>, <i>col</i>)</b>
    <div class="docstring">
    <p>Execute the SQL <tt class="docutils literal"><span class="pre">avg()</span></tt> function against the given column.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def compile(<i>self</i>)</b>
    <div class="docstring">
    <p>compiles and returns a SQL statement based on the criterion and conditions within this Query.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def count(<i>self</i>, <i>whereclause=None</i>, <i>params=None</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>Apply this query's criterion to a SELECT COUNT statement.</p>
<p>the whereclause, params and **kwargs arguments are deprecated.  use filter()
and other generative methods to establish modifiers.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def count_by(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use query.filter_by(**params).count()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def distinct(<i>self</i>)</b>
    <div class="docstring">
    <p>Apply a <tt class="docutils literal"><span class="pre">DISTINCT</span></tt> to the query and return the newly resulting
<tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def execute(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use query.from_statement().all()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def filter(<i>self</i>, <i>criterion</i>)</b>
    <div class="docstring">
    <p>apply the given filtering criterion to the query and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt></p>
<p>the criterion is any sql.ClauseElement applicable to the WHERE clause of a select.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def filter_by(<i>self</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>apply the given filtering criterion to the query and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def first(<i>self</i>)</b>
    <div class="docstring">
    <p>Return the first result of this <tt class="docutils literal"><span class="pre">Query</span></tt> or None if the result doesn't contain any row.</p>
<p>This results in an execution of the underlying query.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def from_statement(<i>self</i>, <i>statement</i>)</b>
    <div class="docstring">
    
    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def get(<i>self</i>, <i>ident</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>Return an instance of the object based on the given
identifier, or None if not found.</p>
<p>The <cite>ident</cite> argument is a scalar or tuple of primary key
column values in the order of the table def's primary key
columns.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def get_by(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use query.filter_by(**params).first()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def group_by(<i>self</i>, <i>criterion</i>)</b>
    <div class="docstring">
    <p>apply one or more GROUP BY criterion to the query and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt></p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def instances(<i>self</i>, <i>cursor</i>, <i>*mappers_or_columns</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>Return a list of mapped instances corresponding to the rows
in a given <em>cursor</em> (i.e. <tt class="docutils literal"><span class="pre">ResultProxy</span></tt>).</p>
<p>The *mappers_or_columns and **kwargs arguments are deprecated.
To add instances or columns to the results, use add_entity()
and add_column().</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def join(<i>self</i>, <i>prop</i>, <i>id=None</i>, <i>aliased=False</i>, <i>from_joinpoint=False</i>)</b>
    <div class="docstring">
    <p>create a join of this <tt class="docutils literal"><span class="pre">Query</span></tt> object's criterion
to a relationship and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>
<p>'prop' may be a string property name or a list of string
property names.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def join_by(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED. use join() to construct joins based on attribute names.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def join_to(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED. use join() to create joins based on property names.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def join_via(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED. use join() to create joins based on property names.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def limit(<i>self</i>, <i>limit</i>)</b>
    <div class="docstring">
    <p>Apply a <tt class="docutils literal"><span class="pre">LIMIT</span></tt> to the query and return the newly resulting
<tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def list(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use all()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def load(<i>self</i>, <i>ident</i>, <i>raiseerr=True</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>Return an instance of the object based on the given
identifier.</p>
<p>If not found, raises an exception.  The method will <strong>remove
all pending changes</strong> to the object already existing in the
Session.  The <cite>ident</cite> argument is a scalar or tuple of primary
key column values in the order of the table def's primary key
columns.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def max(<i>self</i>, <i>col</i>)</b>
    <div class="docstring">
    <p>Execute the SQL <tt class="docutils literal"><span class="pre">max()</span></tt> function against the given column.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def min(<i>self</i>, <i>col</i>)</b>
    <div class="docstring">
    <p>Execute the SQL <tt class="docutils literal"><span class="pre">min()</span></tt> function against the given column.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def offset(<i>self</i>, <i>offset</i>)</b>
    <div class="docstring">
    <p>Apply an <tt class="docutils literal"><span class="pre">OFFSET</span></tt> to the query and return the newly resulting
<tt class="docutils literal"><span class="pre">Query</span></tt>.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def one(<i>self</i>)</b>
    <div class="docstring">
    <p>Return the first result of this <tt class="docutils literal"><span class="pre">Query</span></tt>, raising an exception if more than one row exists.</p>
<p>This results in an execution of the underlying query.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def options(<i>self</i>, <i>*args</i>)</b>
    <div class="docstring">
    <p>Return a new Query object, applying the given list of
MapperOptions.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def order_by(<i>self</i>, <i>criterion</i>)</b>
    <div class="docstring">
    <p>apply one or more ORDER BY criterion to the query and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt></p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def outerjoin(<i>self</i>, <i>prop</i>, <i>id=None</i>, <i>aliased=False</i>, <i>from_joinpoint=False</i>)</b>
    <div class="docstring">
    <p>create a left outer join of this <tt class="docutils literal"><span class="pre">Query</span></tt> object's criterion
to a relationship and return the newly resulting <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>
<p>'prop' may be a string property name or a list of string
property names.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def params(<i>self</i>, <i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>add values for bind parameters which may have been specified in filter().</p>
<p>parameters may be specified using **kwargs, or optionally a single dictionary
as the first positional argument.  The reason for both is that **kwargs is
convenient, however some parameter dictionaries contain unicode keys in which case
**kwargs cannot be used.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def populate_existing(<i>self</i>)</b>
    <div class="docstring">
    <p>return a Query that will refresh all instances loaded.</p>
<p>this includes all entities accessed from the database, including
secondary entities, eagerly-loaded collection items.</p>
<p>All changes present on entities which are already present in the session will
be reset and the entities will all be marked &quot;clean&quot;.</p>
<p>This is essentially the en-masse version of load().</p>

    </div>
    </div>

                    
         <div class="darkcell">
         <A name=""></a>
         <b>primary_key_columns = property()</b>
         <div class="docstring">
         
         </div> 
         </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def query_from_parent(<i>cls</i>, <i>instance</i>, <i>property</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>return a newly constructed Query object, with criterion corresponding to
a relationship to the given parent instance.</p>
<blockquote>
<dl class="docutils">
<dt>instance</dt>
<dd>a persistent or detached instance which is related to class represented
by this query.</dd>
<dt>property</dt>
<dd>string name of the property which relates this query's class to the
instance.</dd>
<dt>**kwargs</dt>
<dd>all extra keyword arguments are propigated to the constructor of
Query.</dd>
</dl>
</blockquote>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def reset_joinpoint(<i>self</i>)</b>
    <div class="docstring">
    <p>return a new Query reset the 'joinpoint' of this Query reset
back to the starting mapper.  Subsequent generative calls will
be constructed from the new joinpoint.</p>
<p>Note that each call to join() or outerjoin() also starts from
the root.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def scalar(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use first()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def select(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use query.filter(whereclause).all(), or query.from_statement(statement).all()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def select_by(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED. use use query.filter_by(**params).all().</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def select_from(<i>self</i>, <i>from_obj</i>)</b>
    <div class="docstring">
    <p>Set the <cite>from_obj</cite> parameter of the query and return the newly
resulting <tt class="docutils literal"><span class="pre">Query</span></tt>.</p>
<p><cite>from_obj</cite> is a list of one or more tables.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def select_statement(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  Use query.from_statement(statement)</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def select_text(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  Use query.from_statement(statement)</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def select_whereclause(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use query.filter(whereclause).all()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def selectfirst(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use query.filter(whereclause).first()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def selectfirst_by(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED. Use query.filter_by(**kwargs).first()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def selectone(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED.  use query.filter(whereclause).one()</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def selectone_by(<i>*args</i>, <i>**kwargs</i>)</b>
    <div class="docstring">
    <p>DEPRECATED. Use query.filter_by(**kwargs).one()</p>

    </div>
    </div>

                    
         <div class="darkcell">
         <A name=""></a>
         <b>session = property()</b>
         <div class="docstring">
         
         </div> 
         </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def sum(<i>self</i>, <i>col</i>)</b>
    <div class="docstring">
    <p>Execute the SQL <tt class="docutils literal"><span class="pre">sum()</span></tt> function against the given column.</p>

    </div>
    </div>

                    
         <div class="darkcell">
         <A name=""></a>
         <b>table = property()</b>
         <div class="docstring">
         
         </div> 
         </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def with_lockmode(<i>self</i>, <i>mode</i>)</b>
    <div class="docstring">
    <p>Return a new Query object with the specified locking mode.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def with_parent(<i>self</i>, <i>instance</i>, <i>property=None</i>)</b>
    <div class="docstring">
    <p>add a join criterion corresponding to a relationship to the given parent instance.</p>
<blockquote>
<dl class="docutils">
<dt>instance</dt>
<dd>a persistent or detached instance which is related to class represented
by this query.</dd>
<dt>property</dt>
<dd>string name of the property which relates this query's class to the
instance.  if None, the method will attempt to find a suitable property.</dd>
</dl>
</blockquote>
<p>currently, this method only works with immediate parent relationships, but in the
future may be enhanced to work across a chain of parent mappers.</p>

    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def __getitem__(<i>self</i>, <i>item</i>)</b>
    <div class="docstring">
    
    </div>
    </div>

                    
    <div class="darkcell">
    
    <A name=""></a>
    <b>def __iter__(<i>self</i>)</b>
    <div class="docstring">
    
    </div>
    </div>


    

            <a href="#top">back to section top</a>
    </div>



    

    </div>





    <div class="bottomnav">
        
    <div class="prevnext">
            Up: <a href="docstrings.html">API Documentation</a>

               |   
            Previous: <a href="sqlalchemy_orm_properties.html">module sqlalchemy.orm.properties</a>

               |   
            Next: <a href="sqlalchemy_orm_session.html">module sqlalchemy.orm.session</a>
    </div>

    </div>








</body>
</html>






