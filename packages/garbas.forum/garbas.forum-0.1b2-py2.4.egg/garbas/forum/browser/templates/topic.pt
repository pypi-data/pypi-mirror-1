<div id="forum-posts">

    <ul class="forum-actions">
        <li tal:condition="view/is_manager">
            <div id="forum-posts-settings">
                <form method="get" 
                      action="folder_contents">
                    <input class="context"
                           value="Forum settings" 
                           type="submit"
                           i18n:attributes="value forum_settings"/>
                </form>
            </div>
        </li>
        <li tal:condition="view/has_permissions_to_addposts">
            <div id="forum-posts-reply">
                <form method="get" 
                      action="@@add_post">
                    <input class="context"
                           value="Post Reply" 
                           type="submit"
                           i18n:attributes="value add_post"/>
                </form>
            </div>
        </li>
    </ul>

    <div class="forum-content"
         tal:define="batch view/posts">

        <div class="forum-posts-batch"
             tal:condition="python: batch.next or  batch.previous">
            <div metal:use-macro="here/batch_macros/macros/navigation" />
        </div>

        <table class="listing"
               summary="Topics listing">

            <tal:items repeat="item batch">
                <tr tal:define="oddrow repeat/item/odd;"
                    tal:attributes="class python:oddrow and 'odd' or 'even'">
                    <td class="listing_col1_context" valign="top">
                        <a href=""
                           tal:attributes="href item/author_url;
                                           name item/UID;">
                            <img src=""
                                 alt=""
                                 class="portraitPhoto"
                                 width="75"
                                 style="float: left; margin: 1em;"
                                 tal:attributes="src item/portrait_url" />
                        </a>
                    </td>
                    <td class="listing_col2_context" valign="top">
                        <h2 tal:content="item/title">
                            Post title
                        </h2>
                        <p class="documentByLine">
                            <span i18n:translate="by">by</span>
                            <a href="#"
                               tal:attributes="href item/author_url;
                                               class string:author"
                               tal:content="item/author">Author</a>
                            <span class="details">
                                <span i18n:translate="on">on</span> 
                                <span tal:content="python:context.toLocalizedTime(item['created'], long_format=1)" />
                            </span>
                        </p>
                        <div class="listing_post_context"
                             tal:content="structure item/text">
                        </div>
                    </td>
                </tr>
            </tal:items>
        </table>

        <div class="forum-posts-batch"
             tal:condition="python: batch.next or  batch.previous">
            <div metal:use-macro="here/batch_macros/macros/navigation" />
        </div>

    </div>
    
    <ul class="forum-actions">
        <li tal:condition="view/is_manager">
            <div id="forum-posts-settings">
                <form method="get" 
                      action="folder_contents">
                    <input class="context"
                           value="Forum settings" 
                           type="submit"
                           i18n:attributes="value forum_settings"/>
                </form>
            </div>
        </li>
        <li tal:condition="view/has_permissions_to_addposts">
            <div id="forum-posts-reply">
                <form method="get" 
                      action="@@add_post">
                    <input class="context"
                           value="Post Reply" 
                           type="submit"
                           i18n:attributes="value add_post"/>
                </form>
            </div>
        </li>
    </ul>

</div>
