<div id="forum-posts">

    <ul class="forum-actions">
        <li tal:condition="view/has_permissions_to_addposts">
            <div id="forum-posts-reply">
                <form method="get" action="@@add_post">
                    <input class="context"
                           value="Post Reply" 
                           type="submit"
                           i18n:attributes="value add_post"/>
                </form>
            </div>
        </li>
        <li tal:condition="not: view/is_subscribed">
            <div id="forum-posts-subscribe">
                <form method="get" action="">
                    <input type="hidden" name="subscribe" value="1" />
                    <input class="context"
                           value="Subscribe" 
                           type="submit"
                           i18n:attributes="value subscribe"/>
                </form>
            </div>
        </li>
        <li tal:condition="view/is_subscribed">
            <div id="forum-posts-unsubscribe">
                <form method="get" action="">
                    <input type="hidden" name="unsubscribe" value="1" />
                    <input class="context"
                           value="Unsubscribe" 
                           type="submit"
                           i18n:attributes="value unsubscribe"/>
                </form>
            </div>
        </li>
    </ul>

    <div class="forum-content"
         tal:define="batch view/posts">

        <div class="forum-posts-batch"
             tal:condition="python: batch.next or  batch.previous">
            <div metal:use-macro="here/batch_macros/macros/navigation" />
        </div>

        <table class="listing"
               summary="Topics listing">

            <tal:items repeat="item batch">
                <tr tal:define="oddrow repeat/item/odd;"
                    tal:attributes="class python:oddrow and 'odd' or 'even'">
                    <td class="listing_col1_context" valign="top">
                        <a href=""
                           tal:attributes="href string:${view/site_url}/author/${item/author};
                                           name item/UID;">
                            <img src=""
                                 alt=""
                                 class="portraitPhoto"
                                 width="75"
                                 style="float: left; margin: 1em;"
                                 tal:attributes="src item/portrait_url" />
                        </a>
                    </td>
                    <td class="listing_col2_context" valign="top">
                        <h2 tal:content="item/title">
                            Post title
                        </h2>
                        <p class="documentByLine">
                            <span i18n:translate="by">by</span>
                            <a href="#"
                               tal:attributes="href string:${view/site_url}/author/${item/author};
                                               class string:author"
                               tal:content="item/author">Author</a>
                            <span class="details">
                                <span i18n:translate="on">on</span> 
                                <span tal:content="python:context.toLocalizedTime(item['created'], long_format=1)" />
                            </span>
                        </p>
                        <div class="listing_post_context"
                             tal:content="structure item/text">
                        </div>
                    </td>
                </tr>
            </tal:items>
        </table>

        <ul class="forum-actions">
            <li tal:condition="view/has_permissions_to_addposts">
                <div id="forum-posts-reply">
                    <form method="get" action="@@add_post">
                        <input class="context"
                               value="Post Reply" 
                               type="submit"
                               i18n:attributes="value add_post"/>
                    </form>
                </div>
            </li>
            <li tal:condition="not: view/is_subscribed">
                <div id="forum-posts-subscribe">
                    <form method="get" action="?subscribe=1">
                        <input class="context"
                               value="Subscribe" 
                               type="submit"
                               i18n:attributes="value subscribe"/>
                    </form>
                </div>
            </li>
            <li tal:condition="view/is_subscribed">
                <div id="forum-posts-unsubscribe">
                    <form method="get" action="?unsubscribe=1">
                        <input class="context"
                               value="Unsubscribe" 
                               type="submit"
                               i18n:attributes="value unsubscribe"/>
                    </form>
                </div>
            </li>
        </ul>

        <div class="forum-posts-batch"
             tal:condition="python: batch.next or  batch.previous">
            <div metal:use-macro="here/batch_macros/macros/navigation" />
        </div>

    </div>
    
</div>
