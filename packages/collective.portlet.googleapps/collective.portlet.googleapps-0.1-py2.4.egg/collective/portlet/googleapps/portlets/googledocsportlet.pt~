<dl class="portlet portletGoogleAppsPortlet portletGoogleDocsPortlet"
    i18n:domain="collective.portlet.googleapps.portlets">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <a class="link-plain" tal:attributes="href view/google_url; target python:(view.data.new_window and '_blank') or None;" tal:condition="view/data/show_more">
            <span tal:content="view/data/header" />
        </a>
        
        <span tal:content="view/data/header" tal:condition="not:view/data/show_more"/>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd">
      <tal:googledocs tal:define="docs view/results">
       <tal:docspresent tal:condition="python:docs != None">
        <table class="grid listing">
            <thead>
              <tr>
               <th tal:condition="view/data/show_icons"><div class="gd-icon gd-icon-generic"> </div></th>
               <th tal:condition="view/data/show_stars"><div class="gd-icon gd-icon-starred"> </div></th>
               <th>Name</th>
              </tr>
            </thead>
            <tbody>
            <tal:googleapps tal:repeat="doc docs/entry">
              <tr tal:define="oddrow repeat/doc/odd" tal:attributes="class python:(oddrow and 'odd') or 'even';">
                  <td class="gd-icon-cell" tal:condition="view/data/show_icons">
                     <div tal:attributes="class python:'gd-icon gd-icon-'+doc.GetDocumentType(); title python:doc.GetDocumentType().title();" tal:content="python:doc.GetDocumentType().title()[0]"> </div>
                  </td>
                  <td class="gd-icon-cell" tal:condition="view/data/show_stars">
                     <div tal:condition="python:view.isStarred(doc)" class="gd-icon gd-icon-starred" title="Starred"> </div>
                  </td>
                  <td>
                     <a class="gd-doc-link" tal:attributes="
                         title python:'Last edited by '+(doc.lastModifiedBy != None and doc.lastModifiedBy.email.text or 'noone');
                         href python:(view.data.secure_links and doc.GetHtmlLink().href.replace('http:', 'https:')) or doc.GetHtmlLink().href; 
                         target python:(view.data.new_window and '_blank') or None;"
                        tal:content="doc/title/text">
                         Title
                     </a>
                     <tal:showdates tal:condition="view/data/show_dates">
                     <div class="portletItemDetails"
                            tal:content="python:context.toLocalizedTime(doc.updated.text)">May 5</div>
                     </tal:showdates>
                  </td>
             </tr>
            </tal:googleapps>
            <tr tal:condition="python:len(docs.entry) == 0">
              <td>
                  You have no Google Docs available to you.
              </td>
            </tr>
            </tbody>
       </table>
       </tal:docspresent>
      <div tal:condition="python: docs == None and 'googleauth_portlets' not in request.cookies" tal:replace="structure view/not_logged_in">
      </div>

     </tal:googledocs>
    </dd>
 
    <dd class="portletFooter" tal:condition="view/data/show_more">
        <span class="portletBottomLeft"></span>
        <span>
        <tal:notauthed tal:condition="python: 'googleauth_portlets' in request.cookies">
        <a id="gd-new-content-link" href="#" i18n:translate="new_doc">
             New <div class="gd-icon gd-icon-dropdown"> </div>
        </a>
	<div id="gd-new-content-menu" class="googleapps-menu">
		<table>
		  <tbody>
                   <tr>
	  	     <td><div class="gd-icon gd-icon-document"> </div></td>
 		     <td><a class="link-plain" href="#" tal:attributes="href python:view.google_url('docs.google.com', 'DocAction?action=newdoc'); target python:(view.data.new_window and '_blank') or None;" title="New Google Document" >Document</a></td>
 		   </tr>
                   <tr>
 		    <td><div class="gd-icon gd-icon-form"> </div></td>
                    <td><a class="link-plain" href="#" tal:attributes="href python:view.google_url('spreadsheets.google.com', 'newform'); target python:(view.data.new_window and '_blank') or None;" title="New Google Form" >Form</a></td>
		   </tr>
		   <tr>
  		    <td><div class="gd-icon gd-icon-presentation"> </div></td>
                    <td><a class="link-plain" href="#" tal:attributes="href python:view.google_url('docs.google.com', 'DocAction?action=new_presentation'); target python:(view.data.new_window and '_blank') or None;" title="New Google Presentation" >Presentation</a></td>
                   </tr>
                   <tr>
	  	    <td><div class="gd-icon gd-icon-spreadsheet"> </div></td>
                    <td><a class="link-plain" href="#" tal:attributes="href python:view.google_url('spreadsheets.google.com', 'ccc?new'); target python:(view.data.new_window and '_blank') or None;" title="New Google Spreadsheet" >Spreadsheet</a></td>
		   </tr>
		  </tbody>
		</table>
	</div>
        </tal:notauthed>
        <a class="link-plain" tal:attributes="href view/google_url; target python:(view.data.new_window and '_blank') or None;" i18n:translate="more_url">
             More Â»
        </a>
        </span>
        <span class="portletBottomRight"></span>
    </dd>
</dl>
