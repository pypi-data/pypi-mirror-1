<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="/img/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
<!--title--><title>
TheMingServer Manual
</title>

</head>

<body>
<div id="container">

<hr />

<div id="content">

<!--content-->

<h4>The Ming Server
</h4><p>
The Ming Server generates web pages statically or dynamically.  As a local
executable, it generates a static site from a directory tree of simple
text files.  Installed in cgi-bin, it creates those same pages on demand
from the same source files, in response to browser requests.  Parsing of
different source types and the writing of pages are separated, making it
easy to extend The Ming Server to new data types or delivery methods.
<p>
This document describes both usages: static and 
<a href="#dynamic">dynamic.</a> <p>
<center><table width=90%><tr><td>
<hr>
<p>
<h4>STATIC USAGE
</h4><blockquote>
    ming.cgi
	--debug
	--force
    local/src/dir
	local/dest/dir
</blockquote>
<p>
<h4>DESCRIPTION
</h4><p>
The first time ming.cgi is run, it creates the entire site and writes a
time-stamp. Subsequent runs only update files newer than the stamp.  See
force option.
<p>
In order to run ming.cgi, you will need:
<ul>
<li>The Ming Server installed as described in the INSTALL file; and
<li>local/src/dir tree ready with its source files (see below).
</ul>
<p>
The site.html plate (see data/site.html in the distribution) uses HTML
comment and comment-end tags in column 0 to determine where data goes.
The tags "content", "title", and "menu" are automatically generated but
need not be in the plate.  The Ming Server will use any comment tags in the data
and plate.  The "content" tag is used extensively as a default. Only
"title" does not have an end tag and the formatting of its use as title
element cannot be changed.  This has to do with how browsers parse
titles.
<p>
<h4>COMMAND-LINE OPTIONS
</h4><p>
<dl>
<dt>--debug
<dd>
Prints a verbose output for developer analysis.  Note that ming.cgi normally
exits with an exception in debug mode because ming.cgi normally ignores
what does not matter to it, such as unused directories, etc.
<dt>--force
<dd>
Forces creation of entire site regardless of file modification times.
</dl>
<p>
<p>
<h4>EXAMPLES
</h4><p>
Source Files
<p>
The following are expected.  Anything else is ignored.
Examples are in the distribution's user/data dir tree.
<p>
<ul>
<li>key file
<li>data files
<li>site.html
</ul>
<p>
key file
Key files take the following form, beginning with the first line
of the file.
<p>
<pre>
file name (no extension)
page title
(optional descriptive line)
(blank line)
file name (no extension)
page title
(optional descriptive line)
(blank line)
.
.
.
.
file name (no extension)
page title
(optional descriptive line)
(blank line)
</pre>
<p>
The order of the files in key determine the ordering of the
menu, the file used as directory index (first file in key),
the page titles, and the text of a "desc" comment tag.
<p>
<h4>data file
</h4><p>
These have the type on the first line and all following lines are
treated as data.  The following types are available:
<p>
<blockquote>
<h4>html
</h4><p>
Data is treated as pure HTML.  You can break the data into pieces
for comment tags by separating the pieces with comment tags.
If no comment tags are found, all data is marked as "content"
<p>
<h4>plain
</h4><p>
The entire data chunk is marked as "content" and dropped in as-is.
<p>
<h4>pre
</h4><p>
The entire data chunk is marked as "content" and inserted
between HTML pre-tags.
<p>
<h4>3tml
</h4><p>
Data is first parsed for a simple markup language and then
treated as html above.  The language is line based, parsing
line by line and expecting markup in column 0.  The markup is:
<p>
<pre>
 !text - produces an h3 element with text
 @url some words - produces a link to url with "some words" as visible link
 | - by itself on a line, starts and stops blockquotes
 + - by itself on a line, starts and stops unordered lists (no nesting)
 \text - forces a line break before text
 [blank line] - a blank line forces a paragraph tag
</pre>
</blockquote>
<p>
All types are exampled in the user/data tree.
<p>
site.html
<p>
The boiler plate for the site is simply an HTML file in the
top of the source tree.  There is an example site.html in 
the user/data tree.
<p>
<h4>NOTES
</h4><p>
<ul>
<li>Architecture is object-based and simple.
<li>Data is parsed by parsers, built into pages by makers, written out by writers.
<li>A new parser would go in TheMingServer/parsers, entered in the parser subpackage __init__.py, 
<li>and entered in PageMaker.PARSERS.
</ul>
<p>
<p>
<h4>RETURN VALUES
</h4><p>
0 good, 1 bad.
<p>
<hr>
<p>
<p>
<a name="dynamic">
<h4>DYNAMIC USAGE </a>
</h4>If you request this URL,
<blockquote>
http://your.dot.com/cgi-bin/ming.cgi?page=path/to/page
</blockquote>
The Ming Server will generate page at self.DATA/path/to/page
<p>
<p>
<h4>CGI INSTALLATION
</h4><p>
The same python and data files used for static generation can be used
to create a dynamically-generated web site.  You will need a site with
access to Python in the cgi-bin.
<p>
These simple steps should get you up and running:
<p>
<ul>
<li>Put the executable "ming.cgi" in cgi-bin and give it world read-write-execute perms (unix 755)
<li>Put the "TheMingServer" directory with the other Python scripts in cgi-bin, i.e.<br> <blockquote> site/cgi-bin/TheMingServer </blockquote> and make sure they are world-readable (unix 644).  They should already be -- but check.
<li>Put the example "data" directory at the same level as cgi-bin and make all world-readable.
<li>Take the "refresh.index.page", put your URL in there everywhere mine occurs, and install as your new "index.html" in your "htdocs" or "public_html" or whatever-it's-called directory.
</ul>
<p>
<h4>WEB LOG
</h4><p>
The Ming Server can keep its own log of page requests.  Logging is done by the
Logger and controlled by PageMaker.  The following USER CONSTS should be
set in Consts.py:
<p>
<p>
<dl>
<dt>LOGGING
<dd>1 turns it on - 0 turns it off
<dt>DIR
<dd>Directory where "ming.log" lives.  
This must be placed where the CGI can write files.
DIR = "." puts it in your cgi-bin.
<dt>DEMO
<dd>1 makes log public - 0 requires password
<dt>PASSWD
<dd>Used in the calls to view log
</dl>
<p>
You can then make the following calls to the log:
<blockquote>
http://your.dot.com/cgi-bin/ming.cgi?log=log
</blockquote>
Web log With Logger.DEMO set to 1.  Web log is public
<blockquote>
http://your.dot.com/cgi-bin/ming.cgi?log=log&amp;view=passwd
</blockquote>
Web log displayed privately.  PASSWD set in Logger.
<blockquote>
http://your.dot.com/cgi-bin/ming.cgi?remove=passwd&amp;item=title
</blockquote>
Web log is a Python dictionary and dict[title] will be removed.
<p>
<p>
<h4>NOTES
</h4><p>
<ul>
<li>Add the param "debug=1" to the request and you will initialize Python's cgitb for debugging.
<li>The Ming Server can execute Python scripts and use the output of the script as the content of your page. 
<br>See Python Data Type page.
<li>The Ming Server can receive and record incoming data from forms which are then handled by your Python pages.
<br>See Incoming Form Data Handler page.
</ul>
<p>
<p>
<hr>

<!--content end-->

</div>			   




       

</div>            

</body>

</html>
