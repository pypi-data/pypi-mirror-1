{% extends "layout/navigation.html" %}
{* vim: set et ai ts=2 sw=2 enc=utf-8: *}

{% block "title" %}{% trans "Search" %}{% endblock %}

{% block "trace" %}
  &raquo; <a href="{{ PAGES.xapiansearch.url }}">{% trans "Search" %}</a>
{% endblock %}

{% block "content" %}
  <div class="search">
    <h2>{% trans "Search results for" %} &quot;{{ query }}&quot;</h2>

    <table class="threadlist">
    <tr>
      <th>{% trans "Threads" %}</th>
      <th class="count">{% trans "Posts/Views" %}</th>
      <th class="last">{% trans "Last Post" %}</th>
    </tr>
    {% for thread in threads %}
      {% cycle cls through "row1", "row2" %}
      <tr class="row {{ cls }}">
        <td class="thread">
          <a href="{{ thread.url }}">{{ thread.title|e }}</a>
          {% trans "by" %}
          {% if thread.author.registered %}
            <a href="{{ thread.author.url }}">{{ thread.author.username|e }}</a>
          {% else %}
            {{ thread.author.username|e }}
          {% endif %}
        </td>
        <td class="count">
          {{ thread.post_count }}/{{ thread.view_count }}
        </td>
        <td class="last">
          {% trans "by" %}
          {% if thread.last_post.author.registered %}
            <a href="{{ thread.last_post.author.url }}">{{ thread.last_post.author.username|e }}</a>
          {% else %}
            {{ thread.last_post.author.username|e }}
          {% endif %}
          (<a href="{{ thread.last_post.url }}">{{ thread.last_post.timestamp|timedeltaformat }}</a>)
        </td>
      </tr>
    {% elsefor %}
      <tr class="empty">
        <td colspan="3">{% trans "No threads found" %}</td>
      </tr>
    {% endfor %}
  </table>
  </div>
{% endblock %}
