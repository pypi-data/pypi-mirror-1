{% extends "layout/navigation.html" %}
{% block "html/head" %}
  <script type="text/javascript" src="{{ COBALT }}/core/pocoo/app/NewPostPage.js"></script>
  <script type="text/javascript" src="{{ editor_javascript }}"></script>
  <script type="text/javascript">
    var editor_options = {{ editor_options|e }};
  </script>
{% endblock %}

{% block "title" %}{% trans "New Thread" %}{% endblock %}

{% block "trace" %}
  &raquo;
  {% for item in pathbar %}
    <a href="{{ item.url }}">{{ item.name|e }}</a> &raquo;
  {% endfor %}
  {% trans "New Thread" %}
{% endblock %}

{% block "bodytag" %} onload="initEditor('text', 'toolbar', 'preview', 'prev_text', editor_options)"{% endblock %}
{% block "content" %}

{% if CFG.messages.newpostnotice %}
  <div class="dialog">
    <h2>Notice</h2>
    <div class="text">
      {{ CFG.messages.newpostnotice|e }}
    </div>
  </div>
{% endif %}

<form action="{{ form.action }}" method="{{ form.method }}">
  <div class="editor">
    <h1>
      {% trans "Create new thread" %}
    </h1>
    <div class="text">
      {% if show_username_entry %}
        {% trans "Username" %}:
        {{ form.username.html }}
        {{ form.username.errors }}<br />
      {% endif %}
      {% trans "Title" %}:
      {{ form.title.html }}
      {{ form.title.errors }}<br />
      <div id="toolbar"></div><br style="clear: both;" />
      {% trans "Text" %}:<br />
      <textarea class="full" name="{{ form.text.name }}" id="text">{{ form.text.value|e }}</textarea>
      {{ form.text.errors }}<br />
      <input type="submit" name="preview" value="{% trans "Preview" %}" onclick="return ajax(AJS.$b(AJS.$('tab{{ tabbox.indexes.preview }}').onclick, AJS.$('tab{{ tabbox.indexes.preview }}')))" />
      <input type="submit" name="submit" value="{% trans "Submit" %}" class="butt" />
    </div>
  </div>

  {{ tabbox.html }}

</form>
{% endblock %}
