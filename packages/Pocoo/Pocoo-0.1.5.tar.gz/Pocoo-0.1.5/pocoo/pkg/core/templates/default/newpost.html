{% extends "layout/navigation.html" %}
{% block "html/head" %}
  <script type="text/javascript" src="{{ COBALT }}/core/pocoo/app/NewPostPage.js"></script>
  <script type="text/javascript" src="{{ editor_javascript }}"></script>

  <script type="text/javascript">
    var editor_options = {{ editor_options|e }};
  </script>

  <!-- WYSIWYG Stuff

  <script type="text/javascript" src="{{ COBALT }}/core/pocoo/app/WYSIWYG.js"></script>

  <script type="text/javascript">
    var editor_options = {
        img_folder: "/!cobalt/core/default/img/bbcode/",
        codes: [
            {t: 1, name: 'Bold', img: 'bold.png', exec: 'Bold'},
            {t: 1, name: 'Italic', img: 'italic.png', exec: 'Italic'},
            {t: 1, name: 'Underline', img: 'underline.png', exec: 'Underline'},
            {t: 1, name: 'Image', img: 'img.png', exec: 'InsertImage'},
            {t: 2, name: 'Font size', options: [[8, 'Tiny'], [11, 'Small'], [13, 'Normal'], [18, 'Big'], [24, 'Huge']], exec: 'FontSize'}
        ]
    };
  </script> -->
{% endblock %}

{% block "title" %}{% trans "New Post" %}{% endblock %}

{% block "trace" %}
  &raquo;
  {% for item in pathbar %}
    <a href="{{ item.url }}">{{ item.name|e }}</a> &raquo;
  {% endfor %}
  {% trans "New Post" %}
{% endblock %}

{% block "bodytag" %} onload="initEditor('text', 'toolbar', 'preview', 'prev_text', editor_options); start_check({{ post_id }})"{% endblock %}
{* {% block "bodytag" %} onload="create_editor('text', 'toolbar', editor_options);"{% endblock %} *}
{% block "content" %}

{% if CFG.messages.newpostnotice %}
  <div class="dialog">
    <h2>Notice</h2>
    <div class="text">
      {{ CFG.messages.newpostnotice|e }}
    </div>
  </div>
{% endif %}
<form action="{{ form.action }}" method="{{ form.method }}">
  <div class="editor">
    <h1>
      {% if mode equals 'reply' %}{% trans "Reply to Post" %}{% endif %}
      {% if mode equals 'edit' %}{% trans "Edit Post" %}{% endif %}
    </h1>
    <div class="text">
      {% if show_username_entry %}
        {% trans "Username" %}:
        {{ form.username.html }}
        {{ form.username.errors }}<br />
      {% endif %}
      {% trans "Title" %}:
      {{ form.title.html }}
      {{ form.title.errors }}<br />
      <div id="toolbar"></div><br style="clear: both;" />
      {% trans "Text" %}:<br />
      <textarea class="full" name="{{ form.text.name }}" id="text">{{ form.text.value|e }}</textarea>
      {{ form.text.errors }}
      <input type="submit" name="preview" value="{% trans "Preview" %}"  onclick="return ajax(AJS.$b(AJS.$('tab{{ tabbox.indexes.preview }}').onclick, AJS.$('tab{{ tabbox.indexes.preview }}')))" />
      <input type="submit" value="{% trans "Submit" %}" class="butt" />
    </div>
  </div>

  {{ tabbox.html }}
</form>
{% endblock %}
