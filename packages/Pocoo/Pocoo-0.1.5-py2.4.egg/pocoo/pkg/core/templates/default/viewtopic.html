{% extends "layout/navigation.html" %}
{* vim: set et ai ts=2 sw=2 enc=utf-8: *}

{% block "html/head" %}
  <script type="text/javascript" src="{{ system.template.cobalt }}/core/pocoo/app/ViewTopic.js"></script>
  <link rel="alternate" href="{{ feed_url }}" type="application/rss+xml" />
{% endblock %}

{% block "bodytag" %} onload="jumpToActivePost('post-%d', {{ topic.posts.0.post_id }})"{% endblock %}

{% block "title" %}{% trans "View Topic" %} - {{ topic.title|e }}{% endblock %}

{% block "trace" %}
  {% for item in pathbar %}
    &raquo; <a href="{{ item.url }}">{{ item.name|e }}</a>
  {% endfor %}
{% endblock %}

{% block "content" %}
  <h1>{{ topic.title|e }}</h1>
  <div class="topicdescription">
    {% trans "Created by" %}
    {% if thread.author.registered %}
      <a href="{{ thread.author.url }}">{{ thread.author.username|e }}</a>
    {% else %}
      {{ thread.author.username|e }}
    {% endif %}
    {% trans "on" %}
    {{ thread.timestamp|datetimeformat }}
    ({{ thread.timestamp|timedeltaformat }})
  </div>

  {% define posts topic.posts %}
  <table class="topic">
    {% for post in posts %}
      <tr id="post-{{ post.post_id }}">
        {% include "partial/post.html" %}
      </tr>
    {% endfor %}
  </table>

  <div class="pagination">
    <strong>{% trans 'Go to Page' %}:</strong>&nbsp;&nbsp;
    {% paginate topic.pagination
         '<a href="%(url)s">%(page)s</a>',
         '<strong>%(page)s</strong>',
         ', ',
         '&nbsp;&nbsp;...&nbsp;&nbsp;'
    %}
  </div>

{% endblock %}
