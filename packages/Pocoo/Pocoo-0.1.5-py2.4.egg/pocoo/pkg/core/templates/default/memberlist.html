{% extends "layout/navigation.html" %}
{* vim: set et ai ts=2 sw=2 enc=utf-8: *}

{% block "title" %}{% trans "Memberlist" %}{% endblock %}

{% block "trace" %}
  &raquo; <a href="{{ links.memberlist }}">{% trans "Memberlist" %}</a>
{% endblock %}

{% block "content" %}

  {% prepare 'errorbox' accepting errors %}
    {% if errors %}
      <ul class="errors">
      {% for error in errors %}
        <li>{{ error|e }}</li>
      {% endfor %}
      </ul>
    {% endif %}
  {% endprepare %}

  <h2>{% trans "Memberlist" %}</h2>
  <div class="description">
    {% trans %}This is a list of all registered users.{% endtrans %}
  </div>
  <form action="{{ form.action }}" method="{{ form.method }}">
    <dl>
      <dt>{% trans "Order By" %}</dt>
      <dd><select name="{{ form.order_by.name }}">
      {% for item in form.order_by.values %}
        <option value="{{ item.value|e }}"{% if item.selected %} selected="selected" {% endif %}>{{ item.caption|e }}</option>
      {% endfor %}
      </select>{% call 'errorbox' form.order_by.errors %}</dd>
      <dt>{% trans "Direction" %}</dt>
      <dd><select name="{{ form.direction.name }}">
      {% for item in form.direction.values %}
        <option value="{{ item.value|e }}"{% if item.selected %} selected="selected" {% endif %}>{{ item.caption|e }}</option>
      {% endfor %}
      </select>{% call 'errorbox' form.direction.errors %}</dd>
      <dt>{% trans "Letter" %}</dt>
      <dd><input type="text" name="{{ form.letter.name|e }}" value="{{ form.letter.value|e }}" />
          {% call 'errorbox' form.letter.errors %}</dd>
    </dl>
    <input type="submit" value="{% trans 'Update' %}" />
  </form>

  <table class="memberlist">
    <tr>
      <th class="user_id">#</th>
      <th class="username">{% trans "User" %}</th>
      <th class="location">{% trans "Location" %}</th>
      <th class="post_count">{% trans "Posts" %}</th>
      <th class="register_date">{% trans "Registration Date" %}</th>
    </tr>
    {% for user in list %}
      <tr>
        <td class="user_id">{{ user.user_id }}</td>
        <td class="username"><a href="{{ user.url }}">{{ user.username|e }}</a></td>
        <td class="location">{{ user.profile.location|e }}</td>
        <td class="post_count">{{ user.post_count }}</td>
        <td class="register_date">{{ user.register_date|datetimeformat }}</td>
      </tr>
    {% elsefor %}
      <tr>
        <td colspan="5">{% trans "No results for this query" %}</td>
      </tr>
    {% endfor %}
  </table>

{% endblock %}
