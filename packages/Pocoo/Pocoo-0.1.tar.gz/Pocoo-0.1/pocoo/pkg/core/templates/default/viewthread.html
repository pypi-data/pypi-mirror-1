{% extends "layout/navigation.html" %}
{* vim: set et ai ts=2 sw=2 enc=utf-8: *}

{% block "title" %}{% trans "View Thread" %} - {{ thread.title|e }}{% endblock %}
{% block "html/head" %}
  <link rel="alternate" href="{{ feed_url }}" type="application/rss+xml" />
{% endblock %}

{% block "trace" %}
  {% for item in pathbar %}
    &raquo; <a href="{{ item.url }}">{{ item.name|e }}</a>
  {% endfor %}
{% endblock %}

{% block "content" %}
  <h1>{{ thread.title|e }}</h1>
  <div class="threaddescription">
    {% trans "Created by" %}
    {% if thread.author.registered %}
      <a href="{{ thread.author.url }}">{{ thread.author.username|e }}</a>
    {% else %}
      {{ thread.author.username|e }}
    {% endif %}
    {% trans "on" %}
    {{ thread.timestamp|datetimeformat }}
    ({{ thread.timestamp|timedeltaformat }})
  </div>

  <script type="text/javascript" src="{{ system.template.cobalt }}/core/pocoo/app/ViewThread.js"></script>
  <script type="text/javascript">
    initAutoUpdate('post_tree', {{ thread.post_id }});
  </script>

  <div id="post_tree">
    {% define posts thread.posts %}
    {% include "partial/tree.html" %}
  </div>

  <table class="thread">
    <tr id="post" class="{* cycle 'row1', 'row2' inline *}">
      {% define post thread.post %}
      {% include "partial/post.html" %}
    </tr>
  </table>

{% endblock %}
