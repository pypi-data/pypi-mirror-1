<tal:block i18n:domain="iqpp.plone.commenting">
    <form action="."
          method="post"    
          tal:attributes="action context/absolute_url"
          tal:define="field_values view/getFieldValues;
                      errors view/getErrors">

        <div tal:condition="not: view/isMember"
             tal:define="field_value field_values/name;
                         error errors/name | nothing">                              
             <label for="name" 
                    i18n:translate="name-label"> 
                    Name
            </label> 

            <span title='Required' 
                  class='fieldRequired'> (Required) </span> 

            <div tal:condition="error">
                <span tal:replace="error" /><br />
            </div>          

            <div i18n:translate="name-description" 
                 class="formHelp"> Please enter your name. </div>
     
            <input type="text" 
                   name="name" 
                   value="name"
                   tal:attributes="value field_value" /> 
               
        </div>
        <div tal:condition="not: view/isMember"
             tal:define="field_value field_values/email;
                         error errors/email | nothing">
             <label for="email" 
                    i18n:translate="email-label"> 
                    E-mail
            </label> 

            <span title='Required' 
                  class='fieldRequired'> (Required) </span> 

            <div tal:condition="error">
                <span tal:replace="error" /><br />
            </div>          

            <div i18n:translate="email-description" 
                 class="formHelp"> Please enter your email. </div>
     
            <input type="text" 
                   name="email" 
                   value="email"
                   tal:attributes="value field_value" /> 
               
        </div>
    
        <div tal:define="field_value field_values/subject;
                         error errors/subject | nothing">
    
            <label for="subject" 
                   i18n:translate="subject-label"> 
                   Subject
            </label> 

            <span title='Required' 
                  class='fieldRequired'> (Required) </span> 

            <div tal:condition="error">
                <span tal:replace="error" /><br />
            </div>          

            <div i18n:translate="subject-description" 
                 class="formHelp"> Please enter your subject. </div>
     
            <input type="text" 
                   name="subject" 
                   value="subject"
                   tal:attributes="value field_value" /> 
               
        </div>
        <div tal:define="field_value field_values/message;
                         error errors/message | nothing">                
            <label for="message" 
                   i18n:translate="message-label"> 
                   Message
            </label> 

            <span title='Required' 
                  class='fieldRequired'> (Required) </span> 

            <div tal:condition="error">
                <span tal:replace="error" /><br />
            </div>          

            <div i18n:translate="message-description" 
                 class="formHelp"> Please enter your message. </div>
     
            <textarea name="message"
                      tal:content="field_value" />
               
        </div>

        <input type="hidden"
               name="comment_id"                
               tal:attributes="value field_values/id" />
           
        <input type="hidden"
               name="action"
               tal:attributes="value request/action | nothing" />
                                  
        <input type="submit"
               name="add_comment:method"
               value="Add" 
               i18n:attributes="value add-label;" />

    </form>      
</tal:block>