<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:block fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<metal:block fill-slot="sub" />

<div metal:fill-slot="main"
                     tal:define="errors view/getErrors;
                                 field_values view/getFieldValues">


            <tal:discussable define="template python:getattr(context, context.getLayout(), None);
                                     macros template/macros | nothing;
                                     main_macro macros/main | nothing;
                                     showDiscussable python:main_macro;">

                <div class="comment" 
                     tal:condition="showDiscussable">
                    <div metal:use-macro="main_macro"/>
                </div>
            </tal:discussable>
            
            <a name="form"></a>
            
            <form action="."
                  tal:attributes="action context/absolute_url" 
                  method="post">

                <div tal:condition="not: view/isMember"
                     tal:define="field_value field_values/name;
                                 error errors/name | nothing">                              
                     <label for="name" 
                            i18n:translate="name-label"> 
                            Name
                    </label> 

                    <span title='Required' 
                          class='fieldRequired'> (Required) </span> 

                    <div tal:condition="error">
                        <span tal:replace="error" /><br />
                    </div>          

                    <div i18n:translate="name-description" 
                         class="formHelp"> Please enter your name. </div>
                 
                    <input type="text" 
                           name="name" 
                           value="name"
                           tal:attributes="value field_value" /> 
                           
                </div>
                <div tal:condition="not: view/isMember"
                     tal:define="field_value field_values/email;
                                 error errors/email | nothing">
                     <label for="email" 
                            i18n:translate="email-label"> 
                            E-mail
                    </label> 

                    <span title='Required' 
                          class='fieldRequired'> (Required) </span> 

                    <div tal:condition="error">
                        <span tal:replace="error" /><br />
                    </div>          

                    <div i18n:translate="email-description" 
                         class="formHelp"> Please enter your email. </div>
                 
                    <input type="text" 
                           name="email" 
                           value="email"
                           tal:attributes="value field_value" /> 
                           
                </div>
                
                <div tal:define="field_value field_values/subject;
                                 error errors/subject | nothing">
                
                    <label for="subject" 
                           i18n:translate="subject-label"> 
                           Subject
                    </label> 

                    <span title='Required' 
                          class='fieldRequired'> (Required) </span> 

                    <div tal:condition="error">
                        <span tal:replace="error" /><br />
                    </div>          

                    <div i18n:translate="subject-description" 
                         class="formHelp"> Please enter your subject. </div>
                 
                    <input type="text" 
                           name="subject" 
                           value="subject"
                           tal:attributes="value field_value" /> 
                           
                </div>
                <div tal:define="field_value field_values/message;
                                 error errors/message | nothing">                
                    <label for="message" 
                           i18n:translate="message-label"> 
                           Message
                    </label> 

                    <span title='Required' 
                          class='fieldRequired'> (Required) </span> 

                    <div tal:condition="error">
                        <span tal:replace="error" /><br />
                    </div>          

                    <div i18n:translate="message-description" 
                         class="formHelp"> Please enter your message. </div>
                 
                    <textarea name="message"
                              tal:content="field_value" />
                           
                </div>

                <input type="hidden"
                       name="comment_id"
                       tal:attributes="value field_values/id | nothing" />

                <input type="hidden"
                       name="action" 
                       tal:attributes="value request/action | nothing" />
                       
                <input tal:condition="view/showAddButton"
                       type="submit"
                       class="standalone"
                       name="add_comment:method"
                       value="Add" 
                       i18n:attributes="value add-label;" />

                <input tal:condition="view/showEditButton"
                       type="submit"
                       class="standalone"
                       name="edit_comment:method"
                       value="Save" 
                       i18n:attributes="value save-label;" />
        
            </form>      

        </div>    
        
  </body>
</html>