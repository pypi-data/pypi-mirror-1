<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="iqpp.plone.commenting">
    <body>

        <metal:main fill-slot="main"
                    tal:define="data view/getData">

            <h1 class="documentFirstHeading"
                i18n:translate="preview_label">
                Preview
            </h1>

            <div class="documentDescription"
                 i18n:translate="preview_description">
                This is a preview of your comment. Please save or re-edit it.
            </div>    
            
            <div class="comment">
             
                 <h3 tal:content="data/subject">
                     Subject
                 </h3>     

                 <div class="documentByLine">
                    <span i18n:translate="label_comment_by">Posted by</span>             
                     <span tal:content="data/name" />
                     <span tal:content="data/created" />
                 </div>
     
                 <div tal:content="structure data/transformed_message" />
            </div>    
            
            <form action="."
                  tal:attributes="action context/absolute_url"
                  method="post">

                <input type="hidden"
                       name="action" 
                       tal:attributes="value request/action | nothing" />

                <input type="hidden"
                       name="comment_id"
                       value="comment_id"
                       tal:attributes="value request/comment_id | nothing" />
                                 
                <input type="hidden"
                       name="name"
                       value="name"
                       tal:attributes="value data/name" />

                <input type="hidden"
                       name="email"
                       value="email"
                       tal:attributes="value data/email" />

                <input type="hidden"
                       name="subject"
                       value="subject"
                       tal:attributes="value data/subject" />

                <input type="hidden"
                       name="message"
                       value="message"
                       tal:attributes="value data/message" />
                
                <input type="hidden"
                       name="is_previewed"
                       value="1" />

                <input type="hidden"
                       name="reply_to"
                       tal:attributes="value request/reply_to | nothing" />

                <tal:block tal:condition="view/showAddButton">
                    <input type="submit"
                           class="standalone"
                           name="add_comment:method"
                           value="Save" 
                           i18n:attributes="value save_label;" />

                    <input type="submit"
                           class="context"
                           name="add_comment_form:method"
                           value="Re-edit"
                           i18n:attributes="value re_edit_label;" />
                </tal:block>              

                <tal:block tal:condition="view/showEditButton">
                    <input type="submit"
                           class="standalone"                    
                           name="edit_comment:method"
                           value="Save" 
                           i18n:attributes="value save_label;" />

                    <input type="submit"
                           class="context"
                           name="edit_comment_form:method"
                           value="Re-edit"
                           i18n:attributes="value re_edit_label;" />
                </tal:block>       
                       
            </form>    
                                
        </metal:main>    
        
  </body>
</html>