<fieldset xmlns="http://www.w3.org/1999/xhtml" 
          xmlns:py="http://genshi.edgewall.org/"
          id="${id}"
          class="${css_class}"
          py:attrs="attrs" >
    <legend py:if="legend" py:content="legend" />
    <div class="fielderror" py:if="error and show_error" py:content="error" />
    <?python hidden_fields = list(ihidden_fields) ?>
    <div py:if="hidden_fields">
        <div py:for="field in hidden_fields"
             py:with="error=error_for(field)"
             py:strip="True">
            <span py:replace="field.display(value_for(field), **args_for(field))" />
            <span py:if="show_children_errors and error and not field.show_error" 
                  class="fielderror" py:content="error" />
        </div>
    </div>
    <table border="0" cellspacing="0" cellpadding="2" py:attrs="table_attrs">
        <tbody>
            <tr py:for="i, field in enumerate(ifields)" 
                class="${i%2 and 'odd' or 'even'}"
                py:with="required=[None,' required'][int(field.is_required)]; 
                         error=error_for(field);
                         label_text = field.label_text;
                         help_text = field.help_text;" >
                
                <td class="labelcol">
                    <label py:if="label_text" id="${field.id}.label" for="${field.id}" 
                           class="fieldlabel${required}" py:content="label_text" />
                </td>
                <td class="fieldcol">
                    ${field.display(value_for(field), **args_for(field))}
                    <span py:if="help_text" class="fieldhelp" py:content="help_text" />
                    <span py:if="show_children_errors and error and not field.show_error" class="fielderror" py:content="error" />
                </td>
            </tr>
        </tbody>
    </table>
</fieldset>
