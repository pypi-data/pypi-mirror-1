{% extends "common/base.html" %}
{% load i18n %}
{% load markup %}
{% load paginator %}

{% block contents %}
  {% block objecttitle %}
  <h1>{{ meta.verbose_name_plural }}</h1>
  {% endblock objecttitle %}

{% block dd_breadcrumbs %}
  {% if ddinfo.bread_crumbs or ddinfo.bread_crumbs_root %}
    <div class="breadcrumbs">
      &nbsp; <a href="{{ ddinfo.bread_crumbs_root }}">&#187;</a>
      {% if ddinfo.bread_crumbs %}
        &nbsp;
        {% for crumb in ddinfo.bread_crumbs %}
          <a href="{{ crumb.url_field }}">{{ crumb.field.verbose_name }}</a>: <a href="{{ crumb.url_value }}">{{ crumb.value|default:"<i>&#8220; &#8221;</i>" }}</a>
          {% if not forloop.last %}&nbsp; &#187; &nbsp;{% endif %}
        {% endfor %}
      {% endif %}
    </div>
  {% endif %}
{% endblock dd_breadcrumbs %}

{% block dd_used_fields %}
{% if used_fields %}
  <h3>{% trans "Used fields" %}</h3>
  <table class="drilldowntable" width="60%">
    <tr>
      <th>{% trans "Field" %}</th>
      <th>{% trans "Value" %}</th>
    </tr>
    {% for item in used_fields %}
    <tr class="{% cycle 'odd' 'even' %}">
      <td><b>{{ item.field.verbose_name }}</b></td>
      <td><i>{{ item.value|default:"<i>&#8220; &#8221;</i>" }}</i></td>
    </tr>
    {% endfor %}
  </table>
{% endif %}
{% endblock dd_used_fields %}

{% block dd_remaining_fields %}
{% if select_field and remaining_fields %}
  <h3>{% trans "Remaining fields" %}</h3>
  <table class="drilldowntable" width="60%">
    <tr>
      <th>{% trans "Field" %}</th>
      <th>{% trans "Number of values" %}</th>
    </tr>
    {% for item in remaining_fields %}
    {% ifnotequal item.count 0 %}
    <tr class="{% cycle 'odd' 'even' %}">
      <td><a href="{{ item.url }}">{{ item.field.verbose_name }}</a></td>
      <td>{{ item.count }}</td>
    </tr>
    {% endifnotequal %}
    {% endfor %}
  </table>
{% endif %}
{% endblock dd_remaining_fields %}

{% block dd_pivot_field %}
{% if select_value and pivot_field_values %}
  <h3>{% blocktrans with pivot_field.verbose_name as pivot_name %}Values for <i>"{{ pivot_name }}"</i>{% endblocktrans %}</h3>
  <table class="drilldowntable">
    <tr>
      <th>{{ pivot_field.verbose_name|title }}</th>
      <th>{% trans "Items found" %}</th>
    </tr>
    {% for item in pivot_field_values %}
    <tr class="{% cycle 'odd' 'even' %}">
      <td><a href="{{ item.url }}">{{ item.value|default:"<i>&#8220; &#8221;</i>" }}</a></td>
      <td>{{ item.count }}</td>
    </tr>
    {% endfor %}
  </table>
{% endif %}
{% endblock dd_pivot_field %}

{% block objectlist %}
  <div id="objectlist">
  {% if object_list %}
    <h3>{% blocktrans count count as count %}Found one item{% plural %}Found {{ count }} items{% endblocktrans %}</h3>
      <table class="objectlist" cellspacing="0">
	<tr>
	  <th>{% blocktrans with meta.verbose_name|title as verbose_name %}{{ verbose_name }}{% endblocktrans %}</th>
	</tr>
	{% for obj in object_list %}
	<tr class="{% cycle 'odd' 'even' %}">
	  <td>
	    {% if is_popup %}
	      <a href="#" onclick="javascript:opener.dismissRelatedLookupPopup(window, '{{ obj.pk }}');">{{ obj }}</a>
	    {% else %}
	      <a href="{{ obj.get_absolute_url }}">{{ obj }}</a>
	    {% endif %}
	  </td>
	</tr>
	{% endfor %}
      </table>
  {% else %}
    {% blocktrans with meta.verbose_name as verbose_name and meta.verbose_name_plural as verbose_name_plural %}
      <p>No {{ verbose_name }} found.</p>
    {% endblocktrans %}
  {% endif %}
  </div>
{% endblock objectlist %}

{% block objectpaginator %}
  <div id="objectpaginator">
    {% paginator %}
  </div>
{% endblock objectpaginator %}

{% endblock contents %}
