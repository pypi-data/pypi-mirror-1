<!--
RPC4Django Documentation

If you like the look of this document, feel free to steal it
and use it as your own.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<title>RPC4Django Documentation</title>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		<style type='text/css'>
		h1 {
			font-size: 1.8em;
		}
		
		h2 {
			font-size: 1.4em;
		}
		
		h3 {
			font-size: 1.1em;
		}
		
		a {
			color: #487858
		}
		
		blockquote {
			background-color: #DDDDDD;
			font-family: monospace;
			white-space: pre;
			border: 1px dashed #AAAAAA;
			padding: 5px 5px 5px 5px;
		}
		
		.mono {
			font-family: monospace;
		}
		</style>
		
		<!-- for styling code blocks from pygments http://pygments.org -->
		<link rel='stylesheet' type='text/css' href="pygments.css" />
	</head>
	<body>
		<a name='pagetop'></a>
		<h1>RPC4Django Documentation</h1>
		<p>
		Version 0.1.0<br />
		July 6, 2009
		</p>
		<ol>
			<li><a href='#overview'>Overview</a></li>
			<li><a href='#license'>License</a></li>
			<li><a href='#installation'>Installation</a></li>
			<li><a href='#configuration'>Configuration</a></li>
			<li><a href='#plannedfeatures'>Planned Features</a></li>
			<li><a href='#changelog'>Change Log</a></li>
		</ol>
		
		<!-- 		OVERVIEW			-->
		
		<hr />
		<a name='overview'></a>
		<h2>Overview</h2>
		
			<h3>Website</h3>
			<p><a href='http://www.davidfischer.name/rpc4django'>http://www.davidfischer.name/rpc4django</a></p>
			
			<h3>Contributors</h3>
			<ul>
				<li><a href='mailto:rpc4django@gmail.com'>David Fischer</a></li>
			</ul>
			
			<h3>Features</h3>
			<p>
			RPC4Django is an XMLRPC and JSONRPC server for Django powered projects.
			Simply plug it into any existing Django project and you can make your methods 
			available via XMLRPC and JSONRPC. In addition, it can display nice documentation
			about the methods it makes available in a more customizable way than DocXMLRPCServer. 
			</p>
			<ul>
				<li>Detects request type (JSONRPC or XMLRPC) based on content type</li>
				<li>Easy identification of RPC methods via a decorator</li>
				<li>Pure python and requires no external modules except Django</li>
				<li>Customizable RPC method documentation</li>
				<li>Supports XMLRPC and JSONRPC introspection</li>
				<li>Supports method signatures (unlike SimpleXMLRPCServer)</li>
				<li>Easy installation and integration with existing Django projects</li>
				<li>Licensed for inclusion in open source and commercial software</li>
			</ul>
			
		
		<!-- 		LICENSE			-->
		
		<hr />
		<a name='license'></a>
		<h2>License</h2>
			
		<p>
			RPC4Django is licensed under the new BSD license.
		</p>
			
		<p>
			Copyright &copy; 2009, David Fischer <br />
			All rights reserved.<br />
		</p>
		<p>
			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
		</p>

		<ul>
			<li>Redistributions of source code must retain the above copyright
			      notice, this list of conditions and the following disclaimer.</li>
			<li>Redistributions in binary form must reproduce the above copyright
			      notice, this list of conditions and the following disclaimer in the
			      documentation and/or other materials provided with the distribution.</li>
			<li>Neither the name of rpc4django nor the
			      names of its contributors may be used to endorse or promote products
			      derived from this software without specific prior written permission.</li>
		</ul>
		<p>
			THIS SOFTWARE IS PROVIDED BY David Fischer ''AS IS'' AND ANY
			EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
			WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
			DISCLAIMED. IN NO EVENT SHALL David Fischer BE LIABLE FOR ANY
			DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
			(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
			LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
			ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
			(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
			SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
		</p>
		
		<!-- 		INSTALLATION			-->
		
		<hr />
		<a name='installation'></a>
		<h2>Installation</h2>
		
		<h3>Requirements</h3>
		<p>
		RPC4Django is written in pure python and should run on any platform
		where python and Django run. It requires no other external modules.
		It is tested on python2.5 and python2.6 using Django1.0.2-final
		on Mac OS 10.5.
		</p>
			
		<h3>Easy Install Method</h3>
		<blockquote>$> easy_install rpc4django</blockquote>

		<h3>Source Method</h3>
		<blockquote>$> tar xvfz rpc4django-x.y.z.tar.gz
$> cd rpc4django-x.y.z
$> python setup.py install</blockquote>

		<h3>No Install Method</h3>
		<p>
			This method installs RPC4Django only for one specific django project
			but does not require any special system access. You are free to bundle and distribute
			RPC4Django with your project provided you adhere to the terms of the
			<a href='#license'>license</a>.
		</p>
		<blockquote>$> tar xvfz rpc4django-x.y.z.tar.gz
$> cd rpc4django-x.y.z
$> cp -r rpc4django YOUR_DJANGO_PROJECT_DIRECTORY</blockquote>

		<h3>Verifying The Package</h3>
		<p>
			A set of unit tests is included in rpc4django/tests.py. If these all pass, there
			should be no issues with rpc4django.
		</p>
		<blockquote>$> python rpc4django/tests.py</blockquote>
		<p>
			The unit tests can also be run on a live django project using:
		</p>
		<blockquote>$> python manage.py test rpc4django</blockquote>

		<!-- 		CONFIGURATION			-->
		
		<hr />
		<a name='configuration'></a>
		<h2>Configuration</h2>
		
		<h3>Adding To Your Django Project</h3>
		<p>
			After installation, there are only three steps to adding RPC4Django to your project.
		</p>
		<ol>
			<li>
				<p>
					First, you need to add new url pattern to your root urls.py file.
					This file should be the one pointed to by <span class='mono'>ROOT_URLCONF</span> in settings.py.
					You can replace <span class='mono'>r&#39;^RPC2$&#39;</span> with anything you like.
				</p>
				<blockquote><span class="c"># urls.py</span>
<span class="c">#...</span>
<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>    
<span class="c">#...</span>
    <span class="c"># if installed via no install method</span>
    <span class="c">#(r&#39;^RPC2$&#39;, &#39;YOURPROJECT.rpc4django.views.serve_rpc_request&#39;),</span>
			    
    <span class="c"># if installed via source or easy_install</span>
    <span class="p">(</span><span class="s">r&#39;^RPC2$&#39;</span><span class="p">,</span> <span class="s">&#39;rpc4django.views.serve_rpc_request&#39;</span><span class="p">),</span>
<span class="p">)</span></blockquote>
			</li>
			<li>
				<p>
					Second, add RPC4Django to the list of installed applications in your settings.py.
				</p>
				<blockquote><span class="c"># settings.py</span>
<span class="c">#...</span>
<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
<span class="c">#...</span>
    <span class="c"># if installed via no install</span>
    <span class="c">#&#39;YOURPROJECT.rpc4django&#39;,</span>

    <span class="c"># if installed via source or easy_install</span>
    <span class="s">&#39;rpc4django&#39;</span><span class="p">,</span>
<span class="p">)</span></blockquote>
			</li>
			<li>
				<p>
					Lastly, you need to let RPC4Django know which methods to make available.
					This is done with the decorator <span class='mono'>@rpcmethod</span>.
					RPC4Django imports all the apps in <span class='mono'>INSTALLED_APPS</span>
					and makes any methods importable via __init__.py with the <span class='mono'>@rpcmethod</span>
					decorator available as RPC methods. You can always write your RPC methods in
					another module and simply import it in __init__.py.
				</p>
				<p>
					Here's an example from the application "testapp":
				</p>
				<blockquote><span class="c"># testapp/__init__.py</span>
<span class="kn">from</span> <span class="nn">rpc4django</span> <span class="kn">import</span> <span class="n">rpcmethod</span>

<span class="c"># This imports another method to be made available as an RPC method</span>
<span class="c"># This method should also have the @rpcmethod decorator</span>
<span class="c"># from mymodule import myrpcmethod</span>

<span class="nd">@rpcmethod</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;mynamespace.add&#39;</span><span class="p">,</span> <span class="n">signature</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;int&#39;</span><span class="p">,</span> <span class="s">&#39;int&#39;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Adds two numbers together</span>

    <span class="sd">&gt;&gt;&gt; add(1, 2)</span>
    <span class="sd">3</span>
    <span class="sd">&#39;&#39;&#39;</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span></blockquote>
			<p>
				The decorator <span class='mono'>@rpcmethod</span> accepts two optional parameters:
			</p>
			<ul>
				<li><span class='mono'>name</span> is the name under which the method will be made externally available. It defaults to the method's real name.</li>
				<li><span class='mono'>signature</span> is the signature of the method and will be returned by calls to the XMLRPC introspection method <span class='mono'>system.methodSignature</span>.
				    It is of the form: [return_value, arg1, arg2, arg3, ...]. All of the types should be XMLRPC types (eg. struct, int, array, etc. -- see the XMLRPC <a href='http://www.xmlrpc.com/spec'>spec</a> for details).
				    Since python is relatively loosely typed, all types are set to object by default.</li>
			</ul>
			</li>
		</ol>
		
		<h3>Customizing Method Documentation</h3>	
		<p>
			By default, RPC4Django serves an HTML method summary when a GET request
			comes to the configured url pattern (by default <span class='mono'>r'^RPC2$'</span>).
			A GET request does not contain an RPC payload. This HTML method summary can
			be customized (or even disabled -- see Optional Features below).
		</p>
		<p>
			The documentation is served from a template in the templates/ directory.
			This template is rpc4django/rpcmethod_summary.html and can be customized in 
			a similar way to the <a href='http://docs.djangoproject.com/en/dev/intro/tutorial02/#customize-the-admin-look-and-feel'>django admin</a>.
		</p>
		
		<h3>Optional Features</h3>
		<p>
			There are some optional features that can configure the way in which 
			RPC4Django handles requests. All of these settings should be placed in
			settings.py and are specific to a Django project.
		</p>
		<ul>
			<li><span class='mono'>RPC4DJANGO_LOG_REQUESTS_RESPONSES=True|False</span> (default True)<br />
				By default RPC4Django will log (using the python logging module) all requests and responses.
				This can be disabled by setting <span class='mono'>RPC4DJANGO_LOG_REQUESTS_RESPONSES=False</span>.
			</li>
			<li><span class='mono'>RPC4DJANGO_RESTRICT_INTROSPECTION=True|False</span> (default False)<br />
				By default RPC4Django registers the standard XMLRPC and JSONRPC introspection functions. 
				This can be disabled by setting <span class='mono'>RPC4DJANGO_RESTRICT_INTROSPECTION=True</span>.
			</li>
			<li><span class='mono'>RPC4DJANGO_RESTRICT_JSONRPC=True|False</span> (default False)<br />
				If <span class='mono'>RPC4DJANGO_RESTRICT_JSONRPC=True</span>, RPC4Django will never serve
				a JSONRPC request. Instead, either XMLRPC will be tried or status code 404 will be returned.
			</li>
			<li><span class='mono'>RPC4DJANGO_RESTRICT_XMLRPC=True|False</span> (default False)<br />
				If <span class='mono'>RPC4DJANGO_RESTRICT_XMLRPC=True</span>, RPC4Django will never serve
				an XMLRPC request. Instead, either JSONRPC will be tried or status code 404 will be returned.
			</li>
			<li><span class='mono'>RPC4DJANGO_RESTRICT_DOCUMENTATION=True|False</span> (default False)<br />
				If <span class='mono'>RPC4DJANGO_RESTRICT_DOCUMENTATION=True</span>,  status code 404 will be returned
				instead of serving the method summary as a response to a GET request.
			</li>
		</ul>
		
		<!-- 		PLANNED FEATURES			-->
		
		<hr />
		<a name='plannedfeatures'></a>
		<h2>Planned Features</h2>
		
		<p>
		If you are interested in a particular feature either listed here or otherwise, 
		please send me an <a href='mailto:rpc4django@gmail.com'>email</a>.
		</p>
		
		<ul>
			<li>Authenticated view that ties in with Django's <a href='http://docs.djangoproject.com/en/dev/topics/auth'>auth</a> system</li>
			<li>Testing an RPC method directly from the documentation (like <a href='http://phpxmlrpc.sf.net'>XMLRPC for PHP</a>)</li>
		</ul>

		<!-- 		CHANGE LOG			-->
		
		<hr />
		<a name='changelog'></a>
		<h2>Change Log</h2>
		<h3>Version 0.1.0 (July 6, 2009)</h3>
		<ul>
			<li>First version of RPC4Django</li>
		</ul>

	</body>
</html>