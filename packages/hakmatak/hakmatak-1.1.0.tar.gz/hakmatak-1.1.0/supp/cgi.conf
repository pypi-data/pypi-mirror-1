# 20100208, http://hakmatak.org/dev
#
# httpd conf file for CGI setup.
#
# echo -n "hakmatak" | md5sum 
# b07d15c79b26e9463aa63eabe3d9054e
# b07d15c7 is chosen as the default prefix for CGI URLs below.
# It can be replaced by any valid string you prefer.

#--------------------------
# "webified" DirectoryIndex
#--------------------------

<Directory "/var/www/html/test/data">
  Options FollowSymLinks
  Order allow,deny
  Allow from all
  DirectoryIndex /b07d15c7/index.py
</Directory>

#----------------------------
# rewrite rules for w10n URLs
#----------------------------

RewriteEngine on
#RewriteLogLevel 9
#RewriteLog /var/log/httpd/rewrite_log

# flags used:
# L: last
# NC: nocase
# NS: nosubreq
# PT: paththrough. You must use this flag if you want to mix directives
#     from different modules which allow URL-to-filename translators
# for details,
# check http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule

##..................
## if a dir seen, don't check further
#
#RewriteCond %{DOCUMENT_ROOT}%{SCRIPT_FILENAME}  -d
#RewriteRule ^.+$ - [L]

RewriteRule ^(.*/[^/]+\.(txt))(/.*)$ /b07d15c7/webify.py/bytearray!$1!$3 [NC,NS,PT]

#------------------
# CGI configuration
#------------------

SetEnv PYTHONPATH /home/webifier/hakmatak-1.1.0
# may not need
#SetEnv PYTHON_EGG_CACHE /tmp/.python-eggs

#PassEnv LD_LIBRARY_PATH

ScriptAlias /b07d15c7/ /home/webifier/hakmatak-1.1.0/hakmatak/wsgi/
