<html>
<dl class="portlet portletMailList"
    i18n:domain="betahaus.portlet.maillist"
    tal:define=" mailhost context/MailHost/smtp_host|nothing;
                 mailfrom context/email_from_address|nothing;
                 mailconfigured python:mailhost and mailfrom;">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <span tal:content="view/data/header">
            Portlet header
        </span>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem"
        tal:condition="view/data/body"
        tal:content="view/data/body">
        Body text
    </dd>
    
    <dd class="portletItem">
        <p tal:condition="not: mailconfigured">
            Sorry, but the mail configuration for this site is not correct. 
            Please contact the site administrator.
        </p>
        <form action="maillist_form"
              name="maillistform"
              method="post"
              tal:attributes="action view/maillistform"
              tal:condition="mailconfigured">

            <input type="hidden" name="maillist.submitted" value="1" />
            <input type="hidden" 
                   name="maillist.camefrom" 
                   tal:attributes="value context/@@plone_context_state/current_page_url" />

            <div class="field">
                <label for="email_address"
                       i18n:translate="label_email_address">Email Address</label>
                <br />
                <input type="text"                       
                       alt="Email Address"
                       name="email_address"
                       id="email_address"
                       size="15"
                       tal:attributes="value python:''"/>
            </div>
            <div class="formControls">
            
                <input class="context"
                       type="submit"
                       name="submit"
                       value="Send"
                       alt="Mail List"
                       i18n:attributes="value label_send"/>
            </div>
            <table>
                <thead>
                    <tr>
	                    <td>
	                        <input type="radio"
	                               alt="Subscribe"
	                               name="maillist"
	                               value="subscribe"
	                               checked="checked"/>
	                    </td>
	                    <td>
	                        <label for="subscribe"
	                               i18n:translate="label_subscribe">Subscribe</label>
	
	                    </td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <input type="radio"
                                   size="10"
                                   alt="Unsubscribe"
                                   name="maillist"
                                   value="unsubscribe"/>
                        </td>
                        <td>                
                            <label for="unsubscribe"
                                   i18n:translate="label_unsubscribe">Unsubscribe</label>
                        </td>
                    </tr>
                <tbody>
            </table>
        </form>
        
    </dd>    

    <dd class="portletFooter">
        <span class="portletBotomLeft"></span>
        <span class="portletBottomRight"></span>
    </dd>

</dl>
</html>