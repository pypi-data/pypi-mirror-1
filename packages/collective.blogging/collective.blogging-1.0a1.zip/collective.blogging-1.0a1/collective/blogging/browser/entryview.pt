<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="here/main_template/macros/master"
    i18n:domain="collective.blogging">
    <body>

        <div metal:fill-slot="main">
            <tal:main-macro metal:define-macro="main"
                tal:define="kssClassesView context/@@kss_field_decorator_view;
                            getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                            templateId template/getId;">

                <dl class="portalMessage info"
                    i18n:domain="plone"
                    tal:condition="python: view.is_link and (not view.embed_code) and view.redirect_links() and view.can_edit()">
                    <dt i18n:translate="">Info</dt>
                    <dd i18n:translate="message_permissions_blocking_link_redirect">
                      You see this page because you have permission to edit this link.  Others will be immediately redirected to the link's target URL.
                    </dd>
                </dl>
                
                <div tal:replace="structure provider:plone.abovecontenttitle" />

                <h1 class="documentFirstHeading"> 
                    <metal:field use-macro="python:here.widget('title', mode='view')">
                        Title
                    </metal:field>
                </h1>

                <div tal:replace="structure provider:plone.belowcontenttitle" />

                <p class="documentDescription">
                    <metal:field use-macro="python:here.widget('description', mode='view')">
                        Description
                    </metal:field>
                </p>

                <div tal:replace="structure provider:plone.abovecontentbody" />
                
                <tal:newsitem condition="view/is_newsitem">
                    <div class="newsImageContainer" tal:condition="here/image_mini|nothing">
                        
                        <p>
                            <img src="" rel="" width=""
                                tal:attributes="src string:${context/absolute_url}/image_mini;
                                                rel string:#fancy_${context/UID}" />
                            <br/>
                            <span class="discreet" tal:content="context/imageCaption">
                                Caption
                            </span>
                        </p>
                        
                        <div class="fancybox visualNoPrint" tal:attributes="id string:fancy_${context/UID}"> 
                            <div class="close"/>
                            
                            <!-- large image --> 
                            <img src=""
                                tal:attributes="src string:${context/absolute_url}/image_large" /> 

                            <!-- image details --> 
                            <div class="fancydetails"> 
                                <h3 tal:content="context/imageCaption">Caption</h3>
                                
                                <p tal:content="context/Description">Description</p> 

                            </div> 
                        </div>
                    </div>
                </tal:newsitem>

                <div metal:define-macro="text-field-view"
                    id="parent-fieldname-text" class="stx"
                    tal:define="kss_class python:getKssClasses('text',
                                templateId=templateId, macro='text-field-view');
                                text context/getText|nothing"
                    tal:condition="text"
                    tal:attributes="class python:here.Format() in ('text/structured',
                                    'text/x-rst', ) and 'stx' + kss_class or 'plain' + kss_class">
                    <div metal:define-slot="inside" tal:replace="structure text">The body</div>
                </div>
                
                <tal:link condition="view/is_link" i18n:domain="plone">
                    <p>
                        <span i18n:translate="link_address">The link address is:</span>
                        <a href="#" tal:attributes="href here/remote_url"
                                    tal:content="here/remote_url">remote url</a>
                    </p>
                    
                    <p tal:condition="view/embed_code">
                        <tal:block replace="structure view/embed_code"/>
                    </p>
                </tal:link>
                
                <tal:file condition="view/is_file" i18n:domain="plone">
                    <p>
                        <metal:field use-macro="python:context.widget('file', mode='view')">
                            File
                        </metal:field>
                    </p>

                    <div tal:define="content_type context/get_content_type|context/Format;"
                        tal:condition="python: content_type.startswith('text')">
                        <h2 i18n:translate="heading_file_contents">File contents</h2>
                        <pre tal:content="context/get_data|context/data|nothing">
                        </pre>
                    </div>
                </tal:file>
                
                <tal:image condition="view/is_image">
                    <tal:block define="size context/size" tal:condition="size">
                        
                        <p>
                            <img src="" rel="" width=""
                                tal:attributes="src string:${context/absolute_url}/image_preview;
                                                rel string:#fancy_${context/UID}" />
                        </p>
                        
                        <div class="fancybox visualNoPrint" tal:attributes="id string:fancy_${context/UID}"> 
                            <div class="close"/>
                            
                            <!-- large image --> 
                            <img src=""
                                tal:attributes="src string:${context/absolute_url}/image_large" /> 

                            <!-- image details --> 
                            <div class="fancydetails"> 
                                <h3 tal:content="context/Title">Title</h3>
                                
                                <p tal:content="context/Description">Description</p> 

                            </div> 
                        </div>
                    </tal:block>
                </tal:image>
        
                <div metal:use-macro="here/document_relateditems/macros/relatedItems">
                    Show related items if they exist
                </div>
        
                <div tal:replace="structure provider:plone.belowcontentbody" />

            </tal:main-macro>
            <a name="comments"></a>
        </div>

    </body>
</html>
