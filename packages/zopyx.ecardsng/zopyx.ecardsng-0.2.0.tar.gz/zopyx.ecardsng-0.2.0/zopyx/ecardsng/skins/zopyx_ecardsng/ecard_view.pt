<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<metal:main fill-slot="main">

    <div class="ecard-main">

      <h1 i18n:translate="label_ecard">eCard</h1>

      <div class="ecard-intro">
          <span class="label" i18n:translate="label_sender">Sender</span>:
          <span tal:content="string:${context/getSender_name} (${context/getSender_email})" />
          <br/>
          <span class="label" i18n:translate="label_recipient">Recipient</span>:
          <span tal:content="string:${context/getRecipient_name} (${context/getRecipient_email})" />
      </div>

      <div class="ecard-image"
           tal:define="image_id   context/getImageId;
                       image      python: getattr(context, image_id)">
          <img tal:attributes="src string:${image/absolute_url}" />
      </div>

      <div class="ecard-message"
           tal:define="field python: context.Schema().getField('email_body')">
           <div class="label" i18n:translate="label_message">Message:</div>
          <metal:div use-macro="python: context.widget(field.getName(), mode='view', use_label=0)"/>
      </div>

      <div metal:use-macro="here/document_actions/macros/document_actions">
          Document actions (print, sendto etc)
      </div>
      <div metal:use-macro="here/document_byline/macros/byline" />
    </div>

</metal:main>

</body>
</html>

