<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Validators &mdash; WTForms v0.4 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.4',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="WTForms v0.4 documentation" href="index.html" />
    <link rel="next" title="Widgets" href="widgets.html" />
    <link rel="prev" title="Fields" href="fields.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="widgets.html" title="Widgets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">WTForms v0.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-wtforms.validators">
<h1>Validators<a class="headerlink" href="#module-wtforms.validators" title="Permalink to this headline">¶</a></h1>
<p>A validator simply takes an input, verifies it fulfills some criterion, such as
a maximum length for a string and returns. Or, if the validation fails, raises
a <a title="wtforms.validators.ValidationError" class="reference internal" href="#wtforms.validators.ValidationError"><tt class="xref docutils literal"><span class="pre">ValidationError</span></tt></a>. This system is very simple and
flexible, and allows you to chain any number of validators on fields.</p>
<dl class="class">
<dt id="wtforms.validators.ValidationError">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">ValidationError</tt><big>(</big><em>message=u''</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#wtforms.validators.ValidationError" title="Permalink to this definition">¶</a></dt>
<dd>Raised when a validator fails to validate its input.</dd></dl>

<dl class="class">
<dt id="wtforms.validators.StopValidation">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">StopValidation</tt><big>(</big><em>message=u''</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#wtforms.validators.StopValidation" title="Permalink to this definition">¶</a></dt>
<dd><p>Causes the validation chain to stop.</p>
<p>If StopValidation is raised, no more validators in the validation chain are
called. If raised with a message, the message will be added to the errors
list.</p>
</dd></dl>

<div class="section" id="built-in-validators">
<h2>Built-in validators<a class="headerlink" href="#built-in-validators" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wtforms.validators.Email">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">Email</tt><big>(</big><em>message=u'Invalid email address.'</em><big>)</big><a class="headerlink" href="#wtforms.validators.Email" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates an email address. Note that this uses a very primitive regular
expression and should only be used in instances where you later verify by
other means, such as email activation or lookups.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>message</em> &#8211; Error message to raise in case of a validation error.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="wtforms.validators.EqualTo">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">EqualTo</tt><big>(</big><em>fieldname</em>, <em>message=None</em><big>)</big><a class="headerlink" href="#wtforms.validators.EqualTo" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares the values of two fields.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>fieldname</em> &#8211; The name of the other field to compare to.</li>
<li><em>message</em> &#8211; Error message to raise in case of a validation error.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This validator can be used to facilitate in one of the most common
scenarios, the password change form:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ChangePassword</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">PasswordField</span><span class="p">(</span><span class="s">&#39;New Password&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Required</span><span class="p">(),</span> <span class="n">EqualTo</span><span class="p">(</span><span class="s">&#39;confirm&#39;</span><span class="p">,</span> <span class="n">mesage</span><span class="o">=</span><span class="s">&#39;Passwords must match&#39;</span><span class="p">)])</span>
    <span class="n">confirm</span>  <span class="o">=</span> <span class="n">PasswordField</span><span class="p">(</span><span class="s">&#39;Repeat Password&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the example, we use the Required validator to prevent the EqualTo
validator from trying to see if the passwords do not match if there was no
passwords specified at all. Because Required stops the validation chain,
EqualTo is not run in the case the password field is left empty.</p>
</dd></dl>

<dl class="class">
<dt id="wtforms.validators.IPAddress">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">IPAddress</tt><big>(</big><em>message=u'Invalid IP address.'</em><big>)</big><a class="headerlink" href="#wtforms.validators.IPAddress" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates an IP(v4) address.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>message</em> &#8211; Error message to raise in case of a validation error.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="wtforms.validators.Length">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">Length</tt><big>(</big><em>min=-1</em>, <em>max=-1</em>, <em>message=None</em><big>)</big><a class="headerlink" href="#wtforms.validators.Length" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates the length of a string.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>min</em> &#8211; The minimum required length of the string. If not provided, minimum
length will not be checked.</li>
<li><em>max</em> &#8211; The maximum length of the string. If not provided, maximum length
will not be checked.</li>
<li><em>message</em> &#8211; Error message to raise in case of a validation error. A default
containing min and max length is provided.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="wtforms.validators.Optional">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">Optional</tt><a class="headerlink" href="#wtforms.validators.Optional" title="Permalink to this definition">¶</a></dt>
<dd>Allows empty input and stops the validation chain from continuing.</dd></dl>

<dl class="class">
<dt id="wtforms.validators.Required">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">Required</tt><big>(</big><em>message=u'This field is required.'</em><big>)</big><a class="headerlink" href="#wtforms.validators.Required" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates that the field contains data. This validator will stop the
validation chain on error.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>message</em> &#8211; Error message to raise in case of a validation error.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="wtforms.validators.Regexp">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">Regexp</tt><big>(</big><em>regex</em>, <em>flags=0</em>, <em>message=u'Invalid input.'</em><big>)</big><a class="headerlink" href="#wtforms.validators.Regexp" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates the field against a user provided regexp.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>regex</em> &#8211; The regular expression string to use. Can also be a compiled regular
expression pattern.</li>
<li><em>flags</em> &#8211; The regexp flags to use, for example re.IGNORECASE. Ignored if
<cite>regex</cite> is not a string.</li>
<li><em>message</em> &#8211; Error message to raise in case of a validation error.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="wtforms.validators.URL">
<em class="property">class </em><tt class="descclassname">wtforms.validators.</tt><tt class="descname">URL</tt><big>(</big><em>require_tld=True</em>, <em>message=u'Invalid URL.'</em><big>)</big><a class="headerlink" href="#wtforms.validators.URL" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple regexp based url validation. Much like the email validator, you
probably want to validate the url later by other means if the url must 
resolve.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>require_tld</em> &#8211; If true, then the domain-name portion of the URL must contain a .tld
suffix.  Set this to false if you want to allow domains like 
<cite>localhost</cite>.</li>
<li><em>message</em> &#8211; Error message to raise in case of a validation error.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="custom-validators">
<h2>Custom validators<a class="headerlink" href="#custom-validators" title="Permalink to this headline">¶</a></h2>
<p>Defining your own validators is easy. You simply make a function that takes a
list of configuration directives, and then returns a callable. The returned
callable should take two positional arguments, which are a form instance and
the field instance being validated. It is helpful to design your validators
with a <cite>message</cite> argument to provide a way to override the error message.</p>
<p>Let&#8217;s look at a possible validator which checks if a file upload&#8217;s extension is
that of an image:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">is_image</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="s">u&#39;Images only!&#39;</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">extensions</span><span class="p">:</span>
        <span class="n">extensions</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;jpg&#39;</span><span class="p">,</span> <span class="s">&#39;jpeg&#39;</span><span class="p">,</span> <span class="s">&#39;png&#39;</span><span class="p">,</span> <span class="s">&#39;gif&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">_is_image</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">data</span> <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extensions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_is_image</span>
</pre></div>
</div>
<p>And the way it&#8217;s used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">avatar</span> <span class="o">=</span> <span class="n">FileField</span><span class="p">(</span><span class="s">u&#39;Avatar&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">is_image</span><span class="p">(</span><span class="s">u&#39;Only images are allowed.&#39;</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;gif&#39;</span><span class="p">,</span> <span class="s">&#39;png&#39;</span><span class="p">])])</span>
</pre></div>
</div>
<p>The outer function sets configuration directives, in this case the message and
the extensions. The inner function provides the actual validation: If the
field contains no data, or an un-approved extension,
<a title="wtforms.validators.ValidationError" class="reference internal" href="#wtforms.validators.ValidationError"><tt class="xref docutils literal"><span class="pre">ValidationError</span></tt></a> with the message is raised.
Otherwise we just the let function return normally.</p>
<p>You could also define the validator as a class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">IsImage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s">u&#39;Images only!&#39;</span><span class="p">,</span> <span class="n">extensions</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">extensions</span><span class="p">:</span>
            <span class="n">extensions</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;jpg&#39;</span><span class="p">,</span> <span class="s">&#39;jpeg&#39;</span><span class="p">,</span> <span class="s">&#39;png&#39;</span><span class="p">,</span> <span class="s">&#39;gif&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extensions</span> <span class="o">=</span> <span class="n">extensions</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span><span class="o">.</span><span class="n">data</span> <span class="ow">or</span> <span class="n">field</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">extensions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<p>Which option you choose is entirely down to preference.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Validators</a><ul>
<li><a class="reference external" href="#built-in-validators">Built-in validators</a></li>
<li><a class="reference external" href="#custom-validators">Custom validators</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="fields.html"
                                  title="previous chapter">Fields</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="widgets.html"
                                  title="next chapter">Widgets</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/validators.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="widgets.html" title="Widgets"
             >next</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields"
             >previous</a> |</li>
        <li><a href="index.html">WTForms v0.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009 by Thomas Johansson, James Crasta.
      Last updated on Oct 10, 2009.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.3.
    </div>
  </body>
</html>