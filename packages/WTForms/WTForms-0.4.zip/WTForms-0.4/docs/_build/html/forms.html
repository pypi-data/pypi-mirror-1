<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Forms &mdash; WTForms v0.4 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.4',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="WTForms v0.4 documentation" href="index.html" />
    <link rel="next" title="Fields" href="fields.html" />
    <link rel="prev" title="WTForms Documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="WTForms Documentation"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">WTForms v0.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-wtforms.form">
<h1>Forms<a class="headerlink" href="#module-wtforms.form" title="Permalink to this headline">¶</a></h1>
<p>Forms provide the highest level API in WTForms. They contain your field
definitions, delegate validation, take input, aggregate errors, and in
general function as the glue holding everything together.</p>
<div class="section" id="the-form-base-class">
<h2>The Form base class<a class="headerlink" href="#the-form-base-class" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="wtforms.form.Form">
<em class="property">class </em><tt class="descclassname">wtforms.form.</tt><tt class="descname">Form</tt><big>(</big><em>formdata=None</em>, <em>obj=None</em>, <em>prefix=''</em>, <em>idprefix=''</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#wtforms.form.Form" title="Permalink to this definition">¶</a></dt>
<dd><p>Form base class. Provides core behaviour like field construction,
validation, and data and error proxying.</p>
<p><strong>Properties</strong></p>
<dl class="attribute">
<dt id="wtforms.form.Form.data">
<tt class="descname">data</tt><a class="headerlink" href="#wtforms.form.Form.data" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict containing the data for each field.</p>
<p>Note that this is generated each time you access the property, so care
should be taken when using it, as it can potentially be very expensive
if you repeatedly access it. Typically used if you need to iterate all
data in the form. If you just need to access the data for known fields,
you should use <cite>form.&lt;field&gt;.data</cite>, not this proxy property.</p>
</dd></dl>

<dl class="attribute">
<dt id="wtforms.form.Form.errors">
<tt class="descname">errors</tt><a class="headerlink" href="#wtforms.form.Form.errors" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict containing a list of errors for each field. Empty if the form
hasn&#8217;t been validated, or there were no errors.</p>
<p>Note that this is a lazy property, and will only be generated when you
first access it. If you call <a title="wtforms.form.Form.validate" class="reference internal" href="#wtforms.form.Form.validate"><tt class="xref docutils literal"><span class="pre">validate()</span></tt></a> after accessing it, the
cached result will be invalidated and regenerated on next access.</p>
</dd></dl>

<p><strong>Methods</strong></p>
<dl class="method">
<dt id="wtforms.form.Form.validate">
<tt class="descname">validate</tt><big>(</big><big>)</big><a class="headerlink" href="#wtforms.form.Form.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates the form by calling <cite>validate</cite> on each field, passing any
extra <cite>Form.validate_&lt;fieldname&gt;</cite> validators to the field validator.</p>
<p>Returns <cite>True</cite> if no errors occur.</p>
</dd></dl>

<dl class="method">
<dt id="wtforms.form.Form.populate_obj">
<tt class="descname">populate_obj</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#wtforms.form.Form.populate_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Populates the attributes of the passed <cite>obj</cite> with data from the form&#8217;s
fields.</p>
<p><strong>Note:</strong> This is a destructive operation, any attribute with the same
name as a field will be overridden. Use with caution.</p>
<p>One common usage of this is an edit profile view:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">edit_profile</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">session</span><span class="p">[</span><span class="s">&#39;userid&#39;</span><span class="p">])</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">EditProfileForm</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span> <span class="ow">and</span> <span class="n">form</span><span class="o">.</span><span class="n">validate</span><span class="p">():</span>
        <span class="n">form</span><span class="o">.</span><span class="n">populate_obj</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">&#39;/home&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;edit_profile.html&#39;</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="n">form</span><span class="p">)</span>
</pre></div>
</div>
<p>In the above example, because the form isn&#8217;t directly tied to the user
object, you don&#8217;t have to worry about any dirty data getting onto there
until you&#8217;re ready to move it over.</p>
</dd></dl>

<dl class="method">
<dt id="wtforms.form.Form.__iter__">
<tt class="descname">__iter__</tt><big>(</big><big>)</big><a class="headerlink" href="#wtforms.form.Form.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate form fields in their order of definition on the form.</p>
<div class="highlight-django"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">field</span> <span class="k">in</span> <span class="nv">form</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;tr&gt;</span>
<span class="x">        &lt;th&gt;</span><span class="cp">{{</span> <span class="nv">field.label</span> <span class="cp">}}</span><span class="x">&lt;/th&gt;</span>
<span class="x">        &lt;td&gt;</span><span class="cp">{{</span> <span class="nv">field</span> <span class="cp">}}</span><span class="x">&lt;/td&gt;</span>
<span class="x">    &lt;/tr&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="wtforms.form.Form.__contains__">
<tt class="descname">__contains__</tt><big>(</big><em>item</em><big>)</big><a class="headerlink" href="#wtforms.form.Form.__contains__" title="Permalink to this definition">¶</a></dt>
<dd>Returns <cite>True</cite> if the named field is a member of this form.</dd></dl>

</dd></dl>

</div>
<div class="section" id="defining-forms">
<h2>Defining forms<a class="headerlink" href="#defining-forms" title="Permalink to this headline">¶</a></h2>
<p>To define a form, one makes a subclass of <a title="wtforms.form.Form" class="reference internal" href="#wtforms.form.Form"><tt class="xref docutils literal"><span class="pre">Form</span></tt></a> and defines the fields
declaratively as class attributes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">(</span><span class="s">u&#39;First Name&#39;</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">validators</span><span class="o">.</span><span class="n">required</span><span class="p">()])</span>
    <span class="n">last_name</span>  <span class="o">=</span> <span class="n">TextField</span><span class="p">(</span><span class="s">u&#39;Last Name&#39;</span><span class="p">,</span> <span class="n">validators</span><span class="o">=</span><span class="p">[</span><span class="n">validators</span><span class="o">.</span><span class="n">optional</span><span class="p">()])</span>
</pre></div>
</div>
<p>Field names can be any valid python identifier, with the following restrictions:</p>
<ul class="simple">
<li>Field names are case-sensitive.</li>
<li>Field names may not begin with &#8220;_&#8221; (underscore)</li>
<li>Field names may not begin with &#8220;validate&#8221;</li>
</ul>
<div class="section" id="form-inheritance">
<h3>Form Inheritance<a class="headerlink" href="#form-inheritance" title="Permalink to this headline">¶</a></h3>
<p>Forms may subclass other forms as needed.  The new form will contain all fields
of the parent form, as well as any new fields defined on the subclass.  A field
name re-used on a subclass causes the new definition to obscure the original.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">PastebinEdit</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">language</span> <span class="o">=</span> <span class="n">SelectField</span><span class="p">(</span><span class="s">u&#39;Programming Language&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="n">PASTEBIN_LANGUAGES</span><span class="p">)</span>
    <span class="n">code</span>     <span class="o">=</span> <span class="n">TextAreaField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">PastebinEntry</span><span class="p">(</span><span class="n">PastebinEdit</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">TextField</span><span class="p">(</span><span class="s">u&#39;User Name&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="in-line-validators">
<h3>In-line validators<a class="headerlink" href="#in-line-validators" title="Permalink to this headline">¶</a></h3>
<p>In order to provide custom validation for a single field without needing to
write a one-time-use validator, validation can be defined inline by defining a
method with the convention <cite>validate_fieldname</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SignupForm</span><span class="p">(</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">IntegerField</span><span class="p">(</span><span class="s">u&#39;Age&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">validate_age</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">field</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">data</span> <span class="o">&lt;</span> <span class="mi">13</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ValidationError</span><span class="p">(</span><span class="s">&quot;We&#39;re sorry, you must be 13 or older to register&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="using-forms">
<h2>Using forms<a class="headerlink" href="#using-forms" title="Permalink to this headline">¶</a></h2>
<p>A form is most often constructed in the controller code for handling an action,
with the form data wrapper from the framework passed to its constructor, and
optionally an ORM object.  The constructed form can then validate any input
data and generate errors if invalid.  The form object can then be passed along
to template code to render the form fields along with any errors which
occurred.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Forms</a><ul>
<li><a class="reference external" href="#the-form-base-class">The Form base class</a></li>
<li><a class="reference external" href="#defining-forms">Defining forms</a><ul>
<li><a class="reference external" href="#form-inheritance">Form Inheritance</a></li>
<li><a class="reference external" href="#in-line-validators">In-line validators</a></li>
</ul>
</li>
<li><a class="reference external" href="#using-forms">Using forms</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">WTForms Documentation</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="fields.html"
                                  title="next chapter">Fields</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/forms.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="WTForms Documentation"
             >previous</a> |</li>
        <li><a href="index.html">WTForms v0.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009 by Thomas Johansson, James Crasta.
      Last updated on Oct 10, 2009.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.3.
    </div>
  </body>
</html>