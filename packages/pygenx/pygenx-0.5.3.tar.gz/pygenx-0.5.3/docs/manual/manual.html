<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.3.3: http://docutils.sourceforge.net/" />
<title>Pygenx Manual</title>
<meta name="author" content="Michael Twomey" />
<meta name="copyright" content="Michael Twomey 2004" />
<meta name="date" content="2004-07-01 10:44:41.099026" />
<link rel="stylesheet" href="http://software.translucentcode.org/styles.css" type="text/css" />
</head>
<body>
<h1 class="title">Pygenx Manual</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Michael Twomey</td></tr>
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference" href="mailto:mick&#64;translucentcode.org">mick&#64;translucentcode.org</a></td></tr>
<tr><th class="docinfo-name">Copyright:</th>
<td>Michael Twomey 2004</td></tr>
<tr class="field"><th class="docinfo-name">license:</th><td class="field-body"><a class="reference" href="http://software.translucentcode.org/pygenx/LICENSE">http://software.translucentcode.org/pygenx/LICENSE</a> (MIT style)</td>
</tr>
<tr><th class="docinfo-name">Version:</th>
<td>0.5.3</td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>2004-07-01 10:44:41.099026</td></tr>
</tbody>
</table>
<div class="document" id="pygenx-manual">
<div class="contents topic" id="contents">
<p class="topic-title first"><a name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#overview" id="id1" name="id1">Overview</a></li>
<li><a class="reference" href="#installation" id="id2" name="id2">Installation</a></li>
<li><a class="reference" href="#basic-usage" id="id3" name="id3">Basic Usage</a></li>
<li><a class="reference" href="#more-advanced-usage" id="id4" name="id4">More Advanced Usage</a></li>
<li><a class="reference" href="#classes" id="id5" name="id5">Classes</a><ul>
<li><a class="reference" href="#genx-writer" id="id6" name="id6">genx.Writer</a><ul>
<li><a class="reference" href="#genx-writer-addattribute" id="id7" name="id7">genx.Writer.addAttribute</a></li>
<li><a class="reference" href="#genx-writer-addattributeliteral" id="id8" name="id8">genx.Writer.addAttributeLiteral</a></li>
<li><a class="reference" href="#genx-writer-addnamespace" id="id9" name="id9">genx.Writer.addNamespace</a></li>
<li><a class="reference" href="#genx-writer-addtext" id="id10" name="id10">genx.Writer.addText</a></li>
<li><a class="reference" href="#genx-writer-checktext" id="id11" name="id11">genx.Writer.checkText</a></li>
<li><a class="reference" href="#genx-writer-comment" id="id12" name="id12">genx.Writer.comment</a></li>
<li><a class="reference" href="#genx-writer-pi" id="id13" name="id13">genx.Writer.PI</a></li>
<li><a class="reference" href="#genx-writer-declareattribute" id="id14" name="id14">genx.Writer.declareAttribute</a></li>
<li><a class="reference" href="#genx-writer-declareelement" id="id15" name="id15">genx.Writer.declareElement</a></li>
<li><a class="reference" href="#genx-writer-declarenamespace" id="id16" name="id16">genx.Writer.declareNamespace</a></li>
<li><a class="reference" href="#genx-writer-enddocument" id="id17" name="id17">genx.Writer.endDocument</a></li>
<li><a class="reference" href="#genx-writer-endelement" id="id18" name="id18">genx.Writer.endElement</a></li>
<li><a class="reference" href="#genx-writer-scrubtext" id="id19" name="id19">genx.Writer.scrubText</a></li>
<li><a class="reference" href="#genx-writer-startdocfile" id="id20" name="id20">genx.Writer.startDocFile</a></li>
<li><a class="reference" href="#genx-writer-startelement" id="id21" name="id21">genx.Writer.startElement</a></li>
<li><a class="reference" href="#genx-writer-startelementliteral" id="id22" name="id22">genx.Writer.startElementLiteral</a></li>
<li><a class="reference" href="#genx-writer-unsetdefaultnamespace" id="id23" name="id23">genx.Writer.unsetDefaultNamespace</a></li>
</ul>
</li>
<li><a class="reference" href="#genx-attribute" id="id24" name="id24">genx.Attribute</a></li>
<li><a class="reference" href="#genx-element" id="id25" name="id25">genx.Element</a></li>
<li><a class="reference" href="#genx-namespace" id="id26" name="id26">genx.Namespace</a></li>
</ul>
</li>
<li><a class="reference" href="#functions" id="id27" name="id27">Functions</a><ul>
<li><a class="reference" href="#genx-get-version" id="id28" name="id28">genx.get_version</a></li>
</ul>
</li>
<li><a class="reference" href="#exceptions" id="id29" name="id29">Exceptions</a><ul>
<li><a class="reference" href="#genx-attributeindefaultnamespaceerror" id="id30" name="id30">genx.AttributeInDefaultNamespaceError</a></li>
<li><a class="reference" href="#genx-baddefaultdeclarationerror" id="id31" name="id31">genx.BadDefaultDeclarationError</a></li>
<li><a class="reference" href="#genx-badnameerror" id="id32" name="id32">genx.BadNameError</a></li>
<li><a class="reference" href="#genx-badnamespacenameerror" id="id33" name="id33">genx.BadNamespaceNameError</a></li>
<li><a class="reference" href="#genx-badutf8error" id="id34" name="id34">genx.BadUTF8Error</a></li>
<li><a class="reference" href="#genx-duplicateattributeerror" id="id35" name="id35">genx.DuplicateAttributeError</a></li>
<li><a class="reference" href="#genx-duplicatenamespaceerror" id="id36" name="id36">genx.DuplicateNamespaceError</a></li>
<li><a class="reference" href="#genx-duplicateprefixerror" id="id37" name="id37">genx.DuplicatePrefixError</a></li>
<li><a class="reference" href="#genx-genxerror" id="id38" name="id38">genx.GenxError</a></li>
<li><a class="reference" href="#genx-ioerror" id="id39" name="id39">genx.IOError</a></li>
<li><a class="reference" href="#genx-malformedpierror" id="id40" name="id40">genx.MalformedPIError</a></li>
<li><a class="reference" href="#genx-nonxmlcharactererror" id="id41" name="id41">genx.NonXMLCharacterError</a></li>
<li><a class="reference" href="#genx-sequenceerror" id="id42" name="id42">genx.SequenceError</a></li>
</ul>
</li>
<li><a class="reference" href="#developing-pygenx" id="id43" name="id43">Developing pygenx</a></li>
<li><a class="reference" href="#about-this-manual" id="id44" name="id44">About this manual</a></li>
</ul>
</div>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#id1" name="overview">Overview</a></h1>
<p><a class="reference" href="http://software.translucentcode.org/pygenx/">Pygenx</a> is a <a class="reference" href="http://www.python.org/">Python</a> wrapper for the <a class="reference" href="http://tbray.org/ongoing/When/200x/2004/02/20/GenxStatus">Genx</a> library. It is intended to
be a light weight way of generating correct, canonical XML with the
minimum of fuss.</p>
</div>
<div class="section" id="installation">
<h1><a class="toc-backref" href="#id2" name="installation">Installation</a></h1>
<p>Installation is done via the normal python distutils mechanism. After
downloading and unpacking the source tarball, pygenx can be installed
by following the following instructions:</p>
<pre class="literal-block">
$ cd pygenx-0.5.3
$ python setup.py build
$ sudo python setup.py install
</pre>
<p>If you aren't using sudo you need to perform the install step as root
(or if you are installing to a python which is writable, omit the
sudo altogether).</p>
</div>
<div class="section" id="basic-usage">
<h1><a class="toc-backref" href="#id3" name="basic-usage">Basic Usage</a></h1>
<p>Pygenx can be used for generating very trivial XML quite easily.</p>
<p>A simple example:</p>
<pre class="literal-block">
#!/usr/bin/env python

import genx

writer = genx.Writer()

fp = file(&quot;basic_example.xml&quot;, &quot;w&quot;)

writer.startDocFile(fp)

writer.startElementLiteral(&quot;example&quot;)
writer.addText(&quot;This is an example&quot;)
writer.endElement()

writer.endDocument()

</pre>
<p>When run this should produce output like the following:</p>
<pre class="literal-block">
&lt;example&gt;This is an example&lt;/example&gt;
</pre>
<p>In the above example a <a class="reference" href="#genx-writer">genx.Writer</a> object is being created, then
elements are started, text written, and elements closed, before the
document itself is closed.</p>
<p>This example restricts itself to using the
<a class="reference" href="#genx-writer-startelementliteral">genx.Writer.startElementLiteral</a></p>
</div>
<div class="section" id="more-advanced-usage">
<h1><a class="toc-backref" href="#id4" name="more-advanced-usage">More Advanced Usage</a></h1>
<p>Using <a class="reference" href="#genx-writer-startelementliteral">genx.Writer.startElementLiteral</a> is ok for simple cases, but
when you have multiple namespaces or many elements, it is both
inefficient and tedious to use. A better method is to pre-declare
namespaces, attributes and elements for later use. This allows genx
to perform in a more optimised manner.</p>
</div>
<div class="section" id="classes">
<h1><a class="toc-backref" href="#id5" name="classes">Classes</a></h1>
<div class="section" id="genx-writer">
<h2><a class="toc-backref" href="#id6" name="genx-writer">genx.Writer</a></h2>
<p>All pygenx operation centres around the <a class="reference" href="#genx-writer">genx.Writer</a> class, which
typically represents a single document, though there is nothing
stopping you creating a new document after you have finished working
on one. The only restriction with a Writer instance is that you work
on a single document at a time.</p>
<p>You could create a <a class="reference" href="#genx-writer">genx.Writer</a> instance and configure the various
namespaces and elements, then re-use it for different documents. This
reduces the overhead required when writing the documents.</p>
<div class="section" id="genx-writer-addattribute">
<h3><a class="toc-backref" href="#id7" name="genx-writer-addattribute">genx.Writer.addAttribute</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="#genx-attribute">genx.Attribute</a> attribute, <a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> value</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>This adds the given <a class="reference" href="#genx-attribute">genx.Attribute</a> object to the currently active
element.</p>
<p>A simple example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; attr = genx.declareAttribute(&quot;href&quot;)
&gt;&gt;&gt; fp = file(&quot;/tmp/text.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.startElementLiteral(&quot;a&quot;)
&gt;&gt;&gt; w.addAttribute(attr, &quot;http://example.com/&quot;)
&gt;&gt;&gt; w.endElement()
&gt;&gt;&gt; w.endDocument()
&gt;&gt;&gt;
</pre>
<p>This produces the following output:</p>
<pre class="literal-block">
&lt;a href=&quot;http://example.com/&quot;&gt;&lt;/a&gt;
</pre>
</div>
<div class="section" id="genx-writer-addattributeliteral">
<h3><a class="toc-backref" href="#id8" name="genx-writer-addattributeliteral">genx.Writer.addAttributeLiteral</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> name, <a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> value, <a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> namespace = <a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>This adds an attribute with the given name and value to the currently
active element. An optional namespace string can be passed in
too. This method is slower than using <a class="reference" href="#genx-writer-addattribute">genx.Writer.addAttribute</a>
with a defined <a class="reference" href="#genx-attribute">genx.Attribute</a> object.</p>
<p>Typical use:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; writer = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; writer.startDocFile(fp)
&gt;&gt;&gt; writer.startElementLiteral(&quot;elem&quot;)
&gt;&gt;&gt; writer.addAttributeLiteral(&quot;attr&quot;, &quot;value&quot;)
&gt;&gt;&gt; writer.endElement()
&gt;&gt;&gt; writer.endDocument()
&gt;&gt;&gt; 
</pre>
<p>And the content of test.xml:</p>
<pre class="literal-block">
&lt;elem attr=&quot;value&quot;&gt;&lt;/elem&gt;
</pre>
</div>
<div class="section" id="genx-writer-addnamespace">
<h3><a class="toc-backref" href="#id9" name="genx-writer-addnamespace">genx.Writer.addNamespace</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="#genx-namespace">genx.Namespace</a> namespace, <a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> prefix = <a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>Adds the given <a class="reference" href="#genx-namespace">genx.Namespace</a> object to the currently active
element, using an optional prefix.</p>
<p>A simple example with an element:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; writer = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; ns = writer.declareNamespace(&quot;http://example.com&quot;, &quot;foo&quot;)
&gt;&gt;&gt; writer.startDocFile(fp)
&gt;&gt;&gt; writer.startElementLiteral(&quot;elem&quot;)
&gt;&gt;&gt; writer.addNamespace(ns)
&gt;&gt;&gt; writer.endElement()
&gt;&gt;&gt; writer.endDocument()
&gt;&gt;&gt; 
</pre>
<p>And the output in test.xml:</p>
<pre class="literal-block">
&lt;elem xmlns:foo=&quot;http://example.com&quot;&gt;&lt;/elem&gt;
</pre>
</div>
<div class="section" id="genx-writer-addtext">
<h3><a class="toc-backref" href="#id10" name="genx-writer-addtext">genx.Writer.addText</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> text</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>Adds the specified text to the currently active element. The text
will be encoded as <a class="reference" href="http://www.utf-8.com/">UTF-8</a>, so ensure that the text has the correct
encoding (this can usually be achieved when reading in the string 
using the decode method, e.g. <tt class="literal"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">fp.read().decode('ISO-8859-1')</span></tt>).</p>
<p>Basic usage:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.startElementLiteral(&quot;elem&quot;)
&gt;&gt;&gt; w.addText(&quot;some text&quot;)
&gt;&gt;&gt; w.endElement()
&gt;&gt;&gt; w.endDocument()
&gt;&gt;&gt; 
</pre>
<p>The output:</p>
<pre class="literal-block">
&lt;elem&gt;some text&lt;/elem&gt;
</pre>
</div>
<div class="section" id="genx-writer-checktext">
<h3><a class="toc-backref" href="#id11" name="genx-writer-checktext">genx.Writer.checkText</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> text</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesnumeric.html#l2h-117">int</a> status</td>
</tr>
</tbody>
</table>
<p>This is a function for sanity checking strings. It checks to see if
the given string is valid UTF-8 and if it contains any invalid XML
characters.</p>
<p>The return codes are based on genx's error codes, currently I'm not
exposing these codes, so currently the three relevant return codes
are:</p>
<dl>
<dt>0</dt>
<dd>The text is ok.</dd>
<dt>1</dt>
<dd>The text is invalid UTF-8.</dd>
<dt>2</dt>
<dd>The text is invalid XML.</dd>
</dl>
<p>Simple usage:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; w.checkText(&quot;This is a plain string&quot;)
0
&gt;&gt;&gt; w.checkText(&quot;This is an invalid unicode string. \xff\x01&quot;)
1
&gt;&gt;&gt; w.checkText(&quot;This is an invalid XML string\x01&quot;)
2
&gt;&gt;&gt; 
</pre>
</div>
<div class="section" id="genx-writer-comment">
<h3><a class="toc-backref" href="#id12" name="genx-writer-comment">genx.Writer.comment</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> comment</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>This adds an XML comment (e.g. <tt class="literal"><span class="pre">&lt;!--</span> <span class="pre">my</span> <span class="pre">comment</span> <span class="pre">--&gt;</span></tt>) in the
generated XML.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.comment(&quot;A comment&quot;) 
&gt;&gt;&gt; w.startElementLiteral(&quot;elem&quot;)
&gt;&gt;&gt; w.comment(&quot;Another comment&quot;)
&gt;&gt;&gt; w.endElement()
&gt;&gt;&gt; w.endDocument()
&gt;&gt;&gt; 
</pre>
<p>test.xml:</p>
<pre class="literal-block">
&lt;!--A comment--&gt;
&lt;elem&gt;&lt;!--Another comment--&gt;&lt;/elem&gt;
</pre>
</div>
<div class="section" id="genx-writer-pi">
<h3><a class="toc-backref" href="#id13" name="genx-writer-pi">genx.Writer.PI</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> target, <a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> text</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>Adds an XML Processing Instruction (e.g. <tt class="literal"><span class="pre">&lt;?foo</span> <span class="pre">bar?&gt;</span></tt>) to the file.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.PI(&quot;foo&quot;, &quot;bar&quot;)
&gt;&gt;&gt; w.startElementLiteral(&quot;elem&quot;)
&gt;&gt;&gt; w.endElement()
&gt;&gt;&gt; w.endDocument()
&gt;&gt;&gt; 
</pre>
<p>Produces:</p>
<pre class="literal-block">
&lt;?foo bar?&gt;
&lt;elem&gt;&lt;/elem&gt;
</pre>
</div>
<div class="section" id="genx-writer-declareattribute">
<h3><a class="toc-backref" href="#id14" name="genx-writer-declareattribute">genx.Writer.declareAttribute</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> name, <a class="reference" href="#genx-namespace">genx.Namespace</a> namespace = None</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="#genx-attribute">genx.Attribute</a></td>
</tr>
</tbody>
</table>
<p>This creates a <a class="reference" href="#genx-attribute">genx.Attribute</a> object with the given name, and an
optional <a class="reference" href="#genx-namespace">genx.Namespace</a> object. This object can then be used with
<a class="reference" href="#genx-writer-addattribute">genx.Writer.addAttribute</a> calls to add attributes to the current
document.</p>
<p>A simple example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; attr = w.declareAttribute(&quot;attr&quot;)
&gt;&gt;&gt; ns = w.declareNamespace(&quot;http://example.com/ns&quot;)
&gt;&gt;&gt; attr2 = w.declareAttribute(&quot;attr2&quot;, ns)
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-writer-declareelement">
<h3><a class="toc-backref" href="#id15" name="genx-writer-declareelement">genx.Writer.declareElement</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> name, <a class="reference" href="#genx-namespace">genx.Namespace</a> namespace = None</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="#genx-element">genx.Element</a></td>
</tr>
</tbody>
</table>
<p>Declare a new element, using the optional <a class="reference" href="#genx-namespace">genx.Namespace</a> object.</p>
<p>A trivial example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; writer = genx.Writer()
&gt;&gt;&gt; elem = writer.declareElement(&quot;element&quot;)
&gt;&gt;&gt; ns = writer.declareNamespace(&quot;http://example.com/ns&quot;)
&gt;&gt;&gt; elem_with_ns = writer.declareElement(&quot;anotherelem&quot;, ns)
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-writer-declarenamespace">
<h3><a class="toc-backref" href="#id16" name="genx-writer-declarenamespace">genx.Writer.declareNamespace</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> uri, <a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> prefix = None</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="#genx-namespace">genx.Namespace</a></td>
</tr>
</tbody>
</table>
<p>Declare a new <a class="reference" href="#genx-namespace">genx.Namespace</a> object, using the given namespace URI
and an optional prefix. Use a prefix of <tt class="literal"><span class="pre">&quot;&quot;</span></tt> to declare the the
default namespace.</p>
<p>A simple example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; ns = w.declareNamespace(&quot;http://example.com/ns&quot;)
&gt;&gt;&gt; ns2 = w.declareNamespace(&quot;http://example.com/ns2&quot;, &quot;myprefix&quot;)
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-writer-enddocument">
<h3><a class="toc-backref" href="#id17" name="genx-writer-enddocument">genx.Writer.endDocument</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body">none</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>Finish writing the current document. When this is called all the
elements should have been previously closed using
<a class="reference" href="#genx-writer-endelement">genx.Writer.endElement</a> calls. After this is called the
<a class="reference" href="#genx-writer">genx.Writer</a> instance can be re-used with another file.</p>
<p>An example of re-using a <a class="reference" href="#genx-writer">genx.Writer</a> instance:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; elem = w.declareElement(&quot;elem&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.startElement(elem)
&gt;&gt;&gt; w.endElement() 
&gt;&gt;&gt; w.endDocument()
&gt;&gt;&gt; fp2 = file(&quot;/tmp/test2.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp2)
&gt;&gt;&gt; w.startElement(elem)
&gt;&gt;&gt; w.startElement(elem)
&gt;&gt;&gt; w.endElement()
&gt;&gt;&gt; w.endElement()
&gt;&gt;&gt; w.endDocument()
&gt;&gt;&gt; 
</pre>
<p>The content of test.xml:</p>
<pre class="literal-block">
&lt;elem&gt;&lt;/elem&gt;
</pre>
<p>The content of test2.xml:</p>
<pre class="literal-block">
&lt;elem&gt;&lt;elem&gt;&lt;/elem&gt;&lt;/elem&gt;
</pre>
</div>
<div class="section" id="genx-writer-endelement">
<h3><a class="toc-backref" href="#id18" name="genx-writer-endelement">genx.Writer.endElement</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body">none</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>Finish writing the current element. This needs to be called to close
each corresponding element created with <a class="reference" href="#genx-writer-startelement">genx.Writer.startElement</a> or
<a class="reference" href="#genx-writer-startelementliteral">genx.Writer.startElementLiteral</a> calls.</p>
</div>
<div class="section" id="genx-writer-scrubtext">
<h3><a class="toc-backref" href="#id19" name="genx-writer-scrubtext">genx.Writer.scrubText</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> text</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a></td>
</tr>
</tbody>
</table>
<p>This silently scrubs any invalid characters out of the given string.</p>
<p>A simple example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; writer = genx.Writer()
&gt;&gt;&gt; writer.scrubText(&quot;A string&quot;)
'A string'
&gt;&gt;&gt; writer.scrubText(&quot;A string |\x01|&quot;)
'A string ||'
&gt;&gt;&gt; 
</pre>
</div>
<div class="section" id="genx-writer-startdocfile">
<h3><a class="toc-backref" href="#id20" name="genx-writer-startdocfile">genx.Writer.startDocFile</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/bltin-file-objects.html#l2h-229">File</a> file</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>This starts a new document using the given <a class="reference" href="http://docs.python.org/lib/bltin-file-objects.html#l2h-229">File</a> object. It should
be called only once for each document. If called again on an active
document you will get a <a class="reference" href="#genx-sequenceerror">genx.SequenceError</a>.</p>
<div class="note">
<p class="admonition-title first">Note</p>
<p>The file object passed in should either be a standard python
<a class="reference" href="http://docs.python.org/lib/bltin-file-objects.html#l2h-229">File</a> object, in which case the C FILE pointer it contains will
be passed to genx's genxStartDocFile.</p>
<p>If the object passed in is a normal python object, then it must
have a <cite>write</cite> method and a <cite>flush</cite> method, which perform buffer
style operations. An example of this object would be
<a class="reference" href="http://docs.python.org/lib/module-StringIO.html">StringIO.StringIO</a>.</p>
</div>
</div>
<div class="section" id="genx-writer-startelement">
<h3><a class="toc-backref" href="#id21" name="genx-writer-startelement">genx.Writer.startElement</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="#genx-element">genx.Element</a></td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>Starts a new XML element using the given <a class="reference" href="#genx-element">genx.Element</a> object. This
is the preferred way to write elements into an XML document, as it is
faster to re-use premade <a class="reference" href="#genx-element">genx.Element</a> objects than to use
<a class="reference" href="#genx-writer-startelementliteral">genx.Writer.startElementLiteral</a> calls.</p>
<p>A simple example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; elem = w.declareElement(&quot;foo&quot;)
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.startElement(elem)
&gt;&gt;&gt; w.endElement()
&gt;&gt;&gt; w.endDocument()
&gt;&gt;&gt;
</pre>
<p>This writes:</p>
<pre class="literal-block">
&lt;foo&gt;&lt;/foo&gt;
</pre>
</div>
<div class="section" id="genx-writer-startelementliteral">
<h3><a class="toc-backref" href="#id22" name="genx-writer-startelementliteral">genx.Writer.startElementLiteral</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> name, <a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a> namespace = None</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>Starts a new XML element with the given name and an optional
namespace URI string. This is the most straight forward way to create
elements, but it isn't the fastest, and can get unwieldy when
compared to <a class="reference" href="#genx-writer-startelement">genx.Writer.startElement</a>.</p>
<p>A variation of the example in <a class="reference" href="#genx-writer-startelement">genx.Writer.startElement</a>:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.startElementLiteral(&quot;foo&quot;)
&gt;&gt;&gt; w.endElement()
&gt;&gt;&gt; w.endDocument()
&gt;&gt;&gt;
</pre>
<p>This writes:</p>
<pre class="literal-block">
&lt;foo&gt;&lt;/foo&gt;
</pre>
</div>
<div class="section" id="genx-writer-unsetdefaultnamespace">
<h3><a class="toc-backref" href="#id23" name="genx-writer-unsetdefaultnamespace">genx.Writer.unsetDefaultNamespace</a></h3>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body">none</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/node34.html#l2h-320">None</a></td>
</tr>
</tbody>
</table>
<p>This clears the default namespace declaration. This is slightly
tricky to explain, probably easier to demonstrate.</p>
<pre class="literal-block">
#!/usr/bin/env python

import genx

w = genx.Writer()
nsdef = w.declareNamespace(&quot;http://default&quot;, &quot;&quot;)
nspref = w.declareNamespace(&quot;http://pref&quot;, &quot;pref&quot;)
e = w.declareElement(&quot;e&quot;)
edef = w.declareElement(&quot;edef&quot;, nsdef)
epref = w.declareElement(&quot;epref&quot;, nspref)

fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
w.startDocFile(fp)
w.startElement(edef)
w.addNamespace(nspref)
w.startElement(e)
w.endElement()
w.startElement(epref)
w.unsetDefaultNamespace()
w.startElement(e)
w.endElement()
w.endElement()
w.endElement()
w.endDocument()

fp2 = file(&quot;/tmp/test2.xml&quot;, &quot;w&quot;)
w.startDocFile(fp2)
w.startElement(edef)
w.addNamespace(nspref)
w.startElement(e)
w.endElement()
w.startElement(epref)
#w.unsetDefaultNamespace()
w.startElement(e)
w.endElement()
w.endElement()
w.endElement()
w.endDocument()

</pre>
<p>Using xmllint and diff to compare the outputs:</p>
<pre class="literal-block">
$ xmllint --format /tmp/test2.xml &gt;test2.xml
$ xmllint --format /tmp/test.xml &gt;test.xml
$ diff -u test.xml test2.xml 
--- test.xml    2004-05-31 23:44:50.000000000 +0100
+++ test2.xml   2004-05-31 23:44:45.000000000 +0100
&#64;&#64; -1,7 +1,7 &#64;&#64;
 &lt;?xml version=&quot;1.0&quot;?&gt;
 &lt;edef xmlns=&quot;http://default&quot; xmlns:pref=&quot;http://pref&quot;&gt;
   &lt;e xmlns=&quot;&quot;/&gt;
-  &lt;pref:epref xmlns=&quot;&quot;&gt;
-    &lt;e/&gt;
+  &lt;pref:epref&gt;
+    &lt;e xmlns=&quot;&quot;/&gt;
   &lt;/pref:epref&gt;
 &lt;/edef&gt;
</pre>
<p>The lines with the - characters in front of them represent text.xml
(with the unsetDefaultNamespace call) and the lines with the +
character in front represent test2.xml (without the call). As you can
see the unsetDefaultNamespace call forcibly resets the namespace.</p>
</div>
</div>
<div class="section" id="genx-attribute">
<h2><a class="toc-backref" href="#id24" name="genx-attribute">genx.Attribute</a></h2>
<p>This represents an XML attribute, which can be attached to any
<a class="reference" href="#genx-element">genx.Element</a>. This is created using
<a class="reference" href="#genx-writer-declareattribute">genx.Writer.declareAttribute</a>.</p>
</div>
<div class="section" id="genx-element">
<h2><a class="toc-backref" href="#id25" name="genx-element">genx.Element</a></h2>
<p>This represents an XML element, which can be used with
<a class="reference" href="#genx-writer-startelement">genx.Writer.startElement</a>. This is created using
<a class="reference" href="#genx-writer-declareelement">genx.Writer.declareElement</a>.</p>
</div>
<div class="section" id="genx-namespace">
<h2><a class="toc-backref" href="#id26" name="genx-namespace">genx.Namespace</a></h2>
<p>This represents an XML namespace, which can be used with
<a class="reference" href="#genx-element">genx.Element</a> and <a class="reference" href="#genx-attribute">genx.Attribute</a> objects. This is created using
<a class="reference" href="#genx-writer-declarenamespace">genx.Writer.declareNamespace</a>.</p>
</div>
</div>
<div class="section" id="functions">
<h1><a class="toc-backref" href="#id27" name="functions">Functions</a></h1>
<div class="section" id="genx-get-version">
<h2><a class="toc-backref" href="#id28" name="genx-get-version">genx.get_version</a></h2>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">params:</th><td class="field-body">none</td>
</tr>
<tr class="field"><th class="field-name">returns:</th><td class="field-body"><a class="reference" href="http://docs.python.org/lib/typesseq.html#l2h-153">String</a></td>
</tr>
</tbody>
</table>
<p>This returns the version of genx as reported by genx's
<a class="reference" href="http://tbray.org/ongoing/genx/docs/Guide.html#genxGetVersion">genxGetVersion</a> function.</p>
</div>
</div>
<div class="section" id="exceptions">
<h1><a class="toc-backref" href="#id29" name="exceptions">Exceptions</a></h1>
<p>These are normally thrown based on the status codes genx returns.</p>
<div class="section" id="genx-attributeindefaultnamespaceerror">
<h2><a class="toc-backref" href="#id30" name="genx-attributeindefaultnamespaceerror">genx.AttributeInDefaultNamespaceError</a></h2>
<p>This occurs when an attribute is declared or used in the default
namespace.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; ns = w.declareNamespace(&quot;http://example.com/ns&quot;, &quot;&quot;)
&gt;&gt;&gt; a = w.declareAttribute(&quot;a&quot;, ns)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 537, in _genx.Writer.declareAttribute
  File &quot;_genx.pyx&quot;, line 454, in _genx.Writer.__checkStatus
_genx.AttributeInDefaultNamespaceError: \
'Attribute cannot be in default namespace'
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-baddefaultdeclarationerror">
<h2><a class="toc-backref" href="#id31" name="genx-baddefaultdeclarationerror">genx.BadDefaultDeclarationError</a></h2>
<p>Can't say it better than Tim:</p>
<blockquote>
You tried to declare some namespace to be the default on an element
which is in no namespace.</blockquote>
<p>To trigger this:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/text.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; ns = w.declareNamespace(&quot;http://example.com/ns&quot;, &quot;&quot;)
&gt;&gt;&gt; elem = w.declareElement(&quot;elem&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.startElement(elem)
&gt;&gt;&gt; w.addNamespace(ns)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 414, in _genx.Writer.addNamespace
  File &quot;_genx.pyx&quot;, line 468, in _genx.Writer.__checkStatus
_genx.BadDefaultDeclarationError: \
'Declared a default namespace on an element which is in no namespace'
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-badnameerror">
<h2><a class="toc-backref" href="#id32" name="genx-badnameerror">genx.BadNameError</a></h2>
<p>This occurs when an invalid XML name is used.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; w.startElementLiteral(&quot;&lt;foo&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 373, in _genx.Writer.startElementLiteral
  File &quot;_genx.pyx&quot;, line 450, in _genx.Writer.__checkStatus
_genx.BadNameError: 'Bad NAME'
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-badnamespacenameerror">
<h2><a class="toc-backref" href="#id33" name="genx-badnamespacenameerror">genx.BadNamespaceNameError</a></h2>
<p>This is raised when you try to declare a <a class="reference" href="#genx-namespace">genx.Namespace</a> using None
or an empty string.</p>
<p>Some examples:</p>
<pre class="doctest-block">
&gt;&gt;&gt; w.declareNamespace(&quot;&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 490, in _genx.Writer.declareNamespace
  File &quot;_genx.pyx&quot;, line 446, in _genx.Writer.__checkStatus
_genx.BadNamespaceNameError: 'Bad namespace name'
&gt;&gt;&gt; w.declareNamespace(None)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 479, in _genx.Writer.declareNamespace
_genx.BadNamespaceNameError: None is an invalid namespace
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-badutf8error">
<h2><a class="toc-backref" href="#id34" name="genx-badutf8error">genx.BadUTF8Error</a></h2>
<p>This is raised when invalid UTF-8 is passed to a genx call. However
it is unlikely that this will get raised, with python raising it's
own encoding errors before genx is reached.</p>
</div>
<div class="section" id="genx-duplicateattributeerror">
<h2><a class="toc-backref" href="#id35" name="genx-duplicateattributeerror">genx.DuplicateAttributeError</a></h2>
<p>This happens when you try to add an attribute with the same name to
an element more than once.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; w.addAttributeLiteral(&quot;a&quot;, &quot;foo&quot;)
&gt;&gt;&gt; w.addAttributeLiteral(&quot;a&quot;, &quot;foo&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 437, in _genx.Writer.addAttributeLiteral
  File &quot;_genx.pyx&quot;, line 456, in _genx.Writer.__checkStatus
_genx.DuplicateAttributeError: 'Same attribute specified more than once'
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-duplicatenamespaceerror">
<h2><a class="toc-backref" href="#id36" name="genx-duplicatenamespaceerror">genx.DuplicateNamespaceError</a></h2>
<p>This occurs when you add the same namespace to an element more than once.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; ns2 = w.declareNamepsace(&quot;http://example.com/2&quot;, &quot;ns2&quot;)
&gt;&gt;&gt; w.addNamespace(ns2)
&gt;&gt;&gt; ns3 = w.declareNamespace(&quot;http://example.com/2&quot;, &quot;ns3&quot;)
&gt;&gt;&gt; w.addNamespace(ns3)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 414, in _genx.Writer.addNamespace
  File &quot;_genx.pyx&quot;, line 466, in _genx.Writer.__checkStatus
_genx.DuplicateNamespaceError: \
'Declared namespace twice with different prefixes on one element.'
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-duplicateprefixerror">
<h2><a class="toc-backref" href="#id37" name="genx-duplicateprefixerror">genx.DuplicatePrefixError</a></h2>
<p>This is raised when two namespaces are declared with the same prefix.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; ns1 = w.declareNamespace(&quot;http://example.com/ns1&quot;, &quot;ns1&quot;)
&gt;&gt;&gt; ns2 = w.declareNamespace(&quot;http://example.com/ns2&quot;, &quot;ns1&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 490, in _genx.Writer.declareNamespace
  File &quot;_genx.pyx&quot;, line 448, in _genx.Writer.__checkStatus
_genx.DuplicatePrefixError: 'Duplicate prefix'
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-genxerror">
<h2><a class="toc-backref" href="#id38" name="genx-genxerror">genx.GenxError</a></h2>
<p>This is a catch all error, if after checking the various error codes
genx returns pygenx can't find a matching exception this is raised
with the error string included.</p>
</div>
<div class="section" id="genx-ioerror">
<h2><a class="toc-backref" href="#id39" name="genx-ioerror">genx.IOError</a></h2>
<p>This usually occurs when genx has problems writing to the file, the
most common cause is some other part of the python code closing the
file object.</p>
<p>A typical example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/test.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; fp.close()
&gt;&gt;&gt; w.startElementLiteral(&quot;example&quot;)
&gt;&gt;&gt; w.addText(&quot;foo&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 379, in _genx.Writer.addText
  File &quot;_genx.pyx&quot;, line 458, in _genx.Writer.__checkStatus
_genx.IOError: 'I/O error'
&gt;&gt;&gt;  
</pre>
<p>In the above example the exception isn't raised until the
<a class="reference" href="#genx-writer-addtext">genx.Writer.addText</a> call as genx hasn't tried writing to the file
yet, it only does so when the addText call is made.</p>
</div>
<div class="section" id="genx-malformedpierror">
<h2><a class="toc-backref" href="#id40" name="genx-malformedpierror">genx.MalformedPIError</a></h2>
<p>This is raised when an invalid string is passed to <a class="reference" href="#genx-writer-pi">genx.Writer.PI</a>,
usually when there is a &quot;?&gt;&quot; in the string.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; writer.PI(&quot;foo&quot;, &quot;bar?&gt;&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 391, in _genx.Writer.PI
  File &quot;_genx.pyx&quot;, line 464, in _genx.Writer.__checkStatus
_genx.MalformedPIError: '?&gt; in PI'
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-nonxmlcharactererror">
<h2><a class="toc-backref" href="#id41" name="genx-nonxmlcharactererror">genx.NonXMLCharacterError</a></h2>
<p>This is raised when a character which violates the XML 1.0 Character
rules is passed into genx. The string can be perfectly valid UTF-8
but still be invalid XML.</p>
<p>For example:</p>
<pre class="doctest-block">
&gt;&gt;&gt; w.addAttributeLiteral(&quot;bar&quot;, &quot;text \x01&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 437, in _genx.Writer.addAttributeLiteral
  File &quot;_genx.pyx&quot;, line 460, in _genx.Writer.__checkStatus
_genx.NonXMLCharacterError: 'Non XML Character'
&gt;&gt;&gt;
</pre>
</div>
<div class="section" id="genx-sequenceerror">
<h2><a class="toc-backref" href="#id42" name="genx-sequenceerror">genx.SequenceError</a></h2>
<p>This is the most commonly seen error, it occurs when a calls are made
in an incorrect order.</p>
<p>For example, this code closes the document before closing the
element:</p>
<pre class="doctest-block">
&gt;&gt;&gt; import genx
&gt;&gt;&gt; w = genx.Writer()
&gt;&gt;&gt; fp = file(&quot;/tmp/text.xml&quot;, &quot;w&quot;)
&gt;&gt;&gt; w.startDocFile(fp)
&gt;&gt;&gt; w.startElementLiteral(&quot;foo&quot;)
&gt;&gt;&gt; w.endDocument()
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in ?
  File &quot;_genx.pyx&quot;, line 424, in _genx.Writer.endDocument
  File &quot;_genx.pyx&quot;, line 452, in _genx.Writer.__checkStatus
_genx.SequenceError: 'Call out of sequence'
&gt;&gt;&gt;
</pre>
</div>
</div>
<div class="section" id="developing-pygenx">
<h1><a class="toc-backref" href="#id43" name="developing-pygenx">Developing pygenx</a></h1>
<p>Pygenx is written as a <a class="reference" href="http://www.cosc.canterbury.ac.nz/~greg/python/Pyrex/">Pyrex</a> wrapper to <a class="reference" href="http://tbray.org/ongoing/When/200x/2004/02/20/GenxStatus">Genx</a>. It is kept under
source control with <a class="reference" href="http://www.gnuarch.org/">GNU Arch</a> and built using <a class="reference" href="http://www.scons.org/">Scons</a> (the
distribution is built using plain distutils, the development is built
using scons).</p>
</div>
<div class="section" id="about-this-manual">
<h1><a class="toc-backref" href="#id44" name="about-this-manual">About this manual</a></h1>
<p>This manual is written in restructured text, and converted to HTML
using <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a>. Docutils has proven to be a joy to use, especially
for python programming, I'd recommend it to anyone.</p>
<!-- Python references -->
<!-- arch-tag: docs/manual/manual.txt by Michael Twomey  (23:43 May 30 2004) -->
</div>
</div>
</body>
</html>
