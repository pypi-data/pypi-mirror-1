<html>
<head>
<title> Components/pydoc/Kamaelia.Util.RateChunker </title>

<style>
a {
    text-decoration: none;
}
*.thinborder {
    border-style: solid;
    border-width: thin;
}
.boxright {
    float: right;
    width: 20em;
    padding: 0.5em;
    margin: 1em;
    clear: right;
    border: 1px solid;
    text-align: left;
}
.leftbar {
    float: left;
    width: 10em;
    padding-left: 1.0em;
    padding-right: 0.5em;
    padding-top: 0em;
    margin-top: 0em;
    margin-bottom: 1em;
    margin-left: 0em;
    margin-right: 1em;
    clear: left;
    text-align: left;
}
.boxleft{
    float: left;
    width: 9.5em;
    padding-top: 0.5em;
    padding-bottom: 0.5em;
    padding-left: 1.0em;
    padding-right: 1.0em;
    margin-top: 1em;
    margin-bottom: 1em;
    margin-left: 0em;
    margin-right: 1em;
    clear: left;
    border-top: 5px solid;
    border-bottom: 5px solid;
    text-align: left;
}
.none { width: 100%;
        clear: both;
}

.subsection { }
.sectionheader {
                 text-align: center;
                 font-weight: bold;
                 padding-bottom: 1em;
               }
.sectioncontent { font-size: 0.9em;
                  margin-left: 2em;
                  line-height: 1.5;
                  text-align: left;
                }
.verticaldivider { float: bottom;
                   width: 100%;
                 }

 .rbroundbox_green { background: url(/t/green.corners-top.png) repeat-x; 
               width: 50%;
               float: right;
               }
 .rbtop_green div { background: url(/t/green.corners-topleft.png) no-repeat top left; }
 .rbtop_green { background: url(/t/green.corners-topright.png) no-repeat top right; }

 .rbcontent_green div { background: url(/t/green.corners-right.png) repeat-y right; 
                }
 .rbcontent_green { background: url(/t/green.corners-left.png) repeat-y left; 
              padding-left: 1.5em;
            }

 .rbbot_green div { background: url(/t/green.corners-bottomleft.png) no-repeat bottom left; }
 .rbbot_green { background: url(/t/green.corners-bottomright.png) no-repeat bottom right; }
 .rbbottom_green { background: url(/t/green.corners-bottom.png) repeat-x; }
 .rbtop_green div, .rbtop_green, .rbbot_green div, .rbbot_green {
 width: 100%;
 height: 23px;
 font-size: 1px;
 }
body {
   text-align: justify;
}

.sidebar {
    width: 10em;
    float: left;
    padding-left: 1em;
    padding-right: 1em;

}
.bodytext {

    margin: 0 5em 0em 5em;
    float: auto;
    padding-left: 1em;
    padding-right: 1em;
}
.topnav {
    padding-top: 0em;
    margin-top: 0em;
    float: right;
}
</style>

</head>
<body style="font-size: 10pt; font-family: verdana,arial,helvetica,sans-serif; line-height: 1.8;">
</div>

</span></p>
<div class="bodytext">
<html>
<head>
<title>Kamaelia docs : Kamaelia.Util.RateChunker</title>
<style type="test/css">
pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }
</style>
</head>
<body>
<div class="container">
<div class="section">
<h1><a class="reference" href="Kamaelia.html">Kamaelia</a>.<a class="reference" href="Kamaelia.Util.html">Util</a>.<a class="reference" href="Kamaelia.Util.RateChunker.html">RateChunker</a></h1>
</div>
<div class="section">
<div class="container">
<ul class="simple">
<li><strong>component <a class="reference" href="Kamaelia.Util.RateChunker.RateChunker.html">RateChunker</a></strong></li>
</ul>
</div>
<ul class="simple">
<li><a class="reference" href="#235">Breaks data into chunks matching a required chunk rate</a><ul>
<li><a class="reference" href="#236">Example Usage</a><ul>
</ul>
</li>
<li><a class="reference" href="#237">Behaviour</a><ul>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section">
<h1 id="235">Breaks data into chunks matching a required chunk rate</h1>
<p>Send data, such as binary strings to this component and it will break it down
to roughly constant sized chunks, to match a required 'rate' of chunk emission.</p>
<p>This is not about 'real time' chunking of a live data source, but is instead
about precisely chunking data that you know has been generated, or will be
consumed, at a particular rate.</p>
<p>You specify the 'rate' of the incoming data and the rate you want chunks
sent out at. RateChunker will determine what size the chunks need to be,
applying dynamic rounding to precisely match the rate without drift over time.</p>
<div class="section">
<h2 id="236"><a id="example-usage" name="example-usage">Example Usage</a></h2>
<p>Chunking a stream of 48KHz 16bit stereo audio into 25 chunks per second of audio
data (one chunk for each frame of a corresponding piece of 25fps video):</p>
<pre class="literal-block">
bps = bytesPerSample = 2*2

Pipeline( AudioSource(),
          RateChunker(datarate=48000*bps, quantasize=bps, chunkrate=25),
          ...
        )
</pre>
<p>The quanta size ensures that the chunks RateChunker sends out always contain a
whole number of samples (4 bytes per sample).</p>
</div>
<div class="section">
<h2 id="237"><a id="behaviour" name="behaviour">Behaviour</a></h2>
<p>At initialisation, specify:</p>
<blockquote>
<ul class="simple">
<li>the rate of the incoming data (eg. bytes/second)</li>
<li>the required rate of outgoing chunks of data</li>
<li>the minimum quanta size (see below)</li>
</ul>
</blockquote>
<p>Send slicable data items, such as strings containing binary data to the &quot;inbox&quot;
inbox. The same data is sent out of the &quot;outbox&quot; outbox, rechunked to meet the
required chunk rate.</p>
<p>The outgoing chunk sizes are dynamically varied to match the required chunk rate
as accurately as possible. The quantasize parameter dictates the minimum unit by
which the chunksize will be varied.</p>
<p>For example, for 16bit stereo audio data, there are 4 bytes per sample, so
a quantasize of 4 should be specified, to make sure samples remain whole.</p>
<p>If a producerFinished or shutdownMicroprocess message is received on the
&quot;control&quot; inbox. It is immediately sent on out of the &quot;signal&quot; outbox and the
component then immediately terminates.</p>
</div>
</div>
<hr class="docutils" />
<div class="section">
<h1><a class="reference" href="Kamaelia.html">Kamaelia</a>.<a class="reference" href="Kamaelia.Util.html">Util</a>.<a class="reference" href="Kamaelia.Util.RateChunker.html">RateChunker</a>.<a class="reference" href="Kamaelia.Util.RateChunker.RateChunker.html">RateChunker</a></h1>
<div class="section">
<h2 id="symbol-RateChunker">class RateChunker(<a class="reference" href="Axon.Component.component.html">Axon.Component.component</a>)</h2>
<p>RateChunker(datarate,quantasize,chunkrate) -&gt; new Chunk component.</p>
<p>Alters the chunksize of incoming data to match a desired chunkrate.</p>
<p>Keyword arguments:</p>
<ul class="simple">
<li>datarate    -- rate of the incoming data</li>
<li>quantasize  -- minimum granularity with which the data can be split</li>
<li>chunkrate   -- desired chunk rate</li>
</ul>
<div class="section">
<h3><a id="symbol-RateChunker.Inboxes" name="symbol-RateChunker.Inboxes">Inboxes</a></h3>
<ul class="simple">
<li><strong>control</strong> : Shutdown signalling</li>
<li><strong>inbox</strong> : Data items</li>
</ul>
</div>
<div class="section">
<h3><a id="symbol-RateChunker.Outboxes" name="symbol-RateChunker.Outboxes">Outboxes</a></h3>
<ul class="simple">
<li><strong>outbox</strong> : Rechunked data items</li>
<li><strong>signal</strong> : Shutdown signalling</li>
</ul>
</div>
<div class="section">
<h3>Methods defined here</h3>
<div class="container">
</div>
<div class="section">
<h4><a id="symbol-RateChunker.__init__" name="symbol-RateChunker.__init__">__init__(self, datarate, quantasize, chunkrate)</a></h4>
<p>x.__init__(...) initializes x; see x.__class__.__doc__ for signature</p>
</div>
<div class="section">
<h4><a id="symbol-RateChunker.checkShutdown" name="symbol-RateChunker.checkShutdown">checkShutdown(self)</a></h4>
</div>
<div class="section">
<h4><a id="symbol-RateChunker.main" name="symbol-RateChunker.main">main(self)</a></h4>
<p>Main loop</p>
</div>
</div>
<div class="section">
</div>
</div>
</div>
</div>





<div class="section">
<h1>Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer?
Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback
<a class="reference" href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701">here</a>
in reply to the documentation thread in the Kamaelia blog.</p>
</div>


<p><i>-- Automatic documentation generator, 19 Oct 2008 at 14:29:09 UTC/GMT</i>
</body></html>


</div>
<div style="float: left; width: 5em; text-align: center"><img src='/Kamaelia.gif'></div>
<div class="bodytext">
This is a page from the Kamaelia website. You can find the original here:
<ul><li><a href="http://www.kamaelia.org/Components/pydoc/Kamaelia.Util.RateChunker.html">
http://www.kamaelia.org/Components/pydoc/Kamaelia.Util.RateChunker
</a></ul>

</div>
</body>
</html>
