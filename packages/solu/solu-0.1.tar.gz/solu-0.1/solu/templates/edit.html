##
## The Open Software License 3.0
##
## Copyright (c) 2008 Heikki Toivonen <My first name at heikkitoivonen.net>
##
<%inherit file="/base.html" />

<%def name="subtitle()">${resource.name|h}</%def>

<fieldset>
<legend>Edit</legend>

<form action="" method="post">

<p class="mandatory">
<label for="name">Name:</label>
<input type="text" name="name" size="50" maxsize="255" value="${resource.name|h}"></input>
</p>

<p>
<label for="email">Email:</label>
<input type="text" name="email" size="50" maxsize="255" value="${resource.email|h}"></input>
</p>

<p><label for="im">IM:</label>
<input type="text" name="im" size="50" maxsize="255" value="${resource.im|h}"></input>
</p>

<p class="mandatory">
<label for="check">Old name for confirmation:</label>
<input type="text" name="check" size="50" maxsize="255"></input>
</p>

<input id="x" name="x" type="hidden" value="${resource.x}" />
<input id="y" name="y" type="hidden" value="${resource.y}" />

<div class="mandatory">
<p>Move the crosshair to the correct location:</p>
<%include file="/map.html" />
</div>

<input type="submit" Value="Edit"></input>

</form>

</fieldset>

<script type="text/javascript">
$(document).ready(function() {

var x = $("#x");
var y = $("#y");
var crosshair = $("#crosshair");
var map = $("#map");

crosshair.animate({top: ${resource.y-632},
                   left: ${resource.x-32}},
                  1000);

crosshair.draggable({containment: map,
                     stop: function(event, ui) {
    x.attr("value", crosshair.attr("offsetLeft") - map.attr("offsetLeft") + 32);
    y.attr("value", crosshair.attr("offsetTop") - map.attr("offsetTop") + 32);
}  
});

});
</script>