import os, string, cStringIO

from xml.dom import Node
from Ft.Xml import ReaderException, Domlette, FtMiniDom
from Ft.Xml.Catalog import Catalog
from Ft.Xml.Lib import TreeCompare
from Ft.Lib import Uri
from Ft.Xml import FtMiniDom
from Ft.Xml import cDomlette


def TestCatalog(tester, domMod):
    tester.startGroup("Catalog test")
    cat = Catalog(Uri.OsPathToUri('Xml/Core/xcatalog.xml', attemptAbsolute=1))
    tester.startTest("XSA example")
    isrc = cat.fromUri(Uri.OsPathToUri('Xml/Core/4suite.xsa', attemptAbsolute=1))
    doc = domMod.valParse(isrc)
    stream = cStringIO.StringIO()
    Domlette.Print(doc, stream)
    print stream.getvalue()
    tester.compare(expected_1, stream.getvalue(), func=TreeCompare.TreeCompare)
    tester.testDone()
    tester.groupDone()
    return


def Test(tester):
    tester.startGroup("cDomlette")
    TestCatalog(tester, cDomlette)
    tester.groupDone()

    #tester.startGroup("FtMiniDom")
    #TestCatalog(tester, FtMiniDom)
    #tester.groupDone()
    return


if __name__ == '__main__':
    from Ft.Lib.TestSuite import Tester
    tester = Tester.Tester()
    Test(tester)

