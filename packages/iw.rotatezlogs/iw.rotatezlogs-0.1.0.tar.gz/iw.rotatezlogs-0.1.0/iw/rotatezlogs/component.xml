<component prefix="iw.rotatezlogs.LogHandlers">

  <!--

  ############################################################################
  #
  # Copyright (c) 2006 Ingeniweb SAS
  #
  # This software is subject to the provisions of the GNU General Public License,
  # Version 2.0 (GPL).  A copy of the GPL should accompany this distribution.
  # THIS SOFTWARE IS PROVIDED "AS IS" AND ANY AND ALL EXPRESS OR IMPLIED
  # WARRANTIES ARE DISCLAIMED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  # WARRANTIES OF TITLE, MERCHANTABILITY, AGAINST INFRINGEMENT, AND FITNESS
  # FOR A PARTICULAR PURPOSE
  #
  ############################################################################

  Extend the logging subsystem with new file loggers (not sure of all
  this below but it works ;)
  
  $Id: component.xml 5744 2006-06-05 19:19:11Z glenfant $
  -->

  <import package="ZConfig.components.logger" file="handlers.xml"/>

  <sectiontype name="rotatelogfile"
    datatype=".RotateFileHandlerFactory"
    implements="ZConfig.logger.handler"
    extends="ZConfig.logger.base-log-handler">

    <description>
      Use a "rotatelogfile" log handler in your zope.conf to let Zope rotate,
      and possibly compress the various log files (typically Z2.log and
      event.log).
    </description>

    <key name="path" required="yes">
      <description>
        Full path to your log file, usually "$INSTANCE/log/xxx.log"
        but can be whatever where Zope process can write.
      </description>
    </key>

    <key name="max-bytes" datatype="byte-size" required="yes">
      <description>
        The maximum size for the log file. You can provide an integer
        or use "KB", "MB" or "GB" notation as "30 MB".
      </description>
    </key>

    <key name="backup-count" datatype="integer" required="yes">
      <description>
        Maximum number of rotated backups to keep for this log file.
      </description>
    </key>

    <key name="compression" default="none" datatype="iw.rotatezlogs.datatypes.compression_mode">
      <description>
        The compression mode of rotated log files. Can be "none" (the
        default), "zip", "gzip", or "bzip2".
      </description>
    </key>

    <key name="format"
      default="------\n%(asctime)s %(levelname)s %(name)s %(message)s"
      datatype="ZConfig.components.logger.handlers.log_format">
      <description>
        The format of each line of the log file. As for the standard
        "logfile" handler.
      </description>
    </key>
  </sectiontype>
</component>

