<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">

<metal:block metal:fill-slot="top_slot"
             tal:define="dummy python:request.set('disable_border',1)" />

<body>

<div metal:fill-slot="main">

    <h1 i18n:translate="heading_skin_setup">SubSkins Setup</h1>

    <a href=""
       class="link-parent"
       tal:attributes="href string: portal_url/plone_control_panel"
       i18n:translate="label_up_to_plone_setup">
    Up to Site Setup
    </a>

    <p i18n:translate="description_skin_setup">
        Settings that affect the portal's look.
    </p>
<br/><p><a href="" tal:attributes="href string: $portal_url/portal_view_customizations/manage">
Click here to customize the viewlets</a> (changing the footer, colophon etc.)
<br>
<a href="" tal:attributes="href string: $portal_url//@@manage-viewlets">
Click here to manage viewlets</a> (changing the order of stuff on a page, hide the search box etc.)
</p>
    <form name="uploadlogo"
          method="post"
          enctype="multipart/form-data"
          tal:attributes="action string:${here_url}/updateLogo">
		<fieldset>
			<legend>Site logo</legend>
			<img src="logo.jpg"><br>Upload a new image as logo:<br/>
			<input type="file" name="newlogo" class="context"/><br/>
			Note: if the new logo is not displayed, refresh the page.<br/>
			<input type="submit" name="submit_upload" value="Update" class="context"/>
			<input type="submit" name="submit_restore" value="Restore default logo" class="context"/>
		</fieldset>
	</form>


    <form name="prefs"
          method="post"
          class="enableUnloadProtection"
          tal:attributes="action string:${here_url}/saveStylesheetChoices">

        <fieldset>
            <legend i18n:translate="legend_portalskin_details">Site Subskins Details</legend>

			<div class="field">
                <label>Color schemes</label>

                <div>Select a base_properties file</div>


                <select id="colorschemes_choice" name="colorschemes_choice" onchange="switchcolors(this.value, this.options)"
                    tal:define="current python:test(here.hasProperty('colorschemes'),here.getProperty('colorschemes'),'')"
					id="default_navigation"
                    size="1">
					<option value="">None</option>
					<tal:block tal:repeat="s python:here.getAvailableColorSchemes()">
						<option tal:attributes="value s;
												selected python:test(current==s,'selected','');
												"
							tal:content="s"></option>
					</tal:block>
				</select>
            </div>
<tal:colorschemes tal:repeat="cs here/listColors">
<span tal:attributes="id python:'colors_'+cs[0]" style="display: none">
<table><tr height="30px">
<tal:colors tal:repeat="c python:cs[1]">
<td width="30px" tal:attributes="bgcolor c">&nbsp;</td>
</tal:colors>
</tr></table>
</span>
</tal:colorschemes >
<script>
function switchcolors(id, list) {
  for(i=1;i<list.length;i++) {
    document.getElementById('colors_'+list[i].value).style.display='none'
  }
  if(id!='') document.getElementById('colors_'+id).style.display='inline'
}
switchcolors(document.getElementById('colorschemes_choice').value, document.getElementById('colorschemes_choice').options)
</script>
            <tal:loop tal:repeat="category python:here.getStylesheetCategories()">
            <div class="field">
                <label tal:content="python:category['label']">sub skin label</label>

                <div class="formHelp" tal:content="python:category['help']">
                    sub skin help message.
                </div>

                <select tal:attributes="name python:category['id']+'_choice'" 
                    tal:define="current python:test(here.hasProperty(category['id']),here.getProperty(category['id']),'')"
					id="default_navigation"
                    size="1">
					<option value="">None</option>
					<tal:block tal:repeat="s python:here.getAvailableStyleSheets(category['id'])">
						<option tal:attributes="value s;
												selected python:test(current==s,'selected','');
												"
							tal:content="s"></option>
					</tal:block>
				</select>
            </div>
			</tal:loop>

       <div class="formControls">
                <input class="context"
                       tabindex=""
                       type="submit"
                       name="submit"
                       value="Save"
                       i18n:attributes="value label_save;"
                       tal:attributes="tabindex tabindex/next;"
                       />
            </div>


        <input type="hidden" name="form.submitted" value="1" />
      </fieldset>
    </form>

</div>

</body>
</html>