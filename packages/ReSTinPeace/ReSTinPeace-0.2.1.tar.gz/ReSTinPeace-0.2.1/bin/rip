#! /usr/bin/env python
# Command-line runner script for ReST in Peace

from __future__ import print_function

import sys

import argparse

from rip import interface
from rip.core import render

def main(argv) :
    parser = argparse.ArgumentParser(
        description = 'Command-line interface to ReST in Peace'
    )

    parser.add_argument(
        'file', nargs = "?", type = argparse.FileType('r'), default = '-',
        help = 'The input file to be rendered.',
    )

    parser = interface.initialize_arguments(parser)

    namespace = parser.parse_args(argv)

    interface.namespace_callback(namespace)

    sys.stdout.write(render(namespace.file.read()))

    return 0

if __name__ == '__main__' :
    status = main(sys.argv[1:])

    sys.exit(status)
