Bélier
======

Introduction
------------
Bélier permet l'ouverture automatisée d'un shell sur un ordinateur distant via une connexion ssh.

- Bélier rend transparent pour l'utilisateur la traversée d'éventuels ordinateurs intermédiaires par la connexion ssh vers l'ordinateur distant. 
- Les éventuels changements de compte sur les ordinateurs intermédiaires peuvent être définis.
- Des commandes peuvent être lancées à la manière d'un script sur la machine finale.
- Bélier génère un script expect (écrit en Tcl) par chemin nécessaire pour atteindre une machine finale.

Exemple d'utilisation
---------------------
Le fichier où nous entrons les commandes à effectuer :
----------------------------
user@localhost:~$ cat ordres
intermediaire1 admin azer0;lp!Z
admin@intermediaire2 
admin@machine-finale root jkw!po12;
-----------------------------------

La génération du script de connexion automatique grâce à bélier :
----------------------------------------
user@localhost:~$ belier --fichier=ordre
user@localhost:~$ ls
user@localhost:~$ machine-finale.sh
-----------------------------------------------------

L'exécution du script généré (ici la seule commande lancée par l'utilisateur est la première ligne, toutes les étapes suivantes sont automatiques).
-------------------------------------
user@localhost:~$ ./machine-finale.sh
spawn ssh central@kali
user@intermediaire1's password:
user@intermediaire1:~$ su - admin
Password: 
admin@intermediaire1:~$ ssh admin@intermediaire2
admin@intermediaire2:~$ ssh admin@machine-finale
admin@machine-finale's password:
admin@machine-finale:~$ su - root
Password:
root@machine-finale:~#
---------------------- 

Dans notre exemple nous suivons plusieurs étapes :

. Nous créons un fichier nommé "ordres" contenant des lignes d'ordre.
. Le premier ordre indique de se connecter d'abord au premier serveur intermédiaire et de changer d'utilisateur pour utiliser le compte admin.
. Le second ordre indique de se connecter avec l'identifiant admin au second serveur intérmédiaire.
. Le troisième ordre permet de se connecter avec l'identifiant admin à la machine finale puis fait passer l'utilisateur en root.
. À ce stade, le script vous rend la main. Vous êtes connecté en tant que root à la machine finale.

Prérequis d'installation
-----------------------
- Python 2.4 ou une version supérieure.
- Expect 5.43 ou une version supérieure.

Debian :  installer les prérequis :
------------------------------
aptitude install python expect
------------------------------

Installation
------------
Version stable : link:belier-1.0.tar.gz[belier-1.0.tar.gz]

-----------------------
tar zxvf belier-0.1.tar.gz
cd belier-0.1
su
python setup.py install
-----------------------

Accès au code source
--------------------

Le code source de l'application est disponible via un dépôt git accessible par la ligne de commande suivante:

------------------------------------
git co ssh://jbdenis.net:9999/belier
------------------------------------

mailto:prénom.nom@nom_du_site.com['Carl Chenet']
