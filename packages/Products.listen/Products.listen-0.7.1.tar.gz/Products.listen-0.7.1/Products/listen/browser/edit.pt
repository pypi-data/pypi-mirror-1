<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
  <body>
    
    <div metal:fill-slot="main">
      <div metal:define-macro="body">

        <div id="listen-actions" class="selfclear">
            <form name="search" method="get"
                  tal:attributes="action string:${context/absolute_url}/search">
              <input type="text" name="search_text"
                     tal:attributes="value request/search_text|nothing" />
              <input class="context" type="submit" name="submit" value="Search" />
            </form>
        </div>

        <link rel="kinetic-stylesheet" type="text/css"
              href="++resource++edit.kss" />

        <div id="navigation" class="enableFormTabbing">
          <fieldset id="fieldset-editview">
            <legend id="fieldsetlegend-editview">Details</legend>

	    <h3>Edit List Details</h3>

	    <form method="post" enctype="multipart/form-data"
                  id="listen-edit-form">

	      <!-- mailing list title -->
	      <div id="title-div"
                   tal:attributes="class python:view.form_errors['title'] and 'field error' or 'field'">
		<label for="title" class="formQuestion">
		  Title
		</label>
                <span title="Required" class="fieldRequired">
                  (Required)
                </span>
		<div class="widget">
                  <div class="fieldErrorBox"
                       tal:content="view/form_errors/title"></div>
		  <input class="textType" 
			 id="title" 
			 name="title"
			 type="text"
			 tal:attributes="value request/title | context/Title" />
		</div>
	      </div>

	      <!-- mailing list address -->
	      <div id="mailto-div"
                   tal:attributes="class python:view.form_errors['mailto'] and 'field error' or 'field'">
		<label for="address">
		  List Address
		</label>
                <span title="Required" class="fieldRequired">
                  (Required)
                </span>
		<div class="formHelp">Main address for the mailing list.</div>
                <div class="fieldErrorBox"
                     tal:content="view/form_errors/mailto"></div>
		<div class="widget">
		  <input class="textType" 
			 type="text"
                         name="mailto"
                         id="mailto"
			 tal:attributes="value request/mailto | context/mailto"/>
		</div>
	      </div>

	      <!-- mailing list description -->
	      <div class="field">
		<label for="description">Description</label>
		<div class="formHelp">A description of the mailing list.</div>
		<div class="widget">
		  <textarea id="description" 
			    name="description"
			    tal:content="request/description | context/description"></textarea>
		</div>
	      </div>

	      <input class="context" type="submit" name="edit" value="save changes"/>
	    </form>

	  </fieldset>
          
          <fieldset id="fieldset-archive">
            <legend id="fieldsetlegend-archive">Archive</legend>

	    <form method="post" enctype="multipart/form-data">
	      <div class="field">
		<label for="archived">Archival Method</label>

		<div class="formHelp">When archiving is enabled, all messages sent to the list will be saved on the server.  You may choose whether to archive just the message text, or include attachments.</div>
		
		<div class="widget">
		  <div class="value">
		    <span tal:omit-tag tal:repeat="option view/archive_options">
		      <label>
			<input class="radioType" 
			       name="archived" 
			       type="radio"
			       tal:attributes="value repeat/option/number;id string:archived.${repeat/option/number};checked python:repeat['option'].number() - 1 == context.archived"
			       />
		        &nbsp;<span tal:replace="option">The entire message, including attachments</span>
		      </label><br />
		    </span>
		  </div><!-- class="value" -->
		</div>
	      </div>

	      <input class="context" type="submit" name="archive" value="save changes"/>
          </fieldset>

	  <fieldset id="fieldset-security">
	    <legend id="fieldsetlegend-security">Security</legend>

	    <form method="post" enctype="multipart/form-data">
	      <div class="field">
		<label for="form.list_type">
		  List Type
		</label>
      
		<div class="formHelp">The policy that defines the behavior of the list.</div>
      
		<div class="widget">
		    <div class="value">
                      <span tal:omit-tag tal:repeat="option view/list_type_options">
		      <label>
			<input class="radioType" 
			       name="form.list_type" 
			       type="radio" 
			       tal:attributes="value option/title;
                                               id string:form.list_type.${repeat/option/number};
                                               checked python:option.list_marker == context.list_type.list_marker"
			       />
			&nbsp;<span tal:replace="option/title" /><br />
			<span class="formHelp" tal:content="option/description">
			</span>
		      </label>
		      <br />
                      </span>
		    </div> <!-- class="value" -->

	      <input class="context" type="submit" name="security" value="save changes"/>
	    </form>

	  </fieldset>

	</div> <!-- navigation -->
      </div> <!-- metal:define-macro="body" -->
    </div> <!-- metal:fill-slot="main" -->
  </body>
</html>
