<html>
  <head>
    <title>Various macros related to tagging</title>
  </head>
  <body>

<metal:block define-macro="tag_links">
<ul class="tag-group-links">
  <li class="first"><a href="tags-user.html"
         tal:attributes="href string:$portal_url/tagging/tags-user.html">Your Tags</a></li>
  <li class="last"><a href="tags-allusers.html"
         tal:attributes="href string:$portal_url/tagging/tags-allusers.html">Everyone's Top Tags</a></li>
</ul>
</metal:block>

  </body>

<!-- 
The following macros requires that the var tags is predefined using
a structure as built by get_cloud()
-->
<metal:block define-macro="tag_cloud">
<ul class="tag-cloud">
  <li class="tag" tal:repeat="tag tags"
      tal:attributes="class string:tag${tag/normalized}">

    <a href=""
       tal:content="string:${tag/name}"
       tal:attributes="href python:view.tag_url(tag['name'])">
    </a>

  </li>
</ul>
</metal:block>

<metal:block define-macro="tags_footer">
  <div class="tags-footer">
    <dl tal:define="taginfo nocall:context/@@tag_info">
      <dt>Your Tags:</dt>
      <dd class="tag" 
          tal:repeat="tag taginfo/contextual_user_tags">

        <a href=""
           tal:content="string:$tag"
           tal:attributes="href python:taginfo.tag_url(tag)">
        </a>
      </dd>

      <dt>All Tags:</dt>
      <dd class="tag" 
          tal:repeat="tag taginfo/contextual_tags">

        <a href=""
           tal:content="string:$tag"
           tal:attributes="href python:taginfo.tag_url(tag)">
        </a>

      </dd>
    </dl>

    <div class="clear" class="visualClear">&nbsp;</div>
  </div>
</metal:block>

</html>
