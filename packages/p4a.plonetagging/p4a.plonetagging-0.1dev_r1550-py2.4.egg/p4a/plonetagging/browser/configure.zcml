<configure
    xmlns="http://namespaces.zope.org/browser"
    xmlns:zcml="http://namespaces.zope.org/zcml"
    i18n_domain="p4a.plonetagging">

  <menuItem
      title="Tags"
      menu="object"
      for="lovely.tag.interfaces.ITaggable"
      action="content-tags.html"
      />

  <page
      for="lovely.tag.interfaces.ITaggable"
      permission="zope2.View"
      class=".tagging.UserTagForm"
      name="content-tags.html"
      />

  <resource name="contenttagging.css" file="contenttagging.css" />

  <page
      for="*"
      permission="zope.Public"
      class=".tagging.TagQueriableView"
      name="tag_info"
      allowed_attributes="contextual_tags contextual_user_tags get_cloud"
      />

  <page
      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
      permission="zope2.View"
      class=".tagging.RootTaggingView"
      name="tagging"
      />

  <page
      for=".tagging.IRootTaggingView"
      permission="zope2.View"
      template="tags-allusers.pt"
      class=".tagging.TaggingView"
      name="index_html"
      />

  <page
      for=".tagging.IRootTaggingView"
      permission="zope2.View"
      template="tags-allusers.pt"
      class=".tagging.TaggingView"
      name="tags-allusers.html"
      />

  <page
      for=".tagging.IRootTaggingView"
      permission="zope2.View"
      template="tags-user.pt"
      class=".tagging.TaggingView"
      name="tags-user.html"
      />

  <page
      for=".tagging.IRootTaggingView"
      permission="zope.Public"
      class=".tagging.RootTagsView"
      name="tags"
      />

  <page
      for=".tagging.IRootTaggingView"
      permission="zope.Public"
      class=".tagging.TaggedItemListing"
      name="tagged_item_listing"
      />

  <page
      for="*"
      permission="zope2.View"
      template="tag-macros.pt"
      name="tag_macros"
      />

  <page
      for="*"
      permission="zope.Public"
      template="portlet_tagcloud.pt"
      name="portlet_tagcloud"
      class=".tagging.CloudPortlet"
      allowed_attributes="macros"
      />

  <!-- Plone 3.0+ -->
  <configure 
      package="Products.CMFDefault.skin"
      zcml:condition="installed Products.CMFDefault.skin">

    <page
        name="five_template"
        for="p4a.plonetagging.browser.tagging.IRootTaggingView"
        template="five_template.pt"
        permission="zope2.View"
        />

  </configure>

  <!-- Plone 2.5 -->
  <configure 
      package="Products.CMFDefault.browser"
      zcml:condition="installed Products.CMFPlone.PloneWorkflow">

    <page
        name="five_template"
        for="p4a.plonetagging.browser.tagging.IRootTaggingView"
        template="five_template.pt"
        permission="zope2.View"
        />

  </configure>

  <page
      for="Products.CMFPlone.interfaces.IPloneSiteRoot"
      name="tagging-config.html"
      class=".config.TaggingConfiglet"
      permission="cmf.ManagePortal"
      />

</configure>
