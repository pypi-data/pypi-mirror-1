<html>
  <head>
    <title>Portlet macro</title>
  </head>
  <body>

<metal:block define-macro="portlet">

<dl class="portlet" id="portlet-tagcloud">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
<a>Tag Cloud</a>
        <span class="portletTopRight"></span>
    </dt>
    <dd class="portletItem"
        tal:define="taginfo nocall:context/@@tag_info;">

<div tal:condition="not:taginfo/tagging_available" class="discreet">
  Tagging support has been uninstalled.
</div>

<ul tal:condition="taginfo/tagging_available" class="tag-cloud">
  <li class="tag" tal:repeat="tag tags"
      tal:attributes="class string:tag${tag/normalized}"
      tal:define="tags python:taginfo.get_cloud(maxTags=30)">

    <a href=""
       tal:content="string:${tag/name}"
       tal:attributes="href python:taginfo.tag_url(tag['name'])">
    </a>

  </li>
</ul>

</dd>
</dl>

</metal:block>

</body>
</html>
