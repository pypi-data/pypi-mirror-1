<?xml version="1.0" encoding="UTF-8"?>

<router name="hjbrouter" kernelpath="../../kernel" release="06.00.01" startorder="sys$log sys$authentication sys$threadpool sys$timer sys$net sys$store sys$queuemanager sys$topicmanager sys$mgmt sys$xa sys$routing sys$jndi sys$jms sys$deploy sys$jac sys$scheduler sys$monitor">

  <!--  Authentication Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$authentication">
    <groups>
      <group name="admin">
        <queue-grants>
          <queue-grant name="swiftmqmgmt" browse-grant="false" receive-grant="false"/>
          <queue-grant name="swiftmqmgmt@router2" browse-grant="false" receive-grant="false"/>
          <queue-grant name="swiftmqmgmt@router1" browse-grant="false" receive-grant="false"/>
        </queue-grants>
        <topic-grants/>
      </group>
      <group name="public">
        <queue-grants>
          <queue-grant name="testqueue"/>
          <queue-grant name="hjb_sample_MAP"/>
          <queue-grant name="hjb_sample_TEXT"/>
          <queue-grant name="hjb_sample_OBJECT"/>
          <queue-grant name="hjb_sample_STREAM"/>
          <queue-grant name="hjb_sample_BYTE"/>
        </queue-grants>
        <topic-grants>
          <topic-grant name="swiftmq.jndi" durable-grant="false" subscribe-grant="false"/>
          <topic-grant name="testtopic"/>
          <topic-grant name="hjb_sample_QOTD"/>
          <topic-grant name="hjb_sample_LOGMESSAGE"/>
          <topic-grant name="hjb_sample_HEARTBEAT"/>
        </topic-grants>
      </group>
    </groups>
    <resource-limit-groups>
      <resource-limit-group name="public"/>
    </resource-limit-groups>
    <users>
      <user name="admin" group="admin" password="secret">
        <host-access-list/>
      </user>
    </users>
  </swiftlet>

  <!--  Deploy Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$deploy">
    <deploy-spaces>
      <deploy-space name="extension-swiftlets" path="../../deploy/hjbrouter"/>
      <deploy-space name="jms-app" path="../../jmsapp/hjbrouter"/>
    </deploy-spaces>
  </swiftlet>

  <!--  JMS Application Container Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$jac">
    <static-containers/>
  </swiftlet>

  <!--  JMS Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$jms">
    <intravm-connection-factories>
      <intravm-connection-factory name="IVMConnectionFactory"/>
      <intravm-connection-factory name="IVMQueueConnectionFactory"/>
      <intravm-connection-factory name="IVMTopicConnectionFactory"/>
    </intravm-connection-factories>
    <listeners>
      <listener name="plainsocket" port="4091">
        <connection-factories>
          <connection-factory name="ConnectionFactory"/>
          <connection-factory name="QueueConnectionFactory"/>
          <connection-factory name="TopicConnectionFactory"/>
          <connection-factory name="plainsocket@hjbrouter"/>
          <connection-factory name="plainsocket_appserver@hjbrouter" thread-context-classloader-for-getobject="true"/>
          <connection-factory name="plainsocket_recover@hjbrouter" smqp-consumer-cache-size="10"/>
        </connection-factories>
        <host-access-list/>
      </listener>
    </listeners>
  </swiftlet>

  <!--  JNDI Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$jndi">
    <aliases>
      <alias name="testqueue" map-to="testqueue@hjbrouter"/>
      <alias name="hjb_sample_MAP" map-to="hjb_sample_MAP@hjbrouter"/>
      <alias name="hjb_sample_TEXT" map-to="hjb_sample_TEXT@hjbrouter"/>
      <alias name="hjb_sample_OBJECT" map-to="hjb_sample_OBJECT@hjbrouter"/>
      <alias name="hjb_sample_STREAM" map-to="hjb_sample_STREAM@hjbrouter"/>
      <alias name="hjb_sample_BYTES" map-to="hjb_sample_BYTES@hjbrouter"/>
      <!-- <alias name="hjb_sample_LOGMESSAGE" map-to="hjb_sample_LOGMESSAGE@hjbrouter"/> -->
      <!-- <alias name="hjb_sample_QOTD" map-to="hjb_sample_QOTD@hjbrouter"/> -->
      <!-- <alias name="hjb_sample_HEARTBEAT" map-to="hjb_sample_HEARTBEAT@hjbrouter"/> -->
    </aliases>
    <jndi-replications/>
    <remote-queues>
      <remote-queue name="testqueue@router2"/>
      <remote-queue name="testqueue@router1"/>
    </remote-queues>
  </swiftlet>

  <!--  Log Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$log" logfile-error="../../log/hjbrouter/error.log" logfile-info="../../log/hjbrouter/info.log" logfile-warning="../../log/hjbrouter/warning.log"/>

  <!--  Management Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$mgmt"/>

  <!--  Monitor Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$monitor"/>

  <!--  Network Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$net">
    <multicast/>
  </swiftlet>

  <!--  Queue Manager Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$queuemanager">
    <queue-controllers>
      <queue-controller name="01" persistence-mode="non_persistent" predicate="tmp$%"/>
      <queue-controller name="02" predicate="sys$%"/>
      <queue-controller name="03" predicate="swiftmq%"/>
      <queue-controller name="04" predicate="rt$%"/>
      <queue-controller name="05" predicate="unroutable"/>
      <queue-controller name="06" predicate="%$%"/>
      <queue-controller name="07" predicate="%"/>
    </queue-controllers>
    <queues>
      <queue name="testqueue"/>
      <queue name="hjb_sample_MAP"/>
      <queue name="hjb_sample_TEXT"/>
      <queue name="hjb_sample_OBJECT"/>
      <queue name="hjb_sample_STREAM"/>
      <queue name="hjb_sample_BYTES"/>
    </queues>
  </swiftlet>

  <!--  Routing Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$routing">
    <connectors/>
    <filters/>
    <listeners>
      <listener name="plainsocket" port="4100">
        <host-access-list/>
      </listener>
    </listeners>
    <static-routes>
      <static-route name="router2"/>
    </static-routes>
  </swiftlet>

  <!--  Scheduler Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$scheduler">
    <calendars/>
    <schedules/>
  </swiftlet>

  <!--  Store Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$store">
    <backup path="../../store/hjbrouter/backup"/>
    <cache/>
    <database path="../../store/hjbrouter/db"/>
    <durable-subscriber path="../../store/hjbrouter/durables"/>
    <swap path="../../store/hjbrouter/swap"/>
    <transaction-log path="../../store/hjbrouter/log"/>
  </swiftlet>

  <!--  Threadpool Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$threadpool">
    <pools>
      <pool name="jac.runner" kernel-pool="true">
        <threads>
          <thread name="sys$jac.runner"/>
        </threads>
      </pool>
      <pool name="jms.connection" kernel-pool="true" max-threads="5" min-threads="5">
        <threads>
          <thread name="sys$jms.connection.service"/>
        </threads>
      </pool>
      <pool name="jms.ivm.client.connection" kernel-pool="true" max-threads="10">
        <threads>
          <thread name="sys$jms.client.connection.%"/>
        </threads>
      </pool>
      <pool name="jms.ivm.client.session" kernel-pool="true" max-threads="10">
        <threads>
          <thread name="sys$jms.client.session.%"/>
        </threads>
      </pool>
      <pool name="jms.session" kernel-pool="true" max-threads="5" min-threads="5">
        <threads>
          <thread name="sys$jms.session.service"/>
        </threads>
      </pool>
      <pool name="jndi" kernel-pool="true" max-threads="1" min-threads="1">
        <threads>
          <thread name="sys$jndi.listener"/>
        </threads>
      </pool>
      <pool name="mgmt" kernel-pool="true" max-threads="2">
        <threads>
          <thread name="sys$mgmt.%"/>
        </threads>
      </pool>
      <pool name="net.connection" kernel-pool="true">
        <threads>
          <thread name="sys$net.connection.handler"/>
        </threads>
      </pool>
      <pool name="net.connection.mgr" kernel-pool="true" max-threads="1">
        <threads>
          <thread name="sys$net.connection.mgr"/>
        </threads>
      </pool>
      <pool name="queue.timeout" kernel-pool="true" max-threads="1" min-threads="1">
        <threads>
          <thread name="sys$queuemanager.timeoutprocessor"/>
        </threads>
      </pool>
      <pool name="routing.connection.mgr" kernel-pool="true" max-threads="1">
        <threads>
          <thread name="sys$routing.connection.mgr"/>
        </threads>
      </pool>
      <pool name="routing.exchanger" kernel-pool="true" max-threads="1">
        <threads>
          <thread name="sys$routing.route.exchanger"/>
        </threads>
      </pool>
      <pool name="routing.scheduler" kernel-pool="true" max-threads="3" min-threads="3">
        <threads>
          <thread name="sys$routing.scheduler"/>
        </threads>
      </pool>
      <pool name="routing.service" kernel-pool="true" max-threads="3" min-threads="3">
        <threads>
          <thread name="sys$routing.connection.service"/>
        </threads>
      </pool>
      <pool name="routing.throttle" kernel-pool="true" max-threads="3" min-threads="3">
        <threads>
          <thread name="sys$routing.connection.throttlequeue"/>
        </threads>
      </pool>
      <pool name="scheduler.job" kernel-pool="true">
        <threads>
          <thread name="sys$scheduler.runner"/>
        </threads>
      </pool>
      <pool name="scheduler.system" kernel-pool="true" max-threads="2">
        <threads>
          <thread name="sys$scheduler.requestprocessor"/>
          <thread name="sys$scheduler.scheduler"/>
        </threads>
      </pool>
      <pool name="store.log" kernel-pool="true" max-threads="1" min-threads="1">
        <threads>
          <thread name="sys$store.logmanager"/>
        </threads>
      </pool>
      <pool name="timer.dispatcher" kernel-pool="true" max-threads="1" min-threads="1">
        <threads>
          <thread name="sys$timer.dispatcher"/>
        </threads>
      </pool>
      <pool name="timer.tasks" kernel-pool="true" max-threads="3" min-threads="3">
        <threads>
          <thread name="sys$timer.task"/>
        </threads>
      </pool>
      <pool name="topic" kernel-pool="true" max-threads="2">
        <threads>
          <thread name="sys$topicmanager.topic.%"/>
        </threads>
      </pool>
    </pools>
  </swiftlet>

  <!--  Timer Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$timer"/>

  <!--  Topic Manager Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$topicmanager">
    <slow-subscriber-conditions/>
    <static-remote-router-subscriptions/>
    <topics>
      <topic name="testtopic"/>
      <topic name="hjb_sample_QOTD"/>
      <topic name="hjb_sample_LOGMESSAGE"/>
      <topic name="hjb_sample_HEARTBEAT"/>
    </topics>
  </swiftlet>

  <!--  Trace Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$trace">
    <spaces>
      <space name="kernel">
        <predicates>
          <predicate name="0" filename="../../trace/hjbrouter/manager.trace" value="%Manager"/>
          <predicate name="1" filename="../../trace/hjbrouter/net.trace" value="sys$net"/>
          <predicate name="10" filename="../../trace/hjbrouter/auth.trace" value="sys$auth%"/>
          <predicate name="11" filename="../../trace/hjbrouter/mgmt.trace" value="sys$mgmt%"/>
          <predicate name="12" filename="../../trace/hjbrouter/store.trace" value="sys$store"/>
          <predicate name="13" filename="../../trace/hjbrouter/xa.trace" value="sys$xa"/>
          <predicate name="14" filename="../../trace/hjbrouter/jac.trace" value="sys$jac"/>
          <predicate name="15" filename="../../trace/hjbrouter/timer.trace" value="sys$timer"/>
          <predicate name="16" filename="../../trace/hjbrouter/scheduler.trace" value="sys$scheduler"/>
          <predicate name="17" filename="../../trace/hjbrouter/monitor.trace" value="sys$monitor"/>
          <predicate name="2" filename="../../trace/hjbrouter/jms.trace" value="sys$jms"/>
          <predicate name="3" filename="../../trace/hjbrouter/deploy.trace" value="sys$deploy"/>
          <predicate name="4" filename="../../trace/hjbrouter/thread.trace" value="sys$thread%"/>
          <predicate name="5" filename="../../trace/hjbrouter/routing.trace" value="sys$rout%"/>
          <predicate name="6" filename="../../trace/hjbrouter/queuemanager.trace" value="sys$queue%"/>
          <predicate name="7" filename="../../trace/hjbrouter/topic.trace" value="sys$topic%"/>
          <predicate name="9" filename="../../trace/hjbrouter/jndi.trace" value="sys$jndi"/>
        </predicates>
      </space>
      <space name="protocol">
        <predicates>
          <predicate name="1" filename="../../trace/hjbrouter/protocol.trace" value="%"/>
        </predicates>
      </space>
      <space name="queue">
        <predicates>
          <predicate name="1" filename="../../trace/hjbrouter/queue.trace" value="%"/>
        </predicates>
      </space>
      <space name="swiftlet">
        <predicates>
          <predicate name="1" filename="../../trace/hjbrouter/swiftlet.trace" value="%"/>
        </predicates>
      </space>
    </spaces>
  </swiftlet>

  <!--  XA Resource Manager Swiftlet, Release: 6.0.1  -->

  <swiftlet name="sys$xa"/>
</router>
