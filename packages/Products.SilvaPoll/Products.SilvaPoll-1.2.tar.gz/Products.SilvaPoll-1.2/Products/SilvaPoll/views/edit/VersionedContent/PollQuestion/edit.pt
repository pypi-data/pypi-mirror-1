<html tal:omit-tag=""
  lang="en"
  xml:lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:notal="http://www.infrae.com/silva/notal"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  i18n:domain="silva_poll"
  tal:define="
    model request/model;
    root_url model/get_root_url;
    user_role here/get_user_role;
    silva_root here/get_root;
    title model/get_title_editable;
    vein string:edit;
    fields here/form/get_fields;
">

<table class="columns columns3">
  <tbody>
    <tr>
      <tal:block replace="nothing">
        _____________________ sidebar _____________________
      </tal:block>
      <td class="left"
        tal:define="template_id string:tab_edit">
        <metal:block use-macro="here/macro_vein_navigation/macros/vein" />
      </td>

      <tal:block replace="nothing">
        _____________________ main _____________________
      </tal:block>
      <td class="main">


  <form action="." name="silvaObjects" method="POST">
    <table class="listing">
      <thead>
        <tal:block replace="nothing">
          ______________ vein + title row ______________
        </tal:block>
        <tr>
          <td class="top"
            colspan="3">
            <h2>
              <img tal:replace="structure python:here.render_icon(model)" />
              <span style="text-transform:lowercase;"
                tal:content="model/meta_type">Meta type</span> 
              &#xab;<tal:block content="model/get_title_or_id" />&#xbb;
              <span i18n:translate="">settings</span>
            </h2>
          </td>
        </tr>
      </thead>

      <span tal:replace="nothing"> ______________ table header ______________ </span>
      <tbody>
        <tr>
          <th class="align-right" 
            width="3%" i18n:translate="">element</th>
          <th width="50%" i18n:translate="">content</th>
          <th i18n:translate="">note</th>
        </tr>

        <span tal:replace="nothing"> -------------- form content ------------- </span>
        <tal:block tal:repeat="field fields">
          <tr class="even" tal:attributes="class python: test(repeat['field'].odd(), 'odd', 'even')">
            <td class="field-title">
              <span tal:replace="field/title">Title</span><span class="warning" tal:condition="field/is_required">*</span>
            </td>
            <td>
              <input tal:replace="structure field/render" />
            </td>
            <td tal:content="structure python:field['description']"
              i18n:translate="">
              description
            </td>
          </tr>
        </tal:block>

      </tbody>

      <tfoot>
        <tr class="controls">
          <td class="align-right"
            colspan="4">
            <!-- hidden input to remember what the original answers were -->
            <input type="hidden" id="organswers" />
            <script type="text/javascript">
              // <![CDATA[
              
                document.getElementById('organswers').value = 
                    document.getElementById('answers').value;
                function answersChanged() {
                    var value = document.getElementById('answers').value;
                    var orgvalue = document.getElementById('organswers').value;
                    value = value.replace(/\r/g, '');
                    orgvalue = orgvalue.replace(/\r/g, '');
                    
                    return (value.split('\n\n').length == 
                            orgvalue.split('\n\n').length);
                };
                
              // ]]>
            </script>
            <input class="button" 
              type="submit"
              name="submit_settings:method"
              value="save settings"
              title="access key: alt-s"
              alerttext="All votes will be discarded if you change answers. Are you sure?"
              onclick="return answersChanged() ? 'true' : 
                        confirm(this.getAttribute('alerttext'));"
              accesskey="s"
              i18n:attributes="value; title; alerttext"
            />
          </td>
        </tr>
      </tfoot>
    </table>
  </form>

      </td>
      <tal:block replace="nothing">
        _____________________ right column _____________________
      </tal:block>
      <td class="right">
        &nbsp;
      </td>
    </tr>
  </tbody>
</table>

</html>
