<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="pyformex.css" type='text/css' />
<link rel="SHORTCUT ICON" href="../favicon.ico" />
<link rel='start' href='http://pyformex.berlios.de' title='pyFormex home Page' />
<link rel="first" href="pyformex.html" title='pyFormex manual' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="prev" href="node187.html" />
<link rel="parent" href="module-surface.html" />
<link rel="next" href="module-turtle.html" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name='aesop' content='information' />
<title>8.22.2 Functions defined in the surface module</title>
</head>
<body>
<div class="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="8.22.1 trisurface class: A"
  href="node187.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="8.22 surface  "
  href="module-surface.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="8.23 turtle"
  href="module-turtle.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node187.html">8.22.1 TriSurface class: A</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="module-surface.html">8.22 surface  </a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="module-turtle.html">8.23 turtle</a>
</div>
<hr /></div>
</div>
<!--End of Navigation Panel-->

<h2><a name="SECTION0092220000000000000000">
8.22.2 Functions defined in the surface module</a>
</h2>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-759' xml:id='l2h-759' class="function">areaNormals</tt></b>(</nobr></td>
  <td><var>x</var>)</td></tr></table></dt>
<dd>
Compute the area and normal vectors of a collection of triangles.

<p>
x is an (ntri,3,3) array of coordinates.

<p>
Returns a tuple of areas,normals.
    The normal vectors are normalized.
    The area is always positive.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-760' xml:id='l2h-760' class="function">stlConvert</tt></b>(</nobr></td>
  <td><var>stlname,outname=None,options='-d'</var>)</td></tr></table></dt>
<dd>
Transform an .stl file to .off or .gts format.

<p>
If outname is given, it is either '.off' or '.gts' or a filename ending
    on one of these extensions. If it is only an extension, the stlname will
    be used with extension changed.

<p>
If the outname file exists and its mtime is more recent than the stlname,
    the outname file is considered uptodate and the conversion programwill
    not be run.

<p>
The conversion program will be choosen depending on the extension.
    This uses the external commands 'admesh' or 'stl2gts'.

<p>
The return value is a tuple of the output file name, the conversion
    program exit code (0 if succesful) and the stdout of the conversion
    program (or a 'file is already uptodate' message).

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-761' xml:id='l2h-761' class="function">read_gts</tt></b>(</nobr></td>
  <td><var>fn</var>)</td></tr></table></dt>
<dd>
Read a GTS surface mesh.

<p>
Return a coords,edges,faces tuple.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-762' xml:id='l2h-762' class="function">read_off</tt></b>(</nobr></td>
  <td><var>fn</var>)</td></tr></table></dt>
<dd>
Read an OFF surface mesh.

<p>
The mesh should consist of only triangles!
    Returns a nodes,elems tuple.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-763' xml:id='l2h-763' class="function">read_stl</tt></b>(</nobr></td>
  <td><var>fn,intermediate=None</var>)</td></tr></table></dt>
<dd>
Read a surface from .stl file.

<p>
This is done by first coverting the .stl to .gts or .off format.
    The name of the intermediate file may be specified. If not, it will be
    generated by changing the extension of fn to '.gts' or '.off' depending
    on the setting of the 'surface/stlread' config setting.

<p>
Return a coords,edges,faces or a coords,elems tuple, depending on the
    intermediate format.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-764' xml:id='l2h-764' class="function">read_gambit_neutral</tt></b>(</nobr></td>
  <td><var>fn</var>)</td></tr></table></dt>
<dd>
Read a triangular surface mesh in Gambit neutral format.

<p>
The .neu file nodes are numbered from 1!
    Returns a nodes,elems tuple.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-765' xml:id='l2h-765' class="function">write_gts</tt></b>(</nobr></td>
  <td><var>fn,nodes,edges,faces</var>)</td></tr></table></dt>
<dd>

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-766' xml:id='l2h-766' class="function">write_stla</tt></b>(</nobr></td>
  <td><var>f,x</var>)</td></tr></table></dt>
<dd>
Export an x[n,3,3] float array as an ascii .stl file.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-767' xml:id='l2h-767' class="function">write_stlb</tt></b>(</nobr></td>
  <td><var>f,x</var>)</td></tr></table></dt>
<dd>
Export an x[n,3,3] float array as an binary .stl file.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-768' xml:id='l2h-768' class="function">write_gambit_neutral</tt></b>(</nobr></td>
  <td><var>fn,nodes,elems</var>)</td></tr></table></dt>
<dd>

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-769' xml:id='l2h-769' class="function">write_off</tt></b>(</nobr></td>
  <td><var>fn,nodes,elems</var>)</td></tr></table></dt>
<dd>

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-770' xml:id='l2h-770' class="function">write_smesh</tt></b>(</nobr></td>
  <td><var>fn,nodes,elems</var>)</td></tr></table></dt>
<dd>

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-771' xml:id='l2h-771' class="function">surface_volume</tt></b>(</nobr></td>
  <td><var>x,pt=None</var>)</td></tr></table></dt>
<dd>
Return the volume inside a 3-plex Formex.

<p>
For each element of Formex, return the volume of the tetrahedron
    formed by the point pt (default the center of x) and the 3 points
    of the element.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-772' xml:id='l2h-772' class="function">surfaceInsideLoop</tt></b>(</nobr></td>
  <td><var>coords,elems</var>)</td></tr></table></dt>
<dd>
Create a surface inside a closed curve defined by coords and elems.

<p>
coords is a set of coordinates.
    elems is an (nsegments,2) shaped connectivity array defining a set of line
    segments forming a closed loop.

<p>
The return value is coords,elems tuple where
    coords has one more point: the center of th original coords
    elems is (nsegment,3) and defines triangles describing a surface inside
    the original curve.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-773' xml:id='l2h-773' class="function">fillHole</tt></b>(</nobr></td>
  <td><var>coords,elems</var>)</td></tr></table></dt>
<dd>
Fill a hole surrounded by the border defined by coords and elems.

<p>
Coords is a (npoints,3) shaped array of floats.
    Elems is a (nelems,2) shaped array of integers representing the border
    element numbers and must be ordered.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-774' xml:id='l2h-774' class="function">create_border_triangle</tt></b>(</nobr></td>
  <td><var>coords,elems</var>)</td></tr></table></dt>
<dd>
Create a triangle within a border.

<p>
The triangle is created from the two border elements with
    the sharpest angle.
    Coords is a (npoints,3) shaped array of floats.
    Elems is a (nelems,2) shaped array of integers representing
    the border element numbers and must be ordered.
    A list of two objects is returned: the new border elements and the triangle.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-775' xml:id='l2h-775' class="function">read_error</tt></b>(</nobr></td>
  <td><var>cnt,line</var>)</td></tr></table></dt>
<dd>
Raise an error on reading the stl file.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-776' xml:id='l2h-776' class="function">degenerate</tt></b>(</nobr></td>
  <td><var>area,norm</var>)</td></tr></table></dt>
<dd>
Return a list of the degenerate faces according to area and normals.

<p>
A face is degenerate if its surface is less or equal to zero or the
    normal has a nan.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-777' xml:id='l2h-777' class="function">read_stla</tt></b>(</nobr></td>
  <td><var>fn,dtype=Float,large=False,guess=True</var>)</td></tr></table></dt>
<dd>
Read an ascii .stl file into an [n,3,3] float array.

<p>
If the .stl is large, read_ascii_large() is recommended, as it is
    a lot faster.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-778' xml:id='l2h-778' class="function">read_ascii_large</tt></b>(</nobr></td>
  <td><var>fn,dtype=Float</var>)</td></tr></table></dt>
<dd>
Read an ascii .stl file into an [n,3,3] float array.

<p>
This is an alternative for read_ascii, which is a lot faster on large
    STL models.
    It requires the 'awk' command though, so is probably only useful on
    Linux/UNIX. It works by first transforming  the input file to a
    .nodes file and then reading it through numpy's fromfile() function.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-779' xml:id='l2h-779' class="function">off_to_tet</tt></b>(</nobr></td>
  <td><var>fn</var>)</td></tr></table></dt>
<dd>
Transform an .off model to tetgen (.node/.smesh) format.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-780' xml:id='l2h-780' class="function">find_row</tt></b>(</nobr></td>
  <td><var>mat,row,nmatch=None</var>)</td></tr></table></dt>
<dd>
Find all rows in matrix matching given row.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-781' xml:id='l2h-781' class="function">find_nodes</tt></b>(</nobr></td>
  <td><var>nodes,coords</var>)</td></tr></table></dt>
<dd>
Find nodes with given coordinates in a node set.

<p>
nodes is a (nnodes,3) float array of coordinates.
    coords is a (npts,3) float array of coordinates.

<p>
Returns a (n,) integer array with ALL the node numbers matching EXACTLY
    ALL the coordinates of ANY of the given points.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-782' xml:id='l2h-782' class="function">find_first_nodes</tt></b>(</nobr></td>
  <td><var>nodes,coords</var>)</td></tr></table></dt>
<dd>
Find nodes with given coordinates in a node set.

<p>
nodes is a (nnodes,3) float array of coordinates.
    coords is a (npts,3) float array of coordinates.

<p>
Returns a (n,) integer array with THE FIRST node number matching EXACTLY
    ALL the coordinates of EACH of the given points.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-783' xml:id='l2h-783' class="function">find_triangles</tt></b>(</nobr></td>
  <td><var>elems,triangles</var>)</td></tr></table></dt>
<dd>
Find triangles with given node numbers in a surface mesh.

<p>
elems is a (nelems,3) integer array of triangles.
    triangles is a (ntri,3) integer array of triangles to find.

<p>
Returns a (ntri,) integer array with the triangles numbers.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-784' xml:id='l2h-784' class="function">remove_triangles</tt></b>(</nobr></td>
  <td><var>elems,remove</var>)</td></tr></table></dt>
<dd>
Remove triangles from a surface mesh.

<p>
elems is a (nelems,3) integer array of triangles.
    remove is a (nremove,3) integer array of triangles to remove.

<p>
Returns a (nelems-nremove,3) integer array with the triangles of
    nelems where the triangles of remove have been removed.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-785' xml:id='l2h-785' class="function">Rectangle</tt></b>(</nobr></td>
  <td><var>nx,ny</var>)</td></tr></table></dt>
<dd>
Create a plane rectangular surface consisting of a nx,ny grid.

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-786' xml:id='l2h-786' class="function">Cube</tt></b>(</nobr></td>
  <td><var></var>)</td></tr></table></dt>
<dd>
Create a surface in the form of a cube

<p>
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-787' xml:id='l2h-787' class="function">Sphere</tt></b>(</nobr></td>
  <td><var>level=4,verbose=False,filename=None</var>)</td></tr></table></dt>
<dd>
Create a spherical surface by caling the gtssphere command.

<p>
If a filename is given, it is stored under that name, else a temporary
    file is created.
    Beware: this may take a lot of time if level is 8 or higher.

<p>
</dl>

<p>

<p>

<div class="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="8.22.1 trisurface class: A"
  href="node187.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="8.22 surface  "
  href="module-surface.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="8.23 turtle"
  href="module-turtle.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node187.html">8.22.1 TriSurface class: A</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="module-surface.html">8.22 surface  </a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="module-turtle.html">8.23 turtle</a>
</div>
</div>
<hr />
<span class="release-info">Release 0.8-a1, documentation updated on 9 June 2009.</span>
</div>
<!--End of Navigation Panel-->

</body>
</html>
