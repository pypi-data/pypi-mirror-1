<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="pyformex.css" type='text/css' />
<link rel="SHORTCUT ICON" href="../favicon.ico" />
<link rel='start' href='http://pyformex.berlios.de' title='pyFormex home Page' />
<link rel="first" href="pyformex.html" title='pyFormex manual' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="next" href="node29.html" />
<link rel="prev" href="node27.html" />
<link rel="parent" href="node18.html" />
<link rel="next" href="node29.html" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name='aesop' content='information' />
<title>2.3.7 Changing the Formex</title>
</head>
<body>
<div class="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="2.3.6 information about a"
  href="node27.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="2.3 creating geometrical models"
  href="node18.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="2.3.8 converting a Formex"
  href="node29.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node27.html">2.3.6 Information about a</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node18.html">2.3 Creating geometrical models</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node29.html">2.3.8 Converting a Formex</a>
</div>
<hr /></div>
</div>
<!--End of Navigation Panel-->

<h2><a name="SECTION003370000000000000000"></a>
<a name="subsec:changing"></a>
<br>
2.3.7 Changing the Formex
</h2>
Until now, we've only created simple Formices. The strength of pyFormex however is that it is very easy to generate large geometrical models by a sequence of mathematical transformations. After initiating a basic Formex, it's possible to transform it by using copies, translations, rotations, projections,...

<p>
There are many transformations available, but this is not the right place to describe them all. This is what the reference manual in chapter <a href="node75.html#cha:reference">8</a> is for. A summary of all possible transformations and functions can be found there.

<p>
To illustrate some of these transformations and the recommended way of writing a script, we will analyse some of the examples. More of these interesting examples are found in <span class="file">installdir/examples</span>. Let's begin with the example <span class="file">Spiral.py</span>. 

<p>
<br>
<pre  class="verbatim">#!/usr/bin/env pyformex
# $Id$
##
## This file is part of pyFormex 0.3 Release Mon Feb 20 21:04:03 2006
## pyFormex is a python implementation of Formex algebra
## Homepage: http://pyformex.berlios.de/
## Distributed under the GNU General Public License, see file COPYING
## Copyright (C) Benedict Verhegghe except where stated otherwise 
##
#
"""Spiral"""

m = 36 # number of cells along torus big circle
n = 10 # number of cells along torus small circle

def drawit(F,view='front'):
    clear()
    draw(F,view)
    
F = Formex(pattern("164"),[1,2,3]); drawit(F)
F = F.replic(m,1,0); drawit(F)
F = F.replic(n,1,1); drawit(F)
F = F.translate1(2,1); drawit(F,'iso')
F = F.cylindrical([2,1,0],[1.,360./n,1.]); drawit(F,'iso')
F = F.replic(5,m,2); drawit(F,'iso')
F = F.rotate(-10,0); drawit(F,'iso')
F = F.translate1(0,5); drawit(F,'iso')
F = F.cylindrical([0,2,1],[1.,360./m,1.]); drawit(F,'iso')
drawit(F,'right')
</pre>
<p>
During this first read-through, you will have noticed that every step is drawn. Of course, this is not necessary, but it can be useful. And above all, it is very educational for use in a tutorial...

<p>
The next important thing is that parameters were used. It's recommended to always do this, especially when you want to do a parametric study of course, but it can also be very convenient if at some point you want to change the geometry (for example when you want to re-use the script for another application).

<p>
A simple function <tt class="function">drawit()</tt> is defined for use in this script only. This function only provides a shorter way of drawing Formices, since it combines <tt class="function">clear()</tt> and <tt class="function">draw</tt>. 

<p>
Now, let's dissect the script.

<p>
<div class="verbatim"><pre>
def drawit(F,view='front'):
    clear()
    draw(F,view)
</pre></div>
This is a small function that is only defined in this script. It clears the screen and draws the Formex at the same time. 

<p>
<div class="verbatim"><pre>
m = 36 # number of cells along torus big circle
n = 10 # number of cells along torus small circle
</pre></div>
These are the parameters. They can easily be changed, and a whole new spiral will be created without any extra effort.
The first step is to create a basic Formex. In this case, it's a triangle which has a different property number for every edge.
<div class="verbatim"><pre>
F = Formex(pattern("164"),[1,2,3]); drawit(F)
</pre></div>

<div align="CENTER"><a name="749"></a>
<table>
<caption align="BOTTOM"><strong>Figure 2.9:</strong>
The basic Formex</caption>
<tr><td>
<div align="CENTER">

</div>  &nbsp;
<br>

  <IMG
 WIDTH="1024" HEIGHT="574" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/spiral-000.png"
 ALT="spiral-000.png"></td></tr>
</table>
</div>

<p>
This basic Formex is copied 'm' times in the 0-direction with a translation 
step of '1' (the length of an edge of the triangle). After that, the new 
Formex is copied 'n' times in the 1-direction with a translation step of '1'. 
Because of the recursive definition (F=F.replic), the original Formex F is 
overwritten by the transformed one.
<div class="verbatim"><pre>
F = F.replic(m,1,0); drawit(F)
F = F.replic(n,1,1); drawit(F)
</pre></div>

<p>
Now a copy of this last Formex is translated in direction '2' with a 
translation step of '1'. This necessary for the transformation into a cilinder.
The result of all previous steps is a rectangular pattern with the desired 
dimensions, in a plane z=1.
<div class="verbatim"><pre>
F = F.translate(2,1); drawit(F,'iso')
</pre></div>

<div align="CENTER"><a name="759"></a>
<table>
<caption align="BOTTOM"><strong>Figure 2.10:</strong>
The rectangular pattern</caption>
<tr><td>
<div align="CENTER">

</div>  &nbsp;
<br>

  <IMG
 WIDTH="1024" HEIGHT="574" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/spiral-003.png"
 ALT="spiral-003.png"></td></tr>
</table>
</div>

<p>
This pattern is rolled up into a cilinder around the 2-axis. 
<div class="verbatim"><pre>
F = F.cylindrical([2,1,0],[1.,360./n,1.]); drawit(F,'iso')
</pre></div>

<div align="CENTER"><a name="767"></a>
<table>
<caption align="BOTTOM"><strong>Figure 2.11:</strong>
The cylinder</caption>
<tr><td>
<div align="CENTER">

</div>  &nbsp;
<br>

  <IMG
 WIDTH="1024" HEIGHT="574" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/spiral-004.png"
 ALT="spiral-004.png"></td></tr>
</table>
</div>

<p>
This cilinder is copied 5 times in the 2-direction with a translation step of 
'm' (the lenght of the cilinder). 
<div class="verbatim"><pre>
F = F.replic(5,m,2); drawit(F,'iso')
</pre></div>

<p>
The next step is to rotate this cilinder -10 degrees around the 0-axis. 
This will determine the pitch angle of the spiral.
<div class="verbatim"><pre>
F = F.rotate(-10,0); drawit(F,'iso')
</pre></div>

<div align="CENTER"><a name="777"></a>
<table>
<caption align="BOTTOM"><strong>Figure 2.12:</strong>
The new cylinder</caption>
<tr><td>
<div align="CENTER">

</div>  &nbsp;
<br>

  <IMG
 WIDTH="1024" HEIGHT="574" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/spiral-006.png"
 ALT="spiral-006.png"></td></tr>
</table>
</div>

<p>
This last Formex is now translated in direction '0' with a translation step of '5'. 
<div class="verbatim"><pre>
F = F.translate(0,5); drawit(F,'iso')
</pre></div>

<p>
Finally, the Formex is rolled up, but around a different axis then before. 
Due to the pitch angle, a spiral is created. If the pitch angle would be 0 
(no rotation of -10 degrees around the 0-axis), the resulting Formex 
would be a torus. 
<div class="verbatim"><pre>
F = F.cylindrical([0,2,1],[1.,360./m,1.]); drawit(F,'iso')
drawit(F,'right')
</pre></div>

<p>

<div align="CENTER"><a name="788"></a>
<table>
<caption align="BOTTOM"><strong>Figure 2.13:</strong>
The spiral</caption>
<tr><td>
<div align="CENTER">

</div>  &nbsp;
<br>

   <IMG
 WIDTH="1024" HEIGHT="574" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/spiral-007.png"
 ALT="spiral-007.png">
     <IMG
 WIDTH="1024" HEIGHT="574" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/spiral-008.png"
 ALT="spiral-008.png"></td></tr>
</table>
</div>

<p>

<div class="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="2.3.6 information about a"
  href="node27.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="2.3 creating geometrical models"
  href="node18.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="2.3.8 converting a Formex"
  href="node29.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node27.html">2.3.6 Information about a</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node18.html">2.3 Creating geometrical models</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node29.html">2.3.8 Converting a Formex</a>
</div>
</div>
<hr />
<span class="release-info">Release 0.8-a1, documentation updated on 9 June 2009.</span>
</div>
<!--End of Navigation Panel-->

</body>
</html>
