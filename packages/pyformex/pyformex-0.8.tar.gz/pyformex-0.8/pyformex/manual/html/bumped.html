<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="pyformex.css" type='text/css' />
<link rel="SHORTCUT ICON" href="../favicon.ico" />
<link rel='start' href='http://pyformex.berlios.de' title='pyFormex home Page' />
<link rel="first" href="pyformex.html" title='pyFormex manual' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="next" href="node66.html" />
<link rel="prev" href="node64.html" />
<link rel="parent" href="node64.html" />
<link rel="next" href="node66.html" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name='aesop' content='information' />
<title>6.1.1 Creating the base module</title>
</head>
<body>
<div class="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="6.1 creating geometry"
  href="node64.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="6.1 creating geometry"
  href="node64.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="6.1.2 extending the base"
  href="node66.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node64.html">6.1 Creating geometry</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node64.html">6.1 Creating geometry</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node66.html">6.1.2 Extending the base</a>
</div>
<hr /></div>
</div>
<!--End of Navigation Panel-->

<h2><a name="SECTION007110000000000000000">
6.1.1 Creating the base module</a>
</h2>

<p>
Depending on the specified arguments in the constructor, the mean stent diameter <span class="MATH"><IMG
 WIDTH="17" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img25.png"
 ALT="$D$"></span>, the average stent radius <span class="MATH"><IMG
 WIDTH="11" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img26.png"
 ALT="$r$"></span>, the <code>bump</code> or curvature of the wires <span class="MATH"><IMG
 WIDTH="20" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img27.png"
 ALT="$dz$"></span>, the pitch <span class="MATH"><IMG
 WIDTH="12" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img28.png"
 ALT="$p$"></span> and the number of base modules in the axial direction <span class="MATH"><IMG
 WIDTH="22" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img29.png"
 ALT="$ny$"></span> are calculated with the following script. As the wire stent structure is obtained by braiding, the wires have an undulating course and the <code>bump dz</code> corresponds to the amplitude of the wave. If no extra distance <span class="MATH"><IMG
 WIDTH="19" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img23.png"
 ALT="$ds$"></span> is specified, there will be exactly one wire diameter between the centre lines of the crossing wires. The number of modules in the axial direction <span class="MATH"><IMG
 WIDTH="22" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img29.png"
 ALT="$ny$"></span> is an integer, therefore, the actual length of the stent model might differ slightly from the specified, desired length <span class="MATH"><IMG
 WIDTH="14" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img18.png"
 ALT="$L$"></span>. However, this difference has a negligible impact on the numerical results.

<p>
<br>
<pre  class="verbatim">    def __init__(self,De,L,d,nx,be,ds=0.0,nb=4,connectors=True):
        """Create the Wire Stent."""
        D = De - 2*d - ds
        r = 0.5*D
        dz = 0.5*(ds+d)
        p = math.pi*D*tand(be)
        nx = int(nx)
        ny = int(round(nx*L/p))  # The actual length may differ
		 a bit from L
</pre>
<p>
Of now, all parameters to describe the stent geometry are specified and available to start the construction of the wire stent. Initially a simple Formex is created using the <code>pattern()</code>-function: a straigth line segment of length 1 oriented along the X-axis (East or <span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img30.png"
 ALT="$1$"></span>-direction). The <code>replic()</code>-functionality replicates this line segment <span class="MATH"><IMG
 WIDTH="20" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img24.png"
 ALT="$nb$"></span> times with step 1 in the X-direction (<span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img8.png"
 ALT="$0$"></span>-direction). Subsequently, these <span class="MATH"><IMG
 WIDTH="20" HEIGHT="14" ALIGN="BOTTOM" BORDER="0"
 SRC="img24.png"
 ALT="$nb$"></span> line segments form a new Formex which is given a one-dimensional <code>bump</code> with the <code>bump1()</code>-function. The Formex undergoes a deformation in the Z-direction (<span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img31.png"
 ALT="$2$"></span>-direction), forced by the point <code>[0,0,dz]</code>. The <code>bump</code> intensity is specified by the quadratic <code>bump_z</code> function and varies along the X-axis (<span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img8.png"
 ALT="$0$"></span>-axis). The creation of this single bumped strut, oriented along the X-axis is summarized in the next script and depicted in Figure <a href="#bumped">6.1</a>.

<p>
<br>
<pre  class="verbatim">        # a single bumped strut, oriented along the x-axis
        bump_z=lambda x: 1.-(x/nb)**2
        base = Formex(pattern('1')).replic(nb,1.0).bump1
		(2,[0.,0.,dz],bump_z,0)
</pre>
<p>

<div align="CENTER"><a name="bumped"></a><a name="1863"></a>
<table>
<caption align="BOTTOM"><strong>Figure 6.1:</strong>
Creation of single bumped strut (c) from a straight (a) and replicated (b) line segment.</caption>
<tr><td>
<div align="CENTER">

</div>   &nbsp;
<br>

   <IMG
 WIDTH="1233" HEIGHT="678" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/WireStentDemot2Step01.png"
 ALT="WireStentDemot2Step01.png">
     <IMG
 WIDTH="1233" HEIGHT="678" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/WireStentDemot2Step02.png"
 ALT="WireStentDemot2Step02.png">
     <IMG
 WIDTH="1233" HEIGHT="678" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/WireStentDemot2Step03.png"
 ALT="WireStentDemot2Step03.png"></td></tr>
</table>
</div>

<p>
The single bumped strut (<code>base</code>) is rescaled homothetically in the XY-plane to size one with the <code>scale()</code>-function. Subsequently, the <code>shear()</code>-functionality generates a new <code>NE</code> Formex by skewing the <code>base</code> Formex in the Y-direction (<span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img30.png"
 ALT="$1$"></span>-direction) with a <code>skew</code> factor of <span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img30.png"
 ALT="$1$"></span> in the YX-plane. As a result, the Y-coordinates of the <code>base</code> Formex are altered according to the following rule: <!-- MATH
 $y_2 = y_1 + skew * x_1$
 -->
<span class="MATH"><IMG
 WIDTH="141" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img32.png"
 ALT="$y_2 = y_1 + skew * x_1$"></span>. Similarly a <code>SE</code> Formex is generated by a <code>shear()</code> operation on a mirrored copy of the <code>base</code> Formex. The <code>base</code> copy, mirrored in the direction of the XY-plane (perpendicular to the <span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img31.png"
 ALT="$2$"></span>-axis), is obtained by the <code>reflect()</code> command. Both Formices are given a different property number by the <code>setProp()</code>-function, visualised by the different color codes in Figure <a href="#base">6.2</a> This number can be used as an entry in a database, which holds some sort of property. The Formex and the database are two seperate entities, only linked by the property numbers. The <code>rosette()</code>-function creates a unit cell of crossing struts by <span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img31.png"
 ALT="$2$"></span> rotational replications with an angular step of [180]<span class="MATH"><IMG
 WIDTH="28" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img22.png"
 ALT="$\deg$"></span> around the Z-axis (the original Formex is the first of the <span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img31.png"
 ALT="$2$"></span> replicas). If specified in the constructor, an additional Formex with property <span class="MATH"><IMG
 WIDTH="12" HEIGHT="17" ALIGN="BOTTOM" BORDER="0"
 SRC="img31.png"
 ALT="$2$"></span> connects the first points of the <code>NE</code> and <code>SE</code> Formices.
<br>
<pre  class="verbatim">        # scale back to size 1.
        base = base.scale([1./nb,1./nb,1.])
        # NE and SE directed struts
        NE = base.shear(1,0,1.)
        SE = base.reflect(2).shear(1,0,-1.)
        NE.setProp(1)
        SE.setProp(3)
        # a unit cell of crossing struts
        cell1 = (NE+SE).rosette(2,180)
        # add a connector between first points of NE and SE
        if connectors:
            cell1 += Formex([[NE[0][0],SE[0][0]]],2)
</pre>
<p>

<div align="CENTER"><a name="base"></a><a name="1891"></a>
<table>
<caption align="BOTTOM"><strong>Figure 6.2:</strong>
Creation of unit cell of crossing and connected struts (c) from a rescaled (a) and mirrored, skewed (b) bumped strut.</caption>
<tr><td>
<div align="CENTER">

</div>   &nbsp;
<br>

   <IMG
 WIDTH="1233" HEIGHT="678" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/WireStentDemot2Step04.png"
 ALT="WireStentDemot2Step04.png">
     <IMG
 WIDTH="1233" HEIGHT="678" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/WireStentDemot2Step07.png"
 ALT="WireStentDemot2Step07.png">
     <IMG
 WIDTH="1233" HEIGHT="678" ALIGN="BOTTOM" BORDER="0"
 SRC="../images/WireStentDemot2Step09.png"
 ALT="WireStentDemot2Step09.png"></td></tr>
</table>
</div>

<p>

<div class="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="6.1 creating geometry"
  href="node64.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="6.1 creating geometry"
  href="node64.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="6.1.2 extending the base"
  href="node66.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node64.html">6.1 Creating geometry</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node64.html">6.1 Creating geometry</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node66.html">6.1.2 Extending the base</a>
</div>
</div>
<hr />
<span class="release-info">Release 0.8-a1, documentation updated on 9 June 2009.</span>
</div>
<!--End of Navigation Panel-->

</body>
</html>
