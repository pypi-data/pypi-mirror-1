<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="pyformex.css" type='text/css' />
<link rel="SHORTCUT ICON" href="../favicon.ico" />
<link rel='start' href='http://pyformex.berlios.de' title='pyFormex home Page' />
<link rel="first" href="pyformex.html" title='pyFormex manual' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="prev" href="node28.html" />
<link rel="parent" href="node18.html" />
<link rel="next" href="node30.html" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name='aesop' content='information' />
<title>2.3.8 Converting a Formex to a Finite Element model</title>
</head>
<body>
<div class="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="2.3.7 changing the Formex"
  href="node28.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="2.3 creating geometrical models"
  href="node18.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="2.4 assigning properties to"
  href="node30.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node28.html">2.3.7 Changing the Formex</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node18.html">2.3 Creating geometrical models</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node30.html">2.4 Assigning properties to</a>
</div>
<hr /></div>
</div>
<!--End of Navigation Panel-->

<h2><a name="SECTION003380000000000000000"></a>
<a name="subsec:femodel"></a>
<br>
2.3.8 Converting a Formex to a Finite Element model
</h2>

<p>
The <tt class="method">feModel()</tt> method is important in exporting the geometry to finite element (FE) programs. A Formex often contains many points with (nearly) the same coordinates. In a finite element model, theses points have to be merged into a single nod, to express the continuity of the material. This is exactly what<tt class="method">feModel()</tt> does. It returns a tuple of two numpy arrays (nodes,elems), where

<ul>
<li>nodes is a float array with shape (?,3), containing the coordinates of the merged points (nodes),
</li>
<li>elems is an integer array with shape (F.nelems(),F.nplex()), describing each element by a list of node numbers. The elements and their nodes are in the same order as in F.
</li>
</ul>

<p>
<div class="verbatim"><pre>
&gt;&gt;&gt; from simple import *
&gt;&gt;&gt; F = Formex(pattern(Pattern['cube']))
&gt;&gt;&gt; draw(F)
&gt;&gt;&gt; nodes,elems = F.feModel()
&gt;&gt;&gt; print 'Nodes',nodes
&gt;&gt;&gt; print 'Elements',elems

Nodes
[[ 0.  0.  0.]
 [ 1.  0.  0.]
 [ 0.  1.  0.]
 [ 1.  1.  0.]
 [ 0.  0.  1.]
 [ 1.  0.  1.]
 [ 0.  1.  1.]
 [ 1.  1.  1.]]
Elements
[[0 1]
 [1 3]
 [3 2]
 [2 0]
 [0 4]
 [1 5]
 [3 7]
 [2 6]
 [4 5]
 [5 7]
 [7 6]
 [6 4]]
</pre></div>

<p>
The reverse operation of transforming a finite element model back into a Formex is quite simple: <code>Formex(nodes[elems])</code> will indeed be identical to the original F (within the tolerance used in merging of the nodes).

<p>
<div class="verbatim"><pre>
&gt;&gt;&gt; G = Formex(nodes[elems])
&gt;&gt;&gt; print allclose(F.f,G.f)
True
</pre></div>
The <code>allclose</code> funcion in the second line tests that all coordinates
in bopth arrays are the same, within a small tolerance.

<p>

<div class="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="2.3.7 changing the Formex"
  href="node28.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="2.3 creating geometrical models"
  href="node18.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="2.4 assigning properties to"
  href="node30.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node28.html">2.3.7 Changing the Formex</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node18.html">2.3 Creating geometrical models</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node30.html">2.4 Assigning properties to</a>
</div>
</div>
<hr />
<span class="release-info">Release 0.8-a1, documentation updated on 9 June 2009.</span>
</div>
<!--End of Navigation Panel-->

</body>
</html>
