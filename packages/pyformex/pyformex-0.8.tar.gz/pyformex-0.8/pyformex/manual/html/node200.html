<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="pyformex.css" type='text/css' />
<link rel="SHORTCUT ICON" href="../favicon.ico" />
<link rel='start' href='http://pyformex.berlios.de' title='pyFormex home Page' />
<link rel="first" href="pyformex.html" title='pyFormex manual' />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="prev" href="node199.html" />
<link rel="parent" href="node198.html" />
<link rel="next" href="node201.html" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name='aesop' content='information' />
<title>9.2 TRICKS</title>
</head>
<body>
<div class="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="9.1 FAQ"
  href="node199.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="9. pyformex FAQ 'n"
  href="node198.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="A. gnu GENERAL PUBLIC"
  href="node201.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node199.html">9.1 FAQ</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node198.html">9. pyFormex FAQ 'n</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node201.html">A. GNU GENERAL PUBLIC</a>
</div>
<hr /></div>
</div>
<!--End of Navigation Panel-->

<h1><a name="SECTION0010200000000000000000"></a>
<a name="sec:tricks"></a>
<br>
9.2 TRICKS
</h1>

<p>

<ol>
<li><b>Set the directory where a script is found as the current working directory</b>
<p>
Start your script with the following:
<div class="verbatim"><pre>
chdir(__file__)
</pre></div>
When executing a script, pyFormex sets the name of the script file in a variable <var>__file__</var> passed with the global variables to the execution environment of the script.

<p>
</li>
<li><b>Import modules from your own script directories</b>
<p>
In order for Python to find the modules in non-standard locations, you should add the directory path of the module to the <code>sys.path</code> variable. 

<p>
A common example is a script that wants to import modules from the same directory where it is located. In that case you can just add the following two lines to the start of your script.
<div class="verbatim"><pre>
import os,sys
sys.path.insert(0,os.dirname(__file__))
</pre></div>

<p>
</li>
<li><b>Automatically load plugin menus on startup</b>
<p>
Plugin menus can be loaded automatically on pyFormex startup, by adding a line to the <code>gui</code> section of your configuration file (<code>~/.pyformexrc</code>).
<div class="verbatim"><pre>
[gui]
plugins = ['surface_menu', 'formex_menu']
</pre></div>

<p>
</li>
<li><b>Automatically execute your own scripts on startup</b>
<p>
If you create your own pugin menus for pyFormex, you cannot autoload them like the regular plugin menus from the distribution, because they are not in the plugin directory of the installation.<a name="tex2html52"
  href="#foot11179"><sup>9.2</sup></a>You can however automatically execute your own scripts by adding their full path names in the <code>autorun</code> variable of your configuration file.
<div class="verbatim"><pre>
autorun = '/home/user/myscripts/startup/'
</pre></div>
This script will then be run when the pyFormex GUI starts up. You can even specify a list of scripts, which will be executed in order.
The autorun scripts are executed as any other pyFormex script, before any scripts specified on the command line, and before giving the input focus to the user.

<p>
</li>
<li><b>Create a movie from a sequence of recorded images</b>
<p>
The multisave option allows you to easily record a series of images while working with pyFormex. You may want to turn this sequence into a movie afterwards. THis can be done with the <tt><small class="SMALL">mencoder</small></tt> and/or <tt><small class="SMALL">ffmpeg</small></tt> programs. The internet provides comprehensive information on how to use these video encoders. 

<p>
If you are looking for a quick answer, however, here are some of the commands we have often used to create movies.

<ul>
<li>Create MNPG movies from PNG
To keep the quality of the PNG images in your movie, you should not encode them into a compressed format like MPEG. You can use the MPNG codec instead. Beware though that uncompressed encodings may lead to huge video files. Also, the MNPG is (though freely available), not installed by default on Windows machines.

<p>
Suppose you have images in files <tt><small class="SMALL">image-000.png</small></tt>, <tt><small class="SMALL">image-001.png</small></tt>, ....
First, you should get the size of the images (they all should have the same size). The command 
<div class="verbatim"><pre>
   file image*.png
</pre></div>
 will tell you the size. Then create movie with the command
<div class="verbatim"><pre>
  mencoder mf://image-*.png -mf w=796:h=516:fps=5:type=png -ovc copy -oac copy -o movie1.avi
</pre></div>
Fill in the correct width(w) and height(h) of the images, and set the frame rate(fps). The result will be a movie <tt><small class="SMALL">movie1.avi</small></tt>.

<p>
</li>
<li>Create a movie from (compressed) JPEG images.
Because the compressed format saves a lot of space, this will be the prefered format if you have lots of image files. The quality of the compressed image movie will suffer somewhat, though.
<div class="verbatim"><pre>
  ffmpeg -r 5 -b 800 -i image-%03d.jpg movie.mp4
</pre></div>

<p>
</li>
<li><b>Install the gl2ps extension</b>
<p>
Saving images in EPS format is done through the gl2ps library, which can be accessed from Python using the wrappers from python-gl2ps-1.1.2.tar.gz.

<p>
You need to have the OpenGL header files installed in order to do this. (On Debian: apt-get install libgl1-mesa-dev.)

<p>
<div class="verbatim"><pre>
tar xvzf python-gl2ps-1.1.2.tar.gz
cd python-gl2ps-1.1.2
su root
python setup.py install
</pre></div>

<p>
</li>
</ul>
</li>
</ol>

<p>


<p>
<br><hr><h4>Footnotes</h4>
<dl>
<dt><a name="foot11179">... installation.</a><A
 HREF="node200.html#tex2html52"><sup>9.2</sup></a></dt>
<dd>Do not be tempted to put your own files under the installation directory (even if you can acquire the permissions to do so), because on removal or reinstall your files might be deleted!

</dd>
</dl>
<div class="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="9.1 FAQ"
  href="node199.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="9. pyformex FAQ 'n"
  href="node198.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="A. gnu GENERAL PUBLIC"
  href="node201.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%">pyFormex manual</td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><a rel="index" title="Index"
  href="genindex.html"><img src='index.png'
  border='0' height='32'  alt='Index' width='32' /></a></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="node199.html">9.1 FAQ</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="node198.html">9. pyFormex FAQ 'n</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node201.html">A. GNU GENERAL PUBLIC</a>
</div>
</div>
<hr />
<span class="release-info">Release 0.8-a1, documentation updated on 9 June 2009.</span>
</div>
<!--End of Navigation Panel-->

</body>
</html>
