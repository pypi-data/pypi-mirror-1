<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="p4a.audio">

<body>
<metal:cssslot metal:fill-slot="css_slot">
<link rel="stylesheet" href="audio.css"
      tal:attributes="href string:$portal_url/++resource++audiostyles/audio.css"
      />
</metal:cssslot>

<div metal:fill-slot="main"
     tal:define="audio_info context/@@audio_view;
                 context_url string:${context/absolute_url};
                 mime_type context/content_type;
     ">
    <tal:main-macro metal:define-macro="main" 
           tal:define="size python:context.getObjSize(context);
                       plone2 context/document_actions/macros/document_actions|python:None;
                       plone2 python:plone2 is not None;
                       plone3 python:plone2 is None">

        <tal:block condition="plone2">
          <div metal:use-macro="context/document_actions/macros/document_actions">
              Document actions (print, sendto etc)
          </div>
        </tal:block>

        <tal:block condition="plone3">
          <div tal:replace="structure provider:plone.abovecontenttitle" />
        </tal:block>

        <h1 tal:content="audio_info/title" class="documentFirstHeading">
            Title or id
        </h1>

        <tal:block condition="plone3">
          <div tal:replace="structure provider:plone.belowcontenttitle" />
        </tal:block>

        <p tal:content="audio_info/description" class="documentDescription">
          Description
        </p>

        <div tal:content="structure audio_info/rich_description"
             tal:condition="audio_info/rich_description"
             class="richDocumentDescription">
          Description
        </div>

        <tal:block condition="plone2">
        <div metal:use-macro="context/document_byline/macros/byline">
          Get the byline - contains details about author and modification date.
        </div>
        </tal:block>

        <div id="summary_wrapper">
            <div id="audio_metadata">
                <div><strong i18n:translate="label_size">Size:</strong>
                    <span tal:condition="size" tal:content="size">257 KB</span>
                    <span tal:condition="python:size is None or size &lt; 1" i18n:translate="no_file_uploaded">
                      (No file has been uploaded yet)
                    </span>
                </div>
                <div><strong i18n:translate="label_file_type">File type:</strong>
                    <span tal:content="string:${audio_info/audio_type} ($mime_type)">Content type</span>
                </div>    
                <div><strong i18n:translate="label_bitrate">Bit rate:</strong>
                    <span tal:content="audio_info/bit_rate">Bitrate</span>
                </div>
                <div><strong i18n:translate="label_frequency">Frequency:</strong>
                    <span tal:content="audio_info/frequency">Frequency</span>
                </div>
                <div><strong i18n:translate="label_track_length">Track length:</strong>
                    <span tal:content="audio_info/length">Track length</span>
                </div>

            </div>

            <div id="objmetadata_pbwidgets_wrapper">
                <div id="playback_widgets">
                    <div tal:replace="structure view/widgets/media_player"></div>

            <a tal:condition="audio_info/has_media_player" id="popup_play_icon"
               href="#" title="Play in popup window" class="widget_icon"
               tal:attributes="href string:javascript:void window.open('${context/absolute_url}/popup-play.html', '', 'width=200, height=45, toolbar=no, location=no, directories=no, status=no, menubar=no')" i18n:attributes="title icon_play_in_popup">
            </a>
                    <a href="" id="play_icon" class="widget_icon"
                           tal:attributes="href string:$context_url/stream.m3u" title="Stream file" i18n:attributes="title icon_stream_file"></a>
                    <a href="" id="download_icon" class="widget_icon"
                           tal:attributes="href string:$context_url" title="Download file" i18n:attributes="title icon_download_file"></a>

                </div>

            <div class="audio-images">
              <img tal:replace="structure view/widgets/audio_image" />
            </div>

                <div id="object_metadata">
                    <dl>
	 					<dt class="audio-artist" i18n:translate="label_artist">Artist:</dt>
                           <dd class="audio-artist" tal:condition="audio_info/artist | nothing" tal:content="audio_info/artist">Artist</dd>
                        <dt class="audio-track" i18n:translate="label_track">Track number:</dt>
                           <dd class="audio-track" tal:condition="audio_info/idtrack | nothing" tal:content="audio_info/idtrack">Track number</dd>
 						<dt class="audio-album" i18n:translate="label_album">Album:</dt> 
                      		<dd class="audio-album" tal:condition="audio_info/album | nothing" tal:content="audio_info/album">Album</dd>
 						<dt class="audio-year" i18n:translate="label_year">Year:</dt> 
                      		<dd class="audio-year" tal:condition="audio_info/year | nothing" tal:content="audio_info/year">Year</dd>
 						<dt class="audio-genre" i18n:translate="label_genre">Genre:</dt>
                        	<dd class="audio-genre" tal:content="audio_info/genre|nothing" ></dd>
						<dt class="audio-comment" i18n:translate="label_comment">Comment:</dt>
                      <dd class="audio-comment" tal:condition="audio_info/comment | nothing" tal:content="audio_info/comment">Comment</dd>
                    </dl>

<div class="bottom-content-info">

		<metal:ratings-and-tags use-macro="context/@@audio_macros/user_rating_set" />

			        <tal:block tal:condition="view/has_contenttagging_support">
<metal:block use-macro="context/@@tag_macros/tags_footer">
</metal:block>
			        </tal:block>
        <div class="visualClear">&nbsp;</div>
</div>
			        <tal:block tal:condition="view/has_contentlicensing_support">
	                  <div tal:replace="structure context/@@copyright_byline_view" />
                      <div tal:replace="structure context/@@metadata_view" />
			        </tal:block>

                </div>
            <div class="visualClear">&nbsp;</div>
            </div>
        </div>
        <div class="visualClear">&nbsp;</div>

    <!-- Mark this view as being a main view template /-->
    <tal:block tal:define="global isViewTemplate python:True"/>
        
    </tal:main-macro>
</div>

</body>

</html>
