<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="STYLESHEET" href="miniconf.css" type='text/css' />
<link rel="first" href="miniconf.html" title='<tt class="module">miniconf</tt> -- Plain text Python built-in objects persistence' />
<link rel='contents' href='contents.html' title="Contents" />
<link rel='last' href='about.html' title='About this document...' />
<link rel='help' href='about.html' title='About this document...' />
<link rel="next" href="node3.html" />
<link rel="prev" href="contents.html" />
<link rel="parent" href="miniconf.html" />
<link rel="next" href="node3.html" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name='aesop' content='information' />
<title>1 Usage</title>
</head>
<body>
<div class="navigation">
<div id='top-navigation-panel' xml:id='top-navigation-panel'>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="Contents"
  href="contents.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="miniconf   Plain"
  href="miniconf.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="2 Example"
  href="node3.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%"><tt class="module">miniconf</tt> -- Plain text Python built-in objects persistence</td>
<td class='online-navigation'><a rel="contents" title="Table of Contents"
  href="contents.html"><img src='contents.png'
  border='0' height='32'  alt='Contents' width='32' /></a></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="contents.html">Contents</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="miniconf.html">miniconf   Plain</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node3.html">2 Example</a>
</div>
<hr /></div>
</div>
<!--End of Navigation Panel-->

<h1><a name="SECTION000200000000000000000">
1 Usage</a>
</h1>
<tt class="module">miniconf</tt> provides data persistence of a subset of Python built-in
objects as plain text. Objects are loaded from, and dumped to valid Python
source composed of assignment statements of the form
<code>identifier = value</code>. Supported objects are:

<p>

<ul>
<li>dictionaries (<code>dict</code>)
</li>
<li>lists and tuples (<code>list</code> and <code>tuple</code>)
</li>
<li>integers and floats (<code>int</code> and <code>float</code>)
</li>
<li>plain and unicode strings (<code>str</code> and <code>unicode</code>)
</li>
<li>booleans (<code>bool</code>)
</li>
<li><code>None</code>
</li>
</ul>

<p>
Arbitrarily complex objects composed of these types can be
handled. <tt class="module">miniconf</tt> is restricted to these types because they can be
easily reconstructed from literal representation in Python, entirely known at
byte-compilation, without the need to execute the code.

<p>
<tt class="module">miniconf</tt> aims at providing an easy, elegant way to store (dump) and
retrieve (load) configurations<a name="tex2html1"
  href="#foot101"><sup>1</sup></a> and other simple datasets in a
human-readable, familiar pythonic notation, while preventing unwanted injection
of external code.

<p>
Basically, <tt class="module">miniconf</tt> exposes two important functions, <tt class="function">load</tt>
and <tt class="function">dump</tt>, as well as one helper function, <tt class="function">format_header</tt>:

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-1' xml:id='l2h-1' class="function">load</tt></b>(</nobr></td>
  <td><var>buf</var><big>[</big><var>, pedantic=False</var><big>]</big><var></var>)</td></tr></table></dt>
<dd>
Load configuration from string <var>buf</var>. If <var>pedantic</var> is <code>True</code>,
un-loadable elements will raise <tt class="exception">TypeError</tt> exceptions instead of
being silently dropped. On success, return a dictionary containing the parsed
built-in objects, indexed by assignment names. On error, raise a
<tt class="exception">SyntaxError</tt>, <tt class="exception">TypeError</tt> or <tt class="exception">ValueError</tt>
exception.
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-2' xml:id='l2h-2' class="function">dump</tt></b>(</nobr></td>
  <td><var>data</var><big>[</big><var>, comments={}, pedantic=True, ...</var><big>]</big><var></var>)</td></tr></table></dt>
<dd>
Dump configuration from dictionary <var>data</var>, prepending string comments from
corresponding values (i.e. associated to the matching keys in <var>data</var>) in
<var>comments</var>. If <var>pedantic</var> is <code>True</code>, a <tt class="exception">TypeError</tt>
exception will be raised if some value in data is a derivate class of an
otherwise supported type. Return the formatted string on success, or raise a
<tt class="exception">TypeError</tt> or <tt class="exception">ValueError</tt> on error. <var>data</var> dictionary
is dumped in identifiers' alphabetical order. Valid keywords are optional
arguments to the low-level <tt class="class">PrettyPrinter</tt> object (see the
<tt class="function">pformat</tt> function from the <tt class="module">pprint</tt> module).

<p>
If every lines in a comment string are already starting with a pound sign thus
making the string an already valid Python comment, such string is preserved
untouched in the output. If not, the comment string will be formatted using
<tt class="function">format_header</tt>, using the same width used by the
<tt class="class">PrettyPrinter</tt>. Basically, this means you are free to either have
comments automatically formatted and wrapped as a single paragraph, or use your
own layout if you want, as long as the whole string keeps being a valid Python
comment.

<p>
Values associated with special <code>'--top--'</code> and <code>'--bottom--'</code> keys, if
they exist in comments, will be respectively included at the beginning and end
of the return string; same formatting rules apply to them.
</dl>

<p>
<dl><dt><table cellpadding="0" cellspacing="0"><tr valign="baseline">
  <td><nobr><b><tt id='l2h-3' xml:id='l2h-3' class="function">format_header</tt></b>(</nobr></td>
  <td><var>header</var><big>[</big><var>, width=80</var><big>]</big><var></var>)</td></tr></table></dt>
<dd>
Turn <var>header</var> into a valid Python comment by prepending a pound sing
followed by a space to each line, and wrap it to the given width. Return the
result as a single, potentially multi-lines string.
</dl>

<p>
<br><hr><h4>Footnotes</h4>
<dl>
<dt><a name="foot101">... configurations</a><A
 HREF="node2.html#tex2html1"><sup>1</sup></a></dt>
<dd>Hence the name, <tt class="module">miniconf</tt>. See
<tt class="module"><a href="module-ConfigParser.html">ConfigParser</a></tt> for a different but more thorough, higher-level
implementation of configuration file handlers.

</dd>
</dl>
<div class="navigation">
<div class='online-navigation'>
<p></p><hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class='online-navigation'><a rel="prev" title="Contents"
  href="contents.html"><img src='previous.png'
  border='0' height='32'  alt='Previous Page' width='32' /></a></td>
<td class='online-navigation'><a rel="parent" title="miniconf   Plain"
  href="miniconf.html"><img src='up.png'
  border='0' height='32'  alt='Up one Level' width='32' /></a></td>
<td class='online-navigation'><a rel="next" title="2 Example"
  href="node3.html"><img src='next.png'
  border='0' height='32'  alt='Next Page' width='32' /></a></td>
<td align="center" width="100%"><tt class="module">miniconf</tt> -- Plain text Python built-in objects persistence</td>
<td class='online-navigation'><a rel="contents" title="Table of Contents"
  href="contents.html"><img src='contents.png'
  border='0' height='32'  alt='Contents' width='32' /></a></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
<td class='online-navigation'><img src='blank.png'
  border='0' height='32'  alt='' width='32' /></td>
</tr></table>
<div class='online-navigation'>
<b class="navlabel">Previous:</b>
<a class="sectref" rel="prev" href="contents.html">Contents</a>
<b class="navlabel">Up:</b>
<a class="sectref" rel="parent" href="miniconf.html">miniconf   Plain</a>
<b class="navlabel">Next:</b>
<a class="sectref" rel="next" href="node3.html">2 Example</a>
</div>
</div>
<hr />
<span class="release-info">Release 1.1.0.</span>
</div>
<!--End of Navigation Panel-->

</body>
</html>
