<html metal:use-macro="context/@@master/macros/master">
    <metal:slot fill-slot="main">

      <h2>Available distributions for <span tal:content="request/package" />:</h2>
      <table tal:define="result     view/getPackageInfo; 
                         releases   result/releases;
                         files      result/files;
                        "
             border="1"
             id="package-info">
        <thead>
            <th>Version</th>
            <th>Distribution file</th>
            <th>Size</th>
            <th>Modified</th>
        </thead>

        <tbody>
            <tal:loop repeat="version releases">
                <tal:loop repeat="d files/?version">
                    <tr>
                        <td tal:condition="python: repeat['d'].index() == 0" 
                            tal:attributes="rowspan python: len(files[version])">
                            <span tal:content="version" />
                        </td>

                        <td tal:content="d/name" />
                        <td tal:content="d/size" />
                        <td tal:content="d/mtime" />
                   </tr>
                </tal:loop>
            </tal:loop>
        </tbody>
      </table>

    </metal:slot>
</html>
