<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>parley.helpers</title>
<link rel="stylesheet" type="text/css" href="default.css">
</head>
<body>
<h1>Module parley.helpers</h1>
<pre>parley/helpers.py - helper classes and functions for constructing actors.</pre>
<h2>Classes</h2>
<a name="Dispatcher"><div class="class">
<code><b>class Dispatcher</b>:</code><blockquote>
<pre>Inherit from this class to create an actor that behaves as an RPC server:
messages received get translated into method calls,
and method return values (as well as exceptions) are translated
into reply messages.

If you override the __init__ method, call the parent __init__
last to start the actor.</pre>
<div class="function">
<code><b>def _default(</b>self, msg, sender, args, kwargs<b>):</b></code><blockquote><pre>This method is called if the name of a received message
does not correspond to a method.</pre></blockquote>
</div>
<div class="function">
<code><b>def _dispatch(</b>self, msg, sender, args, kwargs<b>):</b></code><blockquote></blockquote>
</div>
<div class="function">
<code><b>def _loop(</b>self<b>):</b></code><blockquote></blockquote>
</div>
<div class="function">
<code><b>def _post_dispatch(</b>self, msg, sender, args, kwargs<b>):</b></code><blockquote><pre>This method is called after a message is dispatched to the
appropriate method.</pre></blockquote>
</div>
<div class="function">
<code><b>def _pre_dispatch(</b>self, msg, sender, args, kwargs<b>):</b></code><blockquote><pre>This method is called between when a message has been
received and when it is dispatched to the appropriate method.</pre></blockquote>
</div>
<div class="function">
<code><b>def filter(</b>self, (msg, sender, args, kwargs)<b>):</b></code><blockquote><pre>This method is passed to self.recv in the dispatcher main
loop. Override it to define what messages will be received by
this actor.</pre></blockquote>
</div>
<div class="function">
<code><b>def quit(</b>self, sender<b>):</b></code><blockquote><pre>By default, Dispatcher objects respond to quit messages
(presumably from linked actors) by raising StopActor.</pre></blockquote>
</div>
</blockquote>
</div></a><a name="DoNotReply"><div class="class">
<code><b>class DoNotReply</b>(<a href="exceptions.html#Exception">exceptions.Exception</a>):</code><blockquote><pre>Actors incorporating the parley.helpers classes can
raise this exception to indicate that no response to the
calling actor should be sent.</pre></blockquote>
</div></a><a name="StateMachine"><div class="class">
<code><b>class StateMachine</b>:</code><blockquote>
<pre>Behaves like Dispatcher, but self.state (along with an underscore)
is prepended to message names before they are looked up.</pre>
<div class="function">
<code><b>def _default(</b>self, msg, sender, args, kwargs<b>):</b></code><blockquote><pre>Default handler, called if (state)__default does not exist</pre></blockquote>
</div>
<div class="function">
<code><b>def _dispatch(</b>self, msg, sender, args, kwargs<b>):</b></code><blockquote></blockquote>
</div>
<div class="function">
<code><b>def _loop(</b>self<b>):</b></code><blockquote></blockquote>
</div>
<div class="function">
<code><b>def _state_getattr(</b>self, name, default=None<b>):</b></code><blockquote></blockquote>
</div>
</blockquote>
</div></a><h2>Functions</h2>
<div class="function">
<code><b>def forward_exceptions(</b>lst<b>):</b></code><blockquote><pre>Wraps a function to translate certain exceptions into
RemoteExceptions (which will typically be sent as messages
to an RPC client).
If the list of exceptions is not specified,
all exceptions except StopActor are caught in this manner.

Usage:
@forward_exceptions([KeyError, ValueError])
def foo(): ...</pre></blockquote>
</div>
<div class="function">
<code><b>def function_actor(</b>fn, loop=True<b>):</b></code><blockquote><pre>Wraps a function to act as an RPC server.

The resulting actor will respond to the "quit" message by exiting
and to any other message by calling the function and returning its
return value as an RPC reply.

If the parameter loop is False, the actor accepts one message
and then exits; otherwise, the actor serves forever.</pre></blockquote>
</div>
</body>
</html>
