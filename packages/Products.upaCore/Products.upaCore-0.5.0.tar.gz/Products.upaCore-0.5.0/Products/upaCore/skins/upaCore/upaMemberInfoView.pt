<html xmlns:tal="http://xml.zope.org/namespaces/tal"
        xmlns:metal="http://xml.zope.org/namespaces/metal"
        metal:use-macro="here/main_template/macros/master"
        i18n:domain="plone">

    <div metal:fill-slot="main" t
         tal:define="view_internally python: context.portal_membership.checkPermission('upacore: View internally', context);
                     view_managers  python: context.portal_membership.checkPermission('Manager users', context);
                    ">

        <h2>
            <span tal:replace="string:${context/getFirstName} ${context/getLastName} "/>
        </h2>

        <table border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td valign="top" tal:condition="context/getImage | nothing" >
                    <div id="upa-image" tal:condition="context/getImage | nothing" >
                        <img tal:attributes="src string:${context/absolute_url}/image_preview" />
                    </div>
                </td>
                <td valign="top">
                    <div id="upa-member-info">
                        <span i18n:translate="" tal:replace="context/getSalutation | nothing" />
                        <span tal:replace="context/getAcademicTitle | nothing" />
                        <span tal:replace="context/getFirstName| nothing" />
                        <span tal:replace="context/getLastName| nothing" />
                        <br/>
                        <div tal:replace="context/getAddress1 | nothing" />
                        <div tal:replace="context/getAddress2 | nothing" />
                        <div>
                            <span tal:replace="context/getZipCode| nothing" />
                            <span tal:replace="context/getCity| nothing" />
                            <br/>
                            <span i18n:translate="" tal:replace="context/getCountry |nothing" />
                        </div>
                        <tal:if condition="view_internally">
                            <div tal:condition="context/getPhone | nothing">
                                <span class="label" i18n:translate="label_phone_text">Phone</span>:
                                <span tal:replace="context/getPhone" />
                            </div>
                            <div tal:condition="context/getMobile| nothing">
                                <span class="label" i18n:translate="label_mobile_text">Mobile</span>:
                                <span tal:replace="context/getMobile" />
                            </div>
                            <div tal:condition="context/getFax | nothing">
                                <span class="label" i18n:translate="label_fax_text">Fax</span>:
                                <span tal:replace="context/getFax" />
                            </div>
                        </tal:if>

                        <div tal:condition="context/getEmailCompany | nothing">
                            <span class="label" i18n:translate="label_email_company_text">Email (company)</span>:
                            <a tal:attributes="href string:mailto:${context/getEmailCompany}"
                               tal:content="context/getEmailCompany" i
                            />
                        </div>

                        <tal:if condition="view_internally">
                            <div tal:condition="context/getEmailPrivate| nothing">
                                <span class="label" i18n:translate="label_email_private_text">Email (private)</span>:
                                <a tal:attributes="href string:mailto:${context/getEmailPrivate}"
                                   tal:content="context/getEmailPrivate" i
                                />
                            </div>
                            <div tal:condition="context/getOrganization | nothing">
                                <span class="label" i18n:translate="label_organization_text">Organization/Company</span>
                                <div tal:content="context/getOrganization" />
                            </div>
                            <div tal:condition="context/getAssociatedMembership| nothing">
                                <span class="label" i18n:translate="label_associated_membership_text">Associated membership</span>
                                <div tal:content="context/getAssociatedMembership" />
                            </div>

                            <div tal:condition="context/getIcomSubscription| nothing">
                                <span class="label" i18n:translate="label_icom_subscription_text">ICOM subscription</span>
                                <div tal:content="context/getIcomSubscription" />
                            </div>
                            <div id="upa-member-info-secret"  tal:condition="view_managers">
                                <span class="label" i18n:translate="label_membership_level_text">Membership level</span>
                                <div tal:content="context/getMembershipLevel" />
                            
                                <span class="label" i18n:translate="label_upa_member_id_text">UPA Member ID</span>
                                <div tal:content="context/getUpaId " />

                                <span class="label" i18n:translate="label_entry_date_text">Entry date</span>
                                <div tal:content="context/getEntryDate" />
                            </div>
                        
                        </tal:if>
                    </div>
                </td>
            </tr>
        </table>

        <div>
            <tal:if condition="context/getText | nothing">
                <span class="label" i18n:translate="label_my_info_text">Professional information</span>
                <div tal:content="structure context/getText | nothing" />
            </tal:if>
        </div>

    </div>        
</html>

