<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type" />
  <title>Creating Applications: Add Structure</title>
  <link href="styles.css" rel="stylesheet" type="text/css" /></head>
<body>
<h1>Creating Applications: Add Structure</h1>
<p>Earlier, we defined the <a href="data.html">structure of the form
data</a>, and during the <a href="design.html">template design</a>
activity, it was
necessary to consider this structure information and how it should be
presented.
In XSLForms templates, we need to explicitly connect such information
about the structure of the data to the HTML elements representing it by
adding special attributes to the HTML code.</p>
<p> Consider the interesting parts of the template side by side with
the structure information:</p>
<pre style="">&lt;structure&gt;                                   <span style="font-weight: bold;">&lt;body&gt;<br /><br /></span>  &lt;item                                         <span style="font-weight: bold;">&lt;div&gt;</span><br />                                                  &lt;p&gt;<br />        value="some value"&gt;                         Some item: <span style="font-weight: bold;">&lt;input name="value" type="text" value="some value" /&gt;</span><br />                                                    &lt;input name="remove" type="submit" value="Remove" /&gt;<br />                                                  &lt;/p&gt;<br />                                                  &lt;p&gt;<br />                                                    Itself containing more items:<br />                                                  &lt;/p&gt;<br />    &lt;subitem                                      <span style="font-weight: bold;">&lt;p&gt;<br />            </span> subvalue="some other value"/&gt;          Sub-item: <span style="font-weight: bold;">&lt;input name="subvalue" type="text" value="some other value" /&gt;</span><br />                                                    &lt;input name="remove2" type="submit" value="Remove" /&gt;<br />                                                  <span style="font-weight: bold;">&lt;/p&gt;</span><br />                                                  &lt;p&gt;<br />                                                    &lt;input name="add2" type="submit" value="Add subitem" /&gt;<br />                                                  &lt;/p&gt;<br />  &lt;/item&gt;                                       <span style="font-weight: bold;">&lt;/div&gt;</span><br />                                                &lt;p&gt;<br />                                                  &lt;input name="add" type="submit" value="Add item" /&gt;<br />                                                &lt;/p&gt;<br /><br />&lt;/structure&gt;                                  <span style="font-weight: bold;">&lt;/body&gt;</span></pre>
<p>To make such connections, we will annotate the HTML code using
special attributes and values.</p>
<ul>
</ul>
<h2><a name="AnnotatingTheTemplate"></a>Annotating the Template</h2>
<p>Taking the template extract from above, we add special annotations
to produce something like this:</p>
<pre style="">&lt;structure&gt;                                   &lt;body <span style="font-weight: bold;">template:element="structure"</span>&gt;<br /><br />  &lt;item                                         &lt;div <span style="font-weight: bold;">template:element="item"</span>&gt;<br />                                                  &lt;p&gt;<br />        value="some value"&gt;                         Some item: &lt;input <span style="font-weight: bold;">template:attribute-field="value"</span> name="<span style="font-weight: bold;">...</span>" type="text" value="<span style="font-weight: bold;">...</span>" /&gt;<br />                                                    &lt;input name="remove" type="submit" value="Remove" /&gt;<br />                                                  &lt;/p&gt;<br />                                                  &lt;p&gt;<br />                                                    Itself containing more items:<br />                                                  &lt;/p&gt;<br />    &lt;subitem                                      &lt;p <span style="font-weight: bold;">template:element="subitem"</span>&gt;<br />             subvalue="some other value"/&gt;          Sub-item: &lt;input <span style="font-weight: bold;">template:attribute-field="subvalue"</span> name="<span style="font-weight: bold;">...</span>" type="text" value="<span style="font-weight: bold;">...</span>" /&gt;<br />                                                    &lt;input name="remove2" type="submit" value="Remove" /&gt;<br />                                                  &lt;/p&gt;<br />                                                  &lt;p&gt;<br />                                                    &lt;input name="add2" type="submit" value="Add subitem" /&gt;<br />                                                  &lt;/p&gt;<br />  &lt;/item&gt;                                       &lt;/div&gt;<br />                                                &lt;p&gt;<br />                                                  &lt;input name="add" type="submit" value="Add item" /&gt;<br />                                                &lt;/p&gt;<br /><br />&lt;/structure&gt;                                  &lt;/body&gt;</pre>
<p style="">
The following annotations have been added:</p>
<ul>
  <li>For elements in the structure, <code>template:element</code>
attributes have been added to the corresponding HTML elements in the
template.</li>
  <li>For attributes in the structure, <code>template:attribute-field</code>
attributes have been added to the corresponding HTML elements
in the template.</li>
</ul>
<p>Note how the <code>name</code> and <code>value</code> attributes have had their contents replaced with <code>...</code>;
we do this to keep Web page editors happy, and in the final output
these attributes will be replaced with those which model the underlying
document correctly.</p>
<h2>Completing the Template</h2>
<p>The template in full should now look something like this:</p>
<pre>&lt;?xml version="1.0"?&gt;<br />&lt;html xmlns="http://www.w3.org/1999/xhtml"<br />      <span style="font-weight: bold;">xmlns:template="http://www.boddie.org.uk/ns/xmltools/template"</span>&gt;<br />&lt;head&gt;<br />  &lt;title&gt;Example&lt;/title&gt;<br />&lt;/head&gt;<br />&lt;body template:element="structure"&gt;<br />&lt;form action="" method="post"&gt;<br /><br />&lt;!-- Template text between the start and the interesting part. --&gt;<br /><br />&lt;div template:element="item"&gt;<br />  &lt;p&gt;<br />    Some item: &lt;input template:attribute-field="value" name="..." type="text" value="..." /&gt;<br />    &lt;input name="remove" type="submit" value="Remove" /&gt;<br />  &lt;/p&gt;<br />  &lt;p&gt;<br />    Itself containing more items:<br />  &lt;/p&gt;<br />  &lt;p template:element="subitem"&gt;<br />    Sub-item: &lt;input template:attribute-field="subvalue" name="..." type="text" value="..." /&gt;<br />    &lt;input name="remove2" type="submit" value="Remove" /&gt;<br />  &lt;/p&gt;<br />  &lt;p&gt;<br />    &lt;input name="add2" type="submit" value="Add subitem" /&gt;<br />  &lt;/p&gt;<br />&lt;/div&gt;<br />&lt;p&gt;<br />  &lt;input name="add" type="submit" value="Add item" /&gt;<br />&lt;/p&gt;<br /><br />&lt;!-- Template text between the interesting part and the end. --&gt;<br /><br />&lt;/form&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</pre>
<p>Note also that a namespace declaration is required for the <code>template</code>
attributes, and it is usually best to put this declaration on the
top-level <code>html</code> element in the template, as shown in
the above example code.</p>
<p>Whilst the above annotations permit the template to display the data
in XML documents containing form data, the other aspects of the user
interface - the addition and removal of items and subitems - are not
yet fully modelled in the template. These things will be added to the
template as <a href="selectors.html">selectors</a> as part of the
next activity in the development <a href="overview.html">process</a>.</p>
</body></html>
