<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type" />
  <title>Creating Applications: Add Selectors</title>
  <link href="styles.css" rel="stylesheet" type="text/css" /></head>
<body>
<h1>Creating Applications: Add Selectors</h1>
<p>In the previous activity we annotated the template
with
<a href="structure.html">structural information</a>,
and these annotations should be sufficient in
presenting XML documents as Web pages for users to interact with.
However, in our design, we also wanted to be able to add and remove
list items from the form data structure, and we added some buttons in
the template to be used for this purpose.</p>
<h2>Introducing Selectors</h2>
<p>The buttons in the template are implicitly associated with
specific items and subitems, and when such buttons are pressed - for
example, to remove an item from the list - our application will want to
know on which item the removal action is to take place. In order to
connect the buttons with specific parts of the form data structure, a
special notation is used, and such notation turns elements such as
buttons into "selectors" - things which select parts of the structure
so that an operation can be carried out on those parts.</p>
<p>Taking the example HTML code from before, we add some of these
selector annotations to the template to produce something
like this:</p>
<pre>&lt;html xmlns="http://www.w3.org/1999/xhtml"<br />      xmlns:template="http://www.boddie.org.uk/ns/xmltools/template"&gt;<br />&lt;head&gt;<br />  &lt;title&gt;Example&lt;/title&gt;<br />&lt;/head&gt;<br />&lt;body template:element="structure"&gt;<br />&lt;form action="" method="post"&gt;<br /><br />&lt;!-- Template text between the start and the interesting part. --&gt;<br /><br />&lt;div template:element="item"&gt;<br />  &lt;p&gt;<br />    Some item: &lt;input template:attribute-field="value" name="..." type="text" value="..." /&gt;<br />    &lt;input name="..." <span style="font-weight: bold;">template:selector-field="remove"</span> type="submit" value="Remove" /&gt;<br />  &lt;/p&gt;<br />  &lt;p&gt;<br />    Itself containing more items:<br />  &lt;/p&gt;<br />  &lt;p template:element="subitem"&gt;<br />    Sub-item: &lt;input template:attribute="subvalue" name="{template:this-attribute()}" type="text" value="{$this-value}" /&gt;<br />    &lt;input name="..." <span style="font-weight: bold;">template:selector-field="remove2"</span> type="submit" value="Remove" /&gt;<br />  &lt;/p&gt;<br />  &lt;p&gt;<br />    &lt;input name="..." <span style="font-weight: bold;">template:selector-field="add2,subitem"</span> type="submit" value="Add subitem" /&gt;<br />  &lt;/p&gt;<br />&lt;/div&gt;<br />&lt;p&gt;<br />  &lt;input name="..." <span style="font-weight: bold;">template:selector-field="add,item"</span> type="submit" value="Add item" /&gt;<br />&lt;/p&gt;<br /><br />&lt;!-- Template text between the interesting part and the end. --&gt;<br /><br />&lt;/form&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;</pre>
<h3>The Remove Buttons</h3>
<p>Some of the attributes in the previous HTML code have been
changed:</p>
<ul>
  <li>The <code>input</code> element for the
first <code>Remove</code> button has a new <code>template:selector-field</code> attribute (and a modified <code>name</code>
attribute
containing a value that will be replaced).</li>
  <li>The <code>input</code> element for the second <code>Remove</code>
button has a new <code>template:selector-field</code> attribute (and a modified <code>name</code>
attribute
containing a value that will be replaced).</li>
</ul>
<p>What these amendments provide is a means for the XSLForms
framework
to connect together these buttons with a specific element in the
form data.</p>
<ul>
  <li>The first <code>Remove</code> button
appears within the <code>div</code> element which maps onto items
in the form data. This means that each button will refer to a
specific item in the form being edited.</li>
  <li>The second <code>Remove</code> button appears
within the <code>p</code> element which maps onto subitems in the
form data. This means that each button will refer to a
specific subitem in the form being edited.</li>
</ul>
<p>We define the names of the selectors in the above cases to be <code>remove</code>
and <code>remove2</code> respectively, since the special values
begin with these identifiers.</p>
<h3>The Add Buttons</h3>
<p>Some other attributes have been changed in the previous HTML
code:</p>
<ul>
  <li>The <code>input</code> element for the
first <code>Add</code> button has a new <code>template:selector-field</code> attribute (and a modified <code>name</code>
attribute
containing a value that will be replaced).</li>
  <li>The <code>input</code> element for the second <code>Add</code>
button has a new <code>template:selector-field</code> attribute (and a modified <code>name</code>
attribute
containing a value that will be replaced).</li>
</ul>
<ul>
</ul>
<p>What these amendments provide is also a means for the XSLForms
framework to connect these buttons to specific parts of the form data.</p>
<ul>
  <li>The <code>Add subitem</code> button appears
outside the <code>p</code> element which maps onto subitems in the
form data. Instead, it appears within the <code>p</code>
element which maps onto items. This means that each button will refer
to a specific item in the form being edited, and the consequence of
adding a subitem will be the extension of that item's list of subitems.</li>
  <li>The <code>Add item</code> button
appears outside the <code>p</code>
element which maps onto items in the form data. Instead, it appears
within the <code>body</code>
element which maps onto the top-level <code>structure</code>
element in the form data. This means that each button will refer to the
top-level <code>structure</code>
element in
the form being edited, and the consequence of adding an item will
be the extension of the main list of items in the form.</li>
</ul>
<p>We define the names of the selectors in the above cases to be <code>add2</code>
and <code>add</code> respectively, since the special values begin with
these identifiers. Moreover, we mention that the selectors are intended to add <code>subitem</code> and <code>item</code> elements respectively - this has certain implications for the behaviour of the application that will be <a href="advice.html">considered later</a>.</p>
<p>We should now have a template that is sufficiently complete to be
used in a real application, and the writing of the <a href="Web-resource.html">application code</a> itself will be
investigated in the next activity in the development <a href="overview.html">process</a>.</p>
</body></html>
