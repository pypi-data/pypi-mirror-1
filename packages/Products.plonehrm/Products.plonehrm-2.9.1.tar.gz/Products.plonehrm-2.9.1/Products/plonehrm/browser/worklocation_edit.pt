<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      xml:lang="en"
      lang="en"
      i18n:domain="plonehrm">
  <body>
    <div metal:fill-slot="main">

      <h1 class="documentFirstHeading"
	  i18n:translate="heading_edit_worklocation">
	Edit worklocation</h1>

      <script type="text/javascript">
	jq(document).ready(function(){
	  /* List of fields about insurance. */
	  var fields = jq('div').filter(function(){
                                          return this.id.match('field_insurance*');
                                        });


	  /* Function called when user click on the checklist. */
	  show_insurance = function(){
            cbox = document.getElementById('hasInsurance')
	    if (cbox.checked) {
	      fields.show("fast");
	    }
	    else {
	      fields.hide("fast");
	    }
          };
	  jq('#hasInsurance').click(show_insurance);
	
	  /* We call the method to show/hide the fields once the
             document is loaded.*/
	  show_insurance();
	})

	
      </script>

      <form name="worklocation_edit_form"
	    class="plonehrm_custom_edit"
	    method="post"
	    tal:attributes="action python: context.absolute_url() + '/@@edit_wl'" >

	<div tal:repeat="field view/form_fields"
	     class="field"
	     tal:attributes="id python: 'field_' + field"
	     tal:define="errors view/errors" >
	  
	  <input type="checkbox"
		 tal:condition="python: field == 'hasInsurance' and view.form[field]"
		 checked="checked"
		 name="hasInsurance"
		 id="hasInsurance" />

	  <input type="checkbox"
		 tal:condition="python: field == 'hasInsurance' and not view.form[field]"
		 name="hasInsurance"
		 id="hasInsurance" />

	  <label tal:content="python: view.translate_field_name(field)"
		 tal:attributes="for python: 'field_' + field" />
	  <span class="fieldRequired" title="Required"
		tal:condition="python: field in view.required_fields"
		i18n:domain="plone"
		i18n:translate="title_required">(Required)</span>
	  <br />

	  <p tal:condition="python: field in view.errors_list"
	     tal:repeat="error python: view.errors_list[field]"
	     tal:attributes="id python: 'error_' + field + '_' + error;
			     class python: field + '_' + error in view.errors and 'errormsg' or 'dont-show'"
	     tal:content="python: view.errors_list[field][error]" />

	  <input type="text"
		 tal:condition="python: field not in ['hasInsurance', 'payPeriod']"
		 tal:attributes="value python: view.form[field];
				 id python: 'field_' + field;
				 name field" />

	  <tal:block tal:condition="python: field == 'payPeriod'"
		     tal:define="vocab view/get_pay_period_vocabulary"
		     tal:repeat="item vocab">

	    <input type="radio"
		   name="payPeriod"
		   checked="checked"
		   tal:attributes="value item;
				   id python: 'field_payPeriod_' + item"
		   tal:condition="python: item == view.form['payPeriod']" />

	    <input type="radio"
		   name="payPeriod"
		   tal:attributes="value item;
				   id python: 'field_payPeriod_' + item"
		   tal:condition="python: not item == view.form['payPeriod']" />
		   

	    <label tal:attributes="for python: 'field_payPeriod_' + item"
		   tal:content="python: vocab[item]" />

	  </tal:block>
	</div>

	<input type="submit" class="context"
	       i18n:domain="plone"
	       i18n:attributes="value label_save" />
	<input type="submit" class="standalone"
	       name="form_cancel"
	       i18n:domain="plone"	       
	       i18n:attributes="value label_cancel" />

      </form>
      <div style="clear: both;">
        &nbsp;
      </div>
    </div>
  </body>
</html>
