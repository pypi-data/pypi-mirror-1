<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone">
  <head><title></title></head>
  <body>

    <metal:block define-macro="body"
          tal:define="mainmodule_schematas context/personal/Schemata|nothing;
                      mainmodule_fields python:mainmodule_schematas['default'].editableFields(here.personal);
                      mainmodule_fields python:[field for field in mainmodule_fields if not field.getName() == 'id'];">
        <metal:use_body use-macro="here/edit_macros/macros/body">

          <metal:block fill-slot="widgets">
            <tal:tabbed tal:condition="allow_tabbing | nothing">
              <fieldset tal:repeat="fieldset fieldsets"
                        tal:attributes="id string:fieldset-${fieldset}">
                <legend id=""
                        tal:content="python: view.getTranslatedSchemaLabel(fieldset)"
                        tal:attributes="id string:fieldsetlegend-${fieldset}" />
                <tal:fields repeat="field python:schematas[fieldset].editableFields(here, visible_only=True)">
                  <metal:fieldMacro use-macro="python:here.widget(field.getName(), mode='edit')" />
                </tal:fields>
                <tal:mainfields
                    condition="python:fieldset=='default'"
                    tal:define="context nocall:context/personal;">
                  <tal:fields repeat="field mainmodule_fields">
                    <metal:fieldMacro use-macro="python:here.personal.widget(field.getName(), mode='edit')" />
                  </tal:fields>
                </tal:mainfields>
              </fieldset>
            </tal:tabbed>
            <tal:nottabbed tal:condition="not: allow_tabbing | nothing">
                <tal:fields repeat="field python:schematas[fieldset].editableFields(here, visible_only=True)">
                  <metal:fieldMacro use-macro="python:here.widget(field.getName(), mode='edit')" />
                </tal:fields>
                <tal:mainfields
                    tal:define="context nocall:context/personal;">
                  <tal:fields repeat="field mainmodule_fields">
                    <metal:fieldMacro use-macro="python:here.personal.widget(field.getName(), mode='edit')" />
                  </tal:fields>
                </tal:mainfields>
            </tal:nottabbed>
          </metal:block>

        </metal:use_body>
    </metal:block>
  </body>
</html>
