<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      xml:lang="en"
      lang="en"
      i18n:domain="plonehrm">
  <head>
    <metal:block fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border', 0)" />
  </head>

  <body>
    <div metal:fill-slot="main">

      <h1 class="documentFirstHeading"
	  i18n:translate="global_absence_overview">
        Global absences overview
      </h1>
     
      <table class="listing">
	<thead>
	  <tr i18n:domain="plonelocales">
	    <th i18n:domain="plone" i18n:translate="">Fullname</th>
	    <th i18n:translate="month_jan_abbr">jan</th>
	    <th i18n:translate="month_feb_abbr">feb</th>
	    <th i18n:translate="month_mar_abbr">mar</th>
	    <th i18n:translate="month_apr_abbr">apr</th>
	    <th i18n:translate="month_may_abbr">may</th>
	    <th i18n:translate="month_jun_abbr">jun</th>
	    <th i18n:translate="month_jul_abbr">jul</th>
	    <th i18n:translate="month_aug_abbr">aug</th>
	    <th i18n:translate="month_sep_abbr">sep</th>
	    <th i18n:translate="month_oct_abbr">oct</th>
	    <th i18n:translate="month_nov_abbr">nov</th>
	    <th i18n:translate="month_dec_abbr">dec</th>
	    <th i18n:domain="plonehrm" i18n:translate="head_total">Total</th>
	    <th i18n:domain="plonehrm" i18n:translate="head_percentage">Percentage</th>
	    <th i18n:domain="plonehrm" i18n:translate="head_number">Count</th>
	  </tr>
	</thead>

	<tbody>
	  <tal:block tal:repeat="worklocation view/data">
	    <tr>
	      <th colspan="11"
		  class="absence_overview_worklocation_cell">
		<a tal:attributes="href worklocation/absolute_url"
		   tal:content="worklocation/title" />
	      </th>
	      <th colspan="2">
		<span i18n:translate="absence_average">Average</span>:
	      </th>

	      <th tal:content="python: int(view.data[worklocation]['average_total'])" />
	      <th tal:content="python: view.data[worklocation]['average_percentage']" />
	      <th tal:content="python: int(view.data[worklocation]['average_count'])" />

	    </tr>
	    <tr tal:repeat="row python: view.data[worklocation]['rows']">
	      <td tal:repeat="cell row">
		<span tal:replace="structure cell"
		      tal:condition="cell"/>
		<span tal:replace="python: '-'"
		      tal:condition="not: cell"/>
	      </td>
	    </tr>
	  </tal:block>
	</tbody>
	<tfoot>
	  <tr>
	    <th i18n:translate="absence_average"
		colspan="13">
	      Average
	    </th>
	    <th tal:content="python: int(view.average_total)" />
	    <th tal:content="python: str(int(view.average_percentage)) + '%'" />
	    <th tal:content="python: int(view.average_count)" />
	  </tr>
	</tfoot>
      </table>

      <div style="clear: both;">
        &nbsp;
      </div>
      <div metal:use-macro="here/document_actions/macros/document_actions">
        Document actions (print, sendto etc)
      </div>
    </div>
  </body>
</html>
