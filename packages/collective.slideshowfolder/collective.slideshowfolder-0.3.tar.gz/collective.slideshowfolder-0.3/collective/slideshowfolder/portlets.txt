.. -*-doctest-*-

Slideshow Portlets
==================

The collective.slideshowfolder package also provides a portlet that
renders a Slideshow 2 in a portlet based on the contents of the first
folder or collection specified in the "slideshow" refrence for the
context.

Turn the a folder into a slideshowfolder.

    >>> slideshowfolder = self.folder.slideshow
    >>> self.loginAsPortalOwner()
    >>> portal.portal_workflow.doActionFor(
    ...     slideshowfolder, 'publish')
    >>> slideshowfolder.unrestrictedTraverse(
    ...     '@@folder_slideshow_view').makeSlideshow()

Open a browser and login as a user who can add SlideshowImages.

    >>> from Products.Five import testbrowser
    >>> browser = testbrowser.Browser()
    >>> browser.handleErrors = False

Go to an area of the site without a slideshow.

    >>> context = portal.news.aggregator
    >>> browser.open(context.absolute_url())
    >>> 'portletSlideshow' in browser.contents
    False
    >>> 'class="slideshowfolder"' in browser.contents
    False

Add a slideshowfolder reference for the context.

    >>> context.addReference(slideshowfolder,
    ...                      relationship="slideshow")
    <Reference sid:... tid:... rel:slideshow>

Now the slideshow portlet will be rendered.

    >>> browser.open(context.absolute_url())
    >>> print browser.contents
    <...
    ...slideshow_portlet_settings.js...
    ...portletSlideshow...
    ...class="slideshowfolder"...
    >>> browser.open(
    ...     context.absolute_url()+'/slideshow_portlet_settings.js')
    >>> print browser.contents
    registerPloneFunction...
    ...http://nohost/plone/Members/test_user_1_/slideshow/bar-image-title/image_large...
    ...Photo: Foo Full Name...
    ...Bar Image description...
