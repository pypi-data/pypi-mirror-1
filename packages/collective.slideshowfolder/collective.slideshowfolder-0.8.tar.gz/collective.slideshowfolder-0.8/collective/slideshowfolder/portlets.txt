.. -*-doctest-*-

Slideshow Portlets
==================

The collective.slideshowfolder package also provides a portlet that
renders a Slideshow 2 in a portlet based on the contents of the first
folder or collection specified in the "slideshow" refrence for the
context.

Turn the a folder into a slideshowfolder.

    >>> slideshowfolder = self.folder.slideshow
    >>> self.loginAsPortalOwner()
    >>> portal.portal_workflow.doActionFor(
    ...     slideshowfolder, 'publish')
    >>> slideshowfolder.unrestrictedTraverse(
    ...     '@@folder_slideshow_view').makeSlideshow()

Open a browser and login as a user who can add portlets.

    >>> from Products.Five import testbrowser
    >>> from Products.PloneTestCase import ptc
    >>> browser = testbrowser.Browser()
    >>> browser.handleErrors = False
    >>> browser.open(portal.absolute_url())
    >>> browser.getLink('Log in').click()
    >>> browser.getControl('Login Name').value = ptc.portal_owner
    >>> browser.getControl('Password').value = ptc.default_password
    >>> browser.getControl('Log in').click()

Add a slideshowfolder portlet.

    >>> browser.getLink('Manage portlets').click()
    >>> right_column = browser.getForm(index=3)
    >>> right_column.getControl('Slideshow portlet').selected = True
    >>> right_column.submit()
    >>> browser.getControl('Save').click()
    >>> browser.getLink('Log out').click()

Go to an area of the site without a slideshow.

    >>> context = portal.news.aggregator
    >>> browser.open(context.absolute_url())
    >>> 'portletSlideshow' in browser.contents
    False

Add a slideshowfolder reference for the context.

    >>> context.addReference(slideshowfolder,
    ...                      relationship="slideshow")
    <Reference sid:... tid:... rel:slideshow>

Now the slideshow portlet will be rendered.

    >>> browser.open(context.absolute_url())
    >>> print browser.contents
    <...
    ...mootools...
    ...portletSlideshow...
    ...id="myShow"...
    ...registerPloneFunction...
    ...http://nohost/plone/Members/test_user_1_/slideshow/bar-image-title/image_large...
