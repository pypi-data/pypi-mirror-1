<div tal:replace="structure context/manage_page_header"/>
<div tal:replace="structure context/manage_tabs"/>

<br>
<fieldset>
  <legend>Vocabulary</legend>
  <form method="GET" action="vocabularyform">
    <table>
      <tr>
        <td>
          <input type="text" name="pattern" size="20" tal:attributes="value request/pattern|nothing">
          <select name="language">
            <option tal:repeat="lang context/index/languages"
                    tal:content="lang"
                    tal:attributes="value lang;
                                    SELECTED python: request.get('language') == lang"
            />                        
          </select>
        </td>
        <td>
          <tal:loop tal:repeat="c string:ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz">
            <a tal:attributes="href string:vocabularyform?pattern=${c}*&language=${request/language|string:en}"
               tal:content="c"/>
          </tal:loop>
        </td>
      </tr>
    </table>
    <input type="submit" value=" Show matching words"/>
  </form>
</fieldset>

<tal:if condition="request/pattern|nothing" >
  <div tal:define="wv nocall: context//@@words_vocabulary;
                   words python: wv(request.get('pattern'), request.get('language'))">
    <ul>
      <li tal:repeat="word words">
        <a tal:attributes="href string:documentsforword?word=$word" tal:content="word" />
      </li>
    </ul> 
    <span tal:condition="not: words">No matching words found</span>
  </div>
</tal:if>

<div metal:use-macro="context/txng_macros/macros/footer" />
<div tal:replace="structure context/manage_page_footer"/>
