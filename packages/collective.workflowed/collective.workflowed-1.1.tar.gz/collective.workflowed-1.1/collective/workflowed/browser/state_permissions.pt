<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      i18n:domain="collective.workflowed">
<head>
<style type="text/css" media="screen" tal:content="string: @import url(${context/portal_url}/base.css);"></style>
</head>
<body>
<h1><span i18n:translate="edit_state_permissions">Edit permissions for state</span> <span tal:replace="context/id"></span></h1>
<form action="setPermissions" method="POST" onSubmit="window.opener.close_popup();return true;">
<table width="100%" cellspacing="0" cellpadding="2" border="0" class="listing">
<tr class="list-header">
  <td>&nbsp;</td>
  <td align="left">
  <div class="form-label">
  <strong i18n:translate="label_permission">Permission</strong>
  </div>
  </td>
  <td align="left" colspan="" tal:attributes="colspan python:len(context.getAvailableRoles())">
  <div class="form-label">
  <strong i18n:translate="label_roles">Roles</strong>
  </div>
  </td>
</tr>

<tr class="row-normal">
  <td align="left" valign="top">
  <div class="form-label">
  <strong i18n:translate="label_aquire_permissions">
  Acquire permission settings?
  </strong>
  </div>
  </td>
  <td></td>
  <tal:block repeat="role context/getAvailableRoles">
  <td align="left">
  <div class="list-item" tal:content="role">
  </div>
  </td>
  </tal:block>
</tr>

<tal:block repeat="permission python:context.getManagedPermissions()">
<tr tal:define="info python:context.getPermissionInfo(permission)" tal:attributes="class python:repeat['permission'].odd() and 'row-normal' or 'row-hilite'">
  <td align="left" valign="top">
   <input type="checkbox" tal:attributes="name string:acquire_${permission};checked python:info['acquired'] and 'checked' or ''" />
  </td>
  <td align="left">
  <div class="list-item" tal:content="permission">
  </div>
  </td>
  <tal:block repeat="role context/getAvailableRoles">
  <td align="center">
   <input type="checkbox" tal:attributes="name string:${permission}|${role};checked python:role in info['roles'] and 'checked' or ''" />
  </td>
  </tal:block>
</tr>
</tal:block>

<tr>
<td colspan="" align="left" tal:attributes="colspan python:len(context.getAvailableRoles())+2">
<div class="form-element">
<input class="context" type="submit" name="submit" i18n:attributes="save_changes_button" value="Save Changes" />
</div>
</td>
</tr>
</table>
</form>
</body>
</html>
