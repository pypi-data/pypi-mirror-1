<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xml:lang="en" lang="en"
      metal:use-macro="context/prefs_main_template/macros/master"
      i18n:domain="plone">

  <metal:block metal:fill-slot="top_slot"
               tal:define="dummy python:request.set('disable_border', 1)" />

  <body>

    <div metal:fill-slot="prefs_configlet_main">

      <div metal:define-macro="form">

        <div id="viewspace" metal:define-slot="viewspace">

          <metal:block define-macro="header">

            <dl tal:define="status view/status|nothing"
                tal:condition="status"
                class="portalMessage info">
              <dt i18n:translate="">
                Info
              </dt>
              <dd tal:content="view/status" />
            </dl>

          </metal:block>

          <h1 class="documentFirstHeading"
              i18n:translate=""
              tal:condition="view/label|nothing"
              tal:content="view/label"
              metal:define-slot="heading">
            Do something
          </h1>

          <a href=""
             class="link-parent"
             tal:attributes="href string: $portal_url/plone_control_panel"
             i18n:translate="label_up_to_plone_setup">
            Up to Site Setup
          </a>

          <p i18n:translate=""
             tal:condition="view/description|nothing"
             tal:content="view/description">
            Description
          </p>

          <form method="post"
                action="."
                name="allowtypes_form"
                tal:attributes="action string:${context/absolute_url}/${view/__name__}">

            <input type="hidden" name="form.submitted" value="1"/>

            <table class="listing" cellspacing="3" cellpadding="3" border="1">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Implicitly addable?</th>
                  <th>Filter content types?</th>
                  <tal:types repeat="type view/types">
                    <th tal:content="type/typename">Portal Type</th>
                  </tal:types>
                </tr>
              </thead>
              <tbody>
                <tr tal:repeat="type view/types">

                  <tal:defines define="typename    type/typename;
                                       globalallow type/globalallow;
                                       filter      type/filter;">

                    <!-- Portal Type -->
                    <td tal:content="typename">Portal Type</td>

                    <!-- Implicit addable? -->
                    <td align="center">
                      <input name="#"
                             value="True"
                             class="noborder"
                             type="checkbox"
                             tal:attributes="name string:${typename}.globalallow:boolean:record;
                                             checked python:globalallow;"
                      />
                      <input name="#"
                             value="False"
                             type="hidden"
                             tal:attributes="name string:${typename}.globalallow:boolean:record:default;"
                      />
                    </td>

                    <!-- Filter Content Types -->
                    <td align="center">
                      <input name="#"
                             value="True"
                             class="noborder"
                             type="checkbox"
                             tal:attributes="name string:${typename}.filter:boolean:record;
                                             checked python:filter;"
                      />
                      <input name="#"
                             value="False"
                             type="hidden"
                             tal:attributes="name string:${typename}.filter:boolean:record:default;"
                      />
                    </td>

                    <!-- Allowed Content Types -->
                    <tal:allowed repeat="allowed type/allowed">
                      <td align="center">
                        <input name="#"
                               class="noborder"
                               type="checkbox"
                               tal:attributes="name string:${typename}.allowed:tuple:record;
                                               value allowed/type;
                                               checked allowed/checked;"
                        />
                      </td>
                    </tal:allowed>

                  </tal:defines>

                </tr>
              </tbody>
            </table>

            <!-- Form Actions -->
            <div class="formControls">
                <input class="context"
                    type="submit"
                    name="form.button.Save"
                    value="Save"
                    i18n:attributes="value label_save;"
                />
                <input class="standalone"
                    type="submit"
                    name="form.button.Cancel"
                    value="Cancel"
                    i18n:attributes="value label_cancel;"
                />
            </div> <!-- /Form Actions -->

          </form>

        </div>

        <script type="text/javascript"
                tal:define="extra_script view/extra_script | nothing"
                tal:condition="extra_script"
                tal:content="structure extra_script">
        </script>

      </div>

    </div>
  </body>
</html>

<!-- vim: set ts=2 sw=2 expandtab ft=html: -->
