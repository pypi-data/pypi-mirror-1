<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
  <head></head>

  <body>

    <metal:main fill-slot="main">

      <form method="post"
            action="."
            name="allowtypes_form"
            tal:attributes="action string:${context/absolute_url}/${view/__name__}">

        <input type="hidden" name="form.submitted" value="1"/>

        <table class="listing" cellspacing="3" cellpadding="3" border="1">
          <thead>
            <tr>
              <th>Title</th>
              <th>Implicitly addable?</th>
              <th>Filter content types?</th>
              <tal:types repeat="type view/types">
                <th tal:content="type/typename">Portal Type</th>
              </tal:types>
            </tr>
          </thead>
          <tbody>
            <tr tal:repeat="type view/types">

              <tal:defines define="typename    type/typename;
                                   globalallow type/globalallow;
                                   filter      type/filter;">

                <!-- Portal Type -->
                <td tal:content="typename">Portal Type</td>

                <!-- Implicit addable? -->
                <td align="center">
                  <input name="#"
                         value="True"
                         class="noborder"
                         type="checkbox"
                         tal:attributes="name string:${typename}.globalallow:boolean:record;
                                         checked python:globalallow;"
                  />
                  <input name="#"
                         value="False"
                         type="hidden"
                         tal:attributes="name string:${typename}.globalallow:boolean:record:default;"
                  />
                </td>

                <!-- Filter Content Types -->
                <td align="center">
                  <input name="#"
                         value="True"
                         class="noborder"
                         type="checkbox"
                         tal:attributes="name string:${typename}.filter:boolean:record;
                                         checked python:filter;"
                  />
                  <input name="#"
                         value="False"
                         type="hidden"
                         tal:attributes="name string:${typename}.filter:boolean:record:default;"
                  />
                </td>

                <!-- Allowed Content Types -->
                <tal:allowed repeat="allowed type/allowed">
                  <td align="center">
                    <input name="#"
                           class="noborder"
                           type="checkbox"
                           tal:attributes="name string:${typename}.allowed:tuple:record;
                                           value allowed/type;
                                           checked allowed/checked;"
                    />
                  </td>
                </tal:allowed>

              </tal:defines>

            </tr>
          </tbody>
        </table>

        <!-- Form Actions -->
        <div class="formControls">
            <input class="context"
                type="submit"
                name="form.button.Save"
                value="Save"
                i18n:attributes="value label_save;"
            />
            <input class="standalone"
                type="submit"
                name="form.button.Cancel"
                value="Cancel"
                i18n:attributes="value label_cancel;"
            />
        </div> <!-- /Form Actions -->

      </form>

    </metal:main>

  </body>

</html>

<!-- vim: set ts=2 sw=2 expandtab ft=html: -->
