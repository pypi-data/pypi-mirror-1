<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone4artists">

<body>
<div metal:fill-slot="css_slot">
<link rel="stylesheet" href="image.css"
      tal:attributes="href string:$portal_url/++resource++imagestyles/image.css"
      />
</div>
<div metal:fill-slot="main"
     tal:define="image_info     context/@@image_info;
                 context_url    string:${context/absolute_url};
                 mime_type      context/content_type;
     ">
    <tal:main-macro 
       metal:define-macro="main" 
       tal:define="size python:context.getObjSize(context);
                   plone2 context/document_actions/macros/document_actions|python:None;
                   plone2 python:plone2 is not None;
                   plone3 python:plone2 is None">

       <tal:block condition="plone2">
         <div metal:use-macro="context/document_actions/macros/document_actions">
             Document actions (print, sendto etc)
         </div>
       </tal:block>

       <tal:block condition="plone2">
         <div tal:replace="structure provider:plone.abovecontenttitle" />
       </tal:block>

        <h1 tal:content="context/Title" class="documentFirstHeading">
            Title or id
        </h1>

        <tal:block condition="plone3">
          <div tal:replace="structure provider:plone.belowcontenttitle" />
        </tal:block>

        <tal:block condition="plone2">
          <div metal:use-macro="context/document_byline/macros/byline">
            Get the byline - contains details about plone author and modification date.
          </div>
        </tal:block>

        <div id="image_box">
            <div id="image_thumbnail">
                <img src="[url]" width="400"
                    tal:attributes="src context_url;
                                    alt image_info/description;
                                    title image_info/description" />
            </div>
            <div id="image_caption"
                tal:content="image_info/description">
                [caption here]
            </div>
            <div id="image_copyright"
                tal:condition="image_info/copyright">
                By 
                <tal:data
                    tal:content="image_info/photographer" />
            </div>
        </div>
        <div id="metadata_box">
            <div>
                <strong>Location Information:</strong>
            </div>
            <table width="100%" border="0" cellpadding="3" cellspacing="0" style="border-top:1px solid #336699;">
                <tr
                    tal:condition="image_info/location">
                    <td
                        class="metadata_key">
                            Description
                    </td>
                    <td
                        class="metadata_value">
                        <tal:data
                            tal:content="string:${image_info/location}"/>
                    </td>
                </tr>
                <tr
                    tal:condition="image_info/city">
                    <td
                        class="metadata_key">
                            City
                    </td>
                    <td
                        class="metadata_value">
                        <tal:data
                            tal:content="image_info/city"/>
                    </td>
                </tr>
                <tr
                    tal:condition="image_info/state">
                    <td
                        class="metadata_key">
                            Province/State
                    </td>
                    <td
                        class="metadata_value">
                        <tal:data
                            tal:content="image_info/state"/>
                    </td>
                </tr>
                <tr
                    tal:condition="image_info/country">
                    <td
                        class="metadata_key">
                            Country
                    </td>
                    <td
                        class="metadata_value">
                        <tal:data
                            tal:content="image_info/country"/>
                    </td>
                </tr>
            </table><br />
        
            <div>
                <strong>Copyright/Usage:</strong>
            </div>
            <table width="100%" border="0" cellpadding="3" cellspacing="0" style="border-top:1px solid #336699;">
                <tr
                    tal:condition="image_info/copyright">
                    <td
                        class="metadata_key">
                            Copyright
                    </td>
                    <td
                        class="metadata_value"
                        tal:content="image_info/copyright">
                        [Copyright]
                    </td>
                </tr>
            </table><br />

            <div>
                <strong>Technical Information:</strong>
            </div>
            <table width="100%" border="0" cellpadding="3" cellspacing="0" style="border-top:1px solid #336699;">
                <tr
                    tal:condition="image_info/dateCreated">
                    <td
                        class="metadata_key">
                            Date Created
                    </td>
                    <td
                        class="metadata_value"
                        tal:content="image_info/dateCreated">
                            [Value]
                    </td>
                </tr>
                <tr
                    tal:condition="image_info/cameraModel">
                    <td
                        class="metadata_key">
                            Camera Model
                    </td>
                    <td
                        class="metadata_value"
                        tal:content="image_info/cameraModel">
                            [Value]
                    </td>
                </tr>
                <tr>
                    <td
                        class="metadata_key">
                            Image Type
                    </td>
                    <td
                        class="metadata_value"
                        tal:content="image_info/image_type">
                            [Value]
                    </td>
                </tr>
                <tr>
                    <td
                        class="metadata_key">
                            Dimensions (w x h)
                    </td>
                    <td
                        class="metadata_value"
                        tal:content="string:${image_info/width}px x ${image_info/height}px">
                            [Value]
                    </td>
                </tr>
                <tr
                    tal:condition="image_info/xRes">
                    <td
                        class="metadata_key">
                            Resolution
                    </td>
                    <td
                        class="metadata_value">
                        <tal:data
                            tal:content="image_info/xRes" />
                        <tal:data
                            tal:content="python:image_info.resUnit().lower().replace('pixels/inch','dpi')"/>
                    </td>
                </tr>
                <tr>
                    <td
                        class="metadata_key">
                            File Size
                    </td>
                    <td
                        class="metadata_value">
                        <tal:data
                            tal:content="size"/>
                    </td>
                </tr>
                <tr
                    tal:condition="image_info/keywords">
                    <td
                        class="metadata_key">
                            Keywords
                    </td>
                    <td
                        class="metadata_value">
                        <tal:data
                            tal:content="python:', '.join(image_info.keywords())"/>
                    </td>
                </tr>
                <tr
                    tal:condition="image_info/iso">
                    <td
                        class="metadata_key">
                            ISO
                    </td>
                    <td
                        class="metadata_value">
                        <tal:data
                            tal:content="image_info/iso"/>
                    </td>
                </tr>
            </table><br />

            <div>
                <strong>Other:</strong>
            </div>
            <table width="100%" border="0" cellpadding="3" cellspacing="0" style="border-top:1px solid #336699;">
                <tr
                    tal:condition="image_info/gpsDMSLat">
                    <td
                        class="metadata_key">GPS</td>
                    <td
                        class="metadata_value">
                        
                        <tal:GPSLat
                                    tal:condition="image_info/gpsDMSLat"
                        >
                        Latitude: <tal:GPSData 
                                    tal:content="image_info/gpsDMSLat" /><br />
                        </tal:GPSLat>
                        <tal:GPSLong
                                    tal:condition="image_info/gpsDMSLong"
                        >
                        Longitude: <tal:GPSData 
                                    tal:content="image_info/gpsDMSLong" /><br />
                        </tal:GPSLong>
                        <tal:GPSAlt
                                    tal:condition="image_info/gpsDMSAlt"
                        >
                        Altitude: <tal:GPSData 
                                    tal:content="image_info/gpsDMSAlt" /><br />
                        </tal:GPSAlt>
                        <br />

                        View these coordinates in:<br />
                            &nbsp;&nbsp;&nbsp;
                            <a href=""
                                target="_blank"
                                tal:attributes="href string:http://maps.google.com/maps?ll=${image_info/gpsDegLatStr},${image_info/gpsDegLongStr}&z=14">Google Maps</a>
                            <br />
                            &nbsp;&nbsp;&nbsp;
                            <a href=""
                                target="_blank"
                                tal:attributes="href string:http://maps.yahoo.com/index.php#mvt=m&trf=0&lon=${image_info/gpsDegLongStr}&lat=${image_info/gpsDegLatStr}&mag=4">Yahoo Maps</a>
                            <br />
                            &nbsp;&nbsp;&nbsp;
                            <a href=""
                                target="_blank"
                                tal:attributes="href string:http://www.mapquest.com/maps/map.adp?searchtype=address&formtype=latlong&latlongtype=decimal&latitude=${image_info/gpsDegLatStr}&longitude=${image_info/gpsDegLongStr}">MapQuest</a>
                            <br />
                    </td>
                </tr>
                <tr
                    tal:condition="image_info/comment">
                    <td
                        class="metadata_key">
                            Comment
                    </td>
                    <td
                        class="metadata_value"
                        tal:content="image_info/comment">
                            [Value]
                    </td>
                </tr>
                <tr>
                    <td
                        class="metadata_key">
                            View
                    </td>
                    <td
                        class="metadata_value">
                        <a href="[#]" 
                            tal:attributes="href string:$context_url/image_view_fullscreen">
                            Click to view full-size image...</a>
                    </td>
                </tr>
            </table>

        </div>

    <!-- Mark this view as being a main view template /-->
    <tal:block tal:define="global isViewTemplate python:True"/>
        
    </tal:main-macro>
</div>

</body>

</html>
