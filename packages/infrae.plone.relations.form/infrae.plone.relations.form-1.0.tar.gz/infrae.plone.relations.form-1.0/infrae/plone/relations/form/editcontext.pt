<tal:block condition="context/relationUseContext"
           i18n:domain="plone">
    <fieldset tal:define="plone context/getPloneContext;
                          error view/error|nothing"
              class="edit-context-relation">
      <legend>Context</legend>
      <div class="portalMessage error"
           tal:condition="error"
           tal:content="structure error">
        ERRORS
      </div>
      <div class="row" tal:repeat="widget view/getContextWidgets">
        <div class="field"
             tal:define="description widget/hint;
                         error       widget/error"
             tal:attributes="class   python:'field'+(error and ' error' or '')">
          <label tal:attributes="for widget/name">
            <span tal:content="widget/label">label</span>
          </label>
          <span class="fieldRequired" title="Required" tal:condition="widget/required">
            (Required)
          </span>
            
          <div class="formHelp"
               tal:content="description"
               tal:condition="description">
            field description
          </div>
          <div tal:condition="error" tal:content="structure error">
            The Error
          </div>
          <div class="widget" tal:content="structure widget">
            <input type="text" />
          </div>
        </div>
      </div>
      <div class="row" tal:condition="view/hasButton">
        <input type="submit" 
               id="#" name="#" 
               value="Modify"
               tal:define="field_dot string:${context/getName}.modify_apply" 
               tal:attributes="name  field_dot;
                               id    python:view.nameToId(field_dot)" />
               />
      </div>
    </fieldset>
</tal:block>

