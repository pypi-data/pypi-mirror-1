<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="collective.facetsupport">

<body>

<!-- Portletish macro -->
<tal:portletish
    metal:define-macro="portlet"
    define="view nocall:context/@@inline_facet_menu;
            facets view/facets|nothing;"
    condition="facets">

<dl class="portlet portletFacetNavigation">

    <dt class="portletHeader"
        i18n:translate="">
        Search
    </dt>
    <dd class="portletItem">

        <form tal:attributes="action python: '%s?%s' % (context.absolute_url(), view.query_link())">
            <input
                tal:attributes="value view/query/SearchableText|nothing"
                id="searchFacetField"
                type="text"
                name="SearchableText"
                 />
            <input
                type="submit"
                class="search"
                value="Facet search"
                id="searchFacetSubmit"
                />
            <tal:comment condition="nothing">
                Searching clears all facets. This is an okay behaviour.
                If you want to change it, include the facets as hidden form items.
            </tal:comment>
        </form>
    </dd>


<tal:iterate repeat="facet facets">

    <dt class="portletHeader" 
        tal:content="facet/title"
        tal:attributes="id python:view.normalize_css('facetHeader-%s' % facet.title)">
        Facet title
    </dt>

    <dd class="portletItem">
    
    <tal:iterterms repeat="term facet/terms">
        <div>
            <a tal:content="term"
               tal:attributes="href python:view.link_for_term(facet.title, term);
                               id python:view.normalize_css('facet-%s--%s' % (facet.title, term));">
                Term
            </a>
            <span tal:replace="python: facet.weight.get(term)">12</span>
        </div>
    </tal:iterterms>

</tal:iterate>
</dl>

</tal:portletish>

</body>
</html>