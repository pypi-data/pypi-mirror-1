<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>spoon.routing.MeshRouter</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="spoon-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="spoon-module.html">Package&nbsp;spoon</a> ::
        <a href="spoon.routing-module.html">Package&nbsp;routing</a> ::
        Class&nbsp;MeshRouter
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript: void(0);" class="privatelink"
    onclick="toggle_private();">hide private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="spoon.routing.MeshRouter-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class MeshRouter</h1><span class="codelink"><a href="spoon.routing.MeshRouter%27-pysrc.html">source&nbsp;code</a></span><br /><br />
<pre class="base-tree">
object --+
         |
        <strong class="uidshort">MeshRouter</strong>
</pre>

<hr />
<p>This class handles LMTYPE_NETWORK messages and LMTYPE_NETWORK_PROTO 
  messages.  LMTYPE_NETWORK_PROTO is handled as a routing update, and 
  LMTYPE_NETWORK will be handled as network traffic to be dealt with or 
  routed.</p>
  If there is a SingletonMessaging instance already created (e.g. 
  through the use of the acceptMsg decorator) and messaging is None<br /><br />

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="spoon.routing.MeshRouter-class.html#__init__" class="summary-sig-name">__init__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">hub</span>,
        <span class="summary-sig-arg">messaging</span>=<span class="summary-sig-default">None</span>)</span><br />
      x.__init__(...) initializes x; see x.__class__.__doc__ for 
      signature
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="spoon.routing.MeshRouter-class.html#addTransport" class="summary-sig-name">addTransport</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">t</span>,
        <span class="summary-sig-arg">nodeId</span>)</span><br />
      Handles the routing protocol initilization.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="spoon.routing.MeshRouter-class.html#handleLinkMessage" class="summary-sig-name">handleLinkMessage</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">t</span>,
        <span class="summary-sig-arg">lm</span>)</span><br />
      Called by the SpoonTransportThread when a link message has been 
      received for one of our LMTYPEs.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="spoon.routing.MeshRouter-class.html#handleNetworkTraffic" class="summary-sig-name">handleNetworkTraffic</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">t</span>,
        <span class="summary-sig-arg">obj</span>)</span>
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="spoon.routing.MeshRouter-class.html#handleUpdate" class="summary-sig-name">handleUpdate</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">t</span>,
        <span class="summary-sig-arg">update</span>,
        <span class="summary-sig-arg">localUpdate</span>=<span class="summary-sig-default">None</span>)</span><br />
      Handles a routing table update, builds the update message and 
      sends it out to all except the src of the update.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="spoon.routing.MeshRouter-class.html#removeTransport" class="summary-sig-name">removeTransport</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">t</span>)</span><br />
      Removes the transport from the network.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <span class="summary-sig"><a href="spoon.routing.MeshRouter-class.html#sendNetMsg" class="summary-sig-name">sendNetMsg</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">dst</span>,
        <span class="summary-sig-arg">mtype</span>,
        <span class="summary-sig-arg">obj</span>)</span><br />
      Sends a network message to the destination specified.
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__delattr__</code>,
      <code>__getattribute__</code>,
      <code>__hash__</code>,
      <code>__new__</code>,
      <code>__reduce__</code>,
      <code>__reduce_ex__</code>,
      <code>__repr__</code>,
      <code>__setattr__</code>,
      <code>__str__</code>
      </p>
    </td>
  </tr>
</table>

<br />
<!-- ==================== INSTANCE VARIABLES ==================== -->
<a name="section-InstanceVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <a href="spoon.routing.MeshRouter-class.html#hub">hub</a><br />
      the TransportHub that the router is associated with, should be set
      at init time and never changed.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <a href="spoon.routing.MeshRouter-class.html#nodes">nodes</a><br />
      This is the routing table.
  </td>
</tr>
<tr>
  <td width="15%" align="right" valign="top" class="summary">
    <code class="summary-type">&nbsp;</code>
  </td><td class="summary">
    <a href="spoon.routing.MeshRouter-class.html#transports">transports</a><br />
      A set of the transports that are currently active.
  </td>
</tr>
</table>

<br />
<!-- ==================== PROPERTIES ==================== -->
<a name="section-Properties"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Properties</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Properties"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
  <tr>
    <td colspan="2" class="summary">
    <p class="indent-wrapped-lines"><b>Inherited from <code>object</code></b>:
      <code>__class__</code>
      </p>
    </td>
  </tr>
</table>

<br />
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="__init__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__init__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">hub</span>,
        <span class="sig-arg">messaging</span>=<span class="sig-default">None</span>)</span>
    <br /><em class="fname">(Constructor)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="spoon.routing.MeshRouter%27-pysrc.html">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  x.__init__(...) initializes x; see x.__class__.__doc__ for 
  signature
  <dl><dt></dt><dd>
    <dl><dt>Overrides:
      object.__init__
        <dd><em class="note">(inherited documentation)</em></dd>
    </dt></dl>
  </dd></dl>
</td></tr></table>
</div>
<a name="addTransport"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">addTransport</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">t</span>,
        <span class="sig-arg">nodeId</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="spoon.routing.MeshRouter%27-pysrc.html">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Handles the routing protocol initilization. This involves first 
  exchanging routing tables entirely, then updating our routing table as 
  appropriate.  While updating our routing table, we need to construct a 
  routing update message and send it to all transports other than the 
  transport being added.
  <dl><dt></dt><dd>
    <dl><dt>Parameters:</dt></dl>
    <ul class="nomargin">
        <li><strong class="pname"><code>t</code></strong> - The transport being added to the network</li>
    </ul>
  </dd></dl>
</td></tr></table>
</div>
<a name="handleLinkMessage"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">handleLinkMessage</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">t</span>,
        <span class="sig-arg">lm</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="spoon.routing.MeshRouter%27-pysrc.html">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Called by the SpoonTransportThread when a link message has been 
  received for one of our LMTYPEs.
  <dl><dt></dt><dd>
    <dl><dt>Parameters:</dt></dl>
    <ul class="nomargin">
        <li><strong class="pname"><code>t</code></strong> - The transport that it came from</li>
        <li><strong class="pname"><code>lm</code></strong> - The LinkMessage that came in.</li>
    </ul>
  </dd></dl>
</td></tr></table>
</div>
<a name="handleNetworkTraffic"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">handleNetworkTraffic</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">t</span>,
        <span class="sig-arg">obj</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="spoon.routing.MeshRouter%27-pysrc.html">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  None
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
</div>
<a name="handleUpdate"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">handleUpdate</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">t</span>,
        <span class="sig-arg">update</span>,
        <span class="sig-arg">localUpdate</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="spoon.routing.MeshRouter%27-pysrc.html">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Handles a routing table update, builds the update message and sends it
  out to all except the src of the update.
  <dl><dt></dt><dd>
    <dl><dt>Parameters:</dt></dl>
    <ul class="nomargin">
        <li><strong class="pname"><code>t</code></strong> - The source transport from which the update came (in other 
          words where NOT to send our update)</li>
        <li><strong class="pname"><code>update</code></strong> - A dict containing the routing update.</li>
        <li><strong class="pname"><code>localUpdate</code></strong> - Only used in the specific case of when creating a new 
          transport.  This will include an entry for the node we've just 
          connected to, so that it may be merged into the update sent out 
          to the other nodes.</li>
    </ul>
  </dd></dl>
</td></tr></table>
</div>
<a name="removeTransport"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">removeTransport</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">t</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="spoon.routing.MeshRouter%27-pysrc.html">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Removes the transport from the network.  This involves figuring out 
  which nodes are now unreachable (any routes we had over that transport), 
  removing any references to the transport from our routing table, and 
  updating our neighbors about our changed routing table.
  <dl><dt></dt><dd>
    <dl><dt>Parameters:</dt></dl>
    <ul class="nomargin">
        <li><strong class="pname"><code>t</code></strong> - The transport being removed from the network</li>
    </ul>
  </dd></dl>
</td></tr></table>
</div>
<a name="sendNetMsg"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">sendNetMsg</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">dst</span>,
        <span class="sig-arg">mtype</span>,
        <span class="sig-arg">obj</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="spoon.routing.MeshRouter%27-pysrc.html">source&nbsp;code</a></span>&nbsp;</span
    ></td>
  </table>
  
  Sends a network message to the destination specified. A NetMessage 
  object is constructed from the arguments provided to this method and 
  routed appropriately.
  <dl><dt></dt><dd>
    <dl><dt>Parameters:</dt></dl>
    <ul class="nomargin">
        <li><strong class="pname"><code>dst</code></strong> - The node id of the destination</li>
        <li><strong class="pname"><code>mtype</code></strong> - The message type (probably NMTYPE_MESSAGE)</li>
        <li><strong class="pname"><code>obj</code></strong> - The object attachment of the NetMessage</li>
    </ul>
  </dd></dl>
</td></tr></table>
</div>
<br />
<!-- ==================== INSTANCE VARIABLE DETAILS ==================== -->
<a name="section-InstanceVariableDetails"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="hub"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">hub</h3>
  the TransportHub that the router is associated with, should be set at 
  init time and never changed.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
</div>
<a name="nodes"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">nodes</h3>
  This is the routing table.  It's a dictionary whose keys are node ids,
  and the values are a tuple consisting of the hop count to the node and 
  the transport used to get there.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
</div>
<a name="transports"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">transports</h3>
  A set of the transports that are currently active.
  <dl><dt></dt><dd>
  </dd></dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="spoon-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">Generated by Epydoc
        3.0alpha3 on Mon Nov 27 16:11:33 2006</td>
    <td align="right" class="footer">
      <a href="http://epydoc.sourceforge.net">http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie()
  // -->
</script>
  
</body>
</html>
