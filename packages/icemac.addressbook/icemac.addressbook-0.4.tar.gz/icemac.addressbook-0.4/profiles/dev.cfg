[buildout]
extends = base.cfg
parts = ${buildout:base-parts}
        eggdeps gtkeggdeps omelette importchecker test_z3cpt coverage

[site.zcml]
prepend_zcml =
append_zcml = <include file="dev_profiling.zcml" />
              <include file="dev_admin_user.zcml" />
              <include file="default_skin.zcml" />

[app]
eggs += z3c.profiler
        stxnext.pdb

[test]
eggs += stxnext.pdb

[use_z3cpt]
PREFER_Z3C_PT = True
CHAMELEON_DEBUG = True

[test_z3cpt]
recipe = zc.recipe.testrunner
eggs = icemac.addressbook [test]
working-directory = ${buildout:directory}/src/icemac/addressbook
defaults = ['-c', '-t', 'rootfolder.txt', '-1']
environment = use_z3cpt

[gtkeggdeps]
recipe = zc.recipe.egg
eggs = gtkeggdeps
       icemac.addressbook [test]
scripts = gtkeggdeps

[eggdeps]
recipe = zc.recipe.egg
eggs = tl.eggdeps
       icemac.addressbook [test]
scripts = eggdeps

[omelette]
recipe = collective.recipe.omelette
eggs = ${app:eggs}
       icemac.addressbook [test]
       zc.buildout

[importchecker]
recipe = zc.recipe.egg
eggs = importchecker
arguments = "${buildout:directory}/src"

[coverage]
recipe = zc.recipe.egg
eggs = tha.coverage
