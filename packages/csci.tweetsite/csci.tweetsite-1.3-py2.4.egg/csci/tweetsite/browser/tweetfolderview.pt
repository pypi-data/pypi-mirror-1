<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="csci.tweetsite">
<body>
    <div metal:fill-slot="main">
        <tal:main-macro metal:define-macro="main"
                        tal:define="subfolders  python:here.objectValues();
                                    thisuser    python:str(user);
                                    subfolders2 python:view.sort_content(subfolders)">

            
            
<!-- http://plone.org/documentation/tutorial/plonebatch/tutorial-all-pages -->
    <div tal:define="results subfolders2;
                     Batch python:modules['Products.CMFPlone'].Batch;
                     b_size python:15;
                     b_start python:0;
                     b_start request/b_start | b_start;">
        <div tal:condition="results"
           tal:define="batch python:Batch(results, 
                                          b_size, 
                                          int(b_start),
                                          orphan=1);">

            <table border="0" width="100%" cellpadding=0px cellspacing=0px margin=0px>
            <metal:block tal:repeat="result batch">
                <span tal:define="date   python:result[0];
                                  obj    python:result[1]">
                    <span tal:condition="python:[x for x in obj.permissionsOfRole('Anonymous') if x['name']=='View'][0]['selected'] == 'SELECTED'"
                            tal:define="localroles python:obj.get_local_roles_for_userid(thisuser);"> 
                        <tr>
                            <td valign="top" style="width:100px;">
                                <small tal:content="date" />
                            </td>
                            <td valign="top" tal:define="text     obj/title_or_id;
                                                         livetext python:view.fix_urls(text)">
                                <p tal:content="structure livetext" />  
                            </td>
                            <td tal:condition="python:('Editor' in localroles) or ('Manager' in user.getRoles()) "
                                tal:define="url obj/absolute_url">
                                <a tal:attributes="href python:url+'/edit'">edit</a>    
                            </td>
                        </tr>
                    </span>
                </span>
            </metal:block>
            </table>
        <div metal:use-macro="here/batch_macros/macros/navigation" />
        </div>
    </div>

    </tal:main-macro>
    </div>
</body>
</html>














