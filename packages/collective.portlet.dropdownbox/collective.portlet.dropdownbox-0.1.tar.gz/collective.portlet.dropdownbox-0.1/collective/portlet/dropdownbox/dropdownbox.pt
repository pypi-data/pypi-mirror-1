<tal:comment tal:condition="nothing">
    If omit border is true only the text field will be shown.
    
    The selections are also shown and for that reason the code have
    to be re added this might be set up in a smarter manner.
</tal:comment>
<div i18n:domain="plone.portlet.dropdownbox"
     tal:condition="view/data/omit_border"
     tal:attributes="class string:portletDropDownBox ${view/css_class}">
    <div class="portletDropDownBoxFormWrapper"
         tal:repeat="item view/results">
        <form action="redirect_to" method="get"
              tal:attributes="action view/redirect_to"
              tal:condition="item/links">
            <label tal:attributes="for item/id;"
                   tal:content="item/title">Title</label>
            <div class="formHelp">
            </div>
            <select onchange="window.location.href=this.options[this.selectedIndex].value"
                    tal:attributes="id item/id;
                                    name item/id;">
                <option value="" selected="selected"
                        i18n:name="">Select</option>
            
                <option tal:repeat="link item/links" value=""
                        tal:attributes="value link/url"
                        tal:content="link/title"
                        >Title</option>
            </select>
            <noscript>
                <input class="standalone" type="submit"
                       value="Go" />
            </noscript>
        </form>
    </div>
    <div tal:replace="structure view/data/text" />
</div>
<tal:comment tal:condition="nothing">
    Here comes the normal portlet - omit border is not chosen (default)
</tal:comment>
<dl tal:condition="not:view/data/omit_border"
    tal:attributes="class string:portlet portletDropDownBox ${view/css_class}"
    i18n:domain="plone.portlet.dropdownbox">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <span>
           <a tal:omit-tag="not:view/has_link"
              tal:attributes="href view/data/more_url"
              tal:content="view/data/header"
              />
        </span>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd">
        <div class="portletDropDownBoxFormWrapper"
             tal:repeat="item view/results">
            <form action="redirect_to" method="get"
                  tal:attributes="action view/redirect_to"
                  tal:condition="item/links">
                <label tal:attributes="for item/id;"
                       tal:content="item/title">Title</label>
                <div class="formHelp">
                </div>
                <select onchange="window.location.href=this.options[this.selectedIndex].value"
                        tal:attributes="id item/id;
                                        name item/id;">
                    <option value="" selected="selected"
                            i18n:name="">Select</option>
                    
                    <option tal:repeat="link item/links" value=""
                            tal:attributes="value link/url"
                            tal:content="link/title"
                            >Title</option>
                </select>
                <noscript>
                    <input class="standalone" type="submit"
                           value="Go" />
                </noscript>
            </form>
        </div>
        <div class="portletDropDownBoxTextWrapper"
             tal:condition="view/has_text"
             tal:content="structure view/data/text">Text</div>
        <tal:corners condition="not:view/has_footer">
            <span class="portletBottomLeft"></span>
            <span class="portletBottomRight"></span>
        </tal:corners>
    </dd>
    
    <dd class="portletFooter" tal:condition="view/has_footer">
        <span class="portletBotomLeft"></span>
        <span>
           <a tal:omit-tag="not:view/has_link"
              tal:attributes="href view/data/more_url"
              tal:content="view/data/footer"
              />
        </span>
        <span class="portletBottomRight"></span>
    </dd>

</dl>
