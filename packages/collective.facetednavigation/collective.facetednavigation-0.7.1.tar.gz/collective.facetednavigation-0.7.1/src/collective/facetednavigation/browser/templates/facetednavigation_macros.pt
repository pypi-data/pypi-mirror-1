<tal:table-of-contents tal:replace="nothing">
Macro names: 
 - display-facet
 - display-items
 - display-batch-links
</tal:table-of-contents>



<!-- --------------------------------------------------- -->
<tal:comment tal:replace="nothing">
Name: display-facet
Description: display a box for a facet (with its possible values)
Parameters:
    facet: the corresponding facet (as a mapping with appropriate keys)
    view: an instance of a FacetedNavigation browser view.
</tal:comment>
<tal:display-facet metal:define-macro="display-facet">
<div tal:define="show python: view.showFacet(facet['id']);
                 results python: view.getResults()[facet['id']]"
     tal:attributes="class python: 'block' + (not show and ' hidden' or '');
                     id facet/id">

<h3>
  <span class="showOrHideFacetBlockButton"></span>
  <span tal:replace="facet/label"/>
</h3>

<div tal:condition="not: results" class="notApplicable">n.a.</div>

<ul tal:condition="results">
  <li tal:repeat="result results">
    <input class="facetedNavCheckbox"
           type="checkbox"
           tal:attributes="id string:${facet/id}-${result/value};
                           name string:${facet/id}:list;
                           value result/value;
                           checked python: view.valueIsSelected(facet['id'], result['value'])"/>
    <label tal:attributes="for string:${facet/id}-${result/value}">
      <span tal:replace="result/label"/>
      (<span tal:replace="result/n_results"/>)
    </label>
  </li>
</ul>

</div>
</tal:display-facet>
<!-- --------------------------------------------------- -->



<!-- --------------------------------------------------- -->
<tal:comment tal:replace="nothing">
Name: display-items
Description: display items matching the currently selected criteria
Parameters:
    items: a Batch instance that encapsulates a list of brains
</tal:comment>
<tal:display-items metal:define-macro="display-items">

<p tal:condition="not: items">
  <strong i18n:domain="plone"
          i18n:translate="description_no_results_found">
    No results were found.
  </strong>
</p>

<tal:if tal:condition="items">
  <span i18n:domain="plone"
        i18n:translate="batch_x_items_matching_your_criteria">
    <strong i18n:name="number"
            tal:content="items/total_length">234</strong>
    items matching your search terms
  </span>
  <ul>
    <li tal:repeat="brain items/slice">
      <a tal:attributes="href string:${brain/getURL}/view"
        ><img tal:replace="structure python: getattr(context, brain.getIcon)"/></a>
      <a tal:attributes="href brain/getURL"
         tal:content="brain/Title"/>
    </li>
  </ul>
  <tal:if tal:condition="python: items.previous or items.next">
    <tal:display-facet metal:use-macro="context/@@faceted-navigation-macros/macros/display-batch-links"/>
  </tal:if>
</tal:if>
</tal:display-items>
<!-- --------------------------------------------------- -->


<!-- --------------------------------------------------- -->
<tal:comment tal:replace="nothing">
Name: display-batch-links
Description: display links for batch navigation
Parameters:
    items: see 'display-items' macro above
</tal:comment>
<tal:display-batch-links metal:define-macro="display-batch-links">
<div class="batch">
  <a tal:condition="items/previous"
     tal:attributes="id string:batch-${items/previous}"
     title="previous page"
     i18n:domain="collective.facetednavigation"
     i18n:attributes="title"
     class="previous_next">
    &#8592;
  </a>

  <ul>
    <li tal:repeat="i_page items/pages">
      <a tal:condition="python: i_page != items.current"
         tal:attributes="id string:batch-${i_page}"
         tal:content="i_page"
         href="javascript:"></a>
      <span class="current"
            tal:condition="python: i_page == items.current"
            tal:content="i_page"></span>
    </li>
  </ul>

  <a tal:condition="items/next"
     tal:attributes="id string:batch-${items/next}"
     title="next page"
     i18n:domain="collective.facetednavigation"
     i18n:attributes="title"
     class="previous_next">
    &#8594;
  </a>
</div>
</tal:display-batch-links>
<!-- --------------------------------------------------- -->
