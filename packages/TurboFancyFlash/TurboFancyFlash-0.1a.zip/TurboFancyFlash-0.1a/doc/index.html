<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="Docutils 0.4.1: http://docutils.sourceforge.net/" />
<title>TurboFancyFlash</title>
<meta name="author" content="Christopher Arndt" />
<meta name="date" content="2008-02-04" />
<link rel="stylesheet" href="rest.css" type="text/css" />
</head>
<body>
<div class="document" id="turbofancyflash">
<h1 class="title">TurboFancyFlash</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Christopher Arndt</td></tr>
<tr><th class="docinfo-name">Version:</th>
<td>0.1a</td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>2008-02-04</td></tr>
<tr class="field"><th class="docinfo-name">Description:</th><td class="field-body">TurboGears extension providing enhanced flash message display functions.</td>
</tr>
</tbody>
</table>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#installation" id="id1" name="id1">Installation</a></li>
<li><a class="reference" href="#usage" id="id2" name="id2">Usage</a></li>
<li><a class="reference" href="#acknowledgments" id="id3" name="id3">Acknowledgments</a></li>
<li><a class="reference" href="#todo" id="id4" name="id4">Todo</a></li>
</ul>
</div>
<p>This package provides an enhanced version of the <tt class="docutils literal"><span class="pre">turbogears.flash()</span></tt>
function, giving your users much nicer-looking message boxes that can change
their appearance based on the status of the message. With JavaScript enabled,
messages can fade out after a timeout or be dismissed by the user with a
mouse-click.</p>
<p>This is accomplished by encoding the message with JSON and decoding it again in
the template of the target page. This is handled completely automatic and the
programmer can just use the functional interface, e.g.
<tt class="docutils literal"><span class="pre">fancyflash.error(&quot;Duh!&quot;)</span></tt>.</p>
<p>Additionally, you can display messages with a simple JavaScript function call, for example when processing the results of an AJAX call in your callback function for <tt class="docutils literal"><span class="pre">loadJSONDoc</span></tt>.</p>
<p>For more information see the source of the <tt class="docutils literal"><span class="pre">fancyflash</span></tt> package, the
epydoc-generated <a class="reference" href="http://chrisarndt.de/projects/fancyflash/api/index.html">API documentation</a> and the <a class="reference" href="http://chrisarndt.de/projects/fancyflashexample/">FancyFlashExample</a> application.</p>
<div class="section">
<h1><a class="toc-backref" href="#id1" id="installation" name="installation">Installation</a></h1>
<p>To install TurboFancyFlash from the <a class="reference" href="http://cheeseshop.python.org/pypi/TurboFancyFlash">Cheeseshop</a> use <a class="reference" href="http://peak.telecommunity.com/DevCenter/EasyInstall">easy_install</a>:</p>
<pre class="literal-block">
[sudo] easy_install TurboFancyFlash
</pre>
<p>This requires the <a class="reference" href="http://peak.telecommunity.com/DevCenter/setuptools">setuptools</a> package to be installed. If you have not done so
already, download the <a class="reference" href="http://peak.telecommunity.com/dist/ez_setup.py">ez_setup.py</a> script and run it to install setuptools.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id2" id="usage" name="usage">Usage</a></h1>
<p>Controller (<tt class="docutils literal"><span class="pre">controllers.py</span></tt>):</p>
<pre class="literal-block">
# Import TurboGears
from turbogears import controllers, expose, redirect, validate, validators

# Import fancyflash package
import fancyflash as ff

# Set the default timeout for message box display
ff.set_default_flash_timeout(5)

# Let FancyFlashWidget be included on every page
ff.register_flash_widget()

class FlashTestController(controllers.Controller):

    &#64;expose('templates.welcome')
    def index(self, timeout=0):
        return {}

    &#64;expose()
    def info(self):
        ff.info(&quot;Hello TurboGears!&quot;)
        redirect('/')

    &#64;expose()
    &#64;validate(validators=dict(timeout=validators.Int))
    def success(self, timeout=0, tg_errors=None):
        ff.success(&quot;Hello TurboGears!&quot;, timeout)
        redirect('/')

    &#64;expose()
    &#64;validate(validators=dict(status=validators.String))
    def message(self, status=&quot;info&quot;, tg_errors=None):
        ff.statusmessage(&quot;Hello TurboGears!&quot;, status)
        redirect('/')
</pre>
<p>Master template (<tt class="docutils literal"><span class="pre">master.kid</span></tt>):</p>
<pre class="literal-block">
&lt;div id=&quot;main_content&quot;&gt;
  &lt;div py:replace=&quot;tg_fancyflashwidget(tg_flash)&quot;&gt;Status message
    appears here&lt;/div&gt;

  &lt;div py:replace=&quot;[item.text]+item[:]&quot;/&gt;

  ...
&lt;/div&gt;
</pre>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id3" id="acknowledgments" name="acknowledgments">Acknowledgments</a></h1>
<p>The idea for this widget is based on a <a class="reference" href="http://www.splee.co.uk/2005/11/23/fancy-status-messages-using-tg_flash/">blog post</a> by Lee McFadden:</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id4" id="todo" name="todo">Todo</a></h1>
<ul class="simple">
<li>Test in IE</li>
<li>Test opacity in Safari</li>
</ul>
<p>If I have time:</p>
<ul class="simple">
<li>Add argument for dialog position (implement by writing CSS dynamically).</li>
<li>Round boxes for non-Gecko browsers</li>
<li>Add AJAX widget, which displays result of <tt class="docutils literal"><span class="pre">loadJSONDoc</span></tt> as fancy status
message.</li>
</ul>
</div>
</div>
<div class="footer">
<hr class="footer" />
Generated on: 2008-02-04 17:13 UTC.

</div>
</body>
</html>
