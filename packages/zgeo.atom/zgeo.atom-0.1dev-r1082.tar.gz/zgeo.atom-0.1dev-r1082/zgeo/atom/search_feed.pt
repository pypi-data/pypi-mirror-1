<?xml version="1.0" encoding="utf-8"?>
<feed
  xmlns="http://www.w3.org/2005/Atom"
  xmlns:georss="http://www.georss.org/georss"
  xmlns:gml="http://www.opengis.net/gml"
  xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  >
  <tal:b 
    condition="python:request and request.response.setHeader(
		'Content-Type', 'application/atom+xml;charset=utf-8')" 
    />

  <title tal:content="view/title">TITLE</title>
  <opensearch:totalResults tal:content="view/num_results"/>
  <opensearch:startPage tal:content="view/page"/>
  <opensearch:itemsPerPage tal:content="view/page_size"/>
  <link
    rel="alternate"
    tal:attributes="href view/alternate_link"
    tal:content="view/alternate_link"
    />
  <link
    rel="first"
    type="application/atom+xml"
    tal:attributes="href view/first_link"
    />
  <link
    rel="last"
    type="application/atom+xml"
    tal:attributes="href view/last_link"
    />
  <link tal:condition="view/previous_link"
    rel="previous"
    type="application/atom+xml"
    tal:attributes="href view/previous_link"
    />
  <link tal:condition="view/next_link"
    rel="next"
    type="application/atom+xml"
    tal:attributes="href view/next_link"
    />
  <updated tal:content="view/updated"/>
  <author>
    <name tal:content="view/author/name"/>
    <uri tal:content="view/author/uri"/>
    <email tal:content="view/author/email"/>
  </author>
  <id tal:content="view/id">ID</id>

  <entry 
    tal:repeat="entry view/entries"
    >
    <title tal:content="entry/title">TITLE</title>
    <link
      rel="alternate" 
      tal:attributes="href entry/alternate_link"
      tal:content="entry/alternate_link"
      />
    <id tal:content="entry/id">ID</id>
    <updated tal:content="entry/updated"/>
    <summary tal:content="entry/summary">ABOUT</summary>
    <tal:b condition="entry/hasPoint">
    <georss:where>
      <gml:Point>
        <gml:pos tal:content="entry/coords_georss">COORDS</gml:pos>
      </gml:Point>
    </georss:where>
    </tal:b>
    <tal:b condition="entry/hasLineString">
    <georss:where>
      <gml:LineString>
        <gml:posList tal:content="entry/coords_georss">COORDS</gml:posList>
      </gml:LineString>
    </georss:where>
    </tal:b>
    <tal:b condition="entry/hasPolygon">
    <georss:where>
      <gml:Polygon>
        <gml:exterior>
          <gml:LinearRing>
            <gml:posList tal:content="entry/coords_georss">COORDS</gml:posList>
          </gml:LinearRing>
        </gml:exterior>
      </gml:Polygon> 
    </georss:where>
    </tal:b>
  </entry>

</feed>


