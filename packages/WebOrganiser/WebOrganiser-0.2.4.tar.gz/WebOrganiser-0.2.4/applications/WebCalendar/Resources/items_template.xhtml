<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:template="http://www.boddie.org.uk/ns/xmltools/template">
<head>
  <title>Items</title>
  <link type="text/css" rel="stylesheet" href="{$root}styles/styles.css" />
</head>
<body template:element="items">
  <form action="" method="POST">
    <div class="controls">
      <div class="buttons">
        <input name="download" type="submit" value="{template:i18n('Download')}"/>
        <input name="download-all" type="submit" value="{template:i18n('Download all')}"/>
        <input name="new" type="submit" value="{template:i18n('New')}"/>
        <select template:multiple-choice-field="new-type,value" name="...">
          <option template:multiple-choice-value="new-type-enum,value,selected" value="..." template:i18n="{@value}"/>
        </select>
      </div>
      <div template:element="item-types" class="types" xml:space="preserve">
        <span template:element="item-type"
          class="{template:choice(/items/@item-type = @value or not(/items/@item-type) and @value = 'all', 'type-selected', 'type')}">
          <a href="../{@value}" template:i18n="{@value}">all</a>
        </span>
        <a href="{template:choice(/items/@filtered, '../../')}../date/{/items/@year-now}/{/items/@month-now}/{template:choice(/items/@filtered, concat(/items/@filter-type, '/', template:url-encode(template:url-encode(/items/@filter-item-value)), '/'))}{/items/@item-type}">
          <img class="image-label" src="{$root}images/appointment.png" alt="{template:i18n('Calendar view')}"/>
        </a>
      </div>
      <table class="table-heading" align="center" border="0" cellpadding="5" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th width="10%" class="column-header" xml:space="preserve">
              <span template:i18n="-">Type</span>
              <a href="?sort-by=@item-type">
                <img class="image-label" src="{$root}images/sort-ascending.png" alt="{template:i18n('Sort ascending')}"/>
              </a>
              <a href="?sort-by=@item-type&amp;sort-order=descending">
                <img class="image-label" src="{$root}images/sort-descending.png" alt="{template:i18n('Sort descending')}"/>
              </a>
            </th>
            <th width="40%" class="column-header" xml:space="preserve">
              <span template:i18n="-">Summary</span>
              <a href="?sort-by=summary/@details">
                <img class="image-label" src="{$root}images/sort-ascending.png" alt="{template:i18n('Sort ascending')}"/>
              </a>
              <a href="?sort-by=summary/@details&amp;sort-order=descending">
                <img class="image-label" src="{$root}images/sort-descending.png" alt="{template:i18n('Sort descending')}"/>
              </a>
            </th>
            <th width="50%" class="column-header" xml:space="preserve">
              <span template:i18n="-">Created</span>
              <a href="?sort-by=created/@datetime">
                <img class="image-label" src="{$root}images/sort-ascending.png" alt="{template:i18n('Sort ascending')}"/>
              </a>
              <a href="?sort-by=created/@datetime&amp;sort-order=descending">
                <img class="image-label" src="{$root}images/sort-descending.png" alt="{template:i18n('Sort descending')}"/>
              </a>
            </th>
          </tr>
        </thead>
      </table>
    </div>
    <div class="view" template:element="table">
      <table align="center" border="0" cellpadding="5" cellspacing="0" width="100%">
        <!-- NOTE: Could put the real headings here. -->
        <thead>
          <tr>
            <th width="10%">
            </th>
            <th width="40%">
            </th>
            <th width="50%">
            </th>
          </tr>
        </thead>

        <tbody template:element="item">
          <tr template:if="not(related-to) or /items/@related-to">
            <td>
              <input template:attribute="item-value" name="{template:this-attribute()}" value="{$this-value}" type="hidden"/>
              <a template:attribute="item-type" href="../{template:url-encode($this-value)}/">
                <img class="image-label" src="{$root}images/{$this-value}.png" alt="{template:i18n($this-value)}"/>
              </a>
            </td>
            <td xml:space="preserve">
              <input name="item={template:this-element()}" value="1" type="checkbox"/>
              <a template:if="fn" href="../person/{template:url-encode(template:url-encode(@item-value))}/">
                <img class="image-label" src="{$root}images/search.png" alt="Search"/>
              </a>
              <a href="../{@item-type}/{template:url-encode(template:url-encode(@item-value))}/">
                <span template:element="summary" template:attribute="details" template:value="$this-value">summary</span></a>
              <a template:attribute="item-value"
                href="../card/{template:url-encode(template:url-encode($this-value))}/"
                ><span template:element="fn" template:attribute-area="details,replace">full name</span></a>
              <a template:attribute="item-value"
                href="{template:choice(/items/@filtered, '../../')}../related-to/{template:url-encode(template:url-encode($this-value))}/"
                template:i18n="-">(Related)</a>
            </td>
            <td>
              <span template:element="created" template:attribute="datetime" template:value="$this-value">created</span>
            </td>
          </tr>

        </tbody>
      </table>
    </div>
  </form>
</body>
</html>
