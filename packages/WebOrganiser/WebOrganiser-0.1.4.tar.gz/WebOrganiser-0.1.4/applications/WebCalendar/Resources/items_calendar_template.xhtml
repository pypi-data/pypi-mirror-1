<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
 xmlns:template="http://www.boddie.org.uk/ns/xmltools/template">
<head>
  <title>Items</title>
  <link type="text/css" rel="stylesheet" href="styles/styles.css" />
</head>
<body template:element="items">
  <form action="" method="POST">
    <div class="controls">
      <div class="buttons">
        <input name="download-all" type="submit" value="{template:i18n('Download all')}"/>
        <input name="new-card" type="submit" value="{template:i18n('New card')}"/>
        <input name="new-event" type="submit" value="{template:i18n('New event')}"/>
        <input name="new-journal" type="submit" value="{template:i18n('New journal entry')}"/>
        <input name="new-to-do" type="submit" value="{template:i18n('New to-do item')}"/>
      </div>
      <div class="types" xml:space="preserve">
        <a href="../all" template:i18n="-">all</a>
        <a href="../card" template:i18n="-">card</a>
        <a href="../event" template:i18n="-">event</a>
        <a href="../journal" template:i18n="-">journal</a>
        <a href="../to-do" template:i18n="-">to-do</a>
        <a href="{template:choice(/items/@filtered, '../../')}../../../../{template:choice(/items/@filtered, concat(/items/@filter-type, '/', template:url-encode(template:url-encode(/items/@filter-item-value)), '/'))}{@item-type}">
          <img class="image-label" src="images/folder.png" alt="{template:i18n('List view')}"/>
        </a>
      </div>
    </div>
    <div class="view" template:element="month">
      <table align="center" border="0" cellpadding="5" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>
              <a href="{template:choice(/items/@filtered, '../../')}../../../{@year-previous}/{@number-previous}/{template:choice(/items/@filtered, concat(/items/@filter-type, '/', template:url-encode(template:url-encode(/items/@filter-item-value)), '/'))}{/items/@item-type}"
                template:i18n="-">Previous</a>
            </th>
            <th class="header" xml:space="preserve">
              <span template:attribute="number" template:value="template:i18n(concat('month-', $this-value))">month number</span>
              <span template:attribute="year" template:value="$this-value">year</span>
            </th>
            <th>
              <a href="{template:choice(/items/@filtered, '../../')}../../../{@year-next}/{@number-next}/{template:choice(/items/@filtered, concat(/items/@filter-type, '/', template:url-encode(template:url-encode(/items/@filter-item-value)), '/'))}{/items/@item-type}"
                template:i18n="-">Next</a>
            </th>
          </tr>
          <tr>
            <th width="14%" class="header" template:i18n="-">Mon</th>
            <th width="14%" class="header" template:i18n="-">Tue</th>
            <th width="14%" class="header" template:i18n="-">Wed</th>
            <th width="14%" class="header" template:i18n="-">Thu</th>
            <th width="14%" class="header" template:i18n="-">Fri</th>
            <th width="14%" class="header" template:i18n="-">Sat</th>
            <th width="14%" class="header" template:i18n="-">Sun</th>
          </tr>
        </thead>
        <tbody template:element="week">
          <tr>
            <td width="10%" class="{template:choice(@number, 'day-header', 'day-unused')}" template:element="day">
              <span template:attribute="number" template:value="$this-value">number</span>
            </td>
          </tr>
          <tr>
            <td template:element="day" class="{template:choice(@date, 'day-minimum', 'day-unused')} {template:choice(@marked = 'true', 'day-region')}">

              <!-- Section with hCalendar annotation (translating item types to hCalendar names) -->

              <div template:element="item" xml:space="preserve">
                <span template:if="substring(created/@datetime, 1, 8) = ../@date">
                  <img src="images/created.png" alt="{template:i18n('Created')}"/>
                </span>
                <span template:if="substring(dtstart/@datetime, 1, 8) = ../@date">
                  <img src="images/appointment.png" alt="{template:i18n('Start')}"/>
                </span>
                <span template:if="dtstart/@datetime and not(substring(dtstart/@datetime, 1, 8) = ../@date)">
                  <img src="images/continued.png" alt="{template:i18n('Continued')}"/>
                </span>
                <a href="{template:choice(/items/@filtered, '../../')}../{@item-type}/{template:url-encode(template:url-encode(@item-value))}/">
                  <span class="summary" template:element="summary" template:attribute-area="details,replace">summary</span>
                </a>
                <a template:if="@item-type = 'to-do' or @item-type = 'event' or @item-type = 'journal'"
                  href="{template:choice(/items/@filtered, '../../')}../related-to/{template:url-encode(template:url-encode(@item-value))}/"
                  template:i18n="-">(Related)</a>
                <span template:element="dtstart" template:attribute="datetime" template:value="$this-value">dtstart</span>

                <!-- Special hidden event and to-do entries for the hCalendar format, only for occurring events. -->

                <div class="v{translate(@item-type, '-', '')}" template:if="substring(dtstart/@datetime, 1, 8) = ../@date"
                  style="display: none; visibility: collapse">
                  <span class="dtstart" title="{$this-value}" template:element="dtstart" template:attribute="datetime"
                    template:value="$this-value">dtstart</span>
                  <span class="dtend" title="{$this-value}" template:element="dtend" template:attribute="datetime"
                    template:value="$this-value">date</span>
                  <span class="summary" template:element="summary" template:attribute="details" template:value="$this-value">summary</span>
                </div>

              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </form>
</body>
</html>
