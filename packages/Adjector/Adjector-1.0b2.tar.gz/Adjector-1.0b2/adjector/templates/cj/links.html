<!--!
**********************************************************************
| Copyright 2009-2010 David Isaacson, Stou Sandalski, Information Capsid
|
| This file is part of the program Adjector.
|
| Adjector is free software: you can redistribute it and/or modify
| it under the terms of the GNU General Public License as published by
| the Free Software Foundation, either version 2 of the License, or
| (at your option) version 3 of the License.
|
| Adjector is distributed in the hope that it will be useful,
| but WITHOUT ANY WARRANTY; without even the implied warranty of
| MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
| GNU General Public License for more details.
|
| You should have received a copy of the GNU General Public License
| along with Adjector. If not, see <http://www.gnu.org/licenses/>.
|
**********************************************************************
-->
<html xmlns='http://www.w3.org/1999/xhtml'
      xmlns:py='http://genshi.edgewall.org/'
      xmlns:xi='http://www.w3.org/2001/XInclude'
      py:strip=''>
     
     
     <div py:def='content'> 
         <div class='count'>${(c.page - 1) * c.per_page + 1} to ${(c.page - 1) * c.per_page + min(c.count, c.per_page)} of ${c.total}</div> 
         
        <div class='paging'>
            <a py:if='c.page > 1' href='${g.conf.base_url}/import/cj/search?page=${c.page - 1}'>&lt;</a> 
            Page ${c.page} 
            <a py:if='(c.page - 1) * c.per_page + min(c.count, c.per_page) != c.total' href='${g.conf.base_url}/import/cj/search?page=${c.page + 1}'>&gt;</a> 
        </div>
          
        <form method='post' action='${g.conf.base_url}/import/cj/process' class='cj'>
            <div class=''>
                <input type='submit' name='import' value='Import Checked' class='submitbutton' />
                <input type='submit' name='ignore' value='Ignore Checked' class='submitbutton' />
                <input py:if='request.params.get("show_ignored")'
                       type='submit' name='unignore' value='Un-Ignore Checked' class='submitbutton'/>
                <a href='#' class='button' onclick='var eles = document.getElementsByTagName("input"); for (i in eles){if (eles[i].type == "checkbox") eles[i].checked = "checked"}; return false'>Check All</a>
                <a href='#' class='button' onclick='var eles = document.getElementsByTagName("input"); for (i in eles){if (eles[i].type == "checkbox") eles[i].checked = ""}; return false'>Uncheck All</a>
            </div>

            <table py:if='c.links' class='display'>
                <tr>
                    <th>Actions</th>
                    <th>Advertiser &amp; Commissions</th>
                    <th>Size</th>
                    <th>Dates</th>
                    <th>7-day / 3 mo EPC</th>
                    <th>Preview</th>
                </tr>
    
                <tr py:for='i, link in enumerate(c.links)' class='${"odd" if i % 2 else "even"}'>
                
                    <td class='actions'>
                        <div>
                            <input type='checkbox' name='${link["cj_site_id"]}:${link["cj_link_id"]}' />
                        </div>
                        <div>
                            <a py:if='link.get("creative")' href='${link["creative"].view()}'>Imported</a>
                            <a py:if='not link.get("creative")'
                               href='${g.conf.base_url}/import/cj/process?import&amp;${link["cj_site_id"]}:${link["cj_link_id"]}'>Import</a>
                        </div>
                        
                        <div>
                            <a py:if='link.get("ignored")' href='${g.conf.base_url}/import/cj/process?unignore=1&amp;${link["cj_site_id"]}:${link["cj_link_id"]}'>Un-Ignore</a>
                            <a py:if='not link.get("ignored") and not link.get("creative")' href='${g.conf.base_url}/import/cj/process?ignore=1&amp;${link["cj_site_id"]}:${link["cj_link_id"]}'>Ignore</a>
                        </div>
                    </td>
                    
                    <td>
                        ${link['advertiser_name']}
                        <div class='commissions'>
                            ${'Click: %s' % link['click_commission'] if link['click_commission'] and link['click_commission'] != '0.0' else ""}
                            ${'Lead: %s' % link['lead_commission'] if link['lead_commission'] and link['lead_commission'] != '0.0' else ""}
                            ${'Sale: %s' % link['sale_commission'] if link['sale_commission'] and link['sale_commission'] != '0.0' else ""}
                         </div>
                    </td>
                    <td>${link['width']} x ${link['height']}</td>
                    <td>${link['start_date']} - ${link['end_date']}</td>
                    <td>${link['seven_day_epc']} / ${link['three_month_epc']}</td>
                    
                    <td>${h.Markup(h.remove_tracking(link['html'], link['cj_site_id']))}</td>
        
                </tr>
                
            </table>
            
            <div py:if='not c.links'>
                No non-viewed links found
            </div>
            
            <div class=''>
                <input type='submit' name='import' value='Import Checked' class='submitbutton' />
                <input type='submit' name='ignore' value='Ignore Checked' class='submitbutton' />
                <input py:if='request.params.get("show_ignored")'
                       type='submit' name='unignore' value='Un-Ignore Checked' class='submitbutton'/>
                <a href='#' class='button' onclick='var eles = document.getElementsByTagName("input"); for (i in eles){if (eles[i].type == "checkbox") eles[i].checked = "checked"}; return false'>Check All</a>
                <a href='#' class='button' onclick='var eles = document.getElementsByTagName("input"); for (i in eles){if (eles[i].type == "checkbox") eles[i].checked = ""}; return false'>Uncheck All</a>
            </div>
            
        </form>
    </div>
    
    <xi:include href='../common/master.html' />
        
</html>