<html xmlns='http://www.w3.org/1999/xhtml'
      xmlns:py='http://genshi.edgewall.org/'
      xmlns:xi='http://www.w3.org/2001/XInclude'
      py:strip=''>

    <py:def function = 'render_location(location, level=0)'>
        <tr class='location'>
            <td colspan='2' style='padding-left: ${level+1}em'><a href='${location.view()}'>${location.title}</a></td>
            <td colspan='7' class='description'>${location.description}</td>
        </tr>
        
        <tr py:for='i, zone in enumerate(location.zones)' 
            class='zone ${"odd" if i % 2 else "even"}'>
            ${render_zone(zone, level + 1)}
        </tr>
        
        <py:for each='i, sublocation in enumerate(location.sublocations)'>
            ${render_location(sublocation, level + 1)}
        </py:for>
        
        <tr py:if='not location.sublocations and not location.zones' class='empty'>
            <td colspan='8' style='padding-left: ${level+2}em'>
                This location has no children.
            </td>
        </tr>
    </py:def>
    
    <xi:include href='zone.html' />

</html>
