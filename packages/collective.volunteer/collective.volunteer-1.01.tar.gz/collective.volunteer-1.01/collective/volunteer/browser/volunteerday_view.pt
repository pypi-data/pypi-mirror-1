<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="collective.plonetruegallery">

<body>
<metal:main fill-slot="main" tal:define="times view/times">
<tal:defs>
    <tal:main-macro metal:define-macro="main">
		<input id="volunteer_url" type="hidden" name="url" tal:attributes="value context/absolute_url" />
		
		<h1 tal:content="context/title" />
		<p>
		  This is the volunteer roster for
		  <b tal:content="context/getDate" />.
		</p>
		
		<div id="volunteering" tal:condition="member">
		  <tal:slots tal:repeat="time times">
  	  	<dl>
    		  <dd tal:content="python: time[0] + ' - ' + time[1]" />
    		  <dt tal:content="python: len(time) == 3 and view.getMemberName(time[2]) or nothing" />
    		  <a  class="volunteer-slot volunteer" 
    		      onclick="return false;"
    		      tal:attributes="id string:timeid-${repeat/time/index}"
    		      tal:condition="python: member and len(time) == 2" href="#">Volunteer for this time</a>
    		  <a  class="volunteer-slot remove_volunteer"
    		      onclick="return false;"
    		      tal:attributes="id string:timeid-${repeat/time/index}"
    		      tal:condition="python: member and len(time) == 3 and time[2] == member.getProperty('id')" href="#">
    		      Remove
    		  </a>
    		</dl>
  		</tal:slots>
		</div>
		<div tal:condition="not:member">
		  You can only view this page if you are logged in.
		</div>
    </tal:main-macro>
</tal:defs>
</metal:main>
</body>
</html>

