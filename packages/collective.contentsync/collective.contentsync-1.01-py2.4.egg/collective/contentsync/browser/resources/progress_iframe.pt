<html>
<head>
<script type="text/javascript"><!-- 
    function updateProgressBar()
    { 
        setTimeout("updateProgressBar()", 1000);

        var arr = top.document.getElementsByName('contentSyncLabel');        
        if (arr.length > 0)
        {
            s = arr[arr.length-1].value;
            top.document.getElementById('collective-contentsync-label').innerHTML = s;
        }

        // Log messages are a FIFO
        var arr = top.document.getElementsByName('contentSyncLog');        
        if (arr.length > 0)
        {
            s = arr[0].value;
            top.document.getElementById('collective-contentsync-log').innerHTML = top.document.getElementById('collective-contentsync-log').innerHTML + s + '<br/>';
            arr[0].parentNode.removeChild(arr[0]);
        }

        // Total
        var total = 0;
        var arr = top.document.getElementsByName('contentSyncTotal'); 
        if (arr.length > 0)
        {
            total = arr[arr.length-1].value;
        }

        // Step
        var step = 1;
        var arr = top.document.getElementsByName('contentSyncStep'); 
        if (arr.length > 0)
        {
            step = arr[arr.length-1].value;
        }

        var arr = top.document.getElementsByName('contentSyncProgress');        
        if (arr.length > 0)
        {
            num = arr[arr.length-1].value;
            top.document.getElementById('collective-contentsync-bar').style.width = num*1.0/total*300 + 'px';
            top.document.getElementById('collective-contentsync-text').innerHTML = '&nbsp;' + num + '/' + total + ' (' + (Math.floor(num*100.0/total)) + '%)';

            // Retarded type casts
            total = total * 1.0;
            step = step * 1.0;
            num = num * 1.0;
            if ((num+step-1) >= total)
            {
                //top.document.getElementById('collective-contentsync-complete').style.display = 'block';
                top.document.getElementById('collective-contentsync-text').innerHTML = '&nbsp;' + total + '/' + total + ' (100%)';
            }
        }
    }
//--></script>
</head>

<body onLoad="updateProgressBar()">
</body>

</html>
