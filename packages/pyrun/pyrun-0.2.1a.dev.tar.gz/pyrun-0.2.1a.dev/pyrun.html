<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>pyrun: sys.path discovery and execution of python modules and packages.</title>
<meta name="author" content="Robin Bryce" />
<meta name="copyright" content="Copyright (c) 2007 Robin Bryce, All rights reserved" />
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@python.org
:Date: $Date: 2006-05-21 22:44:42 +0200 (Sun, 21 May 2006) $
:Revision: $Revision: 4564 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="pyrun-sys-path-discovery-and-execution-of-python-modules-and-packages">
<h1 class="title">pyrun: sys.path discovery and execution of python modules and packages.</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr class="field"><th class="docinfo-name">License:</th><td class="field-body">MIT</td>
</tr>
<tr class="field"><th class="docinfo-name">Name:</th><td class="field-body">runtools</td>
</tr>
<tr><th class="docinfo-name">Version:</th>
<td>0.0.2.dev</td></tr>
<tr><th class="docinfo-name">Author:</th>
<td>Robin Bryce</td></tr>
<tr class="field"><th class="docinfo-name">Author-email:</th><td class="field-body"><a class="reference" href="mailto:robinbryce&#64;gmail.com">robinbryce&#64;gmail.com</a></td>
</tr>
<tr class="field"><th class="docinfo-name" colspan="2">Requires-Python:</th></tr>
<tr><td>&nbsp;</td><td class="field-body">2.5</td>
</tr>
<tr><th class="docinfo-name">Copyright:</th>
<td><a class="first last reference" href="#copyright-c-2007-robin-bryce-all-rights-reserved">Copyright (c) 2007 Robin Bryce, All rights reserved</a></td></tr>
<tr class="field"><th class="docinfo-name">Classifiers:</th><td class="field-body">License :: OSI Approved :: MIT License</td>
</tr>
<tr class="field"><th class="docinfo-name">Classifiers:</th><td class="field-body">Development Status :: 3 - Alpha</td>
</tr>
<tr class="field"><th class="docinfo-name">Classifiers:</th><td class="field-body">Programming Language :: Python</td>
</tr>
<tr class="field"><th class="docinfo-name">Classifiers:</th><td class="field-body">Intended Audience :: Developers</td>
</tr>
<tr class="field"><th class="docinfo-name">Classifiers:</th><td class="field-body">Topic :: Software Development :: Libraries :: Python Modules</td>
</tr>
<tr class="field"><th class="docinfo-name">Classifiers:</th><td class="field-body">Natural Language :: English</td>
</tr>
</tbody>
</table>
<div class="abstract topic">
<p class="topic-title first">Abstract</p>
<p>A convenient way to run python modules, packages and scripts with a dynamically discovered sys.path. Particularly useful when you want to make use of packages without installing them first, or to circumvent bootstrapping issues with complicated collections of python software.</p>
</div>
<div class="contents topic">
<p class="topic-title first"><a id="contents" name="contents">Contents</a></p>
<ul class="simple">
<li><a class="reference" href="#pyrun" id="id1" name="id1">pyrun</a></li>
<li><a class="reference" href="#installation" id="id2" name="id2">Installation</a></li>
<li><a class="reference" href="#command-line-interface" id="id3" name="id3">Command line interface</a></li>
<li><a class="reference" href="#pyrun-discover-and-run-pyrun-discover-path" id="id4" name="id4">pyrun.discover_and_run, pyrun.discover_path</a></li>
<li><a class="reference" href="#changelog" id="id5" name="id5">ChangeLog</a></li>
</ul>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id1" id="pyrun" name="pyrun">pyrun</a></h1>
<p>You can access the most commonly useful features of <cite>pyrun</cite>, without installing
the project, by running the <tt class="docutils literal"><span class="pre">pyrun.py</span></tt> file directly.</p>
<p>For example, the following:</p>
<pre class="literal-block">
cd ~
wget http://svn.wiretooth.com/svn/open/pyrun-trunk/pyrun.py
``python ~/pyrun.py  ~/my/python/libs ~/my/python/scripts/go.py``
</pre>
<p>Is all you need in order to run the <cite>go.py</cite> module with a sys.path
automatically discovered from directories under <cite>~/my/python/libs</cite>. You can
list an arbitrary number of directories and paths to actual python files. The
order you list them controls the order in which the path extension entries are
built. The resulting path will not contain any duplicates. Each entry in the
path extension will be a legitimate import path.</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>A setup.py file is provided - with suitable egg entry point declarations
- if you prefer this.</dd>
</dl>
<p>For each argument which identifies a python file  <cite>pyrun</cite> will locate the root
package directory and add that to the path. The <em>absolute</em> dotted module name
of the first python file you identify in this way is the module that will, by
default, be executed as __main__. You can explicitly override this choice by
using pyrun's <tt class="docutils literal"><span class="pre">-m</span></tt> option.</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>root package is the parent directory of the &quot;top most package&quot; see
<a class="reference" href="http://docs.python.org/dist/python-terms.html">distutils python terms</a> and <a class="reference" href="http://docs.python.org/dist/distutils-terms.html">distutils distutils terms</a></dd>
</dl>
<p>The delimiter between the <cite>pyrun</cite> arguments and options and the options for the
target module is the first non option argument encountered after the discovery
paths. If that option is a <cite>pyrun</cite> option (see <tt class="docutils literal"><span class="pre">pyrun</span> <span class="pre">--help</span></tt> for the list)
then <cite>pyrun</cite> takes it and passes all remaining arguments to the target module
in a suitably massaged <tt class="docutils literal"><span class="pre">sys.argv</span></tt>.</p>
<p>If the target module takes arguments but does not naturally accept an option
as its first argument (python setup.py install is the classic example) then
you can artificially terminate the <cite>pyrun</cite> options with <tt class="docutils literal"><span class="pre">--</span></tt>.</p>
<p>For example it is possible to run the setup script of the <cite>pyrun</cite> project in
the following ways</p>
<blockquote>
<ul>
<li><p class="first">If you have setup tools installed:</p>
<pre class="literal-block">
python setup.py bdist_egg
</pre>
</li>
<li><p class="first">If your python distribution has <em>not</em> removed distutls from the python
standard library:</p>
<pre class="literal-block">
python setup.py sdist
</pre>
</li>
<li><p class="first">If you have a copy of the setuptools egg in <tt class="docutils literal"><span class="pre">../python/eggs</span></tt>:</p>
<pre class="literal-block">
python pyrun.py ../python/eggs -m setup bdist_egg
python pyrun.py ../python/eggs setup.py -- bdist_egg
</pre>
</li>
</ul>
</blockquote>
<p>If you have a directory which contains a docutils source tree or installation
then adding that to the discovery path will let the setup.py script build
<em>this</em> documentation.</p>
<p>If none of the non option arguments identify a python module file <em>and</em> you
dont explicitly select one using <tt class="docutils literal"><span class="pre">-m</span></tt> then <cite>pyrun</cite> will simply print the path
it has discovered and exit. You can force <cite>just print the path</cite> using <tt class="docutils literal"><span class="pre">-p</span></tt>
or <tt class="docutils literal"><span class="pre">-P</span></tt></p>
<p><cite>pyrun</cite> is reasonably smart in respect of python egg distributions. When
multiple egg distributions of the same project are found on the discovery path
only the <em>best</em> version found is included in the path extension. Eggs which are
not compatible with the current python interpreter are ignored. The measure of
<cite>best egg for a project</cite> uses the same algorithm as used by the
pkg_resources.py module distributed by the setuptools project.</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>The current version does not filter out incompatible <cite>platforms</cite> for eggs
that contain c extensions - see <cite>pyrun.filter_best_eggs</cite> if you have time on
your hands, its not to much work to add this check.</dd>
</dl>
<p>The issue tracker for this package can be found at:</p>
<p><a class="reference" href="http://trac.wiretooth.com/public/wiki/pyrun">http://trac.wiretooth.com/public/wiki/pyrun</a></p>
<p>When opening a ticket please assign it to the <cite>pyrun</cite> component or, at least,
mention <cite>pyrun</cite> in your ticket summary.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id2" id="installation" name="installation">Installation</a></h1>
<p>Installing this package using <cite>python setup.py install</cite> will generate some
convenience scripts. You can access the most commonly useful features of
pyrun, without installing the package, by running the pyrun.py file directly.</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id3" id="command-line-interface" name="command-line-interface">Command line interface</a></h1>
<p>Usage: pyrun.py  [-nidDpP] [BASEPATH(s)][-m mod.name | '--'] [TARGET-OPTIONS]</p>
<p>In most cases the solo '--' is not required. It tends to be useful when you
implicitly select the module to run AND you want to pass a non option argument
as the first value in the command line for that module. It can also be
necessary when the target module has short options, without long-name
alternatives, which collide with those defined for pyrun.</p>
<p>Discover python packages and modules under PATH. Run the first module file
named in <cite>PATH</cite> <em>OR</em> explicitly nominated using the <cite>-m</cite> option.</p>
<p>NOTE: Any option that is marked [NYI] is Not Yet Implemented.</p>
<dl class="docutils">
<dt>Options:</dt>
<dd><table class="first last docutils option-list" frame="void" rules="none">
<col class="option" />
<col class="description" />
<tbody valign="top">
<tr><td class="option-group">
<kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></td>
<td>show this help message and exit</td></tr>
<tr><td class="option-group" colspan="2">
<kbd><span class="option">--log-level=<var>LEVEL</var></span></kbd></td>
</tr>
<tr><td>&nbsp;</td><td>[default:WARNING] set the logging level, any string which
names a log level which is defined by the logging package
is allowed. For example any of CRITICAL, WARNING, INFO
and DEBUG (in increasing order of verbosity)</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-q</span></kbd></td>
<td>Suppress all warnings about missing paths etc. Useful
when you are using speculative paths and are using -p or
-P to print the discoverd path.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-p</span></kbd></td>
<td>Print the discovered path</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-P</span></kbd></td>
<td>Print the discovered path in a PYTHONPATH compatible
format</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-n</span></kbd></td>
<td>NORUN. Don't run any of the modules implied by module
file references in  the discovery path.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-C <var>SCRIPT</var></span></kbd></td>
<td>Identify a <em>python</em> SCRIPT to execute. The script need
not have file extension but it must contain leagal python
code. This option trumps -m. This option should only be
necessary when the launcher for the python program you
wish to run contains significant functionality. No
additions are made to the discovery path or sys.path as a
result of using this option. If the target script imports
a related package you will need to include additional non
option arguments to discover its path.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-m <var>MODULE</var></span></kbd></td>
<td>Explicitly select a module to run. (trumped by -S)</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-d</span></kbd></td>
<td>DEBUG session. Use <cite>pdb.runeval</cite> on the module code in
order to enter an interactive debug session at the first
python statement of the target module</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-D</span></kbd></td>
<td>POSTMORTEM debugging. If the target raises an exception,
start a     postmortem pdb debugging session.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-i</span></kbd></td>
<td>INTERACTIVE session with prepared sys.argv and sys.path.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-c <var>STATEMENT</var></span></kbd></td>
<td>Update sys.argv and sys.path then execute the statement
in a new, clean, module context.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-x <var>EXCLUDE</var></span></kbd></td>
<td>Exclude one or more directories, separated by &quot;:&quot;, from
the discovery path.</td></tr>
<tr><td class="option-group">
<kbd><span class="option">-X <var>PRUNE</var></span></kbd></td>
<td>Prune all paths which contain this value from the set of
paths which <em>were</em> discovered. Specify multiple -X
options if you wish too prune based on more than one
string.</td></tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id4" id="pyrun-discover-and-run-pyrun-discover-path" name="pyrun-discover-and-run-pyrun-discover-path">pyrun.discover_and_run, pyrun.discover_path</a></h1>
<p>All of the command line programs provided by this package are essentially thin
wrappers around the <cite>discover_and_run</cite> or <cite>discover_path</cite> functions. This
section provides <cite>doctest</cite> based discussion and examples. These examples are
also part of the pyrun test suite.</p>
<p>Lets setup a fake set of python packages and use it to illustrate some basics.</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; import os, sys
&gt;&gt;&gt; from os.path import join
&gt;&gt;&gt; import pyrun
&gt;&gt;&gt; from _testutils import mktmpfiles, printpaths
&gt;&gt;&gt; sysver_cur = sys.version[:3]
&gt;&gt;&gt; sysver_notcompatible = '.'.join(map(str,
...   [sys.version_info[0], sys.version_info[1] + 1]))
&gt;&gt;&gt; tmpdir, canonicalpaths = mktmpfiles((
...     'A/AA/paaa/__init__.py',
...     'A/AA/paaa/paaaa/',
...     'B/BB/paaa/__init__.py',
...     'B/BB/paaa/paaaa/',
...     'B/BB/pbbb/pbbbb/__init__.py',
...     'B/pc/__init__.py',
...     'Modules/module_a.py',
...     'Modules/module_b.py'),
...
...     prefix='pyrun-'
...     )
</pre>
</blockquote>
<p>This search gives an os dependent ordering of all packages under A and B
lexicaly ordered depth first is common. Note that Modules is ignored.</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; pth, minfos, ia = pyrun.discover_and_run(['pyrun', tmpdir], run_module=False)
&gt;&gt;&gt; printpaths(pth, strip=tmpdir)
A/AA
B
B/BB
B/BB/pbbb
</pre>
</blockquote>
<p>This search forces paths under 'B' to be considered first, again note that
Modules is ignored.</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; pth, minfos, ia = pyrun.discover_and_run(['pyrun',
...     join(tmpdir, 'B'), tmpdir], run_module=False
...     )
&gt;&gt;&gt; printpaths(pth, strip=tmpdir)
B
B/BB
B/BB/pbbb
A/AA
</pre>
</blockquote>
<p>Modules is not present in either of the above resulting paths because python
module files are ignored unless they were explicitly mentioned in the search.</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; pth, minfos, ia = pyrun.discover_and_run(['pyrun', tmpdir,
...     join(tmpdir, 'Modules', 'module_a.py')], run_module=False)
&gt;&gt;&gt; printpaths(pth, strip=tmpdir)
Modules
A/AA
B
B/BB
B/BB/pbbb
</pre>
</blockquote>
<p>This search mentions two module files explicitly, in addition to the root
of our fake tree.</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; pth, minfos, ia = pyrun.discover_and_run(['pyrun', tmpdir,
...     join(tmpdir, 'Modules', 'module_a.py'),
...     join(tmpdir, 'Modules', 'module_b.py')], run_module=False)
&gt;&gt;&gt; printpaths(pth, strip=tmpdir)
Modules
A/AA
B
B/BB
B/BB/pbbb
</pre>
</blockquote>
<p>The discovery algorithm currently forces paths discovered from module files
ahead of those discovered for package files, however the paths for module
files still follow the order in which the module files are listed in the
search path.  Note that for module files which are contained in one directory
you only need to include one in the search but including many from the same
directory does not cause duplicates.
More elaborate schemes for addressing the shadowning problem are definitely
viable, especially given the module loading facilities in the runpy standard
lib module. I suspect the &quot;force to front&quot; rule is essential for covering
<em>my</em> use case which is &quot;just fix my path and run that script damit!&quot;</p>
<p>Lets drop some eggs into the mix. We dont use real eggs for these examples
because the discovery of eggs does not look at egg contents - only file and
directory names.</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; tmpdir, canonicalpaths = mktmpfiles((
...     'Modules/foo-0.1-py%s.egg' % sysver_cur,
...     'Modules/foo-0.2-py%s.egg' % sysver_cur,
...     'Modules/foo-0.2-py%s.egg-link' % sysver_cur,
...     'Modules/zzz-0.2-py%s.egg-link' % sysver_cur,
...     'Modules/foo-0.3-py%s.egg' % sysver_notcompatible,
...     'A/bar-0.1-py%s.egg' % sysver_cur,
...     'B/bar-0.2-py%s.egg' % sysver_cur),
...     tmpdir=tmpdir
...     )
</pre>
</blockquote>
<p>A full search,</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; pth, minfos, ia = pyrun.discover_and_run(['pyrun', tmpdir], run_module=False)
&gt;&gt;&gt; printpaths(pth, strip=tmpdir)
A/AA
B/bar-0.2-py2.5.egg
B
B/BB
B/BB/pbbb
Modules/foo-0.2-py2.5.egg
</pre>
</blockquote>
<p>A search that considers 'B' first</p>
<blockquote>
<pre class="doctest-block">
&gt;&gt;&gt; pth, minfos, ia = pyrun.discover_and_run(['pyrun',
...     join(tmpdir, 'B'), tmpdir], run_module=False
...     )
&gt;&gt;&gt; printpaths(pth, strip=tmpdir)
B/bar-0.2-py2.5.egg
B
B/BB
B/BB/pbbb
A/AA
Modules/foo-0.2-py2.5.egg
</pre>
</blockquote>
<p>Note that irrespective which order we visit the A and B sub trees, we always
list bar-0.2. The search discards duplicate egg names, retaining the first
and - irispective of the visit order - <em>always</em> lists the best version of
each egg.</p>
<p>Finaly note that foo-0.3 is <em>not</em> listed. This is not a bug - the search
ignores eggs whose major &amp; minor revisions dont match the current
interpreter. But, for now, no special care is taken to deal with platform
specific eggs (linux-i686 vs whatver windows eggs use.)</p>
</div>
<div class="section">
<h1><a class="toc-backref" href="#id5" id="changelog" name="changelog">ChangeLog</a></h1>
<dl class="docutils">
<dt>0.1.2:</dt>
<dd>Changed distribution project name to runtools. pyrun remains as a standalone
script. The runtools package contains a number of utilities that are commonly
usefull in conjunction with pyrun.</dd>
<dt>0.1.1:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Added support for directory exclusions and path prunes.</dt>
<dd><ul class="first last simple">
<li>exclusion prevents discovery descending into a directory if that
directory startswith an element in the exclusion set
(see new option -x).</li>
<li>prune operates on the result of the discovery. Any path which contains
one of the strings specified by a prune is removed from the discovered
path.</li>
</ul>
</dd>
</dl>
<p>exclusion hides directories from the discovery process, prune removes
results after the fact.
exclusions are enabled by -x
prunes are enabled by -X
empty strings are <em>always</em> removed from -x and -X.</p>
<p>There is precisely one mechanism which enables packages <em>under</em> an
exclusion path to be explicitly added back in: All explicitly identified
python modules are exempted from the exclusion (but not the prune)</p>
</li>
<li><p class="first">Decided to use logging instead of print for notification, I had avoided
this previously because I did not want to polute the logging configuration
of the target app. I consider this change provisional, if it causes to
much trouble I will revert to print</p>
</li>
<li><p class="first">Added support for including .pth files in the discovery phase. This
makes it possible to insert paths to directories which do not contain
an __init__.py or are the dirname() of an explicitly referenced module
file.</p>
</li>
<li><p class="first">bugfix: propagate source file name (or sensibly invented filename) to
the __file__ attribute of the code instance that becomes our __main__</p>
</li>
<li><p class="first">-d works with -m and -c, should also work with -s but have not tried yet.</p>
</li>
<li><p class="first">-d option uses pdb.runeval rather than set_trace making for considerably
simpler target debugging. May consider introducing an &quot;eager&quot; -d variant
that behaves like 0.1 (set_trace <em>in</em> pyrun.py) later.</p>
</li>
<li><p class="first">Allow the target to run when -d is in effect, without requiring user to
manaully do <tt class="docutils literal"><span class="pre">opts.d</span> <span class="pre">=</span> <span class="pre">False</span></tt></p>
</li>
<li><p class="first">By default suppress -D if -d is in effect.</p>
</li>
<li><p class="first">Added -c, its much like python -c</p>
</li>
<li><p class="first">The <cite>run script</cite> option changed from -S to -C exist on the file system. -q
suppreses the warnings</p>
</li>
</ul>
</dd>
<dt>0.1d:</dt>
<dd><ul class="first last simple">
<li><cite>-S</cite> option to explicitly run a python script. uses compiler.compile to
load and compile the code from an arbitrary file. uses
runpy._run_module_code to execute the resulting module as __main__.
NOTE No discovery or sys.path manipulation is performed on the file
specified with this option. works for plain old python scripts and
executable scripts that lack an extension.
.
The chief motivation for this is to support python projects that
distribute substantive scripts rather than using the setuptools
entry_points 'wrapper' script approach. (For example see the
0.2.1 source tarbal for pyflakes).</li>
<li>documentation tidy up</li>
</ul>
</dd>
<dt>0.1c:</dt>
<dd><ul class="first last simple">
<li>Use the parent directory of the top package directory for each explicitly
listed python file in the discovery path. This means you need to <em>always</em>
provide fully qualified module names to <tt class="docutils literal"><span class="pre">-m</span></tt>. This change is necessary
to allow the targeted modules imports to work correctly.</li>
</ul>
</dd>
</dl>
<p>0.1b:</p>
<blockquote>
<ul class="simple">
<li>path discovery and  python module execution</li>
</ul>
</blockquote>
<p id="copyright-c-2007-robin-bryce-all-rights-reserved">Copyright (c) 2007 Robin Bryce
All rights reserved</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the &quot;Software&quot;),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.</p>
</div>
</div>
</body>
</html>
