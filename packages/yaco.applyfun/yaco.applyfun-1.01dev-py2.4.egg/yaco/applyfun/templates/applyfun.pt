<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="context/@@standard_macros/view"
      i18n:domain="applyfun">
<body>

<div metal:fill-slot="body">
    <tal:defs define="called view/start_walking;
                      functions view/get_functions;
                      funkeys functions/keys;">

      <h1 i18n:translate="title_applyfun">
        Apply function to the context and its subobjects
      </h1>
      
      <div tal:condition="not:called">


        <form action="">
          <input type="hidden" name="doit" value="True" />
          <p i18n:translate="catalog_search">If you want to apply the function to the result of a catalog search, specify here the catalog query as a python dictionary:</p>
          <p><input type="text" name="catalog_query" size="100" /></p>
          <p i18n:translate="send_email">If you want to receive an email with the results of your function, set your email address below:</p>
          <p><input type="text" name="email" size="100" /></p>
          <p>
          <select name="function" id="function"
                  onchange="document.getElementById(document.getElementById('function').value).style.display='block'">
            <option value="nada" i18n:translate="choose_fun">choose function</option>
            <tal:repeat repeat="fun funkeys">
              <option tal:content="fun" />
            </tal:repeat>
          </select>
          </p>
          <tal:repeat repeat="fun funkeys">
            <div id="" name=""
                 style="display:none;color:blue;"
                 tal:attributes="id fun; name fun;"
                 tal:content="python: functions[fun].__doc__" />
          </tal:repeat>
          <p i18n:translate="args_spec">Specify any keyword arguments as a Python dictionary.</p>
          <p><input type="text" name="kwargs" size="100" /></p>
          <p i18n:translate="savepoint_spec">Specify the savepoint interval.</p>
          <p><input type="text" name="savepoint_interval" value="0" size="10" /></p>
          <p><input type="submit"
                    value="Apply Function"
                    i18n:attributes="value"/></p>
        </form>

      </div>

    </tal:defs>
</div>

</body>
</html>
