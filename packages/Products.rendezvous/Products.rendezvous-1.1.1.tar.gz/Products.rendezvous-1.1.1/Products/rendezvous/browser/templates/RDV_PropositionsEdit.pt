<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="rendezvous">
<body>

<div metal:fill-slot="main">
  <h2 i18n:translate="">Schedule event: select times (Step 3 of 3)</h2>
  <p i18n:translate="">Fill in as many time slots as you need. You can also leave them all empty and click 'Finish' immediately.</p>
  <form method="post" action="." tal:attributes="action python:context.absolute_url()+'/@@save_changes'">
  <table tal:define="nb_columns view/getNbColumns">
    <thead>
      <tr>
        <th i18n:translate="proposition_date">
           Dates
        </th>
        <th tal:repeat="column python:range(1, nb_columns + 1)" i18n:translate="proposition_hour">Hour
           <span i18n:name="num" tal:content="column"/>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr tal:repeat="row python:view.getPropositionsByOrderedDates()">
        <tal:block define="date python:row[0];
                           props python:row[1];">
          <td tal:content="python:context.toLocalizedTime(date)">date</td>
          <td tal:repeat="column python:range(1, nb_columns + 1)">
              <input type="text"
                     name=""
                     tal:define="prop python:len(props) >= column and props[column-1] or ''"
                     tal:attributes="value prop;
                                     name string:${date}:list" /></td>
        </tal:block>
      </tr>
    </tbody>
  </table>
  <input type="submit" name="finish" value="Finish" i18n:attributes="value" />
  <input type="submit" name="extend" value="Extends columns" i18n:attributes="value" />
  </form>

</div>

</body>
</html>
