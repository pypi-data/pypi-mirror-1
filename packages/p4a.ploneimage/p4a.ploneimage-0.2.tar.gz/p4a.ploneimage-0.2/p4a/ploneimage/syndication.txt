.. -*-doctest-*-

Syndication
===========

Current syndication functionality is provided using the Zope 2 
``fatsyndication`` product.

Lets begin by creating an image container with some image files.

  >>> from p4a.image import interfaces
  >>> id = folder.invokeFactory('Folder', 'image-container')
  >>> container = folder[id]
  >>> activator = interfaces.IMediaActivator(container)
  >>> activator.media_activated = True

  >>> id = container.invokeFactory('Image', 'image-item-1')
  >>> item1 = container[id]
  >>> activator = interfaces.IMediaActivator(item1)
  >>> activator.media_activated = True

  >>> from p4a.image import interfaces
  >>> image = interfaces.IImage(item1)
  >>> image.title = u'My Test Image'

Since some sample content has been configured we can now start testing
the syndication feeds.

  >>> feedview = container.restrictedTraverse('@@rss.xml')
  >>> feed = feedview.getFeed()
  >>> feed
  <p4a.ploneimage.syndication.ImageContainerFeed ...>

  >>> entries = feed.getFeedEntries()
  >>> len(entries)
  1
  >>> entries
  [<p4a.ploneimage.syndication.ImageFeedEntry ...>]

  >>> entries[0].getTitle()
  u'My Test Image'
  >>> 'image-item-1' in entries[0].getWebURL()
  True
