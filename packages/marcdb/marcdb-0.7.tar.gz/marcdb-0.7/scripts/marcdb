#!/usr/bin/env python

# a command line utility for interacting with marcdb
# type 'marcdb help' for details

from sys import argv
from marcdb.loader import Loader
from marcdb.db import connect, create
from marcdb.server import run_server
from marcdb.help import help

import web

if len(argv) == 1:
  command = 'help'
  args = []
else:
  command = argv[1]
  args = argv[2:]

if command == 'help':
  help(args)

elif command == 'load':
  marc_file, db_uri = args[0:2]
  loader = Loader(db_uri, verbose=True)
  loader.load(marc_file)

elif command == 'load-xml':
  xml_file, db_uri = args[0:2]
  loader = Loader(db_uri, verbose=True)
  loader.load_xml(xml_file)

elif command == 'create':
  db_uri = args[0]
  connect(db_uri)
  create()

elif command == 'server':
  db_uri = args[0]
  run_server(db_uri)

else:
  print "unknown command: %s" % command

