#!/bin/sh
# EMAILFILTERD - EMailFilter daemon script
# Copyright (C) 2008 by Peter A. Donis
#
# Released under the GNU General Public License, Version 2
# See the LICENSE and README files for more information
#
# Script for invoking the emailfilterd daemon

PREFIX=""

PIDFILE="$HOME/.emailfilter/emailfilter.pid"
PYEMAILFILTERD="$PREFIX/lib/emailfilter/emailfilterd.py"

if [ "$1" = "start" ]; then
  if [ -e $PIDFILE ]; then
    echo "Daemon already running."
  else
    python $PYEMAILFILTERD &
    echo $! > $PIDFILE
  fi
elif [ "$1" = "kill" ]; then
  if [ -e $PIDFILE ]; then
    if [ "$2" == "" ]; then
      kill -s TERM `cat $PIDFILE`
      rm $PIDFILE
    else
      kill -s $2 `cat $PIDFILE`
    fi
  else
    echo "Daemon not running."
  fi
else
  echo "Must invoke with either start or kill parameter."
fi
