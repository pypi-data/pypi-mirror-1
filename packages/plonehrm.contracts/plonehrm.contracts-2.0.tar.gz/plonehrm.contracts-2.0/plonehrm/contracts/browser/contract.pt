<div i18n:domain="contract"
  tal:omit-tag="">

  <dl class="module"
      tal:define="toLocalizedTime nocall:context/@@plone/toLocalizedTime;">
    <dt class="moduleHeader">
      <a class="moduleButton"
         tal:condition="python: context.portal_membership.checkPermission('plonehrm: Add contract', here)"
         tal:attributes="href string:${here/absolute_url}/createObject?type_name=Contract"
         ><img src="add_icon.gif"
               alt="Add new contract"
               title="Add new contract"
               i18n:attributes="title add_new_contract;
                                alt add_new_contract;" /></a>
      <a class="moduleButton"
         tal:condition="python: context.portal_membership.checkPermission('plonehrm: Add contract', here)"
         tal:attributes="href string:${here/absolute_url}/createObject?type_name=Letter"
         ><img src="edit.gif"
               alt="Add change letter"
               title="Add change letter"
               i18n:attributes="title add_new_letter;
                                alt add_new_letter;" /></a>
      <!-- Alternative icon ^^^ add_alternative_icon.gif -->
     <span tal:omit-tag=""
            i18n:translate="head_contract">Contracts</span>
    </dt>
    <dd class="moduleItem lastItem">
      <div tal:condition="view/current_contract|nothing">
        <h5 i18n:translate="contract_label_function"> Function </h5>
        <div tal:content="view/get_function"
          class="contract-info"> Salesman </div>
        <h5 i18n:translate="contract_label_wage"> Wage </h5>
        <div tal:content="view/wage"
          class="contract-info"> 1.00 </div>
        <h5 i18n:translate="contract_label_expires"> Expiration date </h5>
        <div tal:content="python:toLocalizedTime(view.expires())"
          class="contract-info"> 2007/12/31 </div>
      </div>
      <div tal:condition="not:view/current_contract|nothing">
        geen contract
      </div>
      <div tal:define="worktime view/sum_worktime"
            tal:condition="worktime">
         <h5 i18n:translate="contract_label_employed"> employed </h5>
        <div> 
          <span i18n:translate="label_contracted_year_and_month"
            tal:condition="python:worktime['year'] and worktime['month']">
            <tal:year i18n:name="year" tal:content="worktime/year" />
            year(s) and
           <span i18n:name="months" tal:replace="worktime/month" />
           month(s).
         </span>
          
         
          <span i18n:translate="label_contracted_year"
            tal:condition="python:worktime['year'] and not worktime['month']">
            <tal:year i18n:name="year" tal:content="worktime/year" />
            year(s).
         </span>
          

          <span i18n:translate="label_contracted_months"
            tal:condition="python:not worktime['year'] and worktime['month']">
           <span i18n:name="months" tal:replace="worktime/month" />
           month(s).
         </span>
        </div>
      </div>
 
        <ul tal:condition="view/contract_list|nothing"
          class="contract-list">
          <li tal:repeat="info view/sorted_contracts"
             tal:attributes="class info/typ">
            <a href="#"
               tal:attributes="href info/contract/absolute_url"
               tal:content="info/contract/Title">
               Eerste contract
          </a>
        </li>
      </ul>
    </dd>
  </dl>
</div>
