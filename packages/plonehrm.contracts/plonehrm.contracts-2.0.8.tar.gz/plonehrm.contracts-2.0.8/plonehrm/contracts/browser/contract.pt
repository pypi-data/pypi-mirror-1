<div i18n:domain="contract"
  tal:omit-tag="">

  <dl class="module"
      tal:define="toLocalizedTime nocall:context/@@plone/toLocalizedTime;">
    <dt class="moduleHeader">
      <a class="moduleButton"
         tal:condition="python: context.portal_membership.checkPermission('plonehrm: Add contract', here)"
         tal:attributes="href string:${here/absolute_url}/createObject?type_name=Contract"
         ><img src="add_icon.gif"
               alt="Add new contract"
               title="Add new contract"
               i18n:attributes="title add_new_contract;
                                alt add_new_contract;" /></a>
      <a class="moduleButton"
         tal:condition="python: context.portal_membership.checkPermission('plonehrm: Add contract', here)"
         tal:attributes="href string:${here/absolute_url}/createObject?type_name=Letter"
         ><img src="edit.gif"
               alt="Add change letter"
               title="Add change letter"
               i18n:attributes="title add_new_letter;
                                alt add_new_letter;" /></a>
      <!-- Alternative icon ^^^ add_alternative_icon.gif -->
     <span tal:omit-tag=""
            i18n:translate="head_contract">Contracts</span>
    </dt>
    <dd class="moduleItem lastItem">
      <table class="contract-overview listing" cellspacing="0" cellpadding="0"
            tal:condition="view/current_contract|nothing">
        <tbody>
          <tr>
            <th i18n:translate="contract_label_function"> Function
            </th>
            <td tal:content="view/get_function"
                    class="contract-info"> Salesman
            </td>
          </tr>
          <tr>
            <th i18n:translate="contract_label_wage"> Wage
            </th>
            <td class="contract-info">
                <span tal:content="structure context/portal_properties/plonehrm_properties/currency|nothing" />
                <span tal:content="view/wage">1.00</span>
            </td>
          </tr>
          <tr>  
            <th i18n:translate="contract_label_expires"> Expiration date </th>
            <td tal:content="python:toLocalizedTime(view.expires())"
                class="contract-info"> 2007/12/31
            </td>
          </tr>
          <tr tal:condition="not:view/current_contract|nothing">
            <th i18n:translate="label_contract">
              contract
            </th>
            <td i18n:translate="label_no_contract">
            no contract
            </td>
          </tr>
          <tr tal:define="worktime view/sum_worktime"
            tal:condition="worktime">
            <th i18n:translate="contract_label_employed"> employed </th>
            <td>
                <span i18n:translate="label_contracted_year_and_month"
                    tal:condition="python:worktime['year'] and worktime['month']">
                    <tal:year i18n:name="year" tal:content="worktime/year" />
                    year(s) and
                <span i18n:name="months" tal:replace="worktime/month" />
                month(s)
                </span>

                <span i18n:translate="label_contracted_year"
                    tal:condition="python:worktime['year'] and not worktime['month']">
                    <tal:year i18n:name="year" tal:content="worktime/year" />
                    year(s)
                </span>

                <span i18n:translate="label_contracted_months"
                    tal:condition="python:not worktime['year'] and worktime['month']">
                <span i18n:name="months" tal:replace="worktime/month" />
                month(s)
                </span>
            </td>
          </tr>
        </tbody>
      </table>

        <table tal:condition="view/contract_list|nothing"
          class="contract-list">
           <tbody>
              <tr tal:repeat="info view/sorted_contracts"
                        tal:attributes="class info/typ">
            <td class="contract-bullet">
              &nbsp;
            </td>
                <td>
                    <a href="#"
                        tal:attributes="href info/contract/absolute_url"
                        tal:content="info/contract/Title">
                        Eerste contract
                    </a>
              </td>
              <td class="remove-contract">
                    <a href=""
                        class="action-icon"
                        tal:attributes="href string:${info/contract/absolute_url}/delete_confirmation">
                        <img src="delete_icon.gif"
                            alt="Remove this contract/letter"
                            title="Remove this contract/letter"
                            tal:attributes="src string:${context/@@plone_portal_state/portal_url}/delete_icon.gif"
                            i18n:attributes="title label_remove_this_contract;
                                                alt label_remove_this_contract" />

                    </a>
            </td>
          </tr>
        </tbody>
      </table>
    </dd>
  </dl>
</div>
