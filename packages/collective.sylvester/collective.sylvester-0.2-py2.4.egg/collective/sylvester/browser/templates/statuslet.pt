<tal:comment condition="nothing">
A statuslet renders a single twitter status.

Shoot me about the table based layout if you want. I got
fed up with floating divs.
</tal:comment>

<metal:macro define-macro="main">
<tal:def define="status status|request/status">
<div tal:define="dashboardview nocall:context/@@collective.sylvester.dashboard"
     class="twitter-dashboard-statuslet">

  <table class="collective-sylvester-statuslet">
    <tr>

      <td class="image">
        <a tal:attributes="href status/user/url">
          <img tal:attributes="src status/user/profile_image_url;
                               alt status/user/name"/>
        </a>
      </td>

      <td>
        <strong>
          <a tal:attributes="href status/user/url;
                             title status/user/screen_name"
             tal:content="status/user/name"></a>
        </strong>

        <span tal:replace="structure python:dashboardview.linkify(status.text)"/>

        <div class="collective-sylvester-tweet-time-and-source">        
          <span i18n:translate="about">about</span> 
          <span tal:replace="python:dashboardview.format_ago(status.created_at)"/> 
          <span i18n:translate="about">ago</span>
        <div>
      </td>

      <td class="actions">
        <a tal:attributes="onClick string:sylvester.prepareReply('${status/user/screen_name}');;return false;;"
           href="#"
           class="collective-sylvester-reply"
           i18n:attributes="title reply"
           title="Reply">&nbsp;</a>
      </td>

    </tr>
  </table>
</div>
</tal:def>
</metal:macro>
