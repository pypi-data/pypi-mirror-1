<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Loops | Jinja Documentation</title>
    <style text="text/css">
        body {
            font-family: 'Arial', sans-serif;
            margin: 1em;
            padding: 0;
        }

        #navigation {
            float: right;
            margin: -1em -1em 1em 1em;
            padding: 1em 2em 0 2em;
            border: 1px solid #bbb;
            border-width: 0 0 1px 1px;
            background-color: #f8f8f8;
        }

        #page {
            width: 45em;
        }

        a {
            color: #d00;
        }

        a:hover {
            color: #d40;
        }

        h1 {
            font-size: 2em;
            color: #d00;
            margin: 0.5em 0 0.5em 0;
            padding: 0;
        }

        h2 {
            font-size: 1.7em;
            color: #bd2121;
            margin: 1em 0 0.5em 0;
        }

        h3 {
            font-size: 1.3em;
            color: #8a2424;
            margin: 0.5em 0 0 0;
        }

        p {
            margin: 0.5em 1em 0.5em 1em;
        }

        pre {
            margin: 1em 0 1em 2em;
            padding: 0.5em;
            border-top: 1px solid #ddd;
            border-bottom: 1px solid #ddd;
            background-color: #f2f2f2;
            overflow: auto;
        }
        
        li {
            line-height: 1.4em;
        }
        
        hr {
            margin: 1em;
            padding: 0;
            height: 1px!important;
            background-color: #ccc;
            border: none!important;
        }
        
        div.admonition {
            margin: 1em 0 1em 1.5em;
            padding: 0.5em 0.5em 0.5em 2em;
            background-color: #f6e3e3;
            border: 1px solid #d50000;
            border-left: none;
            border-right: none;
        }
        
        div.admonition p.admonition-title {
            font-size: 1.1em;
            color: #d40;
            font-weight: bold;
            margin: 0 0 0.5em -1em;
        }
        
        table {
            border-collapse: collapse;
            margin: 1em 2em 1em 1.5em;
        }
        
        table td, table th {
            text-align: left;
            border: 1px solid #eee;
            padding: 0.3em;
        }
        
        table th {
            background-color: #d00000;
            color: white;
            border: 1px solid #d00000;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>
    <div id="navigation">
        <h3>Documentation</h3>
        <ul>
            
            <li><a href="index.html">back to index</a></li>
            
            <li><a href="http://wsgiarea.pocoo.org/repos/jinja/trunk/docs/source/loops.txt">view source online</a></li>
        </ul>
        
            <h3>Table of Contents</h3>
            <ul>
            
                <li><a href="#for">For</a></li>
            
                <li><a href="#range">Range</a></li>
            
                <li><a href="#loop-variables">Loop Variables</a></li>
            
                <li><a href="#cycling">Cycling</a></li>
            
                <li><a href="#ifchanged">IfChanged</a></li>
            
                <li><a href="#recursion">Recursion</a></li>
            
            </ul>
        
    </div>
    <h1>Loops</h1>
    <div id="page">
        <p>Jinja provides two types of loops. The first one is the for loop:</p>
<div class="section">
<h2><a id="for" name="for">For</a></h2>
<p>Loop over each item in an array.  For example, to display a list of users
given <tt class="docutils literal"><span class="pre">user_list</span></tt>:</p>
<pre class="literal-block">
&lt;ul&gt;
{% for user in user_list %}
  &lt;li&gt;&lt;a href=&quot;/profile/{{ user.id }}/&quot;&gt;{{ user.name }}&lt;/a&gt;&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre>
<p>You can also loop over a list in reverse by using
<tt class="docutils literal"><span class="pre">{%</span> <span class="pre">for</span> <span class="pre">obj</span> <span class="pre">in</span> <span class="pre">list</span> <span class="pre">reversed</span> <span class="pre">%}</span></tt>.</p>
<p>You can also define a <tt class="docutils literal"><span class="pre">{%</span> <span class="pre">elsefor</span> <span class="pre">%}</span></tt> statement, which gets rendered if
the for loop doesn't iterate:</p>
<pre class="literal-block">
&lt;ul&gt;
{% for user in userlist %}
  &lt;li&gt;{{ user }}&lt;/li&gt;
{% elsefor %}
  &lt;li&gt;&lt;strong&gt;no user found&lt;/strong&gt;&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre>
</div>
<div class="section">
<h2><a id="range" name="range">Range</a></h2>
<p>range loops can be used to iterate through a list of numbers:</p>
<pre class="literal-block">
{% range number from 1 to 10 %}
  {{ number }}
{% endrange %}
</pre>
<p>You can also step downwards:</p>
<pre class="literal-block">
{% range number from 10 downto 1 %}
  {{ number }}
{% endrange %}
</pre>
<p>It is even possible to set the stepsize:</p>
<pre class="literal-block">
{% range number from 1 to 100 step 33 %}
  {{ number }}
{% endrange %}
</pre>
</div>
<div class="section">
<h2><a id="loop-variables" name="loop-variables">Loop Variables</a></h2>
<p>These variables are available inside each <tt class="docutils literal"><span class="pre">for</span></tt> and <tt class="docutils literal"><span class="pre">range</span></tt>
loop:</p>
<table class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Variable</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">loop.counter</span></tt></td>
<td>The current iteration of the loop</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">loop.counter0</span></tt></td>
<td>The current iteration of the loop,
starting counting by 0.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">loop.revcounter</span></tt></td>
<td>The number of iterations from the end
of the loop.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">loop.revcounter0</span></tt></td>
<td>The number of iterations from the end
of the loop, starting counting by 0.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">loop.first</span></tt></td>
<td>True if first iteration.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">loop.last</span></tt></td>
<td>True if last iteration.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">loop.even</span></tt></td>
<td>True if current iteration is even.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">loop.odd</span></tt></td>
<td>True if current iteration is odd.</td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">loop.parent</span></tt></td>
<td>The context of the parent loop.</td>
</tr>
</tbody>
</table>
</div>
<div class="section">
<h2><a id="cycling" name="cycling">Cycling</a></h2>
<p>Cycle among the given strings each time this tag is encountered.</p>
<p>Within a loop, cycles among the given strings each time through the loop:</p>
<pre class="literal-block">
{% for row in rows %}
  &lt;tr class=&quot;{% cycle 'row1', 'row2' inline %}&quot;&gt;
    ...
  &lt;/tr&gt;
{% endfor %}
</pre>
<p>Or by cycling into a variable:</p>
<pre class="literal-block">
{% for row in rows %}
  {% cycle rowclass through &quot;row1&quot;, &quot;row2&quot; %}
  &lt;tr&gt;
    &lt;td class=&quot;{{ rowclass }}&quot;&gt;...&lt;/td&gt;
    &lt;td class=&quot;{{ rowclass }}&quot;&gt;...&lt;/td&gt;
    ...
  &lt;/tr&gt;
{% endfor %}
</pre>
</div>
<div class="section">
<h2><a id="ifchanged" name="ifchanged">IfChanged</a></h2>
<p>Check if a value has changed from the last iteration of a loop.</p>
<p>The 'ifchanged' block tag is used within a loop. It checks its own rendered
contents against its previous state and only displays its content if the value
has changed:</p>
<pre class="literal-block">
&lt;h1&gt;Userlist&lt;/h1&gt;

{% for user in users %}
{% ifchanged %}&lt;h3&gt;{{ user.type }}&lt;/h3&gt;{% endifchanged %}
  {{ user.name }}
{% endfor %}
</pre>
</div>
<div class="section">
<h2><a id="recursion" name="recursion">Recursion</a></h2>
<p>Often it's important to be able to use recursion. For example when you
want to build a sitemap or a tree.</p>
<p>In Jinja every <tt class="docutils literal"><span class="pre">for</span></tt> tag can be used to call it again with other
variables:</p>
<pre class="literal-block">
&lt;ul class=&quot;sitemap&quot;&gt;
{% for item in sitemap %}
  &lt;li&gt;&lt;a href=&quot;{{ item.link }}&quot;&gt;{{ item.title|e }}&lt;/a&gt;{%
    if item.items %}&lt;ul&gt;{% recurse item.items %}&lt;/ul&gt;&lt;/li&gt;
{% endfor %}
&lt;/ul&gt;
</pre>
<p>If you want to recurse in a higher loop you can use this syntax:</p>
<pre class="literal-block">
{% recurse item.items in loop.parent %}
</pre>
</div>

    </div>
</body>
</html>
