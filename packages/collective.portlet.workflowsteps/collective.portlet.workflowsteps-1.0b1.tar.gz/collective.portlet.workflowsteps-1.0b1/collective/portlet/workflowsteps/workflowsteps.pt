<dl class="portlet portletWorkflowSteps"
    i18n:domain="collective.portlet.workflowsteps"
    tal:define="show_descriptions view/data/show_transition_descriptions">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        <span tal:content="view/data/header" />
        <span class="portletTopRight"></span>
    </dt>

    <dd tal:condition="python:view.data.text is not None and view.data.text.strip()"
        tal:attributes="class python:view.data.show_state and 'portletItem even' or 'portletItem odd'">
        <div tal:content="structure view/data/text" />
    </dd>
    <dd class="portletItem odd" tal:condition="view/state_info">
        <label>
            <span class="item_state_label" i18n:translate="state_label">State:</span>
            <span class="item_state" tal:content="view/state_info/title" />
        </label>
        <div tal:content="structure view/state_info/description" />
    </dd>
    <tal:block condition="view/data/show_transitions">
        <tal:block repeat="transition view/transition_info" condition="view/data/show_transitions">
            <dd tal:attributes="class python:show_descriptions and 'portletItem even' or 'portletItem odd'">
                &raquo; <a tal:attributes="href transition/action" tal:content="transition/title" />
            </dd>
            <dd class="portletItem odd"
                tal:condition="view/data/show_transition_descriptions"
                tal:content="structure transition/description" />
        </tal:block>
    </tal:block>

    <dd class="portletFooter">
        <span class="portletBottomLeft"></span>
        <span tal:condition="view/advanced">
            <a tal:attributes="href view/advanced/action;
                               title view/advanced/title;"
               tal:content="view/advanced/title" />
        </span>
        <span class="portletBottomRight"></span>
    </dd>

</dl>
