source file: <b>/opt/devel/celery/celery/discovery.py</b><br>


file stats: <b>14 lines, 12 executed: 85.7% covered</b>
<pre>
<font color="green">   1. from django.conf import settings</font>
<font color="black">   2. </font>
<font color="black">   3. </font>
<font color="green">   4. def autodiscover():</font>
<font color="black">   5.     &quot;&quot;&quot;Include tasks for all applications in settings.INSTALLED_APPS.&quot;&quot;&quot;</font>
<font color="green">   6.     return filter(None, [find_related_module(app, &quot;tasks&quot;)</font>
<font color="green">   7.                             for app in settings.INSTALLED_APPS])</font>
<font color="black">   8. </font>
<font color="black">   9. </font>
<font color="green">  10. def find_related_module(app, related_name):</font>
<font color="black">  11.     &quot;&quot;&quot;Given an application name and a module name, tries to find that</font>
<font color="black">  12.     module in the application, and running handler' if it finds it.</font>
<font color="black">  13.     &quot;&quot;&quot;</font>
<font color="black">  14. </font>
<font color="green">  15.     try:</font>
<font color="green">  16.         module = __import__(app, {}, {}, [related_name])</font>
<font color="red">  17.     except ImportError:</font>
<font color="red">  18.         return None</font>
<font color="black">  19. </font>
<font color="green">  20.     try:</font>
<font color="green">  21.         related_module = getattr(module, related_name)</font>
<font color="green">  22.     except AttributeError:</font>
<font color="green">  23.         return None</font>
<font color="black">  24. </font>
<font color="green">  25.     return related_module</font>
</pre>

