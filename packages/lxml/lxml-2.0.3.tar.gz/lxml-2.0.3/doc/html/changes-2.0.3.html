<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4.1: http://docutils.sourceforge.net/" />
<title>lxml changelog</title>
</head>
<body>
<div class="document" id="lxml-changelog">
<h1 class="title">lxml changelog</h1>
<div class="section">
<h1><a id="id1" name="id1">2.0.3 (2008-03-26)</a></h1>
<div class="section">
<h2><a id="features-added" name="features-added">Features added</a></h2>
<ul class="simple">
<li>soupparser.parse() allows passing keyword arguments on to
BeautifulSoup.</li>
<li><tt class="docutils literal"><span class="pre">fromstring()</span></tt> method in <tt class="docutils literal"><span class="pre">lxml.html.soupparser</span></tt>.</li>
</ul>
</div>
<div class="section">
<h2><a id="bugs-fixed" name="bugs-fixed">Bugs fixed</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">lxml.html.diff</span></tt> didn't treat empty tags properly (e.g.,
<tt class="docutils literal"><span class="pre">&lt;br&gt;</span></tt>).</li>
<li>Handle entity replacements correctly in target parser.</li>
<li>Crash when using <tt class="docutils literal"><span class="pre">iterparse()</span></tt> with XML Schema validation.</li>
<li>The BeautifulSoup parser (soupparser.py) did not replace entities,
which made them turn up in text content.</li>
<li>Attribute assignment of custom PyTypes in objectify could fail to
correctly serialise the value to a string.</li>
</ul>
</div>
<div class="section">
<h2><a id="other-changes" name="other-changes">Other changes</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">lxml.html.ElementSoup</span></tt> was replaced by a new module
<tt class="docutils literal"><span class="pre">lxml.html.soupparser</span></tt> with a more consistent API.  The old module
remains for compatibility with ElementTree's own ElementSoup module.</li>
<li>Setting the XSLT_CONFIG and XML2_CONFIG environment variables at
build time will let setup.py pick up the <tt class="docutils literal"><span class="pre">xml2-config</span></tt> and
<tt class="docutils literal"><span class="pre">xslt-config</span></tt> scripts from the supplied path name.</li>
<li>Passing <tt class="docutils literal"><span class="pre">--with-xml2-config=/path/to/xml2-config</span></tt> to setup.py will
override the <tt class="docutils literal"><span class="pre">xml2-config</span></tt> script that is used to determine the C
compiler options.  The same applies for the <tt class="docutils literal"><span class="pre">--with-xslt-config</span></tt>
option.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id2" name="id2">2.0.2 (2008-02-22)</a></h1>
<div class="section">
<h2><a id="id3" name="id3">Features added</a></h2>
<ul class="simple">
<li>Support passing <tt class="docutils literal"><span class="pre">base_url</span></tt> to file parser functions to override
the filename of the file(-like) object.</li>
</ul>
</div>
<div class="section">
<h2><a id="id4" name="id4">Bugs fixed</a></h2>
<ul class="simple">
<li>The prefix for objectify's pytype namespace was missing from the set
of default prefixes.</li>
<li>Memory leak in Schematron (fixed only for libxml2 2.6.31+).</li>
<li>Error type names in RelaxNG were reported incorrectly.</li>
<li>Slice deletion bug fixed in objectify.</li>
</ul>
</div>
<div class="section">
<h2><a id="id5" name="id5">Other changes</a></h2>
<ul class="simple">
<li>Enabled doctests for some Python modules (especially <tt class="docutils literal"><span class="pre">lxml.html</span></tt>).</li>
<li>Add a <tt class="docutils literal"><span class="pre">method</span></tt> argument to <tt class="docutils literal"><span class="pre">lxml.html.tostring()</span></tt>
(<tt class="docutils literal"><span class="pre">method=&quot;xml&quot;</span></tt> for XHTML output).</li>
<li>Make it clearer that methods like <tt class="docutils literal"><span class="pre">lxml.html.fromstring()</span></tt> take a
<tt class="docutils literal"><span class="pre">base_url</span></tt> argument.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id6" name="id6">2.0.1 (2008-02-13)</a></h1>
<div class="section">
<h2><a id="id7" name="id7">Features added</a></h2>
<ul class="simple">
<li>Child iteration in <tt class="docutils literal"><span class="pre">lxml.pyclasslookup</span></tt>.</li>
<li>Loads of new docstrings reflect the signature of functions and
methods to make them visible in API docs and <tt class="docutils literal"><span class="pre">help()</span></tt></li>
</ul>
</div>
<div class="section">
<h2><a id="id8" name="id8">Bugs fixed</a></h2>
<ul class="simple">
<li>The module <tt class="docutils literal"><span class="pre">lxml.html.builder</span></tt> was duplicated as
<tt class="docutils literal"><span class="pre">lxml.htmlbuilder</span></tt></li>
<li>Form elements would return None for <tt class="docutils literal"><span class="pre">form.fields.keys()</span></tt> if there
was an unnamed input field.  Now unnamed input fields are completely
ignored.</li>
<li>Setting an element slice in objectify could insert slice-overlapping
elements at the wrong position.</li>
</ul>
</div>
<div class="section">
<h2><a id="id9" name="id9">Other changes</a></h2>
<ul class="simple">
<li>The generated API documentation was cleaned up and disburdened from
non-public classes etc.</li>
<li>The previously public module <tt class="docutils literal"><span class="pre">lxml.html.setmixin</span></tt> was renamed to
<tt class="docutils literal"><span class="pre">lxml.html._setmixin</span></tt> as it is not an official part of lxml.  If
you want to use it, feel free to copy it over to your own source
base.</li>
<li>Passing <tt class="docutils literal"><span class="pre">--with-xslt-config=/path/to/xslt-config</span></tt> to setup.py will
override the <tt class="docutils literal"><span class="pre">xslt-config</span></tt> script that is used to determine the C
compiler options.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id10" name="id10">2.0 (2008-02-01)</a></h1>
<div class="section">
<h2><a id="id11" name="id11">Features added</a></h2>
<ul class="simple">
<li>Passing the <tt class="docutils literal"><span class="pre">unicode</span></tt> type as <tt class="docutils literal"><span class="pre">encoding</span></tt> to <tt class="docutils literal"><span class="pre">tostring()</span></tt> will
serialise to unicode.  The <tt class="docutils literal"><span class="pre">tounicode()</span></tt> function is now
deprecated.</li>
<li><tt class="docutils literal"><span class="pre">XMLSchema()</span></tt> and <tt class="docutils literal"><span class="pre">RelaxNG()</span></tt> can parse from StringIO.</li>
<li><tt class="docutils literal"><span class="pre">makeparser()</span></tt> function in <tt class="docutils literal"><span class="pre">lxml.objectify</span></tt> to create a new
parser with the usual objectify setup.</li>
</ul>
</div>
<div class="section">
<h2><a id="id12" name="id12">Bugs fixed</a></h2>
</div>
<div class="section">
<h2><a id="id13" name="id13">Other changes</a></h2>
</div>
</div>
<div class="section">
<h1><a id="beta2-2008-01-26" name="beta2-2008-01-26">2.0beta2 (2008-01-26)</a></h1>
<div class="section">
<h2><a id="id14" name="id14">Features added</a></h2>
<ul class="simple">
<li>Plain ASCII XPath string results are no longer forced into unicode
objects as in 2.0beta1, but are returned as plain strings as before.</li>
<li>All XPath string results are 'smart' objects that have a
<tt class="docutils literal"><span class="pre">getparent()</span></tt> method to retrieve their parent Element.</li>
<li><tt class="docutils literal"><span class="pre">with_tail</span></tt> option in serialiser functions.</li>
<li>More accurate exception messages in validator creation.</li>
</ul>
</div>
<div class="section">
<h2><a id="id15" name="id15">Bugs fixed</a></h2>
<ul class="simple">
<li>Missing import in <tt class="docutils literal"><span class="pre">lxml.html.clean</span></tt>.</li>
<li>Some Python 2.4-isms prevented lxml from building/running under
Python 2.3.</li>
</ul>
</div>
<div class="section">
<h2><a id="id16" name="id16">Other changes</a></h2>
<ul class="simple">
<li>Exceptions carry only the part of the error log that is related to
the operation that caused the error.</li>
<li><tt class="docutils literal"><span class="pre">XMLSchema()</span></tt> and <tt class="docutils literal"><span class="pre">RelaxNG()</span></tt> now enforce passing the source
file/filename through the <tt class="docutils literal"><span class="pre">file</span></tt> keyword argument.</li>
<li>The test suite now skips most doctests under Python 2.3.</li>
<li><tt class="docutils literal"><span class="pre">make</span> <span class="pre">clean</span></tt> no longer removes the .c files (use <tt class="docutils literal"><span class="pre">make</span>
<span class="pre">realclean</span></tt> instead)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="beta1-2008-01-11" name="beta1-2008-01-11">2.0beta1 (2008-01-11)</a></h1>
<div class="section">
<h2><a id="id17" name="id17">Features added</a></h2>
<ul class="simple">
<li>Parse-time XML schema validation (<tt class="docutils literal"><span class="pre">schema</span></tt> parser keyword).</li>
<li>XPath string results of the <tt class="docutils literal"><span class="pre">text()</span></tt> function and attribute
selection make their Element container accessible through a
<tt class="docutils literal"><span class="pre">getparent()</span></tt> method.  As a side-effect, they are now always
unicode objects (even ASCII strings).</li>
<li><tt class="docutils literal"><span class="pre">XSLT</span></tt> objects are usable in any thread - at the cost of a deep
copy if they were not created in that thread.</li>
<li>Invalid entity names and character references will be rejected by
the <tt class="docutils literal"><span class="pre">Entity()</span></tt> factory.</li>
<li><tt class="docutils literal"><span class="pre">entity.text</span></tt> returns the textual representation of the entity,
e.g. <tt class="docutils literal"><span class="pre">&amp;amp;</span></tt>.</li>
</ul>
</div>
<div class="section">
<h2><a id="id18" name="id18">Bugs fixed</a></h2>
<ul class="simple">
<li>XPath on ElementTrees could crash when selecting the virtual root
node of the ElementTree.</li>
<li>Compilation <tt class="docutils literal"><span class="pre">--without-threading</span></tt> was buggy in alpha5/6.</li>
</ul>
</div>
<div class="section">
<h2><a id="id19" name="id19">Other changes</a></h2>
<ul class="simple">
<li>Minor performance tweaks for Element instantiation and subelement
creation</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="alpha6-2007-12-19" name="alpha6-2007-12-19">2.0alpha6 (2007-12-19)</a></h1>
<div class="section">
<h2><a id="id20" name="id20">Features added</a></h2>
<ul class="simple">
<li>New properties <tt class="docutils literal"><span class="pre">position</span></tt> and <tt class="docutils literal"><span class="pre">code</span></tt> on ParseError exception (as
in ET 1.3)</li>
</ul>
</div>
<div class="section">
<h2><a id="id21" name="id21">Bugs fixed</a></h2>
<ul class="simple">
<li>Memory leak in the <tt class="docutils literal"><span class="pre">parse()</span></tt> function.</li>
<li>Minor bugs in XSLT error message formatting.</li>
<li>Result document memory leak in target parser.</li>
</ul>
</div>
<div class="section">
<h2><a id="id22" name="id22">Other changes</a></h2>
<ul class="simple">
<li>Various places in the XPath, XSLT and iteration APIs now require
keyword-only arguments.</li>
<li>The argument order in <tt class="docutils literal"><span class="pre">element.itersiblings()</span></tt> was changed to
match the order used in all other iteration methods.  The second
argument ('preceding') is now a keyword-only argument.</li>
<li>The <tt class="docutils literal"><span class="pre">getiterator()</span></tt> method on Elements and ElementTrees was
reverted to return an iterator as it did in lxml 1.x.  The ET API
specification allows it to return either a sequence or an iterator,
and it traditionally returned a sequence in ET and an iterator in
lxml.  However, it is now deprecated in favour of the <tt class="docutils literal"><span class="pre">iter()</span></tt>
method, which should be used in new code wherever possible.</li>
<li>The 'pretty printed' serialisation of ElementTree objects now
inserts newlines at the root level between processing instructions,
comments and the root tag.</li>
<li>A 'pretty printed' serialisation is now terminated with a newline.</li>
<li>Second argument to <tt class="docutils literal"><span class="pre">lxml.etree.Extension()</span></tt> helper is no longer
required, third argument is now a keyword-only argument <tt class="docutils literal"><span class="pre">ns</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">lxml.html.tostring</span></tt> takes an <tt class="docutils literal"><span class="pre">encoding</span></tt> argument.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="alpha5-2007-11-24" name="alpha5-2007-11-24">2.0alpha5 (2007-11-24)</a></h1>
<div class="section">
<h2><a id="id23" name="id23">Features added</a></h2>
<ul class="simple">
<li>Rich comparison of <tt class="docutils literal"><span class="pre">element.attrib</span></tt> proxies.</li>
<li>ElementTree compatible TreeBuilder class.</li>
<li>Use default prefixes for some common XML namespaces.</li>
<li><tt class="docutils literal"><span class="pre">lxml.html.clean.Cleaner</span></tt> now allows for a <tt class="docutils literal"><span class="pre">host_whitelist</span></tt>, and
two overridable methods: <tt class="docutils literal"><span class="pre">allow_embedded_url(el,</span> <span class="pre">url)</span></tt> and the
more general <tt class="docutils literal"><span class="pre">allow_element(el)</span></tt>.</li>
<li>Extended slicing of Elements as in <tt class="docutils literal"><span class="pre">element[1:-1:2]</span></tt>, both in
etree and in objectify</li>
<li>Resolvers can now provide a <tt class="docutils literal"><span class="pre">base_url</span></tt> keyword argument when
resolving a document as string data.</li>
<li>When using <tt class="docutils literal"><span class="pre">lxml.doctestcompare</span></tt> you can give the doctest option
<tt class="docutils literal"><span class="pre">NOPARSE_MARKUP</span></tt> (like <tt class="docutils literal"><span class="pre">#</span> <span class="pre">doctest:</span> <span class="pre">+NOPARSE_MARKUP</span></tt>) to suppress
the special checking for one test.</li>
</ul>
</div>
<div class="section">
<h2><a id="id24" name="id24">Bugs fixed</a></h2>
<ul class="simple">
<li>Target parser failed to report comments.</li>
<li>In the <tt class="docutils literal"><span class="pre">lxml.html</span></tt> <tt class="docutils literal"><span class="pre">iter_links</span></tt> method, links in <tt class="docutils literal"><span class="pre">&lt;object&gt;</span></tt>
tags weren't recognized.  (Note: plugin-specific link parameters
still aren't recognized.)  Also, the <tt class="docutils literal"><span class="pre">&lt;embed&gt;</span></tt> tag, though not
standard, is now included in <tt class="docutils literal"><span class="pre">lxml.html.defs.special_inline_tags</span></tt>.</li>
<li>Using custom resolvers on XSLT stylesheets parsed from a string
could request ill-formed URLs.</li>
<li>With <tt class="docutils literal"><span class="pre">lxml.doctestcompare</span></tt> if you do <tt class="docutils literal"><span class="pre">&lt;tag</span> <span class="pre">xmlns=&quot;...&quot;&gt;</span></tt> in your
output, it will then be namespace-neutral (before the ellipsis was
treated as a real namespace).</li>
</ul>
</div>
<div class="section">
<h2><a id="id25" name="id25">Other changes</a></h2>
<ul class="simple">
<li>The module source files were renamed to &quot;lxml.*.pyx&quot;, such as
&quot;lxml.etree.pyx&quot;.  This was changed for consistency with the way
Pyrex commonly handles package imports.  The main effect is that
classes now know about their fully qualified class name, including
the package name of their module.</li>
<li>Keyword-only arguments in some API functions, especially in the
parsers and serialisers.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id26" name="id26">1.3.6 (2007-10-29)</a></h1>
<div class="section">
<h2><a id="id27" name="id27">Bugs fixed</a></h2>
<ul class="simple">
<li>Backported decref crash fix from 2.0</li>
<li>Well hidden free-while-in-use crash bug in ObjectPath</li>
</ul>
</div>
<div class="section">
<h2><a id="id28" name="id28">Other changes</a></h2>
<ul class="simple">
<li>The test suites now run <tt class="docutils literal"><span class="pre">gc.collect()</span></tt> in the <tt class="docutils literal"><span class="pre">tearDown()</span></tt>
methods.  While this makes them take a lot longer to run, it also
makes it easier to link a specific test to garbage collection
problems that would otherwise appear in later tests.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id29" name="id29">1.3.5 (2007-10-22)</a></h1>
<div class="section">
<h2><a id="id30" name="id30">Features added</a></h2>
</div>
<div class="section">
<h2><a id="id31" name="id31">Bugs fixed</a></h2>
<ul class="simple">
<li>lxml.etree could crash when adding more than 10000 namespaces to a
document</li>
<li>lxml failed to serialise namespace declarations of elements other
than the root node of a tree</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="alpha4-2007-10-07" name="alpha4-2007-10-07">2.0alpha4 (2007-10-07)</a></h1>
<div class="section">
<h2><a id="id32" name="id32">Features added</a></h2>
</div>
<div class="section">
<h2><a id="id33" name="id33">Bugs fixed</a></h2>
<ul class="simple">
<li>AttributeError in feed parser on parse errors</li>
</ul>
</div>
<div class="section">
<h2><a id="id34" name="id34">Other changes</a></h2>
<ul class="simple">
<li>Tag name validation in lxml.etree (and lxml.html) now distinguishes
between HTML tags and XML tags based on the parser that was used to
parse or create them.  HTML tags no longer reject any non-ASCII
characters in tag names but only spaces and the special characters
<tt class="docutils literal"><span class="pre">&lt;&gt;&amp;/&quot;'</span></tt>.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="alpha3-2007-09-26" name="alpha3-2007-09-26">2.0alpha3 (2007-09-26)</a></h1>
<div class="section">
<h2><a id="id35" name="id35">Features added</a></h2>
<ul class="simple">
<li>Separate <tt class="docutils literal"><span class="pre">feed_error_log</span></tt> property for the feed parser interface.
The normal parser interface and <tt class="docutils literal"><span class="pre">iterparse</span></tt> continue to use
<tt class="docutils literal"><span class="pre">error_log</span></tt>.</li>
<li>The normal parsers and the feed parser interface are now separated
and can be used concurrently on the same parser instance.</li>
<li><tt class="docutils literal"><span class="pre">fromstringlist()</span></tt> and <tt class="docutils literal"><span class="pre">tostringlist()</span></tt> functions as in
ElementTree 1.3</li>
<li><tt class="docutils literal"><span class="pre">iterparse()</span></tt> accepts an <tt class="docutils literal"><span class="pre">html</span></tt> boolean keyword argument for
parsing with the HTML parser (note that this interface may be
subject to change)</li>
<li>Parsers accept an <tt class="docutils literal"><span class="pre">encoding</span></tt> keyword argument that overrides the encoding
of the parsed documents.</li>
<li>New C-API function <tt class="docutils literal"><span class="pre">hasChild()</span></tt> to test for children</li>
<li><tt class="docutils literal"><span class="pre">annotate()</span></tt> function in objectify can annotate with Python types and XSI
types in one step.  Accompanied by <tt class="docutils literal"><span class="pre">xsiannotate()</span></tt> and <tt class="docutils literal"><span class="pre">pyannotate()</span></tt>.</li>
</ul>
</div>
<div class="section">
<h2><a id="id36" name="id36">Bugs fixed</a></h2>
<ul class="simple">
<li>XML feed parser setup problem</li>
<li>Type annotation for unicode strings in <tt class="docutils literal"><span class="pre">DataElement()</span></tt></li>
</ul>
</div>
<div class="section">
<h2><a id="id37" name="id37">Other changes</a></h2>
<ul class="simple">
<li>lxml.etree now emits a warning if you use XPath with libxml2 2.6.27
(which can crash on certain XPath errors)</li>
<li>Type annotation in objectify now preserves the already annotated type by
default to prevent loosing type information that is already there.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="alpha2-2007-09-15" name="alpha2-2007-09-15">2.0alpha2 (2007-09-15)</a></h1>
<div class="section">
<h2><a id="id38" name="id38">Features added</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">ET.write()</span></tt>, <tt class="docutils literal"><span class="pre">tostring()</span></tt> and <tt class="docutils literal"><span class="pre">tounicode()</span></tt> now accept a keyword
argument <tt class="docutils literal"><span class="pre">method</span></tt> that can be one of 'xml' (or None), 'html' or 'text' to
serialise as XML, HTML or plain text content.</li>
<li><tt class="docutils literal"><span class="pre">iterfind()</span></tt> method on Elements returns an iterator equivalent to
<tt class="docutils literal"><span class="pre">findall()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">itertext()</span></tt> method on Elements</li>
<li>Setting a QName object as value of the .text property or as an attribute
will resolve its prefix in the respective context</li>
<li>ElementTree-like parser target interface as described in
<a class="reference" href="http://effbot.org/elementtree/elementtree-xmlparser.htm">http://effbot.org/elementtree/elementtree-xmlparser.htm</a></li>
<li>ElementTree-like feed parser interface on XMLParser and HTMLParser
(<tt class="docutils literal"><span class="pre">feed()</span></tt> and <tt class="docutils literal"><span class="pre">close()</span></tt> methods)</li>
</ul>
</div>
<div class="section">
<h2><a id="id39" name="id39">Bugs fixed</a></h2>
<ul class="simple">
<li>lxml failed to serialise namespace declarations of elements other than the
root node of a tree</li>
<li>Race condition in XSLT where the resolver context leaked between concurrent
XSLT calls</li>
</ul>
</div>
<div class="section">
<h2><a id="id40" name="id40">Other changes</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">element.getiterator()</span></tt> returns a list, use <tt class="docutils literal"><span class="pre">element.iter()</span></tt> to retrieve
an iterator (ElementTree 1.3 compatible behaviour)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="alpha1-2007-09-02" name="alpha1-2007-09-02">2.0alpha1 (2007-09-02)</a></h1>
<div class="section">
<h2><a id="id41" name="id41">Features added</a></h2>
<ul class="simple">
<li>Reimplemented <tt class="docutils literal"><span class="pre">objectify.E</span></tt> for better performance and improved
integration with objectify.  Provides extended type support based on
registered PyTypes.</li>
<li>XSLT objects now support deep copying</li>
<li>New <tt class="docutils literal"><span class="pre">makeSubElement()</span></tt> C-API function that allows creating a new
subelement straight with text, tail and attributes.</li>
<li>XPath extension functions can now access the current context node
(<tt class="docutils literal"><span class="pre">context.context_node</span></tt>) and use a context dictionary
(<tt class="docutils literal"><span class="pre">context.eval_context</span></tt>) from the context provided in their first
parameter</li>
<li>HTML tag soup parser based on BeautifulSoup in <tt class="docutils literal"><span class="pre">lxml.html.ElementSoup</span></tt></li>
<li>New module <tt class="docutils literal"><span class="pre">lxml.doctestcompare</span></tt> by Ian Bicking for writing simplified
doctests based on XML/HTML output.  Use by importing <tt class="docutils literal"><span class="pre">lxml.usedoctest</span></tt> or
<tt class="docutils literal"><span class="pre">lxml.html.usedoctest</span></tt> from within a doctest.</li>
<li>New module <tt class="docutils literal"><span class="pre">lxml.cssselect</span></tt> by Ian Bicking for selecting Elements with CSS
selectors.</li>
<li>New package <tt class="docutils literal"><span class="pre">lxml.html</span></tt> written by Ian Bicking for advanced HTML
treatment.</li>
<li>Namespace class setup is now local to the <tt class="docutils literal"><span class="pre">ElementNamespaceClassLookup</span></tt>
instance and no longer global.</li>
<li>Schematron validation (incomplete in libxml2)</li>
<li>Additional <tt class="docutils literal"><span class="pre">stringify</span></tt> argument to <tt class="docutils literal"><span class="pre">objectify.PyType()</span></tt> takes a
conversion function to strings to support setting text values from arbitrary
types.</li>
<li>Entity support through an <tt class="docutils literal"><span class="pre">Entity</span></tt> factory and element classes.  XML
parsers now have a <tt class="docutils literal"><span class="pre">resolve_entities</span></tt> keyword argument that can be set to
False to keep entities in the document.</li>
<li><tt class="docutils literal"><span class="pre">column</span></tt> field on error log entries to accompany the <tt class="docutils literal"><span class="pre">line</span></tt> field</li>
<li>Error specific messages in XPath parsing and evaluation
NOTE: for evaluation errors, you will now get an XPathEvalError instead of
an XPathSyntaxError.  To catch both, you can except on <tt class="docutils literal"><span class="pre">XPathError</span></tt></li>
<li>The regular expression functions in XPath now support passing a node-set
instead of a string</li>
<li>Extended type annotation in objectify: new <tt class="docutils literal"><span class="pre">xsiannotate()</span></tt> function</li>
<li>EXSLT RegExp support in standard XPath (not only XSLT)</li>
</ul>
</div>
<div class="section">
<h2><a id="id42" name="id42">Bugs fixed</a></h2>
<ul class="simple">
<li>lxml.etree did not check tag/attribute names</li>
<li>The XML parser did not report undefined entities as error</li>
<li>The text in exceptions raised by XML parsers, validators and XPath
evaluators now reports the first error that occurred instead of the last</li>
<li>Passing '' as XPath namespace prefix did not raise an error</li>
<li>Thread safety in XPath evaluators</li>
</ul>
</div>
<div class="section">
<h2><a id="id43" name="id43">Other changes</a></h2>
<ul class="simple">
<li>objectify.PyType for None is now called &quot;NoneType&quot;</li>
<li><tt class="docutils literal"><span class="pre">el.getiterator()</span></tt> renamed to <tt class="docutils literal"><span class="pre">el.iter()</span></tt>, following ElementTree 1.3 -
original name is still available as alias</li>
<li>In the public C-API, <tt class="docutils literal"><span class="pre">findOrBuildNodeNs()</span></tt> was replaced by the more
generic <tt class="docutils literal"><span class="pre">findOrBuildNodeNsPrefix</span></tt></li>
<li>Major refactoring in XPath/XSLT extension function code</li>
<li>Network access in parsers disabled by default</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id44" name="id44">1.3.4 (2007-08-30)</a></h1>
<div class="section">
<h2><a id="id45" name="id45">Features added</a></h2>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">ElementMaker</span></tt> in <tt class="docutils literal"><span class="pre">lxml.builder</span></tt> now accepts the keyword arguments
<tt class="docutils literal"><span class="pre">namespace</span></tt> and <tt class="docutils literal"><span class="pre">nsmap</span></tt> to set a namespace and nsmap for the Elements it
creates.</li>
<li>The <tt class="docutils literal"><span class="pre">docinfo</span></tt> on ElementTree objects has new properties <tt class="docutils literal"><span class="pre">internalDTD</span></tt>
and <tt class="docutils literal"><span class="pre">externalDTD</span></tt> that return a DTD object for the internal or external
subset of the document respectively.</li>
<li>Serialising an ElementTree now includes any internal DTD subsets that are
part of the document, as well as comments and PIs that are siblings of the
root node.</li>
</ul>
</div>
<div class="section">
<h2><a id="id46" name="id46">Bugs fixed</a></h2>
<ul class="simple">
<li>Parsing with the <tt class="docutils literal"><span class="pre">no_network</span></tt> option could fail</li>
</ul>
</div>
<div class="section">
<h2><a id="id47" name="id47">Other changes</a></h2>
<ul class="simple">
<li>lxml now raises a TagNameWarning about tag names containing ':' instead of
an Error as 1.3.3 did.  The reason is that a number of projects currently
misuse the previous lack of tag name validation to generate namespace
prefixes without declaring namespaces.  Apart from the danger of generating
broken XML this way, it also breaks most of the namespace-aware tools in
XML, including XPath, XSLT and validation.  lxml 1.3.x will continue to
support this bug with a Warning, while lxml 2.0 will be strict about
well-formed tag names (not only regarding ':').</li>
<li>Serialising an Element no longer includes its comment and PI siblings (only
ElementTree serialisation includes them).</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id48" name="id48">1.3.3 (2007-07-26)</a></h1>
<div class="section">
<h2><a id="id49" name="id49">Features added</a></h2>
<ul class="simple">
<li>ElementTree compatible parser <tt class="docutils literal"><span class="pre">ETCompatXMLParser</span></tt> strips processing
instructions and comments while parsing XML</li>
<li>Parsers now support stripping PIs (keyword argument 'remove_pis')</li>
<li><tt class="docutils literal"><span class="pre">etree.fromstring()</span></tt> now supports parsing both HTML and XML, depending on
the parser you pass.</li>
<li>Support <tt class="docutils literal"><span class="pre">base_url</span></tt> keyword argument in <tt class="docutils literal"><span class="pre">HTML()</span></tt> and <tt class="docutils literal"><span class="pre">XML()</span></tt></li>
</ul>
</div>
<div class="section">
<h2><a id="id50" name="id50">Bugs fixed</a></h2>
<ul class="simple">
<li>Parsing from Python Unicode strings failed on some platforms</li>
<li><tt class="docutils literal"><span class="pre">Element()</span></tt> did not raise an exception on tag names containing ':'</li>
<li><tt class="docutils literal"><span class="pre">Element.getiterator(tag)</span></tt> did not accept <tt class="docutils literal"><span class="pre">Comment</span></tt> and
<tt class="docutils literal"><span class="pre">ProcessingInstruction</span></tt> as tags. It also accepts <tt class="docutils literal"><span class="pre">Element</span></tt> now.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id51" name="id51">1.3.2 (2007-07-03)</a></h1>
<div class="section">
<h2><a id="id52" name="id52">Features added</a></h2>
</div>
<div class="section">
<h2><a id="id53" name="id53">Bugs fixed</a></h2>
<ul class="simple">
<li>&quot;deallocating None&quot; crash bug</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id54" name="id54">1.3.1 (2007-07-02)</a></h1>
<div class="section">
<h2><a id="id55" name="id55">Features added</a></h2>
<ul class="simple">
<li>objectify.DataElement now supports setting values from existing data
elements (not just plain Python types) and reuses defined namespaces etc.</li>
<li>E-factory support for lxml.objectify (<tt class="docutils literal"><span class="pre">objectify.E</span></tt>)</li>
</ul>
</div>
<div class="section">
<h2><a id="id56" name="id56">Bugs fixed</a></h2>
<ul class="simple">
<li>Better way to prevent crashes in Element proxy cleanup code</li>
<li>objectify.DataElement didn't set up None value correctly</li>
<li>objectify.DataElement didn't check the value against the provided type hints</li>
<li>Reference-counting bug in <tt class="docutils literal"><span class="pre">Element.attrib.pop()</span></tt></li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id57" name="id57">1.3 (2007-06-24)</a></h1>
<div class="section">
<h2><a id="id58" name="id58">Features added</a></h2>
<ul class="simple">
<li>Module <tt class="docutils literal"><span class="pre">lxml.pyclasslookup</span></tt> module implements an Element class lookup
scheme that can access the entire tree in read-only mode to help determining
a suitable Element class</li>
<li>Parsers take a <tt class="docutils literal"><span class="pre">remove_comments</span></tt> keyword argument that skips over comments</li>
<li><tt class="docutils literal"><span class="pre">parse()</span></tt> function in <tt class="docutils literal"><span class="pre">objectify</span></tt>, corresponding to <tt class="docutils literal"><span class="pre">XML()</span></tt> etc.</li>
<li><tt class="docutils literal"><span class="pre">Element.addnext(el)</span></tt> and <tt class="docutils literal"><span class="pre">Element.addprevious(el)</span></tt> methods to support
adding processing instructions and comments around the root node</li>
<li><tt class="docutils literal"><span class="pre">Element.attrib</span></tt> was missing <tt class="docutils literal"><span class="pre">clear()</span></tt> and <tt class="docutils literal"><span class="pre">pop()</span></tt> methods</li>
<li>Extended type annotation in objectify: cleaner annotation namespace setup
plus new <tt class="docutils literal"><span class="pre">deannotate()</span></tt> function</li>
<li>Support for custom Element class instantiation in lxml.sax: passing a
<tt class="docutils literal"><span class="pre">makeelement</span></tt> function to the ElementTreeContentHandler will reuse the
lookup context of that function</li>
<li>'.' represents empty ObjectPath (identity)</li>
<li><tt class="docutils literal"><span class="pre">Element.values()</span></tt> to accompany the existing <tt class="docutils literal"><span class="pre">.keys()</span></tt> and <tt class="docutils literal"><span class="pre">.items()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">collectAttributes()</span></tt> C-function to build a list of attribute
keys/values/items for a libxml2 node</li>
<li><tt class="docutils literal"><span class="pre">DTD</span></tt> validator class (like <tt class="docutils literal"><span class="pre">RelaxNG</span></tt> and <tt class="docutils literal"><span class="pre">XMLSchema</span></tt>)</li>
<li>HTML generator helpers by Fredrik Lundh in <tt class="docutils literal"><span class="pre">lxml.htmlbuilder</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ElementMaker</span></tt> XML generator by Fredrik Lundh in <tt class="docutils literal"><span class="pre">lxml.builder.E</span></tt></li>
<li>Support for pickeling <tt class="docutils literal"><span class="pre">objectify.ObjectifiedElement</span></tt> objects to XML</li>
<li><tt class="docutils literal"><span class="pre">update()</span></tt> method on Element.attrib</li>
<li>Optimised replacement for libxml2's _xmlReconsiliateNs(). This allows lxml
a better handling of namespaces when moving elements between documents.</li>
</ul>
</div>
<div class="section">
<h2><a id="id59" name="id59">Bugs fixed</a></h2>
<ul class="simple">
<li>Removing Elements from a tree could make them loose their namespace
declarations</li>
<li><tt class="docutils literal"><span class="pre">ElementInclude</span></tt> didn't honour base URL of original document</li>
<li>Replacing the children slice of an Element would cut off the tails of the
original children</li>
<li><tt class="docutils literal"><span class="pre">Element.getiterator(tag)</span></tt> did not accept <tt class="docutils literal"><span class="pre">Comment</span></tt> and
<tt class="docutils literal"><span class="pre">ProcessingInstruction</span></tt> as tags</li>
<li>API functions now check incoming strings for XML conformity.  Zero bytes or
low ASCII characters are no longer accepted (AssertionError).</li>
<li>XSLT parsing failed to pass resolver context on to imported documents</li>
<li>passing '' as namespace prefix in nsmap could be passed through to libxml2</li>
<li>Objectify couldn't handle prefixed XSD type names in <tt class="docutils literal"><span class="pre">xsi:type</span></tt></li>
<li>More ET compatible behaviour when writing out XML declarations or not</li>
<li>More robust error handling in <tt class="docutils literal"><span class="pre">iterparse()</span></tt></li>
<li>Documents lost their top-level PIs and comments on serialisation</li>
<li>lxml.sax failed on comments and PIs. Comments are now properly ignored and
PIs are copied.</li>
<li>Possible memory leaks in namespace handling when moving elements between
documents</li>
</ul>
</div>
<div class="section">
<h2><a id="id60" name="id60">Other changes</a></h2>
<ul class="simple">
<li>major restructuring in the documentation</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id61" name="id61">1.2.1 (2007-02-27)</a></h1>
<div class="section">
<h2><a id="id62" name="id62">Bugs fixed</a></h2>
<ul class="simple">
<li>Build fixes for MS compiler</li>
<li>Item assignments to special names like <tt class="docutils literal"><span class="pre">element[&quot;text&quot;]</span></tt> failed</li>
<li>Renamed ObjectifiedDataElement.__setText() to _setText() to make it easier
to access</li>
<li>The pattern for attribute names in ObjectPath was too restrictive</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id63" name="id63">1.2 (2007-02-20)</a></h1>
<div class="section">
<h2><a id="id64" name="id64">Features added</a></h2>
<ul class="simple">
<li>Rich comparison of QName objects</li>
<li>Support for regular expressions in benchmark selection</li>
<li>get/set emulation (not .attrib!) for attributes on processing instructions</li>
<li>ElementInclude Python module for ElementTree compatible XInclude processing
that honours custom resolvers registered with the source document</li>
<li>ElementTree.parser property holds the parser used to parse the document</li>
<li>setup.py has been refactored for greater readability and flexibility</li>
<li>--rpath flag to setup.py to induce automatic linking-in of dynamic library
runtime search paths has been renamed to --auto-rpath. This makes it
possible to pass an --rpath directly to distutils; previously this was being
shadowed.</li>
</ul>
</div>
<div class="section">
<h2><a id="id65" name="id65">Bugs fixed</a></h2>
<ul class="simple">
<li>Element instantiation now uses locks to prevent race conditions with threads</li>
<li>ElementTree.write() did not raise an exception when the file was not writable</li>
<li>Error handling could crash under Python &lt;= 2.4.1 - fixed by disabling thread
support in these environments</li>
<li>Element.find*() did not accept QName objects as path</li>
</ul>
</div>
<div class="section">
<h2><a id="id66" name="id66">Other changes</a></h2>
<ul class="simple">
<li>code cleanup: redundant _NodeBase super class merged into _Element class
Note: although the impact should be zero in most cases, this change breaks
the compatibiliy of the public C-API</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id67" name="id67">1.1.2 (2006-10-30)</a></h1>
<div class="section">
<h2><a id="id68" name="id68">Features added</a></h2>
<ul class="simple">
<li>Data elements in objectify support repr(), which is now used by dump()</li>
<li>Source distribution now ships with a patched Pyrex</li>
<li>New C-API function makeElement() to create new elements with text,
tail, attributes and namespaces</li>
<li>Reuse original parser flags for XInclude</li>
<li>Simplified support for handling XSLT processing instructions</li>
</ul>
</div>
<div class="section">
<h2><a id="id69" name="id69">Bugs fixed</a></h2>
<ul class="simple">
<li>Parser resources were not freed before the next parser run</li>
<li>Open files and XML strings returned by Python resolvers were not
closed/freed</li>
<li>Crash in the IDDict returned by XMLDTDID</li>
<li>Copying Comments and ProcessingInstructions failed</li>
<li>Memory leak for external URLs in _XSLTProcessingInstruction.parseXSL()</li>
<li>Memory leak when garbage collecting tailed root elements</li>
<li>HTML script/style content was not propagated to .text</li>
<li>Show text xincluded between text nodes correctly in .text and .tail</li>
<li>'integer * objectify.StringElement' operation was not supported</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id70" name="id70">1.1.1 (2006-09-21)</a></h1>
<div class="section">
<h2><a id="id71" name="id71">Features added</a></h2>
<ul class="simple">
<li>XSLT profiling support (<tt class="docutils literal"><span class="pre">profile_run</span></tt> keyword)</li>
<li>countchildren() method on objectify.ObjectifiedElement</li>
<li>Support custom elements for tree nodes in lxml.objectify</li>
</ul>
</div>
<div class="section">
<h2><a id="id72" name="id72">Bugs fixed</a></h2>
<ul class="simple">
<li>lxml.objectify failed to support long data values (e.g., &quot;123L&quot;)</li>
<li>Error messages from XSLT did not reach <tt class="docutils literal"><span class="pre">XSLT.error_log</span></tt></li>
<li>Factories objectify.Element() and objectify.DataElement() were missing
<tt class="docutils literal"><span class="pre">attrib</span></tt> and <tt class="docutils literal"><span class="pre">nsmap</span></tt> keyword arguments</li>
<li>Changing the default parser in lxml.objectify did not update the factories
Element() and DataElement()</li>
<li>Let lxml.objectify.Element() always generate tree elements (not data
elements)</li>
<li>Build under Windows failed ('0' bug in patched Pyrex version)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id73" name="id73">1.1 (2006-09-13)</a></h1>
<div class="section">
<h2><a id="id74" name="id74">Features added</a></h2>
<ul class="simple">
<li>Comments and processing instructions return '&lt;!-- coment --&gt;' and
'&lt;?pi-target content?&gt;' for repr()</li>
<li>Parsers are now the preferred (and default) place where element class lookup
schemes should be registered.  Namespace lookup is no longer supported by
default.</li>
<li>Support for Python 2.5 beta</li>
<li>Unlock the GIL for deep copying documents and for XPath()</li>
<li>New <tt class="docutils literal"><span class="pre">compact</span></tt> keyword argument for parsing read-only documents</li>
<li>Support for parser options in iterparse()</li>
<li>The <tt class="docutils literal"><span class="pre">namespace</span></tt> axis is supported in XPath and returns (prefix, URI)
tuples</li>
<li>The XPath expression &quot;/&quot; now returns an empty list instead of raising an
exception</li>
<li>XML-Object API on top of lxml (lxml.objectify)</li>
<li>Customizable Element class lookup:<ul>
<li>different pre-implemented lookup mechanisms</li>
<li>support for externally provided lookup functions</li>
</ul>
</li>
<li>Support for processing instructions (ET-like, not compatible)</li>
<li>Public C-level API for independent extension modules</li>
<li>Module level <tt class="docutils literal"><span class="pre">iterwalk()</span></tt> function as 'iterparse' for trees</li>
<li>Module level <tt class="docutils literal"><span class="pre">iterparse()</span></tt> function similar to ElementTree (see
documentation for differences)</li>
<li>Element.nsmap property returns a mapping of all namespace prefixes known at
the Element to their namespace URI</li>
<li>Reentrant threading support in RelaxNG, XMLSchema and XSLT</li>
<li>Threading support in parsers and serializers:<ul>
<li>All in-memory operations (tostring, parse(StringIO), etc.) free the GIL</li>
<li>File operations (on file names) free the GIL</li>
<li>Reading from file-like objects frees the GIL and reacquires it for reading</li>
<li>Serialisation to file-like objects is single-threaded (high lock overhead)</li>
</ul>
</li>
<li>Element iteration over XPath axes:<ul>
<li>Element.iterdescendants() iterates over the descendants of an element</li>
<li>Element.iterancestors() iterates over the ancestors of an element (from
parent to parent)</li>
<li>Element.itersiblings() iterates over either the following or preceding
siblings of an element</li>
<li>Element.iterchildren() iterates over the children of an element in either
direction</li>
<li>All iterators support the <tt class="docutils literal"><span class="pre">tag</span></tt> keyword argument to restrict the
generated elements</li>
</ul>
</li>
<li>Element.getnext() and Element.getprevious() return the direct siblings of an
element</li>
</ul>
</div>
<div class="section">
<h2><a id="id75" name="id75">Bugs fixed</a></h2>
<ul class="simple">
<li>filenames with local 8-bit encoding were not supported</li>
<li>1.1beta did not compile under Python 2.3</li>
<li>ignore unknown 'pyval' attribute values in objectify</li>
<li>objectify.ObjectifiedElement.addattr() failed to accept Elements and Lists</li>
<li>objectify.ObjectPath.setattr() failed to accept Elements and Lists</li>
<li>XPathSyntaxError now inherits from XPathError</li>
<li>Threading race conditions in RelaxNG and XMLSchema</li>
<li>Crash when mixing elements from XSLT results into other trees, concurrent
XSLT is only allowed when the stylesheet was parsed in the main thread</li>
<li>The EXSLT <tt class="docutils literal"><span class="pre">regexp:match</span></tt> function now works as defined (except for some
differences in the regular expression syntax)</li>
<li>Setting element.text to '' returned None on request, not the empty string</li>
<li><tt class="docutils literal"><span class="pre">iterparse()</span></tt> could crash on long XML files</li>
<li>Creating documents no longer copies the parser for later URL resolving.  For
performance reasons, only a reference is kept.  Resolver updates on the
parser will now be reflected by documents that were parsed before the
change.  Although this should rarely become visible, it is a behavioral
change from 1.0.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id76" name="id76">1.0.4 (2006-09-09)</a></h1>
<div class="section">
<h2><a id="id77" name="id77">Features added</a></h2>
<ul class="simple">
<li>List-like <tt class="docutils literal"><span class="pre">Element.extend()</span></tt> method</li>
</ul>
</div>
<div class="section">
<h2><a id="id78" name="id78">Bugs fixed</a></h2>
<ul class="simple">
<li>Crash in tail handling in <tt class="docutils literal"><span class="pre">Element.replace()</span></tt></li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id79" name="id79">1.0.3 (2006-08-08)</a></h1>
<div class="section">
<h2><a id="id80" name="id80">Features added</a></h2>
<ul class="simple">
<li>Element.replace(old, new) method to replace a subelement by another one</li>
</ul>
</div>
<div class="section">
<h2><a id="id81" name="id81">Bugs fixed</a></h2>
<ul class="simple">
<li>Crash when mixing elements from XSLT results into other trees</li>
<li>Copying/deepcopying did not work for ElementTree objects</li>
<li>Setting an attribute to a non-string value did not raise an exception</li>
<li>Element.remove() deleted the tail text from the removed Element</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id82" name="id82">1.0.2 (2006-06-27)</a></h1>
<div class="section">
<h2><a id="id83" name="id83">Features added</a></h2>
<ul class="simple">
<li>Support for setting a custom default Element class as opposed to namespace
specific classes (which still override the default class)</li>
</ul>
</div>
<div class="section">
<h2><a id="id84" name="id84">Bugs fixed</a></h2>
<ul class="simple">
<li>Rare exceptions in Python list functions were not handled</li>
<li>Parsing accepted unicode strings with XML encoding declaration in certain
cases</li>
<li>Parsing 8-bit encoded strings from StringIO objects raised an exception</li>
<li>Module function <tt class="docutils literal"><span class="pre">initThread()</span></tt> was removed - useless (and never worked)</li>
<li>XSLT and parser exception messages include the error line number</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id85" name="id85">1.0.1 (2006-06-09)</a></h1>
<div class="section">
<h2><a id="id86" name="id86">Features added</a></h2>
<ul class="simple">
<li>Repeated calls to Element.attrib now efficiently return the same instance</li>
</ul>
</div>
<div class="section">
<h2><a id="id87" name="id87">Bugs fixed</a></h2>
<ul class="simple">
<li>Document deallocation could crash in certain garbage collection scenarios</li>
<li>Extension function calls in XSLT variable declarations could break the
stylesheet and crash on repeated calls</li>
<li>Deep copying Elements could loose namespaces declared in parents</li>
<li>Deep copying Elements did not copy tail</li>
<li>Parsing file(-like) objects failed to load external entities</li>
<li>Parsing 8-bit strings from file(-like) objects raised an exception</li>
<li>xsl:include failed when the stylesheet was parsed from a file-like object</li>
<li>lxml.sax.ElementTreeProducer did not call startDocument() / endDocument()</li>
<li>MSVC compiler complained about long strings (supports only 2048 bytes)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id88" name="id88">1.0 (2006-06-01)</a></h1>
<div class="section">
<h2><a id="id89" name="id89">Features added</a></h2>
<ul class="simple">
<li>Element.getiterator() and the findall() methods support finding arbitrary
elements from a namespace (pattern <tt class="docutils literal"><span class="pre">{namespace}*</span></tt>)</li>
<li>Another speedup in tree iteration code</li>
<li>General speedup of Python Element object creation and deallocation</li>
<li>Writing C14N no longer serializes in memory (reduced memory footprint)</li>
<li>PyErrorLog for error logging through the Python <tt class="docutils literal"><span class="pre">logging</span></tt> module</li>
<li><tt class="docutils literal"><span class="pre">Element.getroottree()</span></tt> returns an ElementTree for the root node of the
document that contains the element.</li>
<li>ElementTree.getpath(element) returns a simple, absolute XPath expression to
find the element in the tree structure</li>
<li>Error logs have a <tt class="docutils literal"><span class="pre">last_error</span></tt> attribute for convenience</li>
<li>Comment texts can be changed through the API</li>
<li>Formatted output via <tt class="docutils literal"><span class="pre">pretty_print</span></tt> keyword in serialization functions</li>
<li>XSLT can block access to file system and network via <tt class="docutils literal"><span class="pre">XSLTAccessControl</span></tt></li>
<li>ElementTree.write() no longer serializes in memory (reduced memory
footprint)</li>
<li>Speedup of Element.findall(tag) and Element.getiterator(tag)</li>
<li>Support for writing the XML representation of Elements and ElementTrees to
Python unicode strings via <tt class="docutils literal"><span class="pre">etree.tounicode()</span></tt></li>
<li>Support for writing XSLT results to Python unicode strings via <tt class="docutils literal"><span class="pre">unicode()</span></tt></li>
<li>Parsing a unicode string no longer copies the string (reduced memory
footprint)</li>
<li>Parsing file-like objects reads chunks rather than the whole file (reduced
memory footprint)</li>
<li>Parsing StringIO objects from the start avoids copying the string (reduced
memory footprint)</li>
<li>Read-only 'docinfo' attribute in ElementTree class holds DOCTYPE
information, original encoding and XML version as seen by the parser</li>
<li>etree module can be compiled without libxslt by commenting out the line
<tt class="docutils literal"><span class="pre">include</span> <span class="pre">&quot;xslt.pxi&quot;</span></tt> near the end of the etree.pyx source file</li>
<li>Better error messages in parser exceptions</li>
<li>Error reporting also works in XSLT</li>
<li>Support for custom document loaders (URI resolvers) in parsers and XSLT,
resolvers are registered at parser level</li>
<li>Implementation of exslt:regexp for XSLT based on the Python 're' module,
enabled by default, can be switched off with 'regexp=False' keyword argument</li>
<li>Support for exslt extensions (libexslt) and libxslt extra functions
(node-set, document, write, output)</li>
<li>Substantial speedup in XPath.evaluate()</li>
<li>HTMLParser for parsing (broken) HTML</li>
<li>XMLDTDID function parses XML into tuple (root node, ID dict) based on xml:id
implementation of libxml2 (as opposed to ET compatible XMLID)</li>
</ul>
</div>
<div class="section">
<h2><a id="id90" name="id90">Bugs fixed</a></h2>
<ul class="simple">
<li>Memory leak in Element.__setitem__</li>
<li>Memory leak in Element.attrib.items() and Element.attrib.values()</li>
<li>Memory leak in XPath extension functions</li>
<li>Memory leak in unicode related setup code</li>
<li>Element now raises ValueError on empty tag names</li>
<li>Namespace fixing after moving elements between documents could fail if the
source document was freed too early</li>
<li>Setting namespace-less tag names on namespaced elements ('{ns}t' -&gt; 't')
didn't reset the namespace</li>
<li>Unknown constants from newer libxml2 versions could raise exceptions in the
error handlers</li>
<li>lxml.etree compiles much faster</li>
<li>On libxml2 &lt;= 2.6.22, parsing strings with encoding declaration could fail
in certain cases</li>
<li>Document reference in ElementTree objects was not updated when the root
element was moved to a different document</li>
<li>Running absolute XPath expressions on an Element now evaluates against the
root tree</li>
<li>Evaluating absolute XPath expressions (<tt class="docutils literal"><span class="pre">/*</span></tt>) on an ElementTree could fail</li>
<li>Crashes when calling XSLT, RelaxNG, etc. with uninitialized ElementTree
objects</li>
<li>Removed public function <tt class="docutils literal"><span class="pre">initThreadLogging()</span></tt>, replaced by more general
<tt class="docutils literal"><span class="pre">initThread()</span></tt> which fixes a number of setup problems in threads</li>
<li>Memory leak when using iconv encoders in tostring/write</li>
<li>Deep copying Elements and ElementTrees maintains the document information</li>
<li>Serialization functions raise LookupError for unknown encodings</li>
<li>Memory deallocation crash resulting from deep copying elements</li>
<li>Some ElementTree methods could crash if the root node was not initialized
(neither file nor element passed to the constructor)</li>
<li>Element/SubElement failed to set attribute namespaces from passed <tt class="docutils literal"><span class="pre">attrib</span></tt>
dictionary</li>
<li><tt class="docutils literal"><span class="pre">tostring()</span></tt> adds an XML declaration for non-ASCII encodings</li>
<li><tt class="docutils literal"><span class="pre">tostring()</span></tt> failed to serialize encodings that contain 0-bytes</li>
<li>ElementTree.xpath() and XPathDocumentEvaluator were not using the
ElementTree root node as reference point</li>
<li>Calling <tt class="docutils literal"><span class="pre">document('')</span></tt> in XSLT failed to return the stylesheet</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id91" name="id91">0.9.2 (2006-05-10)</a></h1>
<div class="section">
<h2><a id="id92" name="id92">Features added</a></h2>
<ul class="simple">
<li>Speedup for Element.makeelement(): the new element reuses the original
libxml2 document instead of creating a new empty one</li>
<li>Speedup for reversed() iteration over element children (Py2.4+ only)</li>
<li>ElementTree compatible QName class</li>
<li>RelaxNG and XMLSchema accept any Element, not only ElementTrees</li>
</ul>
</div>
<div class="section">
<h2><a id="id93" name="id93">Bugs fixed</a></h2>
<ul class="simple">
<li>str(xslt_result) was broken for XSLT output other than UTF-8</li>
<li>Memory leak if write_c14n fails to write the file after conversion</li>
<li>Crash in XMLSchema and RelaxNG when passing non-schema documents</li>
<li>Memory leak in RelaxNG() when RelaxNGParseError is raised</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id94" name="id94">0.9.1 (2006-03-30)</a></h1>
<div class="section">
<h2><a id="id95" name="id95">Features added</a></h2>
<ul class="simple">
<li>lxml.sax.ElementTreeContentHandler checks closing elements and raises
SaxError on mismatch</li>
<li>lxml.sax.ElementTreeContentHandler supports namespace-less SAX events
(startElement, endElement) and defaults to empty attributes (keyword
argument)</li>
<li>Speedup for repeatedly accessing element tag names</li>
<li>Minor API performance improvements</li>
</ul>
</div>
<div class="section">
<h2><a id="id96" name="id96">Bugs fixed</a></h2>
<ul class="simple">
<li>Memory deallocation bug when using XSLT output method &quot;html&quot;</li>
<li>sax.py was handling UTF-8 encoded tag names where it shouldn't</li>
<li>lxml.tests package will no longer be installed (is still in source tar)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id97" name="id97">0.9 (2006-03-20)</a></h1>
<div class="section">
<h2><a id="id98" name="id98">Features added</a></h2>
<ul class="simple">
<li>Error logging API for libxml2 error messages</li>
<li>Various performance improvements</li>
<li>Benchmark script for lxml, ElementTree and cElementTree</li>
<li>Support for registering extension functions through new FunctionNamespace
class (see doc/extensions.txt)</li>
<li>ETXPath class for XPath expressions in ElementTree notation ('//{ns}tag')</li>
<li>Support for variables in XPath expressions (also in XPath class)</li>
<li>XPath class for compiled XPath expressions</li>
<li>XMLID module level function (ElementTree compatible)</li>
<li>XMLParser API for customized libxml2 parser configuration</li>
<li>Support for custom Element classes through new Namespace API (see
doc/namespace_extensions.txt)</li>
<li>Common exception base class LxmlError for module exceptions</li>
<li>real iterator support in iter(Element), Element.getiterator()</li>
<li>XSLT objects are callable, result trees support str()</li>
<li>Added MANIFEST.in for easier creation of RPM files.</li>
<li>'getparent' method on elements allows navigation to an element's
parent element.</li>
<li>Python core compatible SAX tree builder and SAX event generator. See
doc/sax.txt for more information.</li>
</ul>
</div>
<div class="section">
<h2><a id="id99" name="id99">Bugs fixed</a></h2>
<ul class="simple">
<li>Segfaults and memory leaks in various API functions of Element</li>
<li>Segfault in XSLT.tostring()</li>
<li>ElementTree objects no longer interfere, Elements can be root of different
ElementTrees at the same time</li>
<li>document('') works in XSLT documents read from files (in-memory documents
cannot support this due to libxslt deficiencies)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id100" name="id100">0.8 (2005-11-03)</a></h1>
<div class="section">
<h2><a id="id101" name="id101">Features added</a></h2>
<ul class="simple">
<li>Support for copy.deepcopy() on elements. copy.copy() works also, but
does the same thing, and does <em>not</em> create a shallow copy, as that
makes no sense in the context of libxml2 trees. This means a
potential incompatibility with ElementTree, but there's more chance
that it works than if copy.copy() isn't supported at all.</li>
<li>Increased compatibility with (c)ElementTree; .parse() on ElementTree is
supported and parsing of gzipped XML files works.</li>
<li>implemented index() on elements, allowing one to find the index of a
SubElement.</li>
</ul>
</div>
<div class="section">
<h2><a id="id102" name="id102">Bugs fixed</a></h2>
<ul class="simple">
<li>Use xslt-config instead of xml2-config to find out libxml2
directories to take into account a case where libxslt is installed
in a different directory than libxslt.</li>
<li>Eliminate crash condition in iteration when text nodes are changed.</li>
<li>Passing 'None' to tostring() does not result in a segfault anymore,
but an AssertionError.</li>
<li>Some test fixes for Windows.</li>
<li>Raise XMLSyntaxError and XPathSyntaxError instead of plain python
syntax errors. This should be less confusing.</li>
<li>Fixed error with uncaught exception in Pyrex code.</li>
<li>Calling lxml.etree.fromstring('') throws XMLSyntaxError instead of a
segfault.</li>
<li>has_key() works on attrib. 'in' tests also work correctly on attrib.</li>
<li>INSTALL.txt was saying 2.2.16 instead of 2.6.16 as a supported
libxml2 version, as it should.</li>
<li>Passing a UTF-8 encoded string to the XML() function would fail;
fixed.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id103" name="id103">0.7 (2005-06-15)</a></h1>
<div class="section">
<h2><a id="id104" name="id104">Features added</a></h2>
<ul class="simple">
<li>parameters (XPath expressions) can be passed to XSLT using keyword
parameters.</li>
<li>Simple XInclude support. Calling the xinclude() method on a tree
will process any XInclude statements in the document.</li>
<li>XMLSchema support. Use the XMLSchema class or the convenience
xmlschema() method on a tree to do XML Schema (XSD) validation.</li>
<li>Added convenience xslt() method on tree. This is less efficient
than the XSLT object, but makes it easier to write quick code.</li>
<li>Added convenience relaxng() method on tree. This is less efficient
than the RelaxNG object, but makes it easier to write quick code.</li>
<li>Make it possible to use XPathEvaluator with elements as well. The
XPathEvaluator in this case will retain the element so multiple
XPath queries can be made against one element efficiently. This
replaces the second argument to the .evaluate() method that existed
previously.</li>
<li>Allow registerNamespace() to be called on an XPathEvaluator, after
creation, to add additional namespaces. Also allow registerNamespaces(),
which does the same for a namespace dictionary.</li>
<li>Add 'prefix' attribute to element to be able to read prefix information.
This is entirely read-only.</li>
<li>It is possible to supply an extra nsmap keyword parameter to
the Element() and SubElement() constructors, which supplies a
prefix to namespace URI mapping. This will create namespace
prefix declarations on these elements and these prefixes will show up
in XML serialization.</li>
</ul>
</div>
<div class="section">
<h2><a id="id105" name="id105">Bugs fixed</a></h2>
<ul class="simple">
<li>Killed yet another memory management related bug: trees created
using newDoc would not get a libxml2-level dictionary, which caused
problems when deallocating these documents later if they contained a
node that came from a document with a dictionary.</li>
<li>Moving namespaced elements between documents was problematic as
references to the original document would remain. This has been fixed
by applying xmlReconciliateNs() after each move operation.</li>
<li>Can pass None to 'dump()' without segfaults.</li>
<li>tostring() works properly for non-root elements as well.</li>
<li>Cleaned out the tostring() method so it should handle encoding
correctly.</li>
<li>Cleaned out the ElementTree.write() method so it should handle encoding
correctly. Writing directly to a file should also be faster, as there is no
need to go through a Python string in that case. Made sure the test cases
test both serializing to StringIO as well as serializing to a real file.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id106" name="id106">0.6 (2005-05-14)</a></h1>
<div class="section">
<h2><a id="id107" name="id107">Features added</a></h2>
<ul class="simple">
<li>Changed setup.py so that library_dirs is also guessed. This should
help with compilation on the Mac OS X platform, where otherwise the
wrong library (shipping with the OS) could be picked up.</li>
<li>Tweaked setup.py so that it picks up the version from version.txt.</li>
</ul>
</div>
<div class="section">
<h2><a id="id108" name="id108">Bugs fixed</a></h2>
<ul class="simple">
<li>Do the right thing when handling namespaced attributes.</li>
<li>fix bug where tostring() moved nodes into new documents. tostring()
had very nasty side-effects before this fix, sorry!</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id109" name="id109">0.5.1 (2005-04-09)</a></h1>
<ul class="simple">
<li>Python 2.2 compatibility fixes.</li>
<li>unicode fixes in Element() and Comment() as well as XML(); unicode
input wasn't properly being UTF-8 encoded.</li>
</ul>
</div>
<div class="section">
<h1><a id="id110" name="id110">0.5 (2005-04-08)</a></h1>
<p>Initial public release.</p>
</div>
</div>
<div class="footer">
<hr class="footer" />
Generated on: 2008-03-26.

</div>
</body>
</html>
