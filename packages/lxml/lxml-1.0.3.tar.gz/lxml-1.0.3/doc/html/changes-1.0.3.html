<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>lxml changelog</title>
<link rel="stylesheet" href="style.css" type="text/css" />
</head>
<body>
<div class="document" id="lxml-changelog">
<h1 class="title">lxml changelog</h1>
<div class="section">
<h1><a id="id1" name="id1">1.0.3 (2006-08-08)</a></h1>
<div class="section">
<h2><a id="features-added" name="features-added">Features added</a></h2>
<ul class="simple">
<li>Element.replace(old, new) method to replace a subelement by another one</li>
</ul>
</div>
<div class="section">
<h2><a id="bugs-fixed" name="bugs-fixed">Bugs fixed</a></h2>
<ul class="simple">
<li>Crash when mixing elements from XSLT results into other trees</li>
<li>Copying/deepcopying did not work for ElementTree objects</li>
<li>Setting an attribute to a non-string value did not raise an exception</li>
<li>Element.remove() deleted the tail text from the removed Element</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id2" name="id2">1.0.2 (2006-06-27)</a></h1>
<div class="section">
<h2><a id="id3" name="id3">Features added</a></h2>
<ul class="simple">
<li>Support for setting a custom default Element class as opposed to namespace
specific classes (which still override the default class)</li>
</ul>
</div>
<div class="section">
<h2><a id="id4" name="id4">Bugs fixed</a></h2>
<ul class="simple">
<li>Rare exceptions in Python list functions were not handled</li>
<li>Parsing accepted unicode strings with XML encoding declaration in certain
cases</li>
<li>Parsing 8-bit encoded strings from StringIO objects raised an exception</li>
<li>Module function <tt class="docutils literal"><span class="pre">initThread()</span></tt> was removed - useless (and never worked)</li>
<li>XSLT and parser exception messages include the error line number</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id5" name="id5">1.0.1 (2006-06-09)</a></h1>
<div class="section">
<h2><a id="id6" name="id6">Features added</a></h2>
<ul class="simple">
<li>Repeated calls to Element.attrib now efficiently return the same instance</li>
</ul>
</div>
<div class="section">
<h2><a id="id7" name="id7">Bugs fixed</a></h2>
<ul class="simple">
<li>Document deallocation could crash in certain garbage collection scenarios</li>
<li>Extension function calls in XSLT variable declarations could break the
stylesheet and crash on repeated calls</li>
<li>Deep copying Elements could loose namespaces declared in parents</li>
<li>Deep copying Elements did not copy tail</li>
<li>Parsing file(-like) objects failed to load external entities</li>
<li>Parsing 8-bit strings from file(-like) objects raised an exception</li>
<li>xsl:include failed when the stylesheet was parsed from a file-like object</li>
<li>lxml.sax.ElementTreeProducer did not call startDocument() / endDocument()</li>
<li>MSVC compiler complained about long strings (supports only 2048 bytes)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id8" name="id8">1.0 (2006-06-01)</a></h1>
<div class="section">
<h2><a id="id9" name="id9">Features added</a></h2>
<ul class="simple">
<li>Element.getiterator() and the findall() methods support finding arbitrary
elements from a namespace (pattern <tt class="docutils literal"><span class="pre">{namespace}*</span></tt>)</li>
<li>Another speedup in tree iteration code</li>
<li>General speedup of Python Element object creation and deallocation</li>
<li>Writing C14N no longer serializes in memory (reduced memory footprint)</li>
<li>PyErrorLog for error logging through the Python <tt class="docutils literal"><span class="pre">logging</span></tt> module</li>
<li><tt class="docutils literal"><span class="pre">Element.getroottree()</span></tt> returns an ElementTree for the root node of the
document that contains the element.</li>
<li>ElementTree.getpath(element) returns a simple, absolute XPath expression to
find the element in the tree structure</li>
<li>Error logs have a <tt class="docutils literal"><span class="pre">last_error</span></tt> attribute for convenience</li>
<li>Comment texts can be changed through the API</li>
<li>Formatted output via <tt class="docutils literal"><span class="pre">pretty_print</span></tt> keyword in serialization functions</li>
<li>XSLT can block access to file system and network via <tt class="docutils literal"><span class="pre">XSLTAccessControl</span></tt></li>
<li>ElementTree.write() no longer serializes in memory (reduced memory
footprint)</li>
<li>Speedup of Element.findall(tag) and Element.getiterator(tag)</li>
<li>Support for writing the XML representation of Elements and ElementTrees to
Python unicode strings via <tt class="docutils literal"><span class="pre">etree.tounicode()</span></tt></li>
<li>Support for writing XSLT results to Python unicode strings via <tt class="docutils literal"><span class="pre">unicode()</span></tt></li>
<li>Parsing a unicode string no longer copies the string (reduced memory
footprint)</li>
<li>Parsing file-like objects reads chunks rather than the whole file (reduced
memory footprint)</li>
<li>Parsing StringIO objects from the start avoids copying the string (reduced
memory footprint)</li>
<li>Read-only 'docinfo' attribute in ElementTree class holds DOCTYPE
information, original encoding and XML version as seen by the parser</li>
<li>etree module can be compiled without libxslt by commenting out the line
<tt class="docutils literal"><span class="pre">include</span> <span class="pre">&quot;xslt.pxi&quot;</span></tt> near the end of the etree.pyx source file</li>
<li>Better error messages in parser exceptions</li>
<li>Error reporting also works in XSLT</li>
<li>Support for custom document loaders (URI resolvers) in parsers and XSLT,
resolvers are registered at parser level</li>
<li>Implementation of exslt:regexp for XSLT based on the Python 're' module,
enabled by default, can be switched off with 'regexp=False' keyword argument</li>
<li>Support for exslt extensions (libexslt) and libxslt extra functions
(node-set, document, write, output)</li>
<li>Substantial speedup in XPath.evaluate()</li>
<li>HTMLParser for parsing (broken) HTML</li>
<li>XMLDTDID function parses XML into tuple (root node, ID dict) based on xml:id
implementation of libxml2 (as opposed to ET compatible XMLID)</li>
</ul>
</div>
<div class="section">
<h2><a id="id10" name="id10">Bugs fixed</a></h2>
<ul class="simple">
<li>Memory leak in Element.__setitem__</li>
<li>Memory leak in Element.attrib.items() and Element.attrib.values()</li>
<li>Memory leak in XPath extension functions</li>
<li>Memory leak in unicode related setup code</li>
<li>Element now raises ValueError on empty tag names</li>
<li>Namespace fixing after moving elements between documents could fail if the
source document was freed too early</li>
<li>Setting namespace-less tag names on namespaced elements ('{ns}t' -&gt; 't')
didn't reset the namespace</li>
<li>Unknown constants from newer libxml2 versions could raise exceptions in the
error handlers</li>
<li>lxml.etree compiles much faster</li>
<li>On libxml2 &lt;= 2.6.22, parsing strings with encoding declaration could fail
in certain cases</li>
<li>Document reference in ElementTree objects was not updated when the root
element was moved to a different document</li>
<li>Running absolute XPath expressions on an Element now evaluates against the
root tree</li>
<li>Evaluating absolute XPath expressions (<tt class="docutils literal"><span class="pre">/*</span></tt>) on an ElementTree could fail</li>
<li>Crashes when calling XSLT, RelaxNG, etc. with uninitialized ElementTree
objects</li>
<li>Removed public function <tt class="docutils literal"><span class="pre">initThreadLogging()</span></tt>, replaced by more general
<tt class="docutils literal"><span class="pre">initThread()</span></tt> which fixes a number of setup problems in threads</li>
<li>Memory leak when using iconv encoders in tostring/write</li>
<li>Deep copying Elements and ElementTrees maintains the document information</li>
<li>Serialization functions raise LookupError for unknown encodings</li>
<li>Memory deallocation crash resulting from deep copying elements</li>
<li>Some ElementTree methods could crash if the root node was not initialized
(neither file nor element passed to the constructor)</li>
<li>Element/SubElement failed to set attribute namespaces from passed <tt class="docutils literal"><span class="pre">attrib</span></tt>
dictionary</li>
<li><tt class="docutils literal"><span class="pre">tostring()</span></tt> adds an XML declaration for non-ASCII encodings</li>
<li><tt class="docutils literal"><span class="pre">tostring()</span></tt> failed to serialize encodings that contain 0-bytes</li>
<li>ElementTree.xpath() and XPathDocumentEvaluator were not using the
ElementTree root node as reference point</li>
<li>Calling <tt class="docutils literal"><span class="pre">document('')</span></tt> in XSLT failed to return the stylesheet</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id11" name="id11">0.9.2 (2006-05-10)</a></h1>
<div class="section">
<h2><a id="id12" name="id12">Features added</a></h2>
<ul class="simple">
<li>Speedup for Element.makeelement(): the new element reuses the original
libxml2 document instead of creating a new empty one</li>
<li>Speedup for reversed() iteration over element children (Py2.4+ only)</li>
<li>ElementTree compatible QName class</li>
<li>RelaxNG and XMLSchema accept any Element, not only ElementTrees</li>
</ul>
</div>
<div class="section">
<h2><a id="id13" name="id13">Bugs fixed</a></h2>
<ul class="simple">
<li>str(xslt_result) was broken for XSLT output other than UTF-8</li>
<li>Memory leak if write_c14n fails to write the file after conversion</li>
<li>Crash in XMLSchema and RelaxNG when passing non-schema documents</li>
<li>Memory leak in RelaxNG() when RelaxNGParseError is raised</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id14" name="id14">0.9.1 (2006-03-30)</a></h1>
<div class="section">
<h2><a id="id15" name="id15">Features added</a></h2>
<ul class="simple">
<li>lxml.sax.ElementTreeContentHandler checks closing elements and raises
SaxError on mismatch</li>
<li>lxml.sax.ElementTreeContentHandler supports namespace-less SAX events
(startElement, endElement) and defaults to empty attributes (keyword
argument)</li>
<li>Speedup for repeatedly accessing element tag names</li>
<li>Minor API performance improvements</li>
</ul>
</div>
<div class="section">
<h2><a id="id16" name="id16">Bugs fixed</a></h2>
<ul class="simple">
<li>Memory deallocation bug when using XSLT output method &quot;html&quot;</li>
<li>sax.py was handling UTF-8 encoded tag names where it shouldn't</li>
<li>lxml.tests package will no longer be installed (is still in source tar)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id17" name="id17">0.9 (2006-03-20)</a></h1>
<div class="section">
<h2><a id="id18" name="id18">Features added</a></h2>
<ul class="simple">
<li>Error logging API for libxml2 error messages</li>
<li>Various performance improvements</li>
<li>Benchmark script for lxml, ElementTree and cElementTree</li>
<li>Support for registering extension functions through new FunctionNamespace
class (see doc/extensions.txt)</li>
<li>ETXPath class for XPath expressions in ElementTree notation ('//{ns}tag')</li>
<li>Support for variables in XPath expressions (also in XPath class)</li>
<li>XPath class for compiled XPath expressions</li>
<li>XMLID module level function (ElementTree compatible)</li>
<li>XMLParser API for customized libxml2 parser configuration</li>
<li>Support for custom Element classes through new Namespace API (see
doc/namespace_extensions.txt)</li>
<li>Common exception base class LxmlError for module exceptions</li>
<li>real iterator support in iter(Element), Element.getiterator()</li>
<li>XSLT objects are callable, result trees support str()</li>
<li>Added MANIFEST.in for easier creation of RPM files.</li>
<li>'getparent' method on elements allows navigation to an element's
parent element.</li>
<li>Python core compatible SAX tree builder and SAX event generator. See
doc/sax.txt for more information.</li>
</ul>
</div>
<div class="section">
<h2><a id="id19" name="id19">Bugs fixed</a></h2>
<ul class="simple">
<li>Segfaults and memory leaks in various API functions of Element</li>
<li>Segfault in XSLT.tostring()</li>
<li>ElementTree objects no longer interfere, Elements can be root of different
ElementTrees at the same time</li>
<li>document('') works in XSLT documents read from files (in-memory documents
cannot support this due to libxslt deficiencies)</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id20" name="id20">0.8 (2005-11-03)</a></h1>
<div class="section">
<h2><a id="id21" name="id21">Features added</a></h2>
<ul class="simple">
<li>Support for copy.deepcopy() on elements. copy.copy() works also, but
does the same thing, and does <em>not</em> create a shallow copy, as that
makes no sense in the context of libxml2 trees. This means a
potential incompatibility with ElementTree, but there's more chance
that it works than if copy.copy() isn't supported at all.</li>
<li>Increased compatibility with (c)ElementTree; .parse() on ElementTree is
supported and parsing of gzipped XML files works.</li>
<li>implemented index() on elements, allowing one to find the index of a
SubElement.</li>
</ul>
</div>
<div class="section">
<h2><a id="id22" name="id22">Bugs fixed</a></h2>
<ul class="simple">
<li>Use xslt-config instead of xml2-config to find out libxml2
directories to take into account a case where libxslt is installed
in a different directory than libxslt.</li>
<li>Eliminate crash condition in iteration when text nodes are changed.</li>
<li>Passing 'None' to tostring() does not result in a segfault anymore,
but an AssertionError.</li>
<li>Some test fixes for Windows.</li>
<li>Raise XMLSyntaxError and XPathSyntaxError instead of plain python
syntax errors. This should be less confusing.</li>
<li>Fixed error with uncaught exception in Pyrex code.</li>
<li>Calling lxml.etree.fromstring('') throws XMLSyntaxError instead of a
segfault.</li>
<li>has_key() works on attrib. 'in' tests also work correctly on attrib.</li>
<li>INSTALL.txt was saying 2.2.16 instead of 2.6.16 as a supported
libxml2 version, as it should.</li>
<li>Passing a UTF-8 encoded string to the XML() function would fail;
fixed.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id23" name="id23">0.7 (2005-06-15)</a></h1>
<div class="section">
<h2><a id="id24" name="id24">Features added</a></h2>
<ul class="simple">
<li>parameters (XPath expressions) can be passed to XSLT using keyword
parameters.</li>
<li>Simple XInclude support. Calling the xinclude() method on a tree
will process any XInclude statements in the document.</li>
<li>XMLSchema support. Use the XMLSchema class or the convenience
xmlschema() method on a tree to do XML Schema (XSD) validation.</li>
<li>Added convenience xslt() method on tree. This is less efficient
than the XSLT object, but makes it easier to write quick code.</li>
<li>Added convenience relaxng() method on tree. This is less efficient
than the RelaxNG object, but makes it easier to write quick code.</li>
<li>Make it possible to use XPathEvaluator with elements as well. The
XPathEvaluator in this case will retain the element so multiple
XPath queries can be made against one element efficiently. This
replaces the second argument to the .evaluate() method that existed
previously.</li>
<li>Allow registerNamespace() to be called on an XPathEvaluator, after
creation, to add additional namespaces. Also allow registerNamespaces(),
which does the same for a namespace dictionary.</li>
<li>Add 'prefix' attribute to element to be able to read prefix information.
This is entirely read-only.</li>
<li>It is possible to supply an extra nsmap keyword parameter to
the Element() and SubElement() constructors, which supplies a
prefix to namespace URI mapping. This will create namespace
prefix declarations on these elements and these prefixes will show up
in XML serialization.</li>
</ul>
</div>
<div class="section">
<h2><a id="id25" name="id25">Bugs fixed</a></h2>
<ul class="simple">
<li>Killed yet another memory management related bug: trees created
using newDoc would not get a libxml2-level dictionary, which caused
problems when deallocating these documents later if they contained a
node that came from a document with a dictionary.</li>
<li>Moving namespaced elements between documents was problematic as
references to the original document would remain. This has been fixed
by applying xmlReconciliateNs() after each move operation.</li>
<li>Can pass None to 'dump()' without segfaults.</li>
<li>tostring() works properly for non-root elements as well.</li>
<li>Cleaned out the tostring() method so it should handle encoding
correctly.</li>
<li>Cleaned out the ElementTree.write() method so it should handle encoding
correctly. Writing directly to a file should also be faster, as there is no
need to go through a Python string in that case. Made sure the test cases
test both serializing to StringIO as well as serializing to a real file.</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id26" name="id26">0.6 (2005-05-14)</a></h1>
<div class="section">
<h2><a id="id27" name="id27">Features added</a></h2>
<ul class="simple">
<li>Changed setup.py so that library_dirs is also guessed. This should
help with compilation on the Mac OS X platform, where otherwise the
wrong library (shipping with the OS) could be picked up.</li>
<li>Tweaked setup.py so that it picks up the version from version.txt.</li>
</ul>
</div>
<div class="section">
<h2><a id="id28" name="id28">Bugs fixed</a></h2>
<ul class="simple">
<li>Do the right thing when handling namespaced attributes.</li>
<li>fix bug where tostring() moved nodes into new documents. tostring()
had very nasty side-effects before this fix, sorry!</li>
</ul>
</div>
</div>
<div class="section">
<h1><a id="id29" name="id29">0.5.1 (2005-04-09)</a></h1>
<ul class="simple">
<li>Python 2.2 compatibility fixes.</li>
<li>unicode fixes in Element() and Comment() as well as XML(); unicode
input wasn't properly being UTF-8 encoded.</li>
</ul>
</div>
<div class="section">
<h1><a id="id30" name="id30">0.5 (2005-04-08)</a></h1>
<p>Initial public release.</p>
</div>
</div>
</body>
</html>
