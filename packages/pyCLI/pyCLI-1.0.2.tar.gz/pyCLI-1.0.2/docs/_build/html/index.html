<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cli — command line tools &mdash; pyCLI v1.0.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '1.0.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="pyCLI v1.0.1 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li><a href="#">pyCLI v1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-cli">
<h1><tt class="xref docutils literal"><span class="pre">cli</span></tt> &#8212; command line tools<a class="headerlink" href="#module-cli" title="Permalink to this headline">¶</a></h1>
<p>The <tt class="xref docutils literal"><span class="pre">cli</span></tt> package is a framework for making simple, correct command
line applications in Python. With <tt class="xref docutils literal"><span class="pre">cli</span></tt>, you can quickly add
standard <a class="reference external" href="http://www.python.org/dev/peps/pep-0389/#deprecation-of-optparse">command line parsing</a>; <a class="reference external" href="http://docs.python.org/library/logging.html">logging</a>; <a class="reference external" href="http://docs.python.org/library/unittest.html">unit</a> and <a class="reference external" href="http://pythonpaste.org/scripttest/">functional</a>
testing; <a class="reference external" href="http://docs.python.org/library/configparser.html">configuration file parsing</a>; and <a class="reference external" href="http://docs.python.org/library/profile.html">profiling</a> to your CLI
apps. To make it easier to do the right thing, <tt class="xref docutils literal"><span class="pre">cli</span></tt> wraps all of
these tools into a single, consistent application interface.</p>
<div class="section" id="installing-cli">
<h2>Installing <tt class="xref docutils literal"><span class="pre">cli</span></tt><a class="headerlink" href="#installing-cli" title="Permalink to this headline">¶</a></h2>
<p>You can install the latest stable version of <tt class="xref docutils literal"><span class="pre">cli</span></tt> using <strong>pip</strong>:</p>
<div class="highlight-none"><div class="highlight"><pre>$ pip install pyCLI
</pre></div>
</div>
<p>You can also browse the project&#8217;s <a class="reference external" href="http://mercurial.selenic.com/">Mercurial</a> <a class="reference external" href="http://code.lfod.us/cli">repository</a>. If you&#8217;d
like to contribute changes, start by cloning the repository:</p>
<div class="highlight-none"><div class="highlight"><pre>$ hg clone http://code.lfod.us/cli
</pre></div>
</div>
<p>You can also follow the project&#8217;s <a class="reference external" href="http://code.lfod.us/cli/log">changelog</a>.</p>
</div>
<div class="section" id="a-quick-tour-of-cli-s-features">
<h2>A quick tour of <tt class="xref docutils literal"><span class="pre">cli</span></tt>&#8216;s features<a class="headerlink" href="#a-quick-tour-of-cli-s-features" title="Permalink to this headline">¶</a></h2>
<p>Command line parsing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">cli</span>

<span class="nd">@cli.CommandLineApp</span>
<span class="k">def</span> <span class="nf">ls</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">ls</span><span class="o">.</span><span class="n">add_param</span><span class="p">(</span><span class="s">&quot;-l&quot;</span><span class="p">,</span> <span class="s">&quot;--long&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&quot;list in long format&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&quot;store_true&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">ls</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>When run, this script produces the following output:</p>
<div class="highlight-none"><div class="highlight"><pre>$ python ls.py -h
usage: ls [-h] [-l]

optional arguments:
  -h, --help  show this help message and exit
  -l, --long  list in long format
</pre></div>
</div>
<p>Logging:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">cli</span>
<span class="nd">@cli.LoggingApp</span>
<span class="k">def</span> <span class="nf">sleep</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s">&quot;About to sleep for </span><span class="si">%d</span><span class="s"> seconds&quot;</span> <span class="o">%</span> <span class="n">app</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span>

<span class="n">sleep</span><span class="o">.</span><span class="n">add_param</span><span class="p">(</span><span class="s">&quot;seconds&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&quot;time to sleep&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">sleep</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Which produces the following:</p>
<div class="highlight-none"><div class="highlight"><pre>$ python sleep.py -h
usage: sleep [-h] [-l] [-q] [-s] [-v] seconds

positional arguments:
  seconds        time to sleep

optional arguments:
  -h, --help     show this help message and exit
  -l, --logfile  log to file (default: log to stdout)
  -q, --quiet    decrease the verbosity
  -s, --silent   only log warnings
  -v, --verbose  raise the verbosity
$ python sleep.py -vv 3
About to sleep for 3 seconds
</pre></div>
</div>
<p>Daemonizing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">cli</span>
<span class="nd">@cli.DaemonizingApp</span>
<span class="k">def</span> <span class="nf">daemon</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">app</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">daemonize</span><span class="p">:</span>
        <span class="n">app</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;About to daemonize&quot;</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">daemonize</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">daemon</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-none"><div class="highlight"><pre>$ python daemon.py -h
usage: daemon [-h] [-l] [-q] [-s] [-v] [-d] [-u USER] [-p PIDFILE]

optional arguments:
  -h, --help            show this help message and exit
  -l, --logfile         log to file (default: log to stdout)
  -q, --quiet           decrease the verbosity
  -s, --silent          only log warnings
  -v, --verbose         raise the verbosity
  -d, --daemonize       run the application in the background
  -u USER, --user USER  change to USER[:GROUP] after daemonizing
  -p PIDFILE, --pidfile PIDFILE
                        write PID to PIDFILE after daemonizing
$ python daemon.py -d -vv
About to daemonize
</pre></div>
</div>
</div>
<div class="section" id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>While the <tt class="xref docutils literal"><span class="pre">cli</span></tt> modules provide a simple API for designing your own
applications, the default implementations are intended to be flexible
enough to cover most use cases. No matter which <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a> you
use, the basic pattern is the same: create a callable that does the
work, wrap it in an <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a>, add some parameters and call
its <tt class="xref docutils literal"><span class="pre">run()</span></tt> method.</p>
<p>Your callable may be a simple function or a more complex class that
implements the <tt class="xref docutils literal"><span class="pre">__call__()</span></tt> protocol. Either way, it should accept a
single <tt class="xref docutils literal"><span class="pre">app</span></tt> instance as its only argument. It will use this
object to interact with the application framework, find out what
arguments were passed on the command line, log messages, etc.</p>
<p>You can wrap the callable in one of two ways. First,
<a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a> can be thought of as a decorator (see <span class="target" id="index-38"></span><a class="reference external" href="http://www.python.org/dev/peps/pep-0318"><strong>PEP 318</strong></a>
for more information). For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@cli.Application</span>
<span class="k">def</span> <span class="nf">yourapp</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">do_stuff</span><span class="p">()</span>
</pre></div>
</div>
<p>If you need to pass keyword arguments to the application, you can still
use the decorator pattern:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@cli.CommandLineApp</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;-v&quot;</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">yourapp</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">do_stuff</span><span class="p">()</span>
</pre></div>
</div>
<p>If you don&#8217;t like decorators (or your interpreter doesn&#8217;t support them),
you can also simply pass your application callable to the
<a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">yourapp</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">do_stuff</span><span class="p">()</span>

<span class="n">yourapp</span> <span class="o">=</span> <span class="n">cli</span><span class="o">.</span><span class="n">CommandLineApp</span><span class="p">(</span><span class="n">yourapp</span><span class="p">)</span>
</pre></div>
</div>
<p>Most of the supplied <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a> implementations support
parameters. Parameters determine how your users interact with your
program on the command line. To add parameters to your application, call
<tt class="xref docutils literal"><span class="pre">add_param()</span></tt> after you&#8217;ve wrapped your callable:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">yourapp</span><span class="o">.</span><span class="n">add_param</span><span class="p">(</span><span class="s">&quot;-v&quot;</span><span class="p">,</span> <span class="s">&quot;--verbose&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">&quot;increase the verbosity&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">&quot;count&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The interface here is the same as that implemented by
<tt class="xref docutils literal"><span class="pre">argparse.ArgumentParser</span></tt>. In this case, an <tt class="xref docutils literal"><span class="pre">verbose</span></tt>
attribute will be created on the <tt class="xref docutils literal"><span class="pre">app.params</span></tt> object with an
integer representing the desired verbosity level.</p>
<p>Once you&#8217;ve added all the parameters you need (if any &#8211; the default
implementations include sensible defaults), simply call the <tt class="xref docutils literal"><span class="pre">run()</span></tt>
method on the wrapped callable. It&#8217;s best to do this only if your script
is actually being run, so shield it with a conditional:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">yourapp</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>This will allow you to import your application and tweak it
programmatically from another script without actually invoking it.</p>
</div>
<div class="section" id="best-practices">
<h2>Best practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h2>
<p><tt class="xref docutils literal"><span class="pre">cli</span></tt> is designed to encourage a simple set of best practices in
script development. Following this simple guide will help you write
robust, maintainable and user-friendly scripts.</p>
<div class="section" id="use-a-standard-style">
<h3>Use a standard style<a class="headerlink" href="#use-a-standard-style" title="Permalink to this headline">¶</a></h3>
<p>A standard and clear coding style will make it easier for you to read
your scripts months or years after you first wrote them. A good style
will also help other people quickly understand your code so that they
can use it, too and (hopefully) help you improve it.</p>
<p>Since you&#8217;re writing your scripts in Python, it is strongly recommended
that you follow the coding style described in <span class="target" id="index-39"></span><a class="reference external" href="http://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a>. This style is
easy to read and will be recognized by most people familiar with Python.</p>
</div>
<div class="section" id="modularize">
<h3>Modularize<a class="headerlink" href="#modularize" title="Permalink to this headline">¶</a></h3>
<p>Monolithic code is hard to read. By breaking your script into functions,
classes and maybe even separate modules, you help the reader (including
your future self) navigate the code. Modular code can also be easily
reused so that you don&#8217;t have to continually reimplement useful
functions in all of your scripts.</p>
<p>When writing or refactoring your code to make it more modular, a good
rule of thumb is to break large functions or methods into chunks that
fit on a single screen (perhaps up to 50 lines of code or so). These
chunks are large enough to get the job done but small enough for your
reader to fully comprehend them.</p>
</div>
<div class="section" id="share-your-code">
<h3>Share your code<a class="headerlink" href="#share-your-code" title="Permalink to this headline">¶</a></h3>
<p>If you&#8217;ve written modular code, you&#8217;ll find it easy to package it for
wider distribution. Sharing your code helps other programmers or system
administrators solve similar problems. Even better, the more users you
have, the more likely you are to receive support or contributions from
your community.</p>
<p>Start with the <a class="reference external" href="http://guide.python-distribute.org/">Hitchhiker&#8217;s Guide to Packaging</a>, which will soon become
part of the official <a class="reference external" href="http://www.python.org/doc/">Python documentation</a>.</p>
</div>
<div class="section" id="test-your-code">
<h3>Test your code<a class="headerlink" href="#test-your-code" title="Permalink to this headline">¶</a></h3>
<p>In most cases, you can make your code more robust by adding tests to
verify specific algorithms or even the macro behavior of the entire
script. For testing small chunks of your code (unit tests), <tt class="xref docutils literal"><span class="pre">cli</span></tt>
provides <a title="cli.test.AppTest" class="reference internal" href="#cli.test.AppTest"><tt class="xref docutils literal"><span class="pre">cli.test.AppTest</span></tt></a>, a <tt class="xref docutils literal"><span class="pre">unittest.TestCase</span></tt>
with a few customizations to make it more useful for testing
command line applications. To test larger behavior (functional
tests), use <a title="cli.test.FunctionalTest" class="reference internal" href="#cli.test.FunctionalTest"><tt class="xref docutils literal"><span class="pre">cli.test.FunctionalTest</span></tt></a>. <tt class="xref docutils literal"><span class="pre">cli</span></tt> itself
uses both of these classes for its own tests; for examples, see the
<tt class="docutils literal"><span class="pre">tests/functional/</span></tt> directory shipped with the <tt class="xref docutils literal"><span class="pre">cli</span></tt> package.</p>
<p>When packaging your scripts, use Titus&#8217; <a class="reference external" href="http://github.com/ctb/SomePackage">SomePackage</a> as a guide for
integrating your tests.</p>
</div>
</div>
<div class="section" id="module-cli.test">
<h2>API<a class="headerlink" href="#module-cli.test" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cli-app-basic-applications">
<h3><tt class="xref docutils literal"><span class="pre">cli.app</span></tt> &#8211; basic applications<a class="headerlink" href="#cli-app-basic-applications" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="xref docutils literal"><span class="pre">cli.app</span></tt> module establishes the basis for all of the other
applications and is a good place to start when looking to extend
<a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> functionality or to understand the basic API.</p>
<dl class="class">
<dt id="cli.app.Application">
<em class="property">class </em><tt class="descclassname">cli.app.</tt><tt class="descname">Application</tt><big>(</big><em>main=None</em>, <em>name=None</em>, <em>exit_after_main=True</em>, <em>stdin=None</em>, <em>stdout=None</em>, <em>stderr=None</em>, <em>version=None</em>, <em>description=None</em>, <em>argv=None</em>, <em>profiler=None</em><big>)</big><a class="headerlink" href="#cli.app.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">object</span></tt></p>
<p>An application.</p>
<p><a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> constructors should always be called with
keyword arguments, though the <em>main</em> argument may be passed
positionally (as when <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> or its subclasses are
instantiated as decorators). Arguments are:</p>
<p><em>main</em> is the callable object that performs the main work of the
application. The callable must accept an <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a>
instance as its sole argument. If <em>main</em> is <tt class="xref docutils literal"><span class="pre">None</span></tt>, it is assumed that
a valid callable will be passed to the <a title="cli.app.Application.__call__" class="reference internal" href="#cli.app.Application.__call__"><tt class="xref docutils literal"><span class="pre">__call__()</span></tt></a> method (when
using an <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> instance as a decorator). If <em>main</em> is
not None, the <a title="cli.app.Application.setup" class="reference internal" href="#cli.app.Application.setup"><tt class="xref docutils literal"><span class="pre">setup()</span></tt></a> method will be called, allowing
subclasses to customize the order in which certain setup steps are
executed.</p>
<p><em>name</em> is the name of the application itself. If <em>name</em> is not <tt class="xref docutils literal"><span class="pre">None</span></tt>,
the <a title="cli.app.Application.name" class="reference internal" href="#cli.app.Application.name"><tt class="xref docutils literal"><span class="pre">name</span></tt></a> property will inspect the <tt class="xref docutils literal"><span class="pre">main</span></tt> callable and
use its function or class name.</p>
<p><em>exit_after_main</em> determines whether the application will call
<tt class="xref docutils literal"><span class="pre">sys.exit()</span></tt> after <tt class="xref docutils literal"><span class="pre">main</span></tt> completes.</p>
<p><em>stdin</em>, <em>stderr</em> and <em>stdout</em> are file objects that represent the 
usual application input and outputs. If they are <tt class="xref docutils literal"><span class="pre">None</span></tt>, they will
be replaced with <tt class="xref docutils literal"><span class="pre">sys.stdin</span></tt>, <tt class="xref docutils literal"><span class="pre">sys.stderr</span></tt> and
<tt class="xref docutils literal"><span class="pre">sys.stdout</span></tt>, respectively.</p>
<p><em>version</em> is a string representing the application&#8217;s version.</p>
<p><em>description</em> is a string describing the application. If
<em>description</em> is <tt class="xref docutils literal"><span class="pre">None</span></tt>, the <a title="cli.app.Application.description" class="reference internal" href="#cli.app.Application.description"><tt class="xref docutils literal"><span class="pre">description</span></tt></a> property will use
the <tt class="xref docutils literal"><span class="pre">main</span></tt> callable&#8217;s <tt class="xref docutils literal"><span class="pre">__doc__</span></tt> attribute instead.</p>
<p><em>argv</em> is a list of strings representing the options passed on the
command line. If <em>argv</em> is <tt class="xref docutils literal"><span class="pre">None</span></tt>, <tt class="xref docutils literal"><span class="pre">sys.argv</span></tt> will be used
instead.</p>
<p><em>profiler</em> is a <a title="cli.profiler.Profiler" class="reference internal" href="#cli.profiler.Profiler"><tt class="xref docutils literal"><span class="pre">cli.profiler.Profiler</span></tt></a> instance. If not
<tt class="xref docutils literal"><span class="pre">None</span></tt>, the profiler will be available to the running application.</p>
<p>In all but a very few cases, subclasses that override the constructor
should call <tt class="xref docutils literal"><span class="pre">Application.__init__()</span></tt> at the end of the
overridden method to ensure that the <a title="cli.app.Application.setup" class="reference internal" href="#cli.app.Application.setup"><tt class="xref docutils literal"><span class="pre">setup()</span></tt></a> method is
called.</p>
<dl class="method">
<dt id="cli.app.Application.__call__">
<tt class="descname">__call__</tt><big>(</big><em>main</em><big>)</big><a class="headerlink" href="#cli.app.Application.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap the <em>main</em> callable and return an <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> instance.</p>
<p>This method is useful when it is necessary to pass keyword
arguments to the <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> constructor when
decorating callables. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@cli.Application</span><span class="p">(</span><span class="n">stderr</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>In this case, <a title="cli.app.Application.setup" class="reference internal" href="#cli.app.Application.setup"><tt class="xref docutils literal"><span class="pre">setup()</span></tt></a> will occur during <a title="cli.app.Application.__call__" class="reference internal" href="#cli.app.Application.__call__"><tt class="xref docutils literal"><span class="pre">__call__()</span></tt></a>,
not when the <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> is first constructed.</p>
</dd></dl>

<dl class="attribute">
<dt id="cli.app.Application.description">
<tt class="descname">description</tt><a class="headerlink" href="#cli.app.Application.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A string describing the application.</p>
<p>Unless specified when the <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> was created, this
property will examine the <tt class="xref docutils literal"><span class="pre">main</span></tt> callable and use its
docstring (<tt class="xref docutils literal"><span class="pre">__doc__</span></tt> attribute).</p>
</dd></dl>

<dl class="attribute">
<dt id="cli.app.Application.name">
<tt class="descname">name</tt><a class="headerlink" href="#cli.app.Application.name" title="Permalink to this definition">¶</a></dt>
<dd><p>A string identifying the application.</p>
<p>Unless specified when the <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> was created, this
property will examine the <tt class="xref docutils literal"><span class="pre">main</span></tt> callable and use its
name (<tt class="xref docutils literal"><span class="pre">__name__</span></tt> or <tt class="xref docutils literal"><span class="pre">func_name</span></tt> for classes or
functions, respectively).</p>
</dd></dl>

<dl class="method">
<dt id="cli.app.Application.post_run">
<tt class="descname">post_run</tt><big>(</big><em>returned</em><big>)</big><a class="headerlink" href="#cli.app.Application.post_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean up after the application.</p>
<p>After <tt class="xref docutils literal"><span class="pre">main</span></tt> has been called, <a title="cli.app.Application.run" class="reference internal" href="#cli.app.Application.run"><tt class="xref docutils literal"><span class="pre">run()</span></tt></a> passes the
return value to this method. By default, <a title="cli.app.Application.post_run" class="reference internal" href="#cli.app.Application.post_run"><tt class="xref docutils literal"><span class="pre">post_run()</span></tt></a>
decides whether to call <tt class="xref docutils literal"><span class="pre">sys.exit()</span></tt> (based on the
value of the <tt class="xref docutils literal"><span class="pre">exit_after_main</span></tt> attribute) or pass the
value back to <a title="cli.app.Application.run" class="reference internal" href="#cli.app.Application.run"><tt class="xref docutils literal"><span class="pre">run()</span></tt></a>. Subclasses should probably preserve
this behavior.</p>
</dd></dl>

<dl class="method">
<dt id="cli.app.Application.pre_run">
<tt class="descname">pre_run</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.app.Application.pre_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform any last-minute configuration.</p>
<p>The <a title="cli.app.Application.pre_run" class="reference internal" href="#cli.app.Application.pre_run"><tt class="xref docutils literal"><span class="pre">pre_run()</span></tt></a> method is called by the <a title="cli.app.Application.run" class="reference internal" href="#cli.app.Application.run"><tt class="xref docutils literal"><span class="pre">run()</span></tt></a> method
before <tt class="xref docutils literal"><span class="pre">main</span></tt> is executed. This is a good time to do
things like read a configuration file or parse command line
arguments. The base implementation does nothing.</p>
</dd></dl>

<dl class="method">
<dt id="cli.app.Application.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.app.Application.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the application, returning its return value.</p>
<p>This method first calls <a title="cli.app.Application.pre_run" class="reference internal" href="#cli.app.Application.pre_run"><tt class="xref docutils literal"><span class="pre">pre_run()</span></tt></a> and then calls
<tt class="xref docutils literal"><span class="pre">main</span></tt>, passing it an instance of the <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a>
itself as its only argument. The return value is then passed to
<a title="cli.app.Application.post_run" class="reference internal" href="#cli.app.Application.post_run"><tt class="xref docutils literal"><span class="pre">post_run()</span></tt></a> which may modify it (or terminate the
application entirely).</p>
</dd></dl>

<dl class="method">
<dt id="cli.app.Application.setup">
<tt class="descname">setup</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.app.Application.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a>.</p>
<p>This method is provided so that subclasses can easily customize
the configuration process without having to reimplement the base
constructor. <a title="cli.app.Application.setup" class="reference internal" href="#cli.app.Application.setup"><tt class="xref docutils literal"><span class="pre">setup()</span></tt></a> is called once, either by the base
constructor or <a title="cli.app.Application.__call__" class="reference internal" href="#cli.app.Application.__call__"><tt class="xref docutils literal"><span class="pre">__call__()</span></tt></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cli.app.CommandLineApp">
<em class="property">class </em><tt class="descclassname">cli.app.</tt><tt class="descname">CommandLineApp</tt><big>(</big><em>main=None</em>, <em>usage=None</em>, <em>epilog=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cli.app.CommandLineApp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a></p>
<p>A command line application.</p>
<p>Command line applications extend the basic <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a>
framework to support command line parsing using the <tt class="xref docutils literal"><span class="pre">argparse</span></tt>
module. As with <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a> itself, <em>main</em> should be a
callable. Other arguments are:</p>
<p><em>usage</em> is a string describing command line usage of the
application. If it is not supplied, <tt class="xref docutils literal"><span class="pre">argparse</span></tt> will
automatically generate a usage statement based on the application&#8217;s
parameters.</p>
<p><em>epilog</em> is text appended to the argument descriptions.</p>
<p>The rest of the arguments are passed to the <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">Application</span></tt></a>
constructor.</p>
<dl class="method">
<dt id="cli.app.CommandLineApp.add_param">
<tt class="descname">add_param</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cli.app.CommandLineApp.add_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a parameter.</p>
<p><a title="cli.app.CommandLineApp.add_param" class="reference internal" href="#cli.app.CommandLineApp.add_param"><tt class="xref docutils literal"><span class="pre">add_param()</span></tt></a> wraps
<tt class="xref docutils literal"><span class="pre">argparse.ArgumentParser.add_argument()</span></tt>, storing the
parameter options in a dictionary. This information can be used
later by other subclasses when deciding whether to override
parameters.</p>
</dd></dl>

<dl class="attribute">
<dt id="cli.app.CommandLineApp.argparser_factory">
<tt class="descname">argparser_factory</tt><a class="headerlink" href="#cli.app.CommandLineApp.argparser_factory" title="Permalink to this definition">¶</a></dt>
<dd>alias of <tt class="xref docutils literal"><span class="pre">ArgumentParser</span></tt></dd></dl>

<dl class="attribute">
<dt id="cli.app.CommandLineApp.formatter">
<tt class="descname">formatter</tt><a class="headerlink" href="#cli.app.CommandLineApp.formatter" title="Permalink to this definition">¶</a></dt>
<dd>alias of <tt class="xref docutils literal"><span class="pre">HelpFormatter</span></tt></dd></dl>

<dl class="attribute">
<dt id="cli.app.CommandLineApp.params">
<tt class="descname">params</tt><a class="headerlink" href="#cli.app.CommandLineApp.params" title="Permalink to this definition">¶</a></dt>
<dd>The <a title="cli.app.CommandLineApp.params" class="reference internal" href="#cli.app.CommandLineApp.params"><tt class="xref docutils literal"><span class="pre">params</span></tt></a> attribute is an object with attributes
containing the values of the parsed command line arguments.
Specifically, its an instance of <tt class="xref docutils literal"><span class="pre">argparse.Namespace</span></tt>,
but only the mapping of attributes to argument values should be
relied upon.</dd></dl>

<dl class="method">
<dt id="cli.app.CommandLineApp.pre_run">
<tt class="descname">pre_run</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.app.CommandLineApp.pre_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse command line.</p>
<p>During <a title="cli.app.CommandLineApp.pre_run" class="reference internal" href="#cli.app.CommandLineApp.pre_run"><tt class="xref docutils literal"><span class="pre">pre_run()</span></tt></a>, <a title="cli.app.CommandLineApp" class="reference internal" href="#cli.app.CommandLineApp"><tt class="xref docutils literal"><span class="pre">CommandLineApp</span></tt></a>
passes the application&#8217;s <tt class="xref docutils literal"><span class="pre">argv</span></tt> attribute to
<tt class="xref docutils literal"><span class="pre">argparse.ArgumentParser.parse_args()</span></tt>. The results are
stored in <a title="cli.app.CommandLineApp.params" class="reference internal" href="#cli.app.CommandLineApp.params"><tt class="xref docutils literal"><span class="pre">params</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cli.app.CommandLineApp.setup">
<tt class="descname">setup</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.app.CommandLineApp.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the <a title="cli.app.CommandLineApp" class="reference internal" href="#cli.app.CommandLineApp"><tt class="xref docutils literal"><span class="pre">CommandLineApp</span></tt></a>.</p>
<p>During setup, the application instantiates the
<tt class="xref docutils literal"><span class="pre">argparse.ArgumentParser</span></tt> and adds a version parameter
(<em class="xref">-V</em>, to avoid clashing with <em class="xref">-v</em>
verbose).</p>
</dd></dl>

<dl class="method">
<dt id="cli.app.CommandLineApp.update_params">
<tt class="descname">update_params</tt><big>(</big><em>params</em>, <em>newparams</em><big>)</big><a class="headerlink" href="#cli.app.CommandLineApp.update_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a parameter namespace.</p>
<p>The <em>params</em> instance will be updated with the names and values
from <em>newparams</em> and then returned.</p>
<p>
<span class="versionmodified">Changed in version 1.0.2: </span><a title="cli.app.CommandLineApp.update_params" class="reference internal" href="#cli.app.CommandLineApp.update_params"><tt class="xref docutils literal"><span class="pre">update_params()</span></tt></a> expects and returns
<tt class="xref docutils literal"><span class="pre">argparse.Namespace</span></tt> instances; previously, it took
keyword arguments and updated <a title="cli.app.CommandLineApp.params" class="reference internal" href="#cli.app.CommandLineApp.params"><tt class="xref docutils literal"><span class="pre">params</span></tt></a> itself. This is
now left to the caller.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cli-log-logging-applications">
<h3><tt class="xref docutils literal"><span class="pre">cli.log</span></tt> &#8211; logging applications<a class="headerlink" href="#cli-log-logging-applications" title="Permalink to this headline">¶</a></h3>
<p>Logging applications use the standard library <tt class="xref docutils literal"><span class="pre">logging</span></tt> module to
handle log messages.</p>
<dl class="class">
<dt id="cli.log.LoggingApp">
<em class="property">class </em><tt class="descclassname">cli.log.</tt><tt class="descname">LoggingApp</tt><big>(</big><em>main=None</em>, <em>stream=&lt;open file '&lt;stdout&gt;'</em>, <em>mode 'w' at 0x8b604070&gt;</em>, <em>logfile=None</em>, <em>message_format='%(message)s'</em>, <em>date_format='%(asctime)s %(message)s'</em>, <em>root=True</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cli.log.LoggingApp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a title="cli.app.CommandLineApp" class="reference internal" href="#cli.app.CommandLineApp"><tt class="xref docutils literal"><span class="pre">cli.app.CommandLineApp</span></tt></a></p>
<p>A command-line application that knows how to log.</p>
<p>The <a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">LoggingApp</span></tt></a> further extends the <a title="cli.app.CommandLineApp" class="reference internal" href="#cli.app.CommandLineApp"><tt class="xref docutils literal"><span class="pre">cli.app.CommandLineApp</span></tt></a>,
allowing command line configuration of the application logger. In
addition to those supported by the standard <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a> and
<a title="cli.app.CommandLineApp" class="reference internal" href="#cli.app.CommandLineApp"><tt class="xref docutils literal"><span class="pre">cli.app.CommandLineApp</span></tt></a>, arguments are:</p>
<p><em>stream</em> is an open file object to which the log messages will be
written. By default, this is standard output (not standard error, as
might be expected).</p>
<p><em>logfile</em> is the name of a file which will be opened by the
<tt class="xref docutils literal"><span class="pre">logging.FileHandler</span></tt>.</p>
<p><em>message_format</em> and <em>date_format</em> are passed directly to the 
<a title="cli.log.CommandLineLogger" class="reference internal" href="#cli.log.CommandLineLogger"><tt class="xref docutils literal"><span class="pre">CommandLineLogger</span></tt></a> and are interpreted as in the 
<tt class="xref docutils literal"><span class="pre">logging</span></tt> package.</p>
<p>If <em>root</em> is True, the <a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">LoggingApp</span></tt></a> will make itself the root
logger. This means that, for example, code that knows nothing about
the <a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">LoggingApp</span></tt></a> can inherit its verbosity level, formatters
and handlers.</p>
<dl class="method">
<dt id="cli.log.LoggingApp.pre_run">
<tt class="descname">pre_run</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.log.LoggingApp.pre_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the verbosity level and configure the logger.</p>
<p>The application passes the <tt class="xref docutils literal"><span class="pre">params</span></tt> object
to the <a title="cli.log.CommandLineLogger" class="reference internal" href="#cli.log.CommandLineLogger"><tt class="xref docutils literal"><span class="pre">CommandLineLogger</span></tt></a>&#8216;s special
<a title="cli.log.CommandLineLogger.setLevel" class="reference internal" href="#cli.log.CommandLineLogger.setLevel"><tt class="xref docutils literal"><span class="pre">CommandLineLogger.setLevel()</span></tt></a> method to set the logger&#8217;s
verbosity and then initializes the logging handlers. If the
<tt class="xref docutils literal"><span class="pre">logfile</span></tt> attribute is not <tt class="xref docutils literal"><span class="pre">None</span></tt>, it is passed to a
<tt class="xref docutils literal"><span class="pre">logging.FileHandler</span></tt> instance and that is added to the
handler list. Otherwise, if the <tt class="xref docutils literal"><span class="pre">stream</span></tt> attribute is
not <tt class="xref docutils literal"><span class="pre">None</span></tt>, it is passed to a <tt class="xref docutils literal"><span class="pre">logging.StreamHandler</span></tt>
instance and that becomes the main handler.</p>
</dd></dl>

<dl class="method">
<dt id="cli.log.LoggingApp.setup">
<tt class="descname">setup</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.log.LoggingApp.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the <a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">LoggingApp</span></tt></a>.</p>
<p>This method adds the <em class="xref">-l</em>, <em class="xref">q</em>,
<em class="xref">-s</em> and <em class="xref">-v</em> parameters to the
application and instantiates the <tt class="xref docutils literal"><span class="pre">log</span></tt> attribute.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cli.log.CommandLineLogger">
<em class="property">class </em><tt class="descclassname">cli.log.</tt><tt class="descname">CommandLineLogger</tt><big>(</big><em>name</em>, <em>level=0</em><big>)</big><a class="headerlink" href="#cli.log.CommandLineLogger" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">logging.Logger</span></tt></p>
<p>Provide extra configuration smarts for loggers.</p>
<p>In addition to the powers of a regular logger, a
<a title="cli.log.CommandLineLogger" class="reference internal" href="#cli.log.CommandLineLogger"><tt class="xref docutils literal"><span class="pre">CommandLineLogger</span></tt></a> can set its verbosity levels based on a
populated <tt class="xref docutils literal"><span class="pre">argparse.Namespace</span></tt>.</p>
<dl class="attribute">
<dt id="cli.log.CommandLineLogger.default_level">
<tt class="descname">default_level</tt><a class="headerlink" href="#cli.log.CommandLineLogger.default_level" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer representing the default logging level.</p>
<p>Default: <tt class="xref docutils literal"><span class="pre">logging.WARN</span></tt> (only warning messages will be
shown).</p>
</dd></dl>

<dl class="method">
<dt id="cli.log.CommandLineLogger.setLevel">
<tt class="descname">setLevel</tt><big>(</big><em>ns</em><big>)</big><a class="headerlink" href="#cli.log.CommandLineLogger.setLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the logger verbosity level.</p>
<p><em>ns</em> is an object with <tt class="xref docutils literal"><span class="pre">verbose</span></tt>, <tt class="xref docutils literal"><span class="pre">quiet</span></tt> and
<tt class="xref docutils literal"><span class="pre">silent</span></tt> attributes. <tt class="xref docutils literal"><span class="pre">verbose</span></tt> and <tt class="xref docutils literal"><span class="pre">quiet</span></tt> may
be positive integers or zero; <tt class="xref docutils literal"><span class="pre">silent</span></tt> is <tt class="xref docutils literal"><span class="pre">True</span></tt> or <tt class="xref docutils literal"><span class="pre">False</span></tt>.
If <tt class="xref docutils literal"><span class="pre">silent</span></tt> is True, the logger&#8217;s level will be set to
<a title="cli.log.CommandLineLogger.silent_level" class="reference internal" href="#cli.log.CommandLineLogger.silent_level"><tt class="xref docutils literal"><span class="pre">silent_level</span></tt></a>. Otherwise, the difference between
<tt class="xref docutils literal"><span class="pre">quiet</span></tt> and <tt class="xref docutils literal"><span class="pre">verbose</span></tt> will be multiplied by 10 so it
fits on the standard logging scale and then added to
<a title="cli.log.CommandLineLogger.default_level" class="reference internal" href="#cli.log.CommandLineLogger.default_level"><tt class="xref docutils literal"><span class="pre">default_level</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="cli.log.CommandLineLogger.silent_level">
<tt class="descname">silent_level</tt><a class="headerlink" href="#cli.log.CommandLineLogger.silent_level" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer representing the silent logging level.</p>
<p>Default: <tt class="xref docutils literal"><span class="pre">logging.CRITICAL</span></tt> (only critical messages will
be shown).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cli-daemon-daemonizing-applications">
<h3><tt class="xref docutils literal"><span class="pre">cli.daemon</span></tt> &#8211; daemonizing applications<a class="headerlink" href="#cli-daemon-daemonizing-applications" title="Permalink to this headline">¶</a></h3>
<p>Daemonizing applications run in the background, forking themselves off.</p>
<dl class="class">
<dt id="cli.daemon.DaemonizingApp">
<em class="property">class </em><tt class="descclassname">cli.daemon.</tt><tt class="descname">DaemonizingApp</tt><big>(</big><em>main=None</em>, <em>pidfile=None</em>, <em>chdir='/'</em>, <em>null='/dev/null'</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cli.daemon.DaemonizingApp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">cli.log.LoggingApp</span></tt></a></p>
<p>A command-line application that knows how to daemonize.</p>
<p>The <a title="cli.daemon.DaemonizingApp" class="reference internal" href="#cli.daemon.DaemonizingApp"><tt class="xref docutils literal"><span class="pre">DaemonizingApp</span></tt></a> extends the <a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">cli.log.LoggingApp</span></tt></a>
(for it&#8217;s not very helpful to daemonize without being able to log
messages somewhere). In addition to those supported by the standard
<a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a>, <a title="cli.app.CommandLineApp" class="reference internal" href="#cli.app.CommandLineApp"><tt class="xref docutils literal"><span class="pre">cli.app.CommandLineApp</span></tt></a> and
<a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">cli.log.LoggingApp</span></tt></a>, arguments are:</p>
<p><em>pidfile</em> is a string pointing to a file where the application will
write its process ID after it daemonizes. If it is <tt class="xref docutils literal"><span class="pre">None</span></tt>, no such
file will be created.</p>
<p><em>chdir</em> is a string pointing to a directory to which the application
will change after it daemonizes.</p>
<p><em>null</em> is a string representing a file that will be opened to
replace stdin, stdout and stderr when the application daemonizes. By
default, this <tt class="xref docutils literal"><span class="pre">os.path.devnull</span></tt>.</p>
<dl class="method">
<dt id="cli.daemon.DaemonizingApp.daemonize">
<tt class="descname">daemonize</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.daemon.DaemonizingApp.daemonize" title="Permalink to this definition">¶</a></dt>
<dd><p>Run in the background.</p>
<p><a title="cli.daemon.DaemonizingApp.daemonize" class="reference internal" href="#cli.daemon.DaemonizingApp.daemonize"><tt class="xref docutils literal"><span class="pre">daemonize()</span></tt></a> must be called explicitly by the application
when it&#8217;s ready to fork into the background. It forks, flushes
and replaces stdin, stderr and stdout with the open <tt class="xref docutils literal"><span class="pre">null</span></tt>
file and, if requested on the command line, writes its PID to a
file and changes user/group.</p>
</dd></dl>

<dl class="method">
<dt id="cli.daemon.DaemonizingApp.setup">
<tt class="descname">setup</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.daemon.DaemonizingApp.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the <a title="cli.daemon.DaemonizingApp" class="reference internal" href="#cli.daemon.DaemonizingApp"><tt class="xref docutils literal"><span class="pre">DaemonizingApp</span></tt></a>.</p>
<p>This method adds the <em class="xref">-d</em>, <em class="xref">u</em>,
and <em class="xref">-p</em> parameters to the application.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cli-profiler-statistical-and-deterministic-application-profiling">
<h3><tt class="xref docutils literal"><span class="pre">cli.profiler</span></tt> &#8211; statistical and deterministic application profiling<a class="headerlink" href="#cli-profiler-statistical-and-deterministic-application-profiling" title="Permalink to this headline">¶</a></h3>
<p>The <a title="cli.profiler.Profiler" class="reference internal" href="#cli.profiler.Profiler"><tt class="xref docutils literal"><span class="pre">Profiler</span></tt></a> can help you quickly measure your application&#8217;s
overall performance or focus on specific sections.</p>
<dl class="class">
<dt id="cli.profiler.Profiler">
<em class="property">class </em><tt class="descclassname">cli.profiler.</tt><tt class="descname">Profiler</tt><big>(</big><em>stdout=None</em>, <em>anonymous=False</em>, <em>count=1000</em>, <em>repeat=3</em><big>)</big><a class="headerlink" href="#cli.profiler.Profiler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">object</span></tt></p>
<p>A profiling tool.</p>
<p>The <a title="cli.profiler.Profiler" class="reference internal" href="#cli.profiler.Profiler"><tt class="xref docutils literal"><span class="pre">Profiler</span></tt></a> provides two decorator methods which can help
you improve the performance of your code. Arguments are:</p>
<p><em>stdout</em> is a file-like object into which the profiling report will
be written.</p>
<p>If <em>anonymous</em> is True, the profiling decorators will run in-place.
Be careful when combining this option with <em>count</em> greater than 1 if
the block of code in question may have side effects. This is useful
for testing a specific block of code within a larger program; for
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">profiler</span> <span class="o">=</span> <span class="n">Profiler</span><span class="p">(</span><span class="n">anonymous</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">biglist</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c"># The profiler will measure the code defined in the anonymous</span>
<span class="c"># block function and then proceed with the rest of the script.</span>
<span class="c"># Note that you must take extra precautions to make sure that</span>
<span class="c"># names defined in the anonymous block are valid outside of its</span>
<span class="c"># scope.</span>
<span class="nd">@profiler.deterministic</span>
<span class="k">def</span> <span class="nf">block</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">biglist</span>
    <span class="n">biglist</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">)</span>

<span class="n">length</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">biglist</span><span class="p">)</span>
</pre></div>
</div>
<p><em>count</em> and <em>repeat</em> control the number of iterations the code in
question will be run in the <a title="cli.profiler.Profiler.statistical" class="reference internal" href="#cli.profiler.Profiler.statistical"><tt class="xref docutils literal"><span class="pre">statistical()</span></tt></a> profiler.</p>
<dl class="method">
<dt id="cli.profiler.Profiler.deterministic">
<tt class="descname">deterministic</tt><big>(</big><em>func</em><big>)</big><a class="headerlink" href="#cli.profiler.Profiler.deterministic" title="Permalink to this definition">¶</a></dt>
<dd><p>Deterministically evaluate <em>func</em>&#8216;s performance.</p>
<p><em>func</em> should be a callable. It will be decorated with
a simple function that uses the standard library&#8217;s
<tt class="xref docutils literal"><span class="pre">profile.Profile</span></tt> to trace and time each step of <em>func</em>&#8216;s
execution. After <em>func</em> is profiled, a report will be written
to <tt class="xref docutils literal"><span class="pre">stdout</span></tt>. The profiling statistics are saved to the
<tt class="xref docutils literal"><span class="pre">stats</span></tt> attribute after the run.</p>
</dd></dl>

<dl class="method">
<dt id="cli.profiler.Profiler.isanon">
<tt class="descname">isanon</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#cli.profiler.Profiler.isanon" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the <em>name</em> seems to be anonymous.</p>
<p>Callables whose names are &#8220;anonymous&#8221; or that start with
&#8220;__profiler_&#8221; are considered anonymous.</p>
</dd></dl>

<dl class="method">
<dt id="cli.profiler.Profiler.statistical">
<tt class="descname">statistical</tt><big>(</big><em>func</em><big>)</big><a class="headerlink" href="#cli.profiler.Profiler.statistical" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <em>func</em> many times, reporting the best run time.</p>
<p>This profiling method wraps <em>func</em> with a decorator that
performs <tt class="xref docutils literal"><span class="pre">repeat</span></tt> runs, executing <em>func</em> <tt class="xref docutils literal"><span class="pre">count</span></tt>
times each run. The profiler will average the execution time for
each loop and report the best time on <tt class="xref docutils literal"><span class="pre">stdout</span></tt>. The result
is saved at <tt class="xref docutils literal"><span class="pre">result</span></tt> &#8211; divide this number by
<tt class="xref docutils literal"><span class="pre">count</span></tt> to determine the average execution time.</p>
<p>This profiler is useful for comparing the speed of equivalent
implementations of similar algorithms.</p>
</dd></dl>

<dl class="method">
<dt id="cli.profiler.Profiler.wrap">
<tt class="descname">wrap</tt><big>(</big><em>wrapper</em>, <em>wrapped</em><big>)</big><a class="headerlink" href="#cli.profiler.Profiler.wrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap callable <em>wrapped</em> with <em>wrapper</em>.</p>
<p><a title="cli.profiler.Profiler.wrap" class="reference internal" href="#cli.profiler.Profiler.wrap"><tt class="xref docutils literal"><span class="pre">wrap()</span></tt></a> calls <tt class="xref docutils literal"><span class="pre">functools.update_wrapper()</span></tt> (or an
equivalent implementation if not available) to preserve the
callable&#8217;s metadata. If <tt class="xref docutils literal"><span class="pre">anonymous</span></tt> is True or the
<em>wrapped</em> callable&#8217;s name is anonymous (see <a title="cli.profiler.Profiler.isanon" class="reference internal" href="#cli.profiler.Profiler.isanon"><tt class="xref docutils literal"><span class="pre">isanon()</span></tt></a>),
the wrapped callable will be executed in-place. Otherwise, the
wrapped callable will simply be returned (like a decorator).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cli-config-applications-that-read-config-files">
<h3><tt class="xref docutils literal"><span class="pre">cli.config</span></tt> &#8211; applications that read config files<a class="headerlink" href="#cli-config-applications-that-read-config-files" title="Permalink to this headline">¶</a></h3>
<p>
<span class="versionmodified">New in version 1.0.2.</span></p>
<p>The <tt class="xref docutils literal"><span class="pre">cli.config</span></tt> module provides an application that knows how to
read a variety of config file formats.</p>
<dl class="class">
<dt id="cli.config.BaseParser">
<em class="property">class </em><tt class="descclassname">cli.config.</tt><tt class="descname">BaseParser</tt><a class="headerlink" href="#cli.config.BaseParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">object</span></tt></p>
<p>Defines the parser API.</p>
<p>Parsers must provide implementations for both <a title="cli.config.BaseParser.read" class="reference internal" href="#cli.config.BaseParser.read"><tt class="xref docutils literal"><span class="pre">read()</span></tt></a> and
<a title="cli.config.BaseParser.write" class="reference internal" href="#cli.config.BaseParser.write"><tt class="xref docutils literal"><span class="pre">write()</span></tt></a>. Calls to either <a title="cli.config.BaseParser.read" class="reference internal" href="#cli.config.BaseParser.read"><tt class="xref docutils literal"><span class="pre">read()</span></tt></a> or <a title="cli.config.BaseParser.write" class="reference internal" href="#cli.config.BaseParser.write"><tt class="xref docutils literal"><span class="pre">write()</span></tt></a> should
be idempotent; that is, they should not change the parser&#8217;s overall
state.</p>
<p>All configuration files should include one or more sections. Each
section may contain one or more key/value pairs. Some configuration
parsers may support typed data or nested sections.</p>
<p>If present, a <a title="cli.config.ConfigApp" class="reference internal" href="#cli.config.ConfigApp"><tt class="xref docutils literal"><span class="pre">ConfigApp</span></tt></a> will examine the special &#8220;parameters&#8221;
section and use it to find values for options not specified on the
command line.</p>
<dl class="method">
<dt id="cli.config.BaseParser.read">
<tt class="descname">read</tt><big>(</big><em>config</em><big>)</big><a class="headerlink" href="#cli.config.BaseParser.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a configuration file.</p>
<p><em>config</em> is a file-like object with data in a format the
parser understands. The parser calls the file-like object&#8217;s
<a title="cli.config.BaseParser.read" class="reference internal" href="#cli.config.BaseParser.read"><tt class="xref docutils literal"><span class="pre">read()</span></tt></a> method, parses the contents and returns a
dictionary representing the configuration.</p>
</dd></dl>

<dl class="method">
<dt id="cli.config.BaseParser.write">
<tt class="descname">write</tt><big>(</big><em>config</em>, <em>buffer</em><big>)</big><a class="headerlink" href="#cli.config.BaseParser.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialize the provided configuration and write it out.</p>
<p><em>config</em> should be a dictionary with section names as its keys.
Its values should also be dictionaries containing key/value
pairs. <em>buffer</em> should be a file-like object. The parser will
format the configuration dictionary and write it to the output
buffer.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cli.config.ConfigApp">
<em class="property">class </em><tt class="descclassname">cli.config.</tt><tt class="descname">ConfigApp</tt><big>(</big><em>main=None</em>, <em>configfile=None</em>, <em>configparser_factory=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cli.config.ConfigApp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">cli.log.LoggingApp</span></tt></a></p>
<p>A command-line application that reads a configuration file.</p>
<p>A <a title="cli.config.ConfigApp" class="reference internal" href="#cli.config.ConfigApp"><tt class="xref docutils literal"><span class="pre">ConfigApp</span></tt></a> is a <a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">cli.log.LoggingApp</span></tt></a> that
optionally reads a configuration file on startup. This configuration
file can be written in one of several formats and may define an
additional set of default parameter values. Values defined on the
command line override those in the config file. In addition to
those supported by the standard <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a> and
<a title="cli.log.LoggingApp" class="reference internal" href="#cli.log.LoggingApp"><tt class="xref docutils literal"><span class="pre">cli.log.LoggingApp</span></tt></a>, arguments are:</p>
<p><em>configfile</em> is a file-like object or a string representing a path
to a configuration file. If <em>configfile</em> is None, no configuration
file will be read.</p>
<dl class="attribute">
<dt id="cli.config.ConfigApp.config">
<tt class="descname">config</tt><a class="headerlink" href="#cli.config.ConfigApp.config" title="Permalink to this definition">¶</a></dt>
<dd><p>A Namespace instance.</p>
<p><a title="cli.config.ConfigApp.config" class="reference internal" href="#cli.config.ConfigApp.config"><tt class="xref docutils literal"><span class="pre">config</span></tt></a> contains the parsed configuration file (if any).
Its attributes map to the config file&#8217;s sections. Its
attributes&#8217; attributes and their values map to the keys and
values of the sections, respectively.</p>
</dd></dl>

<dl class="method">
<dt id="cli.config.ConfigApp.configparams">
<tt class="descname">configparams</tt><big>(</big><em>parameters</em><big>)</big><a class="headerlink" href="#cli.config.ConfigApp.configparams" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract parameter values from a parsed config file.</p>
<p><em>parameters</em> is a dictionary containing the keys and values from
the parameters section of a config file. For each action
defined by <tt class="xref docutils literal"><span class="pre">add_param()</span></tt> and saved in <tt class="xref docutils literal"><span class="pre">actions</span></tt>,
check for an If it exists, its value is passed to the
<tt class="xref docutils literal"><span class="pre">argparse.Action</span></tt> instance. If the action is a
<tt class="xref docutils literal"><span class="pre">argparse._CountAction</span></tt>, the value should be a integer;
for an integer <em>n</em>, the action will be called <em>n</em> times. For
other actions, the value is passed directly to the action.</p>
</dd></dl>

<dl class="attribute">
<dt id="cli.config.ConfigApp.configparser_factory">
<tt class="descname">configparser_factory</tt><a class="headerlink" href="#cli.config.ConfigApp.configparser_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>A factory that produces configuration parsers.</p>
<p>Usually, the factory will be a class that inherits from
<a title="cli.config.BaseParser" class="reference internal" href="#cli.config.BaseParser"><tt class="xref docutils literal"><span class="pre">BaseParser</span></tt></a>. It must override the <a title="cli.config.BaseParser.read" class="reference internal" href="#cli.config.BaseParser.read"><tt class="xref docutils literal"><span class="pre">BaseParser.read()</span></tt></a>
and <a title="cli.config.BaseParser.write" class="reference internal" href="#cli.config.BaseParser.write"><tt class="xref docutils literal"><span class="pre">BaseParser.write()</span></tt></a> methods.</p>
</dd></dl>

<dl class="method">
<dt id="cli.config.ConfigApp.pre_run">
<tt class="descname">pre_run</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.config.ConfigApp.pre_run" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the configuration file and update the parameters.</p>
<p>First, parse arguments on the command line (so that the user
can specify an alternate configuration file). Then, call the
<tt class="xref docutils literal"><span class="pre">configparser</span></tt>&#8216;s <tt class="xref docutils literal"><span class="pre">read()</span></tt> method on the config file.
If the parsed configuration file contains a <em>parameters</em>
section, pass those values to the <tt class="xref docutils literal"><span class="pre">argparse.Action</span></tt>
instances created by <a title="cli.app.CommandLineApp.add_param" class="reference internal" href="#cli.app.CommandLineApp.add_param"><tt class="xref docutils literal"><span class="pre">cli.app.CommandLineApp.add_param()</span></tt></a>.
Finally, update the config file parameters with the parameters
found on the command line and then save the merged parameters as
<a title="cli.app.CommandLineApp.params" class="reference internal" href="#cli.app.CommandLineApp.params"><tt class="xref docutils literal"><span class="pre">cli.app.CommandLineApp.params</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="cli.config.ConfigApp.setup">
<tt class="descname">setup</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.config.ConfigApp.setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the <a title="cli.config.ConfigApp" class="reference internal" href="#cli.config.ConfigApp"><tt class="xref docutils literal"><span class="pre">ConfigApp</span></tt></a>.</p>
<p>This method adds the <em class="xref">-f</em> parameter to the application.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cli.config.IniConfigParser">
<em class="property">class </em><tt class="descclassname">cli.config.</tt><tt class="descname">IniConfigParser</tt><a class="headerlink" href="#cli.config.IniConfigParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a title="cli.config.BaseParser" class="reference internal" href="#cli.config.BaseParser"><tt class="xref docutils literal"><span class="pre">cli.config.BaseParser</span></tt></a></p>
<p>An .ini-style configuration file parser.</p>
<p>The <a title="cli.config.IniConfigParser" class="reference internal" href="#cli.config.IniConfigParser"><tt class="xref docutils literal"><span class="pre">IniConfigParser</span></tt></a> uses the standard
<tt class="xref docutils literal"><span class="pre">ConfigParser.ConfigParser</span></tt> to read and write its
configuration files; see the ConfigParser documentation for a
description of the format.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="xref docutils literal"><span class="pre">ConfigParser.ConfigParser</span></tt> values are always strings.
This makes this parser unsuitable (without extension) for things
like setting a default value for the verbose parameter (which
must be an integer).</p>
</div>
</dd></dl>

<dl class="class">
<dt id="cli.config.JSONConfigParser">
<em class="property">class </em><tt class="descclassname">cli.config.</tt><tt class="descname">JSONConfigParser</tt><a class="headerlink" href="#cli.config.JSONConfigParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a title="cli.config.BaseParser" class="reference internal" href="#cli.config.BaseParser"><tt class="xref docutils literal"><span class="pre">cli.config.BaseParser</span></tt></a></p>
<p>A JSON configuration file parser.</p>
<p>This parser reads configuration files written to conform to
<span class="target" id="index-40"></span><a class="reference external" href="http://tools.ietf.org/html/rfc4627.html"><strong>RFC 4627</strong></a> using the <tt class="xref docutils literal"><span class="pre">json</span></tt> or <tt class="xref docutils literal"><span class="pre">simplejson</span></tt> modules.
The root of the JSON document should be a dictionary with
strings as its keys and other dictionaries as its values. For
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s">&quot;verbose&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
    <span class="s">&quot;database&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s">&quot;host&quot;</span><span class="p">:</span> <span class="s">&quot;localhost&quot;</span><span class="p">,</span> <span class="s">&quot;user&quot;</span><span class="p">:</span> <span class="s">&quot;admin&quot;</span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="cli.config.PythonConfigParser">
<em class="property">class </em><tt class="descclassname">cli.config.</tt><tt class="descname">PythonConfigParser</tt><a class="headerlink" href="#cli.config.PythonConfigParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a title="cli.config.BaseParser" class="reference internal" href="#cli.config.BaseParser"><tt class="xref docutils literal"><span class="pre">cli.config.BaseParser</span></tt></a></p>
<p>A Python configuration file parser.</p>
<p>Python configuration files contain Python code that can be parsed by
the interpreter&#8217;s <em>exec</em> statement. The file must contain a series
of dictionaries, each with any number of keys and values. For
example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;verbose&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">database</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&quot;host&quot;</span><span class="p">:</span> <span class="s">&quot;localhost&quot;</span><span class="p">,</span>
    <span class="s">&quot;user&quot;</span><span class="p">:</span> <span class="s">&quot;admin&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="cli-test-functional-and-unit-test-support">
<h3><tt class="xref docutils literal"><span class="pre">cli.test</span></tt> &#8211; functional and unit test support<a class="headerlink" href="#cli-test-functional-and-unit-test-support" title="Permalink to this headline">¶</a></h3>
<p>
<span class="versionmodified">New in version 1.0.2.</span></p>
<p>This module provides support for easily writing both functional and
unit tests for your scripts.</p>
<dl class="class">
<dt id="cli.test.AppTest">
<em class="property">class </em><tt class="descclassname">cli.test.</tt><tt class="descname">AppTest</tt><big>(</big><em>methodName='runTest'</em><big>)</big><a class="headerlink" href="#cli.test.AppTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">unittest2.case.TestCase</span></tt></p>
<p>An application test, based on <tt class="xref docutils literal"><span class="pre">unittest.TestCase</span></tt>.</p>
<p><a title="cli.test.AppTest" class="reference internal" href="#cli.test.AppTest"><tt class="xref docutils literal"><span class="pre">AppTest</span></tt></a> provides a simple <a title="cli.test.AppTest.setUp" class="reference internal" href="#cli.test.AppTest.setUp"><tt class="xref docutils literal"><span class="pre">setUp()</span></tt></a> method
to instantiate <a title="cli.test.AppTest.app_cls" class="reference internal" href="#cli.test.AppTest.app_cls"><tt class="xref docutils literal"><span class="pre">app_cls</span></tt></a>, your application&#8217;s class.
<a title="cli.test.AppTest.default_kwargs" class="reference internal" href="#cli.test.AppTest.default_kwargs"><tt class="xref docutils literal"><span class="pre">default_kwargs</span></tt></a> will be passed to the new application then.</p>
<dl class="attribute">
<dt id="cli.test.AppTest.app_cls">
<tt class="descname">app_cls</tt><a class="headerlink" href="#cli.test.AppTest.app_cls" title="Permalink to this definition">¶</a></dt>
<dd>An application, usually descended from <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a>.</dd></dl>

<dl class="attribute">
<dt id="cli.test.AppTest.default_kwargs">
<tt class="descname">default_kwargs</tt><a class="headerlink" href="#cli.test.AppTest.default_kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Default keyword arguments that will be passed to the new <a title="cli.app.Application" class="reference internal" href="#cli.app.Application"><tt class="xref docutils literal"><span class="pre">cli.app.Application</span></tt></a> instance.</p>
<p>By default, the application won&#8217;t see any command line arguments and
will not raise SystemExit when the <tt class="xref docutils literal"><span class="pre">main()</span></tt> function returns.</p>
</dd></dl>

<dl class="method">
<dt id="cli.test.AppTest.setUp">
<tt class="descname">setUp</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.test.AppTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up the application.</p>
<p><a title="cli.test.AppTest.setUp" class="reference internal" href="#cli.test.AppTest.setUp"><tt class="xref docutils literal"><span class="pre">setUp()</span></tt></a> instantiates <a title="cli.test.AppTest.app_cls" class="reference internal" href="#cli.test.AppTest.app_cls"><tt class="xref docutils literal"><span class="pre">app_cls</span></tt></a> and
stores it at <tt class="xref docutils literal"><span class="pre">app</span></tt>. Test methods should call
the application&#8217;s <a title="cli.app.Application.setup" class="reference internal" href="#cli.app.Application.setup"><tt class="xref docutils literal"><span class="pre">cli.app.Application.setup()</span></tt></a>,
<a title="cli.app.Application.pre_run" class="reference internal" href="#cli.app.Application.pre_run"><tt class="xref docutils literal"><span class="pre">cli.app.Application.pre_run()</span></tt></a> and
<a title="cli.app.Application.run" class="reference internal" href="#cli.app.Application.run"><tt class="xref docutils literal"><span class="pre">cli.app.Application.run()</span></tt></a> methods as necessary.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="cli.test.FunctionalTest">
<em class="property">class </em><tt class="descclassname">cli.test.</tt><tt class="descname">FunctionalTest</tt><big>(</big><em>methodName='runTest'</em><big>)</big><a class="headerlink" href="#cli.test.FunctionalTest" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref docutils literal"><span class="pre">unittest2.case.TestCase</span></tt></p>
<p>A functional test, also based on <tt class="xref docutils literal"><span class="pre">unittest.TestCase</span></tt>.</p>
<p>Functional tests monitor an application&#8217;s &#8216;macro&#8217; behavior, making
it easy to spot regressions. They can also be simpler to write and
maintain as they don&#8217;t rely on any application internals.</p>
<p>The <a title="cli.test.FunctionalTest" class="reference internal" href="#cli.test.FunctionalTest"><tt class="xref docutils literal"><span class="pre">FunctionalTest</span></tt></a> will look for scripts to run under
<tt class="xref docutils literal"><span class="pre">scriptdir</span></tt>. It uses <tt class="xref docutils literal"><span class="pre">scripttest.TestFileEnvironment</span></tt>
to provide temporary working areas for the scripts; these scratch
areas will be created under <tt class="xref docutils literal"><span class="pre">testdir</span></tt> (and are created and
removed before and after each test is run).</p>
<dl class="method">
<dt id="cli.test.FunctionalTest.assertScriptDoes">
<tt class="descname">assertScriptDoes</tt><big>(</big><em>result</em>, <em>stdout=''</em>, <em>stderr=''</em>, <em>returncode=0</em>, <em>trim_output=True</em><big>)</big><a class="headerlink" href="#cli.test.FunctionalTest.assertScriptDoes" title="Permalink to this definition">¶</a></dt>
<dd><p>Fail if the result object&#8217;s stdout, stderr and returncode are unexpected.</p>
<p><em>result</em> is usually a <tt class="xref docutils literal"><span class="pre">scripttest.ProcResult</span></tt> with
stdout, stderr and returncode attributes.</p>
</dd></dl>

<dl class="method">
<dt id="cli.test.FunctionalTest.run_script">
<tt class="descname">run_script</tt><big>(</big><em>script</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#cli.test.FunctionalTest.run_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a test script.</p>
<p><em>script</em> is prepended with the path to <tt class="xref docutils literal"><span class="pre">scriptdir</span></tt> before
it, <em>args</em> and <em>kwargs</em> are passed to <tt class="xref docutils literal"><span class="pre">env</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="cli.test.FunctionalTest.setUp">
<tt class="descname">setUp</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.test.FunctionalTest.setUp" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare for the functional test.</p>
<p><a title="cli.test.FunctionalTest.setUp" class="reference internal" href="#cli.test.FunctionalTest.setUp"><tt class="xref docutils literal"><span class="pre">setUp()</span></tt></a> creates the test&#8217;s working directory. If
the <tt class="xref docutils literal"><span class="pre">unittest2</span></tt> package is present, it also makes sure that
differences in the test&#8217;s standard err and output are presented
using <tt class="xref docutils literal"><span class="pre">unittest2.TestCase.assertMultiLineEqual</span></tt>. Finally,
<a title="cli.test.FunctionalTest.setUp" class="reference internal" href="#cli.test.FunctionalTest.setUp"><tt class="xref docutils literal"><span class="pre">setUp()</span></tt></a> instantiates the
<tt class="xref docutils literal"><span class="pre">scripttest.TestFileEnvironment</span></tt> and stores it at
<tt class="xref docutils literal"><span class="pre">env</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="cli.test.FunctionalTest.tearDown">
<tt class="descname">tearDown</tt><big>(</big><big>)</big><a class="headerlink" href="#cli.test.FunctionalTest.tearDown" title="Permalink to this definition">¶</a></dt>
<dd><p>Clean up after the test.</p>
<p><a title="cli.test.FunctionalTest.tearDown" class="reference internal" href="#cli.test.FunctionalTest.tearDown"><tt class="xref docutils literal"><span class="pre">tearDown()</span></tt></a> removes the temporary working directory created
during <a title="cli.test.FunctionalTest.setUp" class="reference internal" href="#cli.test.FunctionalTest.setUp"><tt class="xref docutils literal"><span class="pre">setUp()</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="testing-cli">
<h2>Testing <tt class="xref docutils literal"><span class="pre">cli</span></tt><a class="headerlink" href="#testing-cli" title="Permalink to this headline">¶</a></h2>
<p><tt class="xref docutils literal"><span class="pre">cli</span></tt> ships with a number of unit tests that help ensure that the code run
correctly. The tests live in the <tt class="xref docutils literal"><span class="pre">tests</span></tt> package and can be run by
<tt class="docutils literal"><span class="pre">setup.py</span></tt>:</p>
<div class="highlight-python"><pre>$ python setup.py test</pre>
</div>
<p>You can get a sense for how completely the unit tests exercise <tt class="xref docutils literal"><span class="pre">cli</span></tt> by
running the <a class="reference external" href="http://nedbatchelder.com/code/coverage/">coverage</a> tool:</p>
<div class="highlight-python"><pre>$ coverage run --branch setup.py test</pre>
</div>
<p><tt class="docutils literal"><span class="pre">coverage</span></tt> tracks the code statements and branches that the test suite
touches and can generate a report listing the lines of code that are
missed:</p>
<div class="highlight-python"><pre>$ coverage report -m --omit "tests,/home/will/lib,lib/cli/ext,setup"</pre>
</div>
<p>It&#8217;s useful to omit the third party code directory (<tt class="docutils literal"><span class="pre">ext</span></tt>) as well as
the path to the Python standard library as well as <tt class="docutils literal"><span class="pre">setup.py</span></tt> and the
tests themselves.</p>
<p>All new code in <tt class="xref docutils literal"><span class="pre">cli</span></tt> should be accompanied by unit tests. Eventually,
the unit tests should be complemented by a set of functional tests
(especially to stress things like the daemon code).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="#">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#"><tt class="docutils literal"><span class="pre">cli</span></tt> &#8212; command line tools</a><ul>
<li><a class="reference external" href="#installing-cli">Installing <tt class="docutils literal"><span class="pre">cli</span></tt></a></li>
<li><a class="reference external" href="#a-quick-tour-of-cli-s-features">A quick tour of <tt class="docutils literal"><span class="pre">cli</span></tt>&#8216;s features</a></li>
<li><a class="reference external" href="#basic-usage">Basic usage</a></li>
<li><a class="reference external" href="#best-practices">Best practices</a><ul>
<li><a class="reference external" href="#use-a-standard-style">Use a standard style</a></li>
<li><a class="reference external" href="#modularize">Modularize</a></li>
<li><a class="reference external" href="#share-your-code">Share your code</a></li>
<li><a class="reference external" href="#test-your-code">Test your code</a></li>
</ul>
</li>
<li><a class="reference external" href="#module-cli.test">API</a><ul>
<li><a class="reference external" href="#cli-app-basic-applications"><tt class="docutils literal"><span class="pre">cli.app</span></tt> &#8211; basic applications</a></li>
<li><a class="reference external" href="#cli-log-logging-applications"><tt class="docutils literal"><span class="pre">cli.log</span></tt> &#8211; logging applications</a></li>
<li><a class="reference external" href="#cli-daemon-daemonizing-applications"><tt class="docutils literal"><span class="pre">cli.daemon</span></tt> &#8211; daemonizing applications</a></li>
<li><a class="reference external" href="#cli-profiler-statistical-and-deterministic-application-profiling"><tt class="docutils literal"><span class="pre">cli.profiler</span></tt> &#8211; statistical and deterministic application profiling</a></li>
<li><a class="reference external" href="#cli-config-applications-that-read-config-files"><tt class="docutils literal"><span class="pre">cli.config</span></tt> &#8211; applications that read config files</a></li>
<li><a class="reference external" href="#cli-test-functional-and-unit-test-support"><tt class="docutils literal"><span class="pre">cli.test</span></tt> &#8211; functional and unit test support</a></li>
</ul>
</li>
<li><a class="reference external" href="#testing-cli">Testing <tt class="docutils literal"><span class="pre">cli</span></tt></a></li>
</ul>
</li>
</ul>

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/index.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li><a href="#">pyCLI v1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009-2010 Will Maier &lt;will@m.aier.us&gt;.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>