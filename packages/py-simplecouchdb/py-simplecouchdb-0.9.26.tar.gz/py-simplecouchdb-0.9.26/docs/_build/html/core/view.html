<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Views classes &mdash; py-simplecouchdb v0.9.25 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.25',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="py-simplecouchdb v0.9.25 documentation" href="../index.html" />
    <link rel="up" title="Core" href="index.html" />
    <link rel="next" title="Resource" href="../resource.html" />
    <link rel="prev" title="Database class" href="database.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="../resource.html" title="Resource"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="database.html" title="Database class"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">py-simplecouchdb v0.9.25 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Core</a> &raquo;</li> 
      </ul>
    </div>  
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  
  <div class="section" id="views-classes">
<span id="view-ref"></span><h1>Views classes<a class="headerlink" href="#views-classes" title="Permalink to this headline">¶</a></h1>
<p>This document describe the detail of <strong>View</strong> API.</p>
<ul class="simple">
<li><a class="reference internal" href="#view-results"><em>ViewResults class</em></a>: A ViewResults instance is constructed
by View, SLowView, AllDocumentView and Viewdefinition
objects. Results are only retrieved when you use one method
of ViewResults instance.</li>
<li><a class="reference internal" href="#view"><em>View class</em></a>: Object that allow you to retrieve resulys of a view
in db.</li>
<li><a class="reference internal" href="#temporary-view"><em>TempView class</em></a>: same as view but for temporary view</li>
<li><a class="reference internal" href="#allview"><em>AllDocumentsView class</em></a>: use by Database.documents method</li>
<li><a class="reference internal" href="#viewdef"><em>ViewDefinition class</em></a>: A ViewDefiniton object allow you to easyly create a
view and add it to a database. You could sync a database to add allo
cached ViewDefintion&#8217;s object.</li>
</ul>
<p>Sample usage of a view :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">simplecouchdb</span> <span class="kn">import</span> <span class="n">Server</span><span class="p">,</span> <span class="n">Database</span><span class="p">,</span> <span class="n">Views</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">Database</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="n">server</span><span class="o">=</span><span class="n">server</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;test/all&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>at this step, ou have only set an instance of ViewResults.</p>
<p>On only retrieved results when you for example iter results :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">list_of_results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="viewresults-class">
<span id="view-results"></span><h2>ViewResults class<a class="headerlink" href="#viewresults-class" title="Permalink to this headline">¶</a></h2>
<p>This class is returned by Views object. ViewResults object can be constructed and passed around without hitting the CouchDB server. No database activity actually occurs until you do something to evaluate the viewresult.</p>
<p>You can evaluate a ViewResult in the following ways:</p>
<ul>
<li><p class="first"><strong>Iteration</strong>: A ViewResult is iterable and it execute the resquest to CouchDB the first time you execute it.</p>
</li>
<li><p class="first"><strong>len()</strong>. A ViewResults is evaluated when you call len() on it. This, as you might expect, returns the length of the result list.</p>
</li>
<li><p class="first"><strong>list()</strong>. Force evaluation by calling list() on it</p>
<blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="s">&quot;test/all&quot;</span><span class="p">))</span>
</pre></div>
</div>
</blockquote>
</li>
</ul>
<p><strong>Description of the class</strong></p>
</div>
<div class="section" id="view-class">
<span id="view"></span><h2>View class<a class="headerlink" href="#view-class" title="Permalink to this headline">¶</a></h2>
<p><strong>Usage example</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">create_db</span><span class="p">(</span><span class="s">&#39;simplecouchdb_test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc1</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;_id&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;lastname&#39;</span><span class="p">:</span> <span class="s">&#39;doo&#39;</span><span class="p">,</span> <span class="s">&#39;firtsname&#39;</span><span class="p">:</span> <span class="s">&quot;john&quot;</span><span class="p">,</span> <span class="s">&#39;docType&#39;</span><span class="p">:</span> <span class="s">&#39;identity&#39;</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">doc1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc2</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;_id&#39;</span><span class="p">:</span> <span class="s">&#39;test2&#39;</span><span class="p">,</span> <span class="s">&#39;lastname&#39;</span><span class="p">:</span> <span class="s">&#39;dupont&#39;</span><span class="p">,</span> <span class="s">&#39;firstname&#39;</span><span class="p">:</span> <span class="s">&quot;jean&quot;</span><span class="p">,</span> <span class="s">&#39;docType&#39;</span><span class="p">:</span> <span class="s">&#39;identity&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">doc2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">design_doc</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;_id&#39;</span><span class="p">:</span> <span class="s">&#39;_design/test&#39;</span><span class="p">,</span> <span class="s">&#39;language&#39;</span><span class="p">:</span> <span class="s">&#39;javascript&#39;</span><span class="p">,</span>
<span class="go">    &#39;views&#39;: {  &#39;all&#39;: { &quot;map&quot;: &quot;&quot;&quot;function(doc) {</span>
<span class="go">    if (doc.docType == &quot;identity&quot;) { emit(doc._id, doc); }}&quot;&quot;&quot; } }}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">design_doc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;test/all&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">delete_db</span><span class="p">(</span><span class="s">&#39;simplecouchdb_test&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="class">
<dt id="simplecouchdb.core.View">
<!--[simplecouchdb.core.View]-->class <tt class="descclassname">simplecouchdb.core.</tt><tt class="descname">View</tt><big>(</big><em>db</em>, <em>view_path</em>, <em>wrapper=None</em>, <em>**params</em><big>)</big><a class="headerlink" href="#simplecouchdb.core.View" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Properties</strong></p>
<dl class="attribute">
<dt id="View.database">
<!--[View.database]--><tt class="descname">database</tt><a class="headerlink" href="#View.database" title="Permalink to this definition">¶</a></dt>
<dd>Database instance on which is the view is executed</dd></dl>

<p><strong>Methods</strong></p>
<dl class="method">
<dt id="simplecouchdb.core.View.__call__">
<!--[simplecouchdb.core.View.__call__]--><tt class="descname">__call__</tt><big>(</big><big>)</big><a class="headerlink" href="#simplecouchdb.core.View.__call__" title="Permalink to this definition">¶</a></dt>
<dd>x.__call__(...) &lt;==&gt; x(...)</dd></dl>

<dl class="method">
<dt id="simplecouchdb.core.View.count">
<!--[simplecouchdb.core.View.count]--><tt class="descname">count</tt><big>(</big><big>)</big><a class="headerlink" href="#simplecouchdb.core.View.count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="tempview-class">
<span id="temporary-view"></span><h2>TempView class<a class="headerlink" href="#tempview-class" title="Permalink to this headline">¶</a></h2>
<p>This object is used to retrieve result from a couchdb temp view.
It is inherited from <a title="simplecouchdb.core.View" class="reference internal" href="#simplecouchdb.core.View"><tt class="xref docutils literal"><span class="pre">simplecouchdb.core.View</span></tt></a> object.</p>
<p><strong>Usage example</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">create_db</span><span class="p">(</span><span class="s">&#39;simplecouchdb_test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">create_db</span><span class="p">(</span><span class="s">&#39;simplecouchdb_test&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc1</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;_id&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;lastname&#39;</span><span class="p">:</span> <span class="s">&#39;doo&#39;</span><span class="p">,</span> <span class="s">&#39;firtsname&#39;</span><span class="p">:</span> <span class="s">&quot;john&quot;</span><span class="p">,</span> <span class="s">&#39;docType&#39;</span><span class="p">:</span> <span class="s">&#39;identity&#39;</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">doc1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc2</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;_id&#39;</span><span class="p">:</span> <span class="s">&#39;test2&#39;</span><span class="p">,</span> <span class="s">&#39;lastname&#39;</span><span class="p">:</span> <span class="s">&#39;dupont&#39;</span><span class="p">,</span> <span class="s">&#39;firstname&#39;</span><span class="p">:</span> <span class="s">&quot;jean&quot;</span><span class="p">,</span> <span class="s">&#39;docType&#39;</span><span class="p">:</span> <span class="s">&#39;identity&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">doc2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">design_doc</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;map&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;&quot;function(doc) { if (doc.docType == &quot;identity&quot;) { emit(doc._id, doc); }}&quot;&quot;&quot;</span> <span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">slow_view</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">design_doc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">delete_db</span><span class="p">(</span><span class="s">&#39;simplecouchdb_test&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="class">
<dt id="simplecouchdb.core.TempView">
<!--[simplecouchdb.core.TempView]-->class <tt class="descclassname">simplecouchdb.core.</tt><tt class="descname">TempView</tt><big>(</big><em>db</em>, <em>design</em>, <em>wrapper=None</em>, <em>**params</em><big>)</big><a class="headerlink" href="#simplecouchdb.core.TempView" title="Permalink to this definition">¶</a></dt>
<dd>..automethod:: simplecouchdb.core.TempView.get</dd></dl>

</div>
<div class="section" id="alldocumentsview-class">
<span id="allview"></span><h2>AllDocumentsView class<a class="headerlink" href="#alldocumentsview-class" title="Permalink to this headline">¶</a></h2>
<p>This view object nherited from <a title="simplecouchdb.core.View" class="reference internal" href="#simplecouchdb.core.View"><tt class="xref docutils literal"><span class="pre">simplecouchdb.core.View</span></tt></a>, is only used by <tt class="xref docutils literal"><span class="pre">simplecouchdb.core.Database.documents()</span></tt></p>
</div>
<div class="section" id="viewdefinition-class">
<span id="viewdef"></span><h2>ViewDefinition class<a class="headerlink" href="#viewdefinition-class" title="Permalink to this headline">¶</a></h2>
<p>This object is used o create and register views for a database.</p>
<p><strong>Example usage</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">view</span> <span class="o">=</span> <span class="n">ViewDefinition</span><span class="p">(</span><span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;all&#39;</span><span class="p">,</span> <span class="n">map_fun</span><span class="o">=</span> <span class="s">&quot;&quot;&quot;function(doc)</span>
<span class="go">    { if (doc.docType == &quot;identity&quot;) { emit(doc._id, doc);}}&quot;&quot;&quot;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">create_db</span><span class="p">(</span><span class="s">&#39;simplecouchdb_test&#39;</span><span class="p">)</span>
<span class="go">    &gt;&gt;&gt; doc1 = { &#39;_id&#39;: &#39;test&#39;, &#39;string&#39;: &#39;test&#39;, &#39;number&#39;: 4, &#39;docType&#39;: &#39;test&#39; }</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">doc1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">doc2</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;_id&#39;</span><span class="p">:</span> <span class="s">&#39;test2&#39;</span><span class="p">,</span> <span class="s">&#39;string&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">,</span> <span class="s">&#39;number&#39;</span><span class="p">:</span> <span class="mf">2</span><span class="p">,</span> <span class="s">&#39;docType&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">doc2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">view</span><span class="o">.</span><span class="n">sync</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;test/all&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">delete_db</span><span class="p">(</span><span class="s">&#39;simplecouchdb_test&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="viewcache-class">
<h2>ViewCache class<a class="headerlink" href="#viewcache-class" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="other">
<h2>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h2>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Reference <a class="reference external" href="database.html#database"><em>Database class</em></a></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Views classes</a><ul>
<li><a class="reference external" href="#viewresults-class">ViewResults class</a></li>
<li><a class="reference external" href="#view-class">View class</a></li>
<li><a class="reference external" href="#tempview-class">TempView class</a></li>
<li><a class="reference external" href="#alldocumentsview-class">AllDocumentsView class</a></li>
<li><a class="reference external" href="#viewdefinition-class">ViewDefinition class</a></li>
<li><a class="reference external" href="#viewcache-class">ViewCache class</a></li>
<li><a class="reference external" href="#other">Other</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="database.html" title="previous chapter">Database class</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="../resource.html" title="next chapter">Resource</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/core/view.txt">Show Source</a></li>
            </ul>
          <h3>Quick search</h3>
            <form class="search" action="../search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="../resource.html" title="Resource"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="database.html" title="Database class"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">py-simplecouchdb v0.9.25 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Core</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2008, 2009, Benoit Chesneau.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.5.1.
    </div>
  </body>
</html>