=============================
iw.recipe.template#zope2vhost
=============================

How to
======

We need some buildout vars::

  >>> server = start_server(test_dir)

  >>> write(sample_buildout, 'buildout.cfg',
  ... """
  ... [buildout]
  ... parts = www.mysite.com
  ...
  ... [www.mysite.com]
  ... recipe = iw.recipe.template:zope2vhost
  ... path= /mysite
  ... destination = %s/
  ... """ % (sample_buildout,))

Then, the recipe should work::

  >>> print system(buildout)
  Installing www.mysite.com.
  www.mysite.com: Generated file 'www.mysite.com'.


Here is the result::

  >>> print open(join(sample_buildout, 'www.mysite.com')).read()
  <BLANKLINE>
  <VirtualHost *:80>
  	ServerName www.mysite.com
  <BLANKLINE>
  	ErrorLog /sample-buildout/var/logs/error.www.mysite.com
  	CustomLog /sample-buildout/var/logs/access.www.mysite.com combined
  <BLANKLINE>
  	DocumentRoot /sample-buildout/var/www
  <BLANKLINE>
  	<Proxy http://127.0.0.1:8080>
  	  Allow from all
  	</Proxy>
  <BLANKLINE>
  	RewriteEngine on
  	RewriteRule ^(.*) http://127.0.0.1:8080/VirtualHostBase/http/www.mysite.com:80/mysite/VirtualHostRoot/$1 [L,P]
  <BLANKLINE>
  	ExpiresActive On
  	ExpiresByType image/gif A86400
  	ExpiresByType image/png A86400
  	ExpiresByType image/jpeg A86400
  	ExpiresByType text/css A86400
  	ExpiresByType text/javascript A86400
  	ExpiresByType application/x-javascript A86400
  <BLANKLINE>
  </VirtualHost>
  <BLANKLINE>


