<!--

    cmc.html - the Content Management Client - JavaScript WebDAV frontend
    Copyright (C) 2004 Guido Wesdorp
    email johnny@debris.demon.nl

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA

-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"
        xmlns:i18n="http://debris.demon.nl/xmlns/i18n" domain="cmc">
  <head>
    <title i18n:translate="">Content Management Client</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="styles/styles.css" 
            rel="stylesheet" type="text/css" />
    <script type="text/javascript" 
            src="../jsshell/jsshell.js"></script>
    <script type="text/javascript" 
            src="../jsbase/string.js"></script>
    <script type="text/javascript" 
            src="../jsbase/array.js"></script>
    <script type="text/javascript" 
            src="../helpers.js/helpers.js"></script>
    <script type="text/javascript" 
            src="../i18n.js/i18n.js"></script>
    <script type="text/javascript" 
            src="../minisax.js/minisax.js"></script>
    <script type="text/javascript" 
            src="../dommer/dommer.js"></script>
    <script type="text/javascript" 
            src="../davclient.js/davclient.js"></script>
    <script type="text/javascript" 
            src="../davclient.js/davfs.js"></script>
    <script type="text/javascript" 
            src="../tree.js/tree.js"></script>
    <script type="text/javascript" 
            src="../tabmanager.js/tabmanager.js"></script>
    <script type="text/javascript" 
            src="../davbrowser.js/davbrowser.js"></script>
    <script type="text/javascript" 
            src="../filetypes.js/filetypes.js"></script>
    <script type="text/javascript" 
            src="tabs.js"></script>
    <script type="text/javascript" 
            src="../cmc/configtab.js"></script>
    <script type="text/javascript" 
            src="cmc.js"></script>
  </head>
  <body onload="init('browser', 'tabs', 'path', '/davtests/')"
        style="overflow: hidden">
    <table class="layout">
      <tbody>
        <tr>
          <td id="topcell" colspan="2" class="aligncenter">
            <div class="header">
              CMC
            </div>
            (c) Guido Wesdorp
            <div i18n:translate="">
                (not yet) released under terms of the GPL 2.0
            </div>
          </td>
        </tr>
        <tr>
          <td id="browsercell" rowspan="2">
            <div id="browser"> </div>
          </td>
          <td id="pathcell">
            <div id="path" i18n:translate="">CMC Browser</div>
          </td>
        </tr>
        <tr>
          <td id="tabcell">
            <div id="tabs">
              <div id="welcome" tabname="Welcome!" 
                  i18n:attributes="tabname">
                <h3 i18n:translate="">
                    Welcome to CMC, the Content Management Client.
                </h3>
                <p i18n:translate="">
                  Use the tree on your left hand to browse the server's 
                  filesystem, when you click on an item you can edit its
                  properties and (depending on the type of item you clicked)
                  content in this frame.
                </p>
              </div>
              <div id="whatisthis" tabname="What is this?" 
                  i18n:attributes="tabname">
                <h3 i18n:translate="">What is this?</h3>
                <p i18n:translate="">
                  Simply put this is a generic client for content management
                  systems. Instead of having a load of HTML files and scripts
                  of some sort (e.g. CGI) this application consists of a single
                  HTML file and a set of JavaScript files, and handles all the
                  user interface logic on the client side (inside the browser).
                  This produces a better seperation of view and logic and moves
                  some of the overhead of managing a website from the server 
                  to the client.
                </p>
                <h3 i18n:translate="">WebDAV</h3>
                <p i18n:translate="what_is_this_webdav_part">
                  The only thing the server should provide is a basic 
                  implementation of a protocol called 'WebDAV' 
                  (<a href="http://www.webdav.org">http://www.webdav.org</a>), 
                  a protocol that describes a way for HTTP servers and
                  clients to communicate<sup>1</sup>. CMC uses this protocol
                  to tell the server things like: 'give me the properties of
                  file X', 'create a new subdir called X in dir Y' and 'set
                  the contents of file X to Y'. WebDAV is a standard that is
                  implemented in a lot of modern webserver applications, this
                  client can be used on all those systems without
                  modification.
                </p>
                <h3 i18n:translate="">Differences</h3>
                <p i18n:translate="">
                  So why is this interesting? Traditional Content Management
                  Systems (CMS) have almost all functionality defined on the
                  server, so a client requests a page and the server 
                  generates HTML that is sent to the client. This HTML is
                  a single page, for each particular view new HTML will
                  need to get generated. Not only does this mean a user
                  browsing a website needs to wait for each and every click,
                  often, because the pages are generated, even for views
                  that have already been visited and are unchanged, but also
                  it puts a lot of strain on the server, which needs to
                  generate each page each user views.
                </p>
                <h3 i18n:translate="">Advantages</h3>
                <p i18n:translate="">
                  CMC takes a different approach: the user downloads a small
                  set of static files, and all view-logic happens on the
                  client. This makes that the user is presented with a more
                  dynamic, fluent user-interface, which feels more like an
                  application with dynamic and static parts, and also reliefs
                  the server of all of the view-logic strain. As you probably
                  notice the client is quite fast compared to a traditional CMS client,
                  (if not, try using Mozilla instead of IE! ;) which not only
                  means the user has a better experience, it also proves
                  that the server has only little to do (and obviously for 
                  systems with a large number of users that can make a lot
                  of difference)...
                </p>
                <p>
                  <em i18n:translate="">
                    <sup>1</sup> 
                    WeDAV is not really absolutely all the system requires:
                    because browsers don't have the ability to use the 'PUT'
                    method to upload binary files, a small server-side script
                    is required to translate more traditional 'POST' requests
                    to 'PUT'. Also on some systems a small server-side script
                    is required to provide the contents of dynamic scripts:
                    using the 'GET' method on the scripts results in the
                    rendered content, not the actual source code, WebDAV
                    doesn't explicitly deal with that issue.
                  </em>
                </p>
              </div>
              <div id="about" tabname="About" i18n:attributes="tabname">
                <h3 i18n:translate="">About CMC</h3>
                <p i18n:translate="">
                  This application is written by Guido Wesdorp in 2004. It
                  is free software, released under terms of the General
                  Public License version 2.0. For more information about the
                  license, see LICENSE.txt in the package.
                </p>
                <h3 i18n:translate="">Where can I download it?</h3>
                <p i18n:translate="">
                  This application can be downloaded, for free, on 
                  <a href="http://debris.demon.nl">http://debris.demon.nl</a>,
                  the webserver of the author. Most of the application consists
                  libraries that can be used seperately, as part of another
                  application. 
                </p>
                <h3 i18n:translate="">How to reach the author</h3>
                <p i18n:translate="">
                  If you have found a bug, have a question, remark, patch or 
                  anything else you want to share with me, you can reach me
                  by email on 
                  <a href="mailto:johnny@debris.demon.nl">johnny@debris.demon.nl</a>.
                  Hopefully in the near future there will be a mailinglist 
                  or an IRC channel available, for more information see 
                  <a href="http://debris.demon.nl">http://debris.demon.nl</a>.
                </p>
                <h3 i18n:translate="">Thanks</h3>
                <p i18n:translate="">
                  Special thanks goes to:
                  <ul>
                    <li>
                      My girlfriend for keeping up with me even though
                      I'm always behind my machine
                    </li>
                    <li>
                      Holger Krekel for being one of the most innovative
                      hackers I know
                    </li>
                    <li>
                      Paul Everitt for his evangelistic approach and a lot of
                      ideas (including part of this application)
                    </li>
                    <li>
                      Infrae for being probably the coolest company I will 
                      ever work for
                    </li>
                  </ul>
                </p>
              </div>
              <div id="new" class="tab" tabname="New" 
                  i18n:attributes="tabname">
                <div type="help">
                  <h3 i18n:translate="">Creating new items</h3>
                  <p i18n:translate="">
                    In this tab you can add new items to the server. These
                    items can either be directories or text files (support
                    for binary files is currently in progress). 
                  </p>
                  <h3 i18n:translate="">Adding a directory</h3>
                  <p i18n:translate="">
                    To add a directory, choose 'Directory' from the 'Type'
                    select list, enter a name in the 'Name' field and press
                    the 'Create' button.
                  </p>
                  <h3 i18n:translate="">Adding a text file</h3>
                  <p i18n:translate="">
                    To add a text file, choose 'Text document' from the 'Type'
                    pulldown, this will make a textarea appear. In this 
                    textarea you can (optionally) enter additional content.
                    Enter a filename in the 'Name' input field, the extension
                    of the name will make the server choose the filetype for
                    the file, so make sure it's correct. After filling the
                    textarea (if you want to), press 'Create' to create the 
                    file and save the content to the server.
                  </p>
                </div>
                <form method="POST" 
                      onsubmit="if (!this.allow_submit) return false" 
                      target="_blank"
                      action="upload.php"
                      enctype="multipart/form-data">
                  <input type="hidden" name="path" />
                  <table class="plain">
                    <thead>
                      <tr class="lowrow">
                        <th colspan="4" i18n:translate="">
                          Create a new sub item
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr class="lowrow">
                        <td class="verysmallcell" i18n:translate="">
                          Type:
                        </td>
                        <td class="midicell">
                          <select class="fill" id="newtypeselect">
                            <option value="directory" i18n:translate="">
                              Directory
                            </option>
                            <option value="textfile" i18n:translate="">
                              Text document
                            </option>
                            <option value="binary" i18n:translate="">
                              Binary file
                            </option>
                          </select>
                        </td>
                        <td class="verysmallcell" i18n:translate="">
                          Name:
                        </td>
                        <td class="midicell">
                          <input class="fill" type="text" name="filename" />
                        </td>
                      </tr>
                      <tr>
                        <td class="fill" colspan="4">
                          <div i18n:translate="">Content:</div>
                          <textarea id="newcontent"></textarea>
                        </td>
                      </tr>
                      <tr>
                        <td class="verysmallcell" i18n:translate="">File:</td>
                        <td colspan="3">
                          <input type="file" name="upload" />
                        </td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr class="resize">
                        <td colspan="4"
                              class="buttoncell">
                          <input type="button" 
                                  name="create"
                                  value="Create" 
                                  title="Create a new item" 
                                  i18n:attributes="title;value" />
                        </td>
                      </tr>
                    </tfoot>
                  </table>
                </form>
              </div>
              <div id="properties" tabname="Properties" 
                  i18n:attributes="tabname">
                <div type="help">
                  <h3 i18n:translate="">Managing properties</h3>
                  <p i18n:translate="">
                    This tab allows you to read, add, edit and delete WebDAV
                    properties. Since those properties are XML, this requires
                    some basic knowledge of XML to use.
                  </p>
                  <h3 i18n:translate="">XML</h3>
                  <p i18n:translate="">
                    The properties are displayed as raw XML, so they may
                    potentially be a bit hard to read. If you don't know
                    XML, go to <a href="http://www.w3.org">www.w3.org</a>
                    for specifications and references or to <a
                    href="http://www.w3schools.com">www.w3schools.com</a>
                    (commercial website) for a tutorial.
                  </p>
                  <h3 i18n:translate="">Reading the properties</h3>
                  <p i18n:translate="">
                    The properties are displayed as complete XML fragments,
                    just as they appear in a WebDAV response. The name of the
                    root node is the name of the property, the namespace of
                    that node the namespace of the property. A property
                    called 'foo' in namespace 'http://www.bar.com/xml' with
                    a value 'baz' looks something like:
                    <pre>&lt;foo xmlns="http://www.bar.com/xml"&gt;baz&lt;/foo&gt;</pre>
                    This may look overly complex, but due to the nature of
                    WebDAV (which allows any type of XML to be used inside
                    a property) it is almost impossible to find an easier way
                    to display properties.
                  </p>
                  <h3 i18n:translate="">Setting properties</h3>
                  <p i18n:translate="">
                    When you want to set a property, you will have to deliver
                    something that can go right into a WebDAV request, which
                    means a well-formed piece of XML of which the root node
                    has the same name as the property and the same namespace
                    as the property. The XML can contain any number and type
                    of elements, in any number of namespaces.
                  </p>
                  <h3 i18n:translate="">Deleting properties</h3>
                  <p i18n:translate="">
                    Deleting properties is easy: just check the checkbox
                    before all properties you want to delete and press the
                    'Delete' button.
                  </p>
                  <h3 i18n:translate="">Adding new properties</h3>
                  <p i18n:translate="">
                    To create a new property, first press the 'New' button.
                    This will create a new field on the bottom of the list
                    of properties, without a name. In that field you can 
                    enter a piece of XML just like in the rest of the
                    property fields (the system will get the name and
                    namespace off the root node) and when you're done you
                    can press the 'Save' button.
                  </p>
                </div>
                <form method="POST" onsubmit="return false">
                  <table class="plain">
                    <thead>
                      <tr class="lowrow">
                        <th colspan="2" i18n:translate="">Edit properties</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td colspan="2"></td>
                      </tr>
                      <tr>
                        <td class="midicell">
                            <div>
                                <input type="checkbox" />
                            </div>
                        </td>
                        <td>
                          <textarea style="width: 100%"></textarea>
                        </td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <td colspan="2" class="buttoncell">
                          <input type="button" 
                                  name="delete"
                                  value="Delete" 
                                  title="Delete checked properties from the server" 
                                  i18n:attributes="title;value" />
                          <input type="button" 
                                  name="new"
                                  value="New" 
                                  title="Create new property (requires save!)" 
                                  i18n:attributes="title;value" />
                          <input type="button" 
                                  name="save"
                                  value="Save" 
                                  title="Save modified properties to the server" 
                                  i18n:attributes="title;value" />
                        </td>
                      </tr>
                    </tfoot>
                  </table>
                </form>
              </div>
              <div id="edit_text" tabname="Edit" i18n:attributes="tabname">
                <div type="help">
                  <h3 i18n:translate="">Edit a text file</h3>
                  <p i18n:translate="">
                    This tab allows you to edit the contents of text files.
                    When you're done editing the content of the file, you
                    can press 'Save' to send the content to the server
                    (overwriting any old content). If you want to discard
                    the changes you made, press the 'Reload' button.
                  </p>
                </div>
                <form method="POST" onsubmit="return false">
                  <table class="plain">
                    <thead>
                      <tr class="lowrow">
                        <th colspan="4" i18n:translate="">Edit text file</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="fill" colspan="4">
                          <textarea id="editcontent">
                          </textarea>
                        </td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr class="lowrow">
                        <td colspan="4"
                              class="buttoncell">
                          <input type="button" 
                                  name="reload"
                                  value="Reload" 
                                  title="Reload the document, discarding changes" 
                                  i18n:attributes="title;value" />
                          <input type="button" 
                                  name="save"
                                  value="Save" 
                                  title="Save the contents to the server" 
                                  i18n:attributes="title;value" />
                        </td>
                      </tr>
                    </tfoot>
                  </table>
                </form>
              </div>
              <div id="view_html" tabname="View" i18n:attributes="tabname">
                <iframe src="about:blank"></iframe>
              </div>
              <div id="edit_dir" tabname="Edit" i18n:attributes="tabname">
                <form method="POST" onsubmit="return false">
                  <div id="edit_dir_list">
                    <table class="plain">
                      <thead>
                        <tr>
                          <th colspan="5" i18n:translate="">
                            Edit the contents of directory
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td class="verysmallcell">
                            &#xa0;
                          </td>
                          <td class="quitesmallcell" i18n:translate="">
                            name
                          </td>
                          <td class="verysmallcell" i18n:translate="">
                            filesize
                          </td>
                          <td class="quitesmallcel" i18n:translate="">
                            modification date
                          </td>
                          <td class="verysmallcell">
                            &#xa0;
                          </td>
                        </tr>
                        <tr id="edit_direlrow">
                          <td>
                            &#xa0;
                          </td>
                          <td>
                            <input type="checkbox" name="file" />
                          </td>
                          <td class="verysmallcell" i18n:translate="">
                            n/a
                          </td>
                          <td i18n:translate="">
                            n/a
                          </td>
                          <td>
                            &#xa0;
                          </td>
                        </tr>
                      </tbody>
                      <tfoot>
                        <tr>
                          <td class="buttoncell" 
                                colspan="5">
                            <input type="button" 
                                    name="rename" 
                                    value="Rename" 
                                    title="rename selected items" 
                                    i18n:attributes="title;value" />
                            <input type="button" 
                                    name="cut" 
                                    value="Cut" 
                                    title="cut selected items to the clipboard" 
                                    i18n:attributes="title;value" />
                            <input type="button" 
                                    name="copy" 
                                    value="Copy" 
                                    title="copy selected items to the clipboard" 
                                    i18n:attributes="title;value" />
                            <input type="button"
                                    name="paste"
                                    value="Paste"
                                    title="paste clipboard items" 
                                    i18n:attributes="title;value" />
                            <input type="button" 
                                    name="delete" 
                                    value="Delete" 
                                    title="delete selected items" 
                                    i18n:attributes="title;value" />
                          </td>
                        </tr>
                      </tfoot>
                    </table>
                  </div>
                  <div id="edit_dir_rename">
                    <table class="plain">
                      <thead>
                        <tr>
                          <th colspan="5" i18n:translate="" >Rename items</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td width="10%">
                            &#xa0;
                          </td>
                          <td width="40%" i18n:translate="">
                            old name
                          </td>
                          <td width="40%" i18n:translate="">
                            new name
                          </td>
                          <td width="10%">
                            &#xa0;
                          </td>
                        </tr>
                        <tr id="edit_direlrow">
                          <td>
                            &#xa0;
                          </td>
                          <td>
                          </td>
                          <td>
                            <input class="fill" type="text" name="new_name" />
                          </td>
                          <td>
                            &#xa0;
                          </td>
                        </tr>
                      </tbody>
                      <tfoot>
                        <tr>
                          <td class="buttoncell" 
                                colspan="5">
                            <input type="button" 
                                    name="cancel_rename" 
                                    value="Cancel" 
                                    title="don't rename, go back to the edit screen" 
                                    i18n:attributes="title;value" />
                            <input type="button" 
                                    name="continue_rename" 
                                    value="Rename" 
                                    title="rename the items" 
                                    i18n:attributes="title;value" />
                          </td>
                        </tr>
                      </tfoot>
                    </table>
                  </div>
                </form>
              </div>
              <div id="edit_image" tabname="Edit" i18n:attributes="tabname">
                <form method="POST" onsubmit="return false">
                  <table class="plain">
                    <thead>
                      <tr>
                        <th i18n:translate="">View image</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td class="aligncenter"><img /></td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <td class="buttoncell">
                          &#xa0;
                        </td>
                      </tr>
                    </tfoot>
                  </table>
                </form>
              </div>
              <div id="config" tabname="Configuration" 
                  i18n:attributes="tabname">
                <form action="#" onsubmit="return false">
                  <table class="plain">
                    <tbody>
                      <tr>
                        <th colspan="4" i18n:translate="">Colors</th>
                      </tr>
                      <tr>
                        <td class="quitesmallcell" i18n:translate="">
                          Foreground color:
                        </td>
                        <td class="smallcell">
                          <input type="text" id="fgcolor_main" />
                        </td>
                        <td class="quitesmallcell" i18n:translate="">
                          Background color:
                        </td>
                        <td class="smallcell">
                          <input type="text" id="bgcolor_main" />
                        </td>
                      </tr>
                      <tr>
                        <td class="quitesmallcell" i18n:translate="">
                          Unselected/pathbar color:
                        </td>
                        <td class="smallcell">
                          <input type="text" id="color_gray" />
                        </td>
                        <td class="quitesmallcell" i18n:translate="">
                          Bordercolor:
                        </td>
                        <td class="smallcell">
                          <input type="text" id="bordercolor_main" />
                        </td>
                      <tr>
                        <td class="quitesmallcell" i18n:translate="">
                          Language:
                        </td>
                        <td class="smallcell">
                          <input type="text" id="locale" value="en" />
                        </td>
                        <td colspan="2">
                          &#xa0;
                        </td>
                      </tr>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr class="resize">
                        <td colspan="4" class="buttoncell">
                          <input type="button" 
                                  value="Test" 
                                  title="test the values without saving"
                                  i18n:attributes="title;value" />
                          <input type="button" 
                                  value="Save" 
                                  title="save the values to a cookie" 
                                  i18n:attributes="title;value" />
                        </td>
                      </tr>
                    </tfoot>
                  </table>
                </form>
              </div>
              <div id="jsshell" tabname="JavaScript Shell" 
                  i18n:attributes="tabname">
                <form onsubmit="return false">
                  <table width="100%" cellpadding="0" cellspacing="0">
                    <tbody>
                      <tr>
                        <td id="display" height="1%" colspan="2">
                        </td>
                      </tr>
                      <tr>
                        <td id="promptcell" width="1%">
                          <nobr>--&gt;&#xa0;</nobr>
                        </td>
                        <td>
                          <input id="input" type="text" />
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </form>
              </div>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <div id="preload" style="display: none">
      <!-- not very nice, seems to be the only way to stop Mozilla from
            displaying 'Transferring data from...' when the page is done
            loading... -->
      <img src="images/closed-collection.png" />
      <img src="images/opened-collection.png" />
      <img src="images/non-collection.png" />
      <img src="images/browser_icon.png" />
      <img src="images/collection_icon.png" />
      <img src="images/file_icon.png" />
      <img src="images/image_icon.png" />
      <img src="images/text_icon.png" />
      <img src="images/config_icon.png" />
      <img src="images/shell_icon.png" />
    </div>
  </body>
</html>
