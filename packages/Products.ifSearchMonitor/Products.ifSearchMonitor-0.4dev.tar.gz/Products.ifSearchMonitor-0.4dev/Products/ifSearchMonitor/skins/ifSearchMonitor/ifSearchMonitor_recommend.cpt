<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
    lang="en-US"
    metal:use-macro="here/prefs_main_template/macros/master">

<tal:block metal:fill-slot="head_slot">
<tal:block tal:define="dummy python:request.set('disable_border',1)" />
</tal:block>



<body>
<div metal:fill-slot="prefs_configlet_main">

<div class="configlet">

<div class="documentEditable">

    <ul class="contentViews">
        <li>
        <a href=""
        tal:attributes="href string:ifSearchMonitor_stats"
        i18n:translate="">Statistics Report</a>
        </li>
        <li class="selected">
        <a href=""
        tal:attributes="href string:ifSearchMonitor_recommended"
        i18n:translate="">Recommended results</a>
        </li>
    </ul>
    <div class="contentActions">
    &nbsp;
    </div>
    <!-- End of tabs -->

    <div class="documentContent">
      <h1>Recommend results</h1>
        <p>
        To add recommendations for this search criteria, select the resource from the site by clicking on the "Add Resource" button below and then navigating to the resource you want to recommend.
        </p>

        <div id="readroot" style="display: none">
            <input id="rc_selection" type="hidden" name="recommended:list" value="">
             -> <span id='rc_title'>Example</span>
            <a href="#" title="remove" style="text-decoration:none"
               onclick="delRecommended(this); return false">x</a>
        </div>

        <div id="removereadroot" style="display: none">
            <input id="rc_remove" type="hidden" name="rc_remove:list" value=""/>
        </div>

        <form tal:attributes="action python:here.absolute_url()+'/'+template.id">
            <div class="field">
                <label>Search criteria: </label>
                <input type="text"
                       id="criteria"
                       name="criteria"
                       disabled="disabled"
                       size="25"
                       tal:attributes="value request/terms|nothing;"
                       />
                <input type="hidden" name="criteria" tal:attributes="value request/terms|nothing;" />
            </div>
            <div class="field">
                <label>Other criteria: </label>
                <div class="formHelp" i18n:translate="help_search_title">
                Add the suggested results to other search criteria (one per line)
                </div>
                <textarea id="other"
                          name="other"></textarea>
            </div>
            <div class="field">
                <label>Recommended resources: </label><br/>
                <div id="selection">
                    <tal:block tal:define="criteria request/terms|nothing;
                                           rc_res python: here.portal_catalog.searchResults(SuggestedCriteria=criteria)">
                    <div tal:repeat="r rc_res">
                        <script type="text/javascript" tal:content="string:addItem('${r/id}')">
                        </script>
                        <input id="rc_selection" type="hidden" name="recommended:list" tal:attributes="value r/id">
                        -> <span tal:define="label python: test(r.Title, r.Title, r.id)"
                                 tal:content="label">Example</span>
                        <a href="#" title="remove" style="text-decoration:none"
                           tal:attributes="onclick string:return delSavedRecommended(this, '${r/id}')">x</a>
                    </div>
                    <span tal:condition="not:rc_res" id="no_selection">None recommended at this time</span>
                    </tal:block>
                    <span id="writeroot"></span>
                    <span id="removewriteroot"></span>
                </div>
                <input type="button" name="form.button.add" value="Add resource"
                       onclick="popUpSearch()">
            </div>

            <div class="visualClear" id="clear-space-before-submit"><!-- --></div>

            <div class="formControls">
                <input type="submit" name="form.button.save" value="Save" />
                <input type="submit" name="form.button.cancel" value="Cancel" />
                <input type="hidden" name="form.submitted" value="1" />
            </div>
        </form>
    </div>
</div>
</div>
</div>
</body>
</html>
