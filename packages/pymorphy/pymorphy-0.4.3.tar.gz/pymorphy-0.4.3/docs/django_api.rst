Интеграция с django
===================

Для django на настоящий момент готово несколько шаблонных фильтров,
которые позволяют произвольно склонять слова.

Настройка
---------

1. Описываем в settings.py установленные словари::

        PYMORPHY_DICTS = {
            'ru': { 'dir': '/usr/share/pymorphy/ru' },
        }

   более сложный пример::

        PYMORPHY_DICTS = {
            'ru': {
                'dir': '/usr/share/pymorphy/ru',
                'backend': 'tch',
                'use_cache': True,
            },

            'en': {
                'dir': '/usr/share/pymorphy/en',
                'backend': 'shelve',
                'use_cache': True,
                'default': True
            },
        }

   :dir: обязательный параметр, путь до папки с файлами
   :backend: используемое key-value хранилище ('sqlite' по умолчанию)
   :use_cache: использовать ли кэш (True по умолчанию),
   :default: является ли словарь словарем по умолчанию (который будет
             использоваться в template-tag'ах). Пока довольно бесполезен,
             т.к. поддержки нескольких словарей в тегах нет.


2. Добавляем pymorphy в INSTALLED_APPS

3. Подключаем в шаблоне библиотеку тегов::

   {% load pymorphy_tags %}


Шаблонные фильтры
-----------------

Фильтры из pymorphy_tags стараются сохранить написание больших-маленьких
букв (обрабатываются варианты "ВСЕ СЛОВО БОЛЬШИМИ", "С заглавной",
"все маленькими").

Если по какой-то причине смена формы не удалась, возвращают исходную строку.

Фильтры inflect и plural не склоняют все, что заключено
в двойные квадратные скобки. Фильтр inflect_marked наоборот, работает
только с тем, что в двойных квадратных скобках.
Можно указать другие разделители (обязательно 2х-символьные),
определив в settings.py переменные PYMORPHY_MARKER_OPEN и
PYMORPHY_MARKER_CLOSE.


inflect
^^^^^^^

Меняет грамматическую форму каждого слова на указанную в параметрах.
Про доступные параметры можно почитать тут: :ref:`parameter-format`


Пример::

   {% load pymorphy_tags %}

   {# в переменной city "Нижний Новгород" #}
   Мы начали работу в {{ city|inflect:"пр" }}!

   {# выведет "Мы начали работу в Нижнем Новгороде!" #}


Пример с несклоняемой частью::

   {% load pymorphy_tags %}

   Не осталось у нас {{ "лошадь [[Пржевальского]]"|inflect:"рд,мн" }}.

   {# выведет "Не осталось у нас лошадей Пржевальского" #}


inflect_marked
^^^^^^^^^^^^^^
Идентичен фильтру inflect за исключением того, что противоположным образом
трактует [[ ]] ::

   {% load pymorphy_tags %}
   Не осталось у нас {{ "[[лошадь]] Пржевальского"|inflect_marked:"рд,мн" }}.
   {# выведет "Не осталось у нас лошадей Пржевальского" #}


plural
^^^^^^

Ставит слово в форму, которая согласуется с заданным числом (1 попугай,
2 попугая, 5 попугаев).

Пример::

   {% load pymorphy_tags %}

   {# в переменной num число попугаев (пусть = 38) #}
   На дереве {{ num }} {{ "попугай"|plural:num }}.
   {# выведет "На дереве 38 попугаев." #}

   {# в переменной animal - "лошадь" #}
   А еще есть {{ num }} {{ animal|plural:num }}.
   {# выведет "А еще есть 38 лошадей." #}
