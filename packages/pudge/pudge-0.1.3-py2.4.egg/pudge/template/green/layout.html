<?xml version="1.0"?>
<?python
import pudge

print 'green layout'

def initialize(t):
   if not hasattr(t, 'title'):
       t.title = 'Untitled'
   t.doc_title = t.generator.index_document['title']
?>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:py="http://purl.org/kid/ns#"
      py:def="layout">
  
  <head>
    <title>${title}</title>
    <link rel="stylesheet" type="text/css" href="layout.css"/>
  </head>
  <body>
    <div id="page">
      
    <div py:slot="top_nav_slot" id='top-nav'>
        <h1 id="doc-title"><a rel="index" href="index.html">${doc_title}</a></h1>
        <div class='online-navigation'>
          <a rel="index" href="index.html">index</a>
          <span id="nav-docs">
            <span py:for="doc in generator.documents"
                  py:if="doc['basename'] != 'doc-license'"
                  py:strip="">
              <a href="${doc['basename']}.html"
               title="${doc['title']}">${doc['basename']}</a>
            </span>
          </span>
          
          <span id="nav-trac" py:if="generator.trac_url">
            <?python base_url = generator.trac_url ?>
            <span py:for="txt, stem, title in generator.trac_links"
                  py:strip="">
              <a href="${base_url}${stem}"
                 title="${title}">${txt}</a>
            </span>
          </span>

          <br/>

          <a py:for="m in browser.modules()"
             href="${link_to(m)}" 
             title="${m.qualified_name()} reference">
            ${m.name}
          </a>

          <div py:slot="bottom_nav_slot" py:strip="" 
               py:if="hasattr(self, 'subject')">
            
            <a href="${link_to(subject)}">details</a>
            
            <a href="${link_to(subject).replace('.html', '-index.html')}">
              tree
            </a>
            
          </div>
        </div>
    </div>
    
    <div id="main-content" py:content="content()"/>
    
    <div id="footer">
      <?python
      license = generator.get_document('doc-license')
      ?>
      <p id="pudge">
        Built with
        <a href="http://lesscode.org/projects/pudge/">
          Pudge/${pudge.__version__}</a>
      </p>

      <p id="doc-license" 
            py:if="license">
        This documentation is licensed under the 
        <a href="${license['basename']}.html" 
           title="Documentation License"
           >${license['title']}</a>
      </p>
    </div>
    </div>
  </body>

</html>
