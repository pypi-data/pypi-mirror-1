<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  
  <title>URLs and Paths</title><meta name="generator" content="amaya 8.1a, see http://www.w3.org/Amaya/" />
  <link href="styles.css" rel="stylesheet" type="text/css" /></head>
<body>
<h1>URLs and Paths</h1>
<p>The URL at which your application shall appear is arguably the first
part
of the application's user interface that any user will see. Remember
that a user of your application does not have to be a real person; in
fact,
a user can be any of the following things:</p>
<ul>
  <li>A real person entering the URL into a browser's address bar.</li>
  <li>A real person linking to your application by writing the URL in a
separate Web page.</li>
  <li>A program which has the URL defined within it and which may
manipulate the URL to perform certain kinds of operations.</li>
</ul>
<p>Some application developers have a fairly rigid view of what kind of
information a URL should contain and how it should be structured. In
this guide, we shall look at a number of different approaches.</p>
<h2>Interpreting Path Information</h2>
<p>What the URL is supposed to do is to say where (on the Internet or
on an
intranet) your application resides and which resource or service is
being
accessed, and these look like this:</p>
<pre>http://www.boddie.org.uk/python/WebStack.html</pre>
<p>In an application the full URL, containing the address of the
machine on which it is running, is not always interesting. In the
WebStack API (and in other Web programming frameworks), we also talk
about "paths" - a path is&nbsp;just the part of the
URL which refers to the resource or service, ignoring the actual
Internet
address, and so the above example would have a path which looks like
this:</p>
<pre>/python/WebStack.html</pre>
<p>When writing a Web application, most of the time you just need to
concentrate on the path because the address doesn't usually tell you
anything
you don't already know. What you need to do is to interpret the path
specified in the request in order to work out which resource or service
the user is trying to access.</p>
<div class="WebStack">
<h3>WebStack API - Path Methods in Transaction Objects</h3>
<p>WebStack provides the following transaction methods for inspecting
path
information:</p>
<dl>
  <dt><code>get_path</code></dt>
  <dd>This gets the entire path of a resource including parameter
information (as described in <a href="parameters.html">"Request
Parameters and Uploads"</a>).<br />
An optional&nbsp;<code>encoding</code> parameter may be used to assist the process of converting the path to a Unicode object - see below.</dd>
  <dt><code>get_path_without_query</code></dt>
  <dd>This gets the entire path of a resource but without any parameter
information.<br />

An optional&nbsp;<code>encoding</code> parameter may be used to assist the process of converting the path to a Unicode object - see below.</dd><dt><code>get_path_without_info</code></dt><dd>This gets the entire path of a resource but without any parameter
information or any special "path info" (as described in <a href="path-info.html">"Paths To and Within Applications"</a>).
The result is more or less equivalent to the location where an
application has been "published" - ie. the location of an application
in a server environment.<br />

An optional&nbsp;<code>encoding</code> parameter may be used to assist the process of converting the path to a Unicode object - see below.</dd>
</dl>
</div>
<p>To obtain the above path using the WebStack API, we can write the following code:</p>
<pre>path = trans.get_path()</pre>
<p>Really, however, we should explicitly state the character encoding of the path. Unfortunately, as noted in <a href="encodings.html">"Character Encodings"</a>,
some guesswork is required, but if we have decided to use UTF-8 as the
encoding of our output, it is reasonable to specify UTF-8 here as well:</p>
<pre>path = trans.get_path("utf-8")<br />path = trans.get_path(self.encoding) # assuming a class/instance attribute defining such things centrally</pre>
<p>In many applications such nuances are not particularly important, but consider the following URL:</p>
<pre>http://www.boddie.org.uk/python/WebStack-%E6%F8%E5.html</pre>
<p>Here, the URL includes non-ASCII characters which must be
interpreted somehow. In this case, the "URL encoded" character values
refer to ISO-8859-1 values and can be safely inspected as follows:</p>
<pre>path = trans.get_path("iso-8859-1")</pre>
<p>The above usage of UTF-8 will also work in this case, but only
because WebStack will use ISO-8859-1 as a "safe" default for character
values it does not understand.</p>
<h2>Query Strings</h2>

<p>Sometimes, a "query string" will be provided as part of a URL; for
example:</p>
<pre>http://www.boddie.org.uk/application?param1=value1</pre>
<p>The question mark character marks the beginning of the query string
which
contains encoded parameter information; such information and its
inspection
is discussed in <a href="parameters.html">"Request Parameters and
Uploads"</a>.</p>
<div class="WebStack">
<h3>WebStack API - Getting Query Strings</h3>
<p>WebStack provides a&nbsp;method to get only the query string from the URL:</p>
<dl><dt><code>get_query_string</code></dt><dd>This method returns the part of the URL which contains parameter
information. Such information will be "URL encoded", meaning that
certain characters will have the form&nbsp;<code>%xx</code> where&nbsp;<code>xx</code>
is a two digit hexadecimal number referring to the byte value of the
unencoded character - see below for discussion of this. </dd></dl>
</div>
<p>Note that unlike the path access methods,&nbsp;<code>get_query_string</code>
does not accept an encoding as a parameter. Moreover, when retrieving a
path including a query string, the encoding is not used to interpret
"URL encoded" character values in the query string itself. Consider
this example URL:</p>
<pre>http://www.boddie.org.uk/application-%E6?var%F8=value%E5</pre>
<p>Upon requesting the path and the query string, certain differences should be noticeable:</p>
<pre>trans.get_path("iso-8859-1")               # returns /application-&aelig;?var%F8=value%E5<br />trans.get_path_without_query("iso-8859-1") # returns /application-&aelig;<br />trans.get_query_string()                   # returns var%F8=value%E5</pre>
<p>One reason for this seemingly arbitrary distinction in treatment is
the way certain servers present path information to WebStack - often
the "URL encoded" information has been replaced by raw character values
which must then be converted to Unicode characters. In contrast, most
servers do not perform the same automatic conversion on the query
string.</p>
<p>In fact, it may become impossible to properly interpret the query
string if it is decoded prematurely; consider this example URL:</p>
<pre>http://www.boddie.org.uk/application?a=%26b</pre>
<p>If we were to just decode the query string and then extract the
parameters/fields, the result would be two empty parameters with the
names&nbsp;<code>a</code> and <code>b</code>, as opposed to the correct interpretation of the query string as describing a single parameter&nbsp;<code>a</code> with the value <code>&amp;b</code>.</p>
<h3>Final Note</h3>
<p>Regardless of all this, all inspection of path parameters should be done using the appropriate methods (see  <a href="parameters.html">"Request Parameters and
Uploads"</a>),
and direct access to the query string should only occur in situations
of a specialised nature such as the building of URLs for output.</p>
<h2>More About Paths</h2>
<ul>
  <li><a href="path-info.html">Paths To and Within Applications</a></li>
  <li><a href="path-design.html">Path Design and Interpretation</a></li><li><a href="path-value-encoding.html">Encoding and Decoding Path Values</a></li><li><a href="path-manipulation.html">Manipulating Paths</a></li>
  <li><a href="path-info-support.html">Path Info Support in Server
Environments</a></li>
</ul>
</body></html>