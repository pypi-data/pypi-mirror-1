<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type" />
  <title>Using Sessions</title>
  <link href="styles.css" rel="stylesheet" type="text/css" /></head>
<body>
<h1>Using Sessions</h1>
<p>Unlike cookies, session information is always stored on the server
and is not communicated back to the user. Consequently, sessions have
several advantages over cookies, and the uses of sessions may include
the storage of...</p>
<ul>
  <li>Sensitive or private information. Although such information can
be stored without needing to
encrypt it, in many applications you will still want to
encrypt such information anyway, no matter where it is stored or how it
is communicated.</li>
  <li>Large amounts of session information can be stored, or at least
larger amounts than are typically allowed using cookies.</li>
</ul>
<div class="WebStack">
<h3>WebStack API - Using Sessions</h3>
<p>In WebStack, a session appears as a dictionary to applications and
is acquired for a specific user through the <a href="../apidocs/public/WebStack.Generic.Transaction-class.html">transaction</a>
object. The following methods are provided in the transaction for
accessing and maintenance of session information:</p>
<dl>
  <dt><code>get_session</code></dt>
  <dd>This method returns the session for the identified user. The <code>create</code>
parameter can be set to a true value to create a new session for a user
if no session previously existed; otherwise <code>None</code> is
returned in such situations.</dd>
  <dt><code>expire_session</code></dt>
  <dd>This method causes the session information associated with the
identified user to be forgotten. Note that this may not really happen
until the user sends another request, and that the <code>get_session</code>
method may still return the current session.</dd>
</dl>
<p>Session objects, which resemble dictionaries, employ plain Python
strings as keys in the accessing of information, and as the values
loaded and stored inside the session. Unlike cookies, upon setting
information within a session, such information is remembered thereafter
without any other actions being necessary to make that information
permanent or persistent.</p>
<dl>
</dl>
</div>
<h2>How and When to Access Sessions</h2>
<p>To find out if a session has already been created, ask for a session
by specifying that one should not be automatically created:</p>
<pre>        # In the respond method...<br />        session = trans.get_session(create=0)    # session is None if no session already exists</pre>
<p>To ensure that a session exists, just ask for a session:</p>
<pre>        # In the respond method...<br />        session = trans.get_session()            # this is the same as using create=1</pre>
<p>Session contents may mostly be accessed like dictionaries, so to
access the keys within a session the following code could be used:</p>
<pre>        # In the respond method after obtaining a session...<br />        for key in session.keys():<br />            [Do something with the key - perhaps obtain values.]</pre>
<p>To test the presence of a key, and to access values associated with
a key, the usual dictionary methods apply:</p>
<pre>        # In the respond method after obtaining the session...<br />        if session.has_key("my_data"):<br />            my_data = session["my_data"]<br />            [Do something with my_data.]<br />            session["my_data"] = my_data</pre>
<p>The session for the user may be removed or "expired" as follows:</p>
<pre>        # In the respond method...<br />        trans.expire_session()</pre>
<p>Note that WebStack automatically knows which session is to be
expired since only one such session can exist for the identified user.</p>
<h2><a name="Limitations"></a>Session Limitations and Guidelines</h2>
<ul>
  <li>Due to various limitations in the storage of session information,
it is recommended that each item of data is converted to a string value
when being set in the session, and that the key employed is also a
string value. These limitations may be removed in a later release.</li>
</ul>

</body></html>
