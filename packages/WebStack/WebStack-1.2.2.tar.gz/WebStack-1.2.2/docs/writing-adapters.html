<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  
  <title>Writing Adapters</title><meta name="generator" content="amaya 8.1a, see http://www.w3.org/Amaya/" />
  <link href="styles.css" rel="stylesheet" type="text/css" /></head>
<body>
<h1>Writing Adapters</h1>
<p>Depending on how "simple" the
adapter code is allowed to be for a
given
server environment (see the <a href="#table">table</a>
for a
summary), you will either need to write a small piece of code which
initialises and deploys your application, or to produce a more
complicated
piece of code which satisfies some more demanding server requirements.</p>
<h2>Simple Adapters - Using the
deploy Function</h2>
<p>When deploying an application,
it is possible to use a one-shot
deployment
function for BaseHTTPRequestServer, CGI, Django,&nbsp;Java Servlet, mod_python, Twisted and WSGI configurations. The
<code>deploy</code>
function is called as follows:</p>
<pre>deploy(resource)<br />deploy(resource, authenticator) # where authenticators are used</pre>
<p>For some frameworks, an address
may be specified:</p>
<pre>deploy(resource, address=(host_string, port_integer))<br />deploy(resource, authenticator, address=(host_string, port_integer))</pre>
<p>And for some frameworks, the return value of the function is important:</p><pre>something = deploy(resource)<br />something, something_else = deploy(resource, authenticator)</pre><p>Here is a summary of which
frameworks require address information and which produce important return values from the&nbsp;<code>deploy</code> function:</p>
<table border="1" cellpadding="5" cellspacing="0">
  <tbody>
    <tr>
      <th>Framework</th>
      <th>Address Information</th><th>Return Values</th>
    </tr>
    <tr>
      <td>BaseHTTPRequestHandler</td>
      <td>Supported</td><td align="undefined" valign="undefined"></td>
    </tr>
    <tr>
      <td>CGI</td>
      <td>Ignored</td><td align="undefined" valign="undefined"></td>
    </tr>
    <tr><td align="undefined" valign="undefined">Django</td><td align="undefined" valign="undefined">Ignored</td><td align="undefined" valign="undefined">Handler function</td></tr><tr><td align="undefined" valign="undefined">Java Servlet</td><td align="undefined" valign="undefined">Ignored</td><td align="undefined" valign="undefined">Servlet class</td></tr><tr><td align="undefined" valign="undefined">mod_python</td><td align="undefined" valign="undefined">Ignored</td><td align="undefined" valign="undefined">Handler function and authenticator function (a 2-tuple)</td></tr><tr>
      <td>Twisted</td>
      <td>Supported (<code>host_string</code>
is ignored)</td><td align="undefined" valign="undefined"></td>
    </tr>
    <tr><td align="undefined" valign="undefined">Webware (&gt; 0.8.1)</td><td align="undefined" valign="undefined">Ignored</td><td align="undefined" valign="undefined">URL context object</td></tr><tr>
      <td>WSGI</td>
      <td>Ignored</td><td align="undefined" valign="undefined"></td>
    </tr>
  </tbody>
</table>
<h3>Debugging Applications</h3>
<p>Sometimes, when resources throw unhandled exceptions when processing
requests, it is desirable to see the details of the exceptions either
in the Web browser or in the console from which the application was
started. For such purposes, a parameter to the&nbsp;<code>deploy</code>
function can be used:</p>
<pre>deploy(resource, handle_errors=0)</pre>
<p>The&nbsp;<code>handle_errors</code> parameter, if specified with a
false value, will not supress unhandled exceptions with an "internal
server error" response, but will instead provide the underlying server
environment's report of such exceptions.</p>
<h2><a name="table">Complicated Adapters -
Providing
Framework-Specific Objects</a></h2>
<p>The remaining frameworks (Java
Servlet,
mod_python, Webware and
Zope) do
not support the <code>deploy</code>
function due to the way
applications are
typically integrated into the various server mechanisms. In these
cases, it
may be worth investigating the examples provided and using their
adapter code
as a template for the code for your own applications. Here is a summary
which
indicates the server environments or frameworks which need most work:</p>
<table border="1" cellpadding="5" cellspacing="0">
  <tbody>
    <tr>
      <th>Framework</th>
      <th>Adapter Code Requirements</th>
      <th>Deployment Process</th>
    </tr>
    <tr>
      <td>BaseHTTPRequestHandler</td>
      <td>Simple - see above</td>
      <td>Run the adapter code
directly</td>
    </tr>
    <tr>
      <td>CGI</td>
      <td>Simple - see above</td>
      <td>Web server runs the
adapter code</td>
    </tr>
    <tr><td align="undefined" valign="undefined">Django</td><td align="undefined" valign="undefined">Simple - see above</td><td align="undefined" valign="undefined">The adapter prepares the handler function</td></tr><tr>
      <td>Java Servlet</td>
      <td><span style="font-family: monospace;"></span><code></code>Simple - see above</td>
      <td>The adapter prepares the servlet class</td>
    </tr>
    <tr>
      <td>mod_python</td>
      <td><span style="font-family: monospace;"></span><code></code>Simple - see above</td>
      <td>The adapter prepares the handler function</td>
    </tr>
    <tr>
      <td>Twisted</td>
      <td>Simple - see above</td>
      <td>Run the adapter code
directly</td>
    </tr>
    <tr>
      <td>Webware</td>
      <td>&lt;= 0.8.1: Must
implement <code>InstallInWebKit</code>
function<br />
&gt; 0.8.1: Simple - see above</td>
      <td>Application must be
deployed within WebKit</td>
    </tr>
    <tr>
      <td>WSGI</td>
      <td>Simple - see above</td>
      <td>Web server runs the
adapter code</td>
    </tr>
    <tr>
      <td>Zope</td>
      <td>Must provide lots of
Zope administative classes and functions</td>
      <td>Application must be
deployed within Zope</td>
    </tr>
  </tbody>
</table>
<p>See <a href="deploying-applications.html">"Deploying an
Application"</a>
for more details of the deployment process for each environment.</p>
</body></html>