<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type" />
  
  <title>Paths To and Within Applications</title><meta name="generator" content="amaya 8.1a, see http://www.w3.org/Amaya/" />
  <link href="styles.css" rel="stylesheet" type="text/css" /></head>
<body>
<h1>Paths To and
Within&nbsp;Applications</h1>
<p>One thing to be aware of, in the
code of an application, is which part
of
a
path refers to the location of the application in a server environment, and
which refers to some resource within the application itself. Consider
this
path:</p>
<pre>/folder/application/resource</pre>
<p>Let us say that the application
was deployed in a Zope server
instance
inside
<code>folder</code>
and with the name <code>application</code>.
We may
then
say that the path to the application is this:
</p>
<pre>/folder/application</pre>
<p>Meanwhile, the path <span style="font-style: italic;">within</span> the
application is just this:
</p>
<pre>/resource</pre>
<p>In WebStack, we refer to this latter case - the path within the
application -&nbsp;as the "path info".</p>
<div class="WebStack">
<h3>WebStack API - Paths To
Resources Within Applications</h3>
<p>On transaction objects, the
following methods exist to inspect paths
to
resources within applications.</p>
<dl>
  <dt><code>get_path_info</code></dt>
  <dd>This gets the path of a
resource within an application. The path should always contain a
leading&nbsp;<code>/</code> character at the very least.<br />
An optional&nbsp;<code>encoding</code> parameter may be used to assist the process of converting the path to a Unicode object - see <a href="encodings.html">"Character Encodings"</a> for more information.</dd>
  <dt><code>get_virtual_path_info</code></dt>
  <dd>This gets the path of a
resource within a part of an application
- the application itself decides the scope of the path and can set the
"virtual path info" using the <code>set_virtual_path_info</code>
method. The path should either contain a leading&nbsp;<code>/</code>
character optionally followed by other characters, or an empty string.<br />

An optional&nbsp;<code>encoding</code> parameter may be used to assist the process of converting the path to a Unicode object - see <a href="encodings.html">"Character Encodings"</a> for more information.</dd><dt><code>get_processed_virtual_path_info</code></dt>
  <dd>This gets the virtual path information which is considered to
have been processed or traversed, and consists of the part of the path
info which does not appear in the virtual path info. In other words,
when components at the start of the virtual path info are removed, such
components will appear at the end of the processed virtual path info.<br />

An optional&nbsp;<code>encoding</code> parameter may be used to assist the process of converting the path to a Unicode object - see <a href="encodings.html">"Character Encodings"</a> for more information.</dd>

</dl>
</div>
<h2>Choosing the Right Path Value</h2>
<p>Given that the&nbsp;path&nbsp;may change depending on where an
application is deployed in a server environment, it may not be very
easy to use when determining which resources are being requested or
accessed within your application. Conversely, given that the "path
info" does not mention the full path to where the resources are,
it may be difficult to use that to provide references or links to those
resources. Here is a summary of how you might use the different path
values:</p>
<table style="text-align: left; width: 80%;" align="center" border="1" cellpadding="5" cellspacing="0" width="80%">
  <tbody>
    <tr>
      <th style="text-align: center;">Type of information</th>
      <th style="text-align: center;">Possible uses</th>
    </tr>
    <tr>
      <td align="undefined" valign="undefined">Path</td>
      <td align="undefined" valign="undefined">Building links to
resources within an application.</td>
    </tr>
    <tr><td align="undefined" valign="undefined">Path without path info</td><td align="undefined" valign="undefined">Finding the location of the application in a server environment. (This is the path with the&nbsp;"path info" subtracted from
the end.)</td></tr><tr>
      <td align="undefined" valign="undefined">Path info</td>
      <td align="undefined" valign="undefined">Determining which
resources are being accessed within an application.</td>
    </tr>
    <tr>
      <td align="undefined" valign="undefined">Virtual path info</td>
      <td align="undefined" valign="undefined">This is an
application-defined version of "path info" and is discussed below.</td>
    </tr>
  </tbody>
</table>
<h2>Using the Virtual Path</h2>
<p>Although WebStack&nbsp;sets the "path info" so that applications
know which part of themselves are being accessed,&nbsp;you may decide
that upon
processing the request, these different parts of your application
should be
presented with different path information. For example, in a
hierarchical
structure of resources, each resource might use the first part of the
"path info" as an input to some kind of processing, but then have the
need to remove the
part they used, passing on a modified path to the other resources. For
such approaches, the "virtual path info" may be used instead, since it
permits modification within an application.</p>
<p>So starting with a virtual path like this (which would be the same
as the "path info")...</p>
<pre>/company/department/employee</pre>
<p>...a resource might extract&nbsp;<code>company</code> from the start
of the path as follows:</p>
<pre>        # Inside a respond method...<br />        path = trans.get_virtual_path_info()    # get the virtual path<br />        parts = path.split("/")                 # split the path into components - the first will be empty</pre>
<p>Then, having processed the first non-empty part (remembering that
the first part will be an empty string)...</p>
<pre>        if len(parts) &gt; 1:                      # check to see how deep we are in the path<br />            process_something(parts[1])         # process the first non-empty part</pre>
<p>...it will reconstruct the path, removing the processed part (but
remembering to preserve a leading&nbsp;<code>/</code> character)...</p>
<pre>            trans.set_virtual_path_info("/" + "/".join(parts[2:]))</pre>
<p>...and hand over control to another resource which would do the same
thing with the first of the other path components (<code>department</code>
and&nbsp;<code>employee</code>), and so on.</p>
<p>The compelling thing about this strategy is the way that each
resource would only need to take the "virtual path info" into
consideration, and that each resource would believe that it is running
independently from any "parent" resource. Moreover, such resources
could be deployed independently and still operate in the same way
without being "hardcoded" into assuming that they always reside at a
particular level in a resource hierarchy.</p>
<div class="WebStack">
<h3>WebStack API - Paths To
Resources Within Applications</h3>
<p>On transaction objects, the
following method exists to set virtual paths within applications.</p>
<dl>
  <dt><code>set_virtual_path_info</code></dt>
  <dd>This sets the virtual path, affecting subsequent calls to the <code>get_virtual_path_info</code>
method. The path should either contain a leading&nbsp;<code>/</code>
character optionally followed by other characters, or an empty string.</dd>
</dl>
</div>
</body></html>