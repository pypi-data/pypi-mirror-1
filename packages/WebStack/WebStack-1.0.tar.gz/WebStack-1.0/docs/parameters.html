<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  
  <title>Request Parameters and Uploads</title><meta name="generator" content="amaya 8.1a, see http://www.w3.org/Amaya/" />
  <link href="styles.css" rel="stylesheet" type="text/css" /></head>
<body>
<h1>Request Parameters and Uploads</h1>
<p>Even though it is possible to expose different parts of an
application
using different <a href="paths.html">URLs and paths</a>, this usually
is only
enough for applications which model some kind of <a href="paths-filesystem.html">filesystem</a> or repository.
Applications which
involve user input through forms, for example, need to be able to
receive
such input by other means, and this is where request parameters come
in. For
example, when a user fills out a form in a Web browser, the following
happens:</p>
<ol>
  <li>The browser collects the values in the form fields and puts them
in a request as request parameters.</li>
  <li>The request is sent to the server environment and into the
application.</li>
  <li>The application reads the field values using the WebStack API.</li>
</ol>
<h2>Parameter Origins</h2>
<p>Request parameters exist in two forms:</p>
<ul>
  <li><a href="parameters-headers.html">Request header parameters</a> - parameters specified in the URL as a
"query string".</li>
  <li><a href="parameters-body.html">Request body parameters</a> - parameters&nbsp;are found in the request body when the POST <a href="methods.html">request method</a>
is used.</li>
</ul>
<p>One useful application of parameters transferred in request bodies
is the
sending or uploading of file contents through such parameters - this is
described in "Request Body Parameters". Another way of uploading
content in
conjunction with the <code>PUT</code> <a href="methods.html">request
method</a> is mentioned below.</p>
<div class="WebStack">
<h3>WebStack API - Getting All Parameters</h3>
<p>If the origin of the different parameters received in a request is
not
particularly interesting or important, WebStack provides a convenience
method
in transaction objects to get all known parameters from a request:</p>
<dl>
  <dt><code>get_fields</code></dt>
  <dd>This method returns a dictionary mapping field names to lists of
values for all known parameters. Each value will be a Unicode object.<br />
An optional <code>encoding</code> parameter may be used to assist the
process of converting parameter values to Unicode objects - see <a href="parameters-body.html">"Request Body Parameters"</a> and <a href="encodings.html">"Character Encodings"</a> for more discussion of
this parameter.</dd>
  <dt><code>get_query_string</code></dt>
  <dd>This method returns the part of the URL which contains parameter
information. Such information will be "URL-encoded", meaning that
certain characters will have the form&nbsp;<code>%xx</code> where&nbsp;<code>xx</code>
is a two digit hexadecimal number referring to the byte value of the
unencoded character - see&nbsp;<a href="encodings.html">"Character
Encodings"</a> for information on how byte values should be
interpreted. </dd>
</dl>
</div>
<p>Generally, it is not recommended to just get all parameters since
there
may be some parameters from the request headers which have the same
names as
some other parameters from the request body. Consequently, confusion
could
arise about the significance of various parameter values.</p>
<h2>Using PUT Requests to Upload Files</h2>
<p>When handling requests in your application, instead of treating
request as
containers of parameters and using the WebStack API methods to access
those
parameters, you can instead choose to read directly from the data sent
by the
user and interpret that data in your own way. In most situations, this
is not
really necessary - those methods will decode request parameters (for
example,
form fields) in a way which is fairly convenient - but when files are
being
sent, and when the <a href="methods.html">request method</a> is
specified as
<code>PUT</code>, it is necessary to obtain the input stream from the
request
and to read the file contents from that stream.</p>
<div class="WebStack">
<h3>WebStack API - Reading Directly from Requests</h3>
<p>When the request does not contain standard form-encoded parameter
information and instead contains the contents of an uploaded file,
methods
like <code>get_fields</code> and <code>get_fields_from_body</code>
should be
avoided and other methods in the transaction employed.</p>
<dl>
  <dt><code>get_request_stream</code></dt>
  <dd>This returns the input stream associated with the request.
Reading from this will result in the request body being obtained as a
plain Python string.</dd>
  <dt><code>get_content_type</code></dt>
  <dd>This returns a content type object (typically <code>WebStack.Generic.ContentType</code>)
which describes the request body's contents.</dd>
</dl>
</div>
<p>The purpose and behaviour of <code>PUT</code> <a href="methods.html">request methods</a> is described in the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616.html">HTTP
specification</a>.</p>
</body></html>