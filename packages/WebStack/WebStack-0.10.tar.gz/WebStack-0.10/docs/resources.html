<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type" />
  <title>Applications and Resources</title>
  <meta name="generator"
 content="amaya 8.1a, see http://www.w3.org/Amaya/" />
  <link href="styles.css" rel="stylesheet" type="text/css" />
</head>
<body>
<h1>Applications and Resources</h1>
At its simplest a WebStack application is just&nbsp;a single Python
class that we call a "resource". This class can be defined inside a
normal Python module or package, so let us start by doing the following:<br />
<ol>
  <li>Create a new directory for
our application; choose any name since we just want an empty space in
which to put new files.</li>
  <li>Create a file called <code>MyApplication.py</code>
- this is our module.</li>
</ol>
We are going to call our resource&nbsp;<code>MyResource</code>
and in principle it will have a structure that looks like this:
<pre>class MyResource:<br />    def respond(self, trans):<br />        [Examine the transaction, decide what the user wants to do.]<br />        [Perform some kind of action with the information supplied.]<br />        [Produce some kind of response which tells the user what happened.]</pre>
<p>It is in this kind of resource
class that we write the
actual application code or at least the beginnings of it. When a user
of the application sends us a request,
the <code>respond</code>&nbsp;method
will be called and the code
within it executed. The parts of the pseudo-code in
the above text which aren't valid Python
(ie. the bits in square brackets) will, when we have written them, use
the&nbsp;<code>trans</code>
object to find out what any given user of the application has sent us,
and to send information back
to the
user in response.</p>
<h2>Starting Simple</h2>
<p>The simplest way to turn this
into a working application is to
ignore the first two activities mentioned in the pseudo-code and just
to produce some kind of
response. Here is how we can make our application do something:</p>
<ol>
  <li>Edit the&nbsp;module
file&nbsp;<code>MyApplication.py</code>.</li>
  <li>Write into it the following
code which defines&nbsp;<code>MyResource</code>:</li>
</ol>
<pre>class MyResource:<br />   &nbsp;def respond(self, trans):<br />        out = trans.get_response_stream()<br />        print &gt;&gt;out, "Hello world."</pre>
<h2>Testing the Resource</h2>
<p>To test this resource we need to deploy it, and to do that we need
an
adapter. Here is a quick way of writing an adapter and testing this
code:</p>
<ol>
  <li> Create a&nbsp;file called&nbsp;<code>MyAdapter.py</code> - you
can choose another name if you want - this will be where the adapter
code lives.</li>
  <li>Copy the example adapter in <a href="deploying.html">"Deploying
a WebStack Application"</a> and write it into&nbsp;<code>MyAdapter.py</code>.</li>
  <li>Now, with two files in your directory, <code>MyApplication.py</code>
and <code>MyAdapter.py</code>, you may run&nbsp;<code>MyAdapter.py</code>
as follows:</li>
</ol>
<pre>python MyAdapter.py</pre>
<p>This should start the adapter program and print the following
message:</p>
<pre>Serving...</pre>
<p>You should now be able to visit&nbsp;<code>http://localhost:8080</code>
in your
browser and see the message printed by your application:</p>
<pre>Hello world.</pre>
<h2>About Resources</h2>
<ul>
  <li><a href="resource-creation.html">How Resources are Created</a></li>
  <li><a href="design.html">Application Design Considerations</a></li>
</ul>
</body>
</html>
