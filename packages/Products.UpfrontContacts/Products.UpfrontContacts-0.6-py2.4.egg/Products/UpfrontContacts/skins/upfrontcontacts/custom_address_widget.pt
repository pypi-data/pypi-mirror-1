<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    i18n:domain="plone">

<body>

<metal:view_macro define-macro="view"
                    tal:define="innerJoin field/innerJoin;
            outerJoin field/outerJoin;
            subfieldViews python:field.getSubfieldViews(here,innerJoin)"
            tal:replace="structure python:outerJoin.join(subfieldViews)" />

<metal:define define-macro="edit"
    tal:define="
    addr python:request.form.get(fieldName, accessor());
    address python:addr.get('address','');
    zip python:addr.get('zip','');
    city python:addr.get('city','');
    state python:addr.get('state','');
    country python:addr.get('country', '');">
<fieldset>
<legend i18n:translate=""
        tal:content="python:widget.Label(here)">
</legend>

<table>
<tr>
<td class="field" valign="top">
    <label for="PhysicalAddress_address"
        tal:attributes="for string:${fieldName}_address">Address</label>
</td>
<td>
<textarea 
    cols="20" rows="3"
    tal:attributes="
        tabindex tabindex/next;
        name string:${fieldName}.address:record:ignore_empty;"
    tal:content="address"></textarea>
</td>
</tr>

<tr>
<td class="field">
    <label for="PhysicalAddress_city"
        tal:attributes="for string:${fieldName}_city">City</label>
</td>
<td>
<input tal:attributes="
    value city;
    tabindex tabindex/next;
    name string:${fieldName}.city:record:ignore_empty"
    />
</td>
</tr>

<tr>
<td class="field">
    <label for="PhysicalAddress_state"
        tal:attributes="for string:${fieldName}_state">State</label>
</td>
<td>
<input tal:attributes="
    value state;
    tabindex tabindex/next;
    name string:${fieldName}.state:record:ignore_empty" />
</td>
</tr>

<tr>
<td class="field">
    <label for="PhysicalAddress_zip"
        tal:attributes="for string:${fieldName}_zip">Postal code</label>
</td>
<td>
<input tal:attributes="
    value zip;
    tabindex tabindex/next;
    name string:${fieldName}.zip:record:ignore_empty" />
</td>
</tr>

<tr>
<td class="field">
    <label for="PhysicalAddress_country"
        tal:attributes="for string:${fieldName}_country">Country</label>
</td>
<td>
<select size="1"
    tal:attributes="
        tabindex tabindex/next;
        name string:${fieldName}.country:record:ignore_empty" 
    tal:define="values python:field.getVocabularyFor('country', here)">
    <option tal:repeat="value values"
            tal:content="value"
            tal:attributes="
                value value;
                selected python:test(value==country, 'selected', '');"> #
    </option>
</select>
</td>
</tr>
</table>
</fieldset>
</metal:define>

<div metal:define-macro="search">
<div metal:use-macro="here/widgets/string/macros/edit">
</div>
</div>

</body>

</html>
