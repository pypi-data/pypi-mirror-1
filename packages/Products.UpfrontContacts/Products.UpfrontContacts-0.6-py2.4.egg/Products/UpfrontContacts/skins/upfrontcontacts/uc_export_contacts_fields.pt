<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="upfrontcontacts">

<body>

<metal:block
    fill-slot="top_slot"
    tal:define="dummy python:request.set('disable_border', 1)" />

<div metal:fill-slot="main">
<div metal:define-macro="main"
    tal:omit-tag=""
    tal:define="export_type request/export_type | nothing;
        contactstool nocall:portal/upfront_contacts_tool;
        fieldnames python:contactstool.contactTypeFieldNames(export_type);">

<h1 i18n:translate="heading_export_contacts">Export contacts</h1>

<h4 i18n:translate="heading_import_contacts_step_one"
    >Step 2: Select fields to export and download CSV file</h4>

<form name="form" action="." method="post"
    tal:attributes="action here/upfront_contacts_tool/absolute_url">
    
<table class="listing" summary="Field names">
    
<thead>
<tr>
    <th class="nosort">
        <input type="checkbox"
            onclick="toggleSelect(this, 'fields:list');"
            class="noborder"
            name="alr_toggle"
            value="#"
            id="alr_toggle"
            tabindex=""
            tal:attributes="tabindex tabindex;"/>
    </th>
    <th i18n:translate="field_name">Field Name</th>
</tr>
</thead>
    
<tbody>

<tal:block repeat="fieldname fieldnames">
<tr>
<td>
    <input type="checkbox" name="fields:list" checked="checked"
            tal:attributes="value fieldname;
                            tabindex tabindex;">
</td>
<td tal:content="fieldname" i18n:translate="">fieldname</td>
</tr>
</tal:block>

</tbody>
</table>
            
<div class="submit">
    <input type="hidden" name="delimiter"
        tal:attributes="value request/delimiter">
    <input type="hidden" name="quote_char"
        tal:attributes="value request/quote_char">
    <input type="hidden" name="coding"
        tal:attributes="value request/coding">
    <input type="hidden" name="export_type"
        tal:attributes="value request/export_type">
    <input type="hidden" name="current_path"
        tal:attributes="value python:'/'.join(here.getPhysicalPath())">
    
    <input class="context"
            type="submit"
            value="Download"
            name="exportCSV:method"
            i18n:attributes="value"
            tabindex=""
            tal:attributes="tabindex tabindex/next;"
            />
</div>
    
</form>
</div>
</div>
</body>
</html>
