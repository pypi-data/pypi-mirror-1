<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    i18n:domain="plone">

<body>

<metal:view_macro define-macro="view"
                    tal:define="innerJoin field/innerJoin;
            outerJoin field/outerJoin;
            subfieldViews python:field.getSubfieldViews(here,innerJoin)"
            tal:replace="structure python:outerJoin.join(subfieldViews)" />

<metal:define define-macro="edit"
    tal:define="
    emailaddress python:request.form.get(fieldName, accessor());
    addresstype python:emailaddress.get('addresstype','');
    email python:emailaddress.get('email','')">

<span style="white-space: nowrap">
<select size="1"
    style="border: transparent; background-color: #efefef; font-weight: bold; font-size: 90%"
    tal:attributes="
    tabindex tabindex/next;
    name string:${fieldName}.addresstype:record:ignore_empty" 
    tal:define="
    values python:field.getVocabularyFor('addresstype', here)">
    <option
        tal:repeat="value values"
        tal:content="value"
        tal:attributes="
        value value;
        selected python:test(value==addresstype, 'selected', '');"> #
    </option>
</select>

<input size="40" tal:attributes="
    value email;
    tabindex tabindex/next;
    name string:${fieldName}.email:record:ignore_empty" />

<span tal:omit-tag=""
    tal:define="error python:errors.get(fieldName)">
<div tal:content="error"
    >Validation Error</div>
</span>
</span>
</metal:define>

<div metal:define-macro="search">
<div metal:use-macro="here/widgets/string/macros/edit">
</div>
</div>

</body>

</html>

