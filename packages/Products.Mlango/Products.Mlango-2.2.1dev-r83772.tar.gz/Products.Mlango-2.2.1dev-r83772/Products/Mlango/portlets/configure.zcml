<configure
    xmlns="http://namespaces.zope.org/zope"
    xmlns:browser="http://namespaces.zope.org/browser">

    <include package=".browser"/>

    <!-- Initialize default settings for Mlango dashboard, based on the
      'new user' event.    
    -->
    <!--subscriber
        for="Products.PluggableAuthService.interfaces.authservice.IPropertiedUser
            Products.PluggableAuthService.interfaces.events.IPrincipalCreatedEvent"
        handler=".utils.newUser"
    /-->

    <!-- The MlangoDashboardDefaults factory provides an realization of the
      IMlangoDashboardDefaults interface and adapts the IPropertiesUser.
    -->
    <!--adapter
      factory=".defaults.MlangoDashboardDefaults"
      provides=".interfaces.IMlangoDashboardDefaults"
      for="Products.PluggableAuthService.interfaces.authservice.IPropertiedUser"
    /-->
    
    <!-- Portlet wrapper to enable Mlango rendering wrapping -->
    <adapter
      factory=".wrapper.MlangoPortletRenderingWrapper"
      provides=".interfaces.IMlangoPortletRenderingWrapper"
      for="plone.portlets.interfaces.IPortletRenderer
           zope.annotation.interfaces.IAnnotations"
    />

    <!-- Portlet annotations for Mlango. This enables specific settings per portlet, per user -->
    <adapter
      factory="zope.annotation.attribute.AttributeAnnotations"
      provides="zope.annotation.interfaces.IAnnotations"
      for="plone.portlets.interfaces.IPortletAssignment"
    />

    <!-- Portlet manager renderer for Mlango -->
    <adapter
      factory=".managerrenderer.MlangoPortletManagerRenderer"
      provides="plone.portlets.interfaces.IPortletManagerRenderer"
      for="plone.app.portlets.interfaces.IDashboard"
    />

</configure>