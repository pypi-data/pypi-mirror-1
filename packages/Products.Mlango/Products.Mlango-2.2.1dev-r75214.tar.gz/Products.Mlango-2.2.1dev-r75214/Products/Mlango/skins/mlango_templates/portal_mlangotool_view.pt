<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/prefs_main_template/macros/master"
      i18n:domain="mlango">

 <metal:block fill-slot="top_slot"/>

    <div metal:fill-slot="prefs_configlet_content"
         tal:define="errors python:request.get('errors', {});"
         class="configlet">
        <h1> Simple Overview of Registrated Viewlets </h1>
        <table tal:define="
	           getToolByName nocall:modules/Products.CMFCore.utils/getToolByName;
	           tool python: getToolByName(context, 'portal_mlangotool');"
	           tal:attributes="class string: mlangoviewlets-table">
           <tr>
              <th>Viewlet ID</th>
              <th>Icon</th>
              <th>Fixed</th>
              <th>type</th>
          </tr>
           <tr tal:repeat="viewlet_id python: tool.listViewletIds()">
               <div tal:define="mlangoviewlet python: tool.getViewlet(viewlet_id)">
	            <td><a href="" tal:content="mlangoviewlet/getId" tal:attributes="href python: mlangoviewlet.absolute_url()">Viewletid</a></td>
                       <td><img tal:on-error="nothing" tal:replace="structure python:mlangoviewlet.getViewleticon()"/>
                       <td tal:content="mlangoviewlet/fixed">Fixed</td>
                       <td tal:content="mlangoviewlet/portal_type">Type
                   </td>
               </div>
           </tr>
        </table>
        <br/>
        <h1> Quick links to add new viewlets </h1>
        <a href="createObject?type_name=MlangoRSSViewlet">Add RSS viewlet</a><br>
        <a href="createObject?type_name=MlangoCustomViewlet">Add Custom viewlet</a><br>
    </div>
</html>
