<li tal:define="viewlet_id context/UID; 
		   getToolByName nocall:modules/Products.CMFCore.utils/getToolByName;
		   tool python:getToolByName(context, 'portal_mlangotool');
		   dashboard_id python: context.REQUEST.get('col') or 0;
		   viewletobject python: tool.getViewlet(viewlet_id);
		   minimized python: context.REQUEST.get('minimized') or {'min':''};"
   tal:attributes="id python: 'li_%s' % viewlet_id;
		   class python: viewletobject.getFixed() != -1 
		   and 'nodrag mlango-viewlet' 
		   or 'mlango-viewlet';">
   <span class="border-top-left"></span>
   <span class="border-top-right"></span>	
   <div>
	 <div id="id" class="viewlet-container" tal:attributes="id context/UID;">
	   <div tal:attributes="class string:viewlet-toolbar;">
		   <div class="viewlet-title">
		     <img src="MlangoTool.png" tal:on-error="nothing" tal:attributes="src viewletobject/viewleticon/absolute_url"/>
		     <span tal:replace="viewletobject/title"/>
		   </div>
		   <div class="toolbar">
			     <div tal:condition="python: viewletobject.getFixed() == -1"
			       class="remove clickable-icon">
			     </div>
			     <div tal:condition="python: viewletobject.getFixed() != -1"
			       tal:attributes="class python: 'remove-locked clickable-icon'">
			     </div>
			     <div class="toggleicon">
				 <div tal:attributes="id string:${viewlet_id}_tbtoggle;
						      name string:${viewlet_id}_toggleme;
						      class python: minimized.get('min') 
							     and viewlet_id in minimized.get('min').split('--') 
							     and 'toggle clickable-icon minimized %s_toggleme'%viewlet_id 
							     or 'toggle clickable-icon %s_toggleme'%viewlet_id; ">
				 </div>
			     </div>
			     <div tal:condition="python: viewletobject.getHelp()" class="help clickable-icon"
				  tal:attributes="id string:${viewlet_id}_tbinfo;
						 target string:${viewlet_id}_help;
						 class python: minimized.get('min') 
							 and viewlet_id in minimized.get('min').split('--') 
							 and 'help clickable-icon minimized %s_toggleme'%viewlet_id 
							 or 'help clickable-icon %s_toggleme'%viewlet_id; ">
			     </div>
		   </div>
	       </div>
	   <!-- Main content -->
	   <div tal:attributes="id string:${viewlet_id}_content;
				class python: minimized.get('min') 
				       and viewlet_id in minimized.get('min').split('--') 
				       and 'viewlet-content minimized visualIEFloatFix %s_toggleme'%viewlet_id 
				       or 'viewlet-content visualIEFloatFix %s_toggleme'%viewlet_id; ">
	       <div class="viewlet-help-container" tal:condition="python: viewletobject.getHelp()">
		     <div class="viewlet-help"
			  tal:attributes="id string:${viewlet_id}_help"
			  style="display:none">
			   <div class="help">
			       <span tal:replace="python: viewletobject.getHelp()"/>
			       <span metal:use-macro="here/mlango_macros/macros/copyright"/>
			   </div>
		     </div>
	       </div>
		<div tal:on-error="string: Error in viewletcontent!!!!"
		     tal:replace="structure context/rendercontent">ViewletContent
		</div>
	 </div>
       </div>
   </div>
   <span class="border-bottom-left"></span>
   <span class="border-bottom-right"></span>
   </li>