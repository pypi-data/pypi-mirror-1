<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN"
    "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      {% block xmlns -%}
      xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
      xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
      xmlns:dc="http://purl.org/dc/elements/1.1/"
      xmlns:foaf="http://xmlns.com/foaf/0.1/"
      {%- endblock %}>
  
  {% import "macros/html" as html -%}
  
  <head>
    {% block head %}
    
      {% block meta %}
        <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
      {% endblock %}
      
      <title>
        {% block title_prefix -%}
          {% if 'wiki-name' in config %}{{ config['wiki-name']|e }} » {% endif %}
        {%- endblock %}
        {% block title -%}
          {{ title }}
        {%- endblock %}
      </title>
      
      {% block css %}
        {{ html.cssimport(make_relative("/media/css/reset.css")) }}
        {{ html.cssimport(make_relative("/media/css/layout.css")) }}
        {{ html.cssimport(make_relative("/media/css/typography.css")) }}
        {{ html.cssimport(make_relative("/media/css/pygments.css")) }}
      {% endblock %}
      
      {% block js %}{% endblock %}
      
      {% block analytics %}
        {% if 'google-analytics' in config %}
          <!-- Google Analytics -->
          <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', '{{ config['google-analytics'] }}']);
            _gaq.push(['_trackPageview']);
            (function() {
              var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
              ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
            })();
          </script>
        {% endif %}
      {% endblock analytics %}
    {% endblock head %}
  </head>
  
  <body {% block body_attrs %}{% endblock %}>{% block body %}
    <div id="content">
      
      {% block crumbs %}
        {% if crumbs %}
          <div id="breadcrumbs">
            <p>
                {% for name, href in crumbs %}
                  {% if href == None %}
                    {{ name|e }}
                  {% else %}
                    <a href="{{ make_relative(href)|e }}">{{ name|e }}</a>{% if loop.revindex0 %} &#187;{% endif %}
                  {% endif %}
                {% endfor %}
            </p>
          </div> <!-- div#breadcrumbs -->
        {% endif %}
      {% endblock crumbs %}
      
      {% block content %}
      {% endblock content %}
      
      {% block footer %}
        <p id="footer">
          {% if 'wiki-name' in config %}
            {{ config['wiki-name']|e }} —
          {% endif %}
          Powered by <a href="http://bitbucket.org/zacharyvoase/markdoc">Markdoc</a>.
        </p>
      {% endblock footer %}
    
    </div> <!-- div#content -->
  {% block end %}{% endblock %}
  {% endblock body %}</body>
</html>
