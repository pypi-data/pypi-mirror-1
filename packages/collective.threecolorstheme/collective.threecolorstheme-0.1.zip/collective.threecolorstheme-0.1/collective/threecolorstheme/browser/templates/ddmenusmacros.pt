<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      i18n:domain="plone">
<head>
<tal:comments replace="nothing">
  Market Surfer macros
</tal:comments>
</head>

<body>
    <tal:comments replace="nothing">
      Drop Down menu recursive macro called by the viewlet marketsurfer.dropdown_sections
    </tal:comments>
    <metal:recursive define-macro="ddmenu-recurse">
      <div tal:condition="tab/subtabs"
          class="ddmenusRelativize">
        <ul class="submenu">
          <li class="subitem" tal:repeat="subtab tab/subtabs"
                              tal:attributes="id string:portaltab-${subtab/id};">
             <a tal:define="isLast repeat/subtab/end"
                tal:attributes="href subtab/url;
                                title subtab/description;
                                class python:isLast and 'lastItem' or nothing"
                tal:content="subtab/title">
                Subtab Title
             </a> 
             <tal:block tal:define="tab subtab">
                <metal:block use-macro="context/@@ddmenusmacros/macros/ddmenu-recurse" />        
             </tal:block>                    
          </li>
        </ul>
      </div>
    </metal:recursive>
</body>


</html>
