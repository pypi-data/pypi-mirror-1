<html metal:use-macro="context/@@master/macros/master">
    <metal:slot fill-slot="main"
                tal:define="tr  view/getTestrunner;
                                run view/getRun">

        <h2>
            <a tal:attributes="href string:showruns?testrunner_id:int=${request/testrunner_id}"
               tal:content="tr/name" 
            />
        </h2>
        <h3>Generated: 
            <span tal:content="python: run.created.strftime('%d.%m.%Y %H:%M')" />
            on <span tal:content="string: ${run/hostname} (${run/ipaddress})" />
        </h3>

        <table class="result">
            <thead>
                <tr>
                    <th>Module</th>
                    <th>Status</th>
                    <th>Tests passed/total</th>
                    <th>Logfile</th>
                </tr>
            </thead>
            <tbody>
                <tr tal:repeat="r view/getResults">
                    <td class="description" tal:content="r/module" />
                    <td tal:attributes="class string:status-${r/tests_ok}" 
                        tal:content="python: r.tests_ok and 'OK' or 'FAILED'" 
                    />
                    <td class="status">
                        <span tal:content="r/tests_passed" />/
                        <span tal:content="r/tests_total" />
                    </td>
                    <td class="log">
                        <a tal:attributes="href string:showresultlog?testrunner_id:int=${tr/id}&run_id:int=${run/id}&result_id:int=${r/id}">LOG</a>
                    </td>
                </tr>
            </tbody>
        </table>

    </metal:slot>
</html>
