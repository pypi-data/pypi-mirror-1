<tal:language tal:condition="view/available">
    <ul id="portal-languageselector"
        tal:define="showFlags view/showFlags;
                    languages view/languages;">
        <tal:language repeat="lang languages">
        <li tal:define="code lang/code;
                        selected lang/selected"
            tal:attributes="class python: selected and 'currentLanguage' or '';">
                <a href=""
                   tal:define="flag lang/flag|nothing;
                               name lang/native|lang/name"
                   tal:attributes="href lang/url;
                                   title name">
                    <tal:flag condition="python:showFlags and flag">
                        <img
                             width="14"
                             height="11"
                             alt=""
                             tal:attributes="src string:${view/portal_url}${flag};
                                             alt python: name;
                                             title python: name;
                                             class python: selected and 'currentItem' or '';" />
                    </tal:flag
                    ><tal:nonflag condition="python:not showFlags or not flag"
                                 replace="name">language name</tal:nonflag
                    ></a>&nbsp;
        </li>
        </tal:language>
    </ul>
</tal:language>
