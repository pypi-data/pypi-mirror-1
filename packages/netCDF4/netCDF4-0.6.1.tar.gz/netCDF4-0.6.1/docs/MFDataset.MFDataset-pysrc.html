<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>MFDataset.MFDataset</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        Package&nbsp;MFDataset ::
        Module&nbsp;MFDataset
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript: void(0);" class="privatelink"
    onclick="toggle_private();">hide private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="MFDataset.MFDataset-pysrc.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<h1 class="epydoc">Source Code for <a href="MFDataset.MFDataset-module.html">Module MFDataset.MFDataset</a></h1>
<pre class="py-src">
<span class="py-lineno">  1</span>  <span class="py-line"><span class="py-docstring">"""</span> </span>
<span class="py-lineno">  2</span>  <span class="py-line"><span class="py-docstring">Module for reading multi-file netCDF Datasets, making variables</span> </span>
<span class="py-lineno">  3</span>  <span class="py-line"><span class="py-docstring">spanning multiple files appear as if they were in one file.</span> </span>
<span class="py-lineno">  4</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="py-lineno">  5</span>  <span class="py-line"><span class="py-docstring">Datasets must be in C{NETCDF4_CLASSIC, NETCDF3_CLASSIC or NETCDF3_64BIT}</span> </span>
<span class="py-lineno">  6</span>  <span class="py-line"><span class="py-docstring">format (C{NETCDF4} Datasets won't work).</span> </span>
<span class="py-lineno">  7</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="py-lineno">  8</span>  <span class="py-line"><span class="py-docstring">Adapted from U{pycdf &lt;http://pysclint.sourceforge.net/pycdf&gt;} by Andre Gosselin.</span> </span>
<span class="py-lineno">  9</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="py-lineno"> 10</span>  <span class="py-line"><span class="py-docstring">Example usage:</span> </span>
<span class="py-lineno"> 11</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="py-lineno"> 12</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt; import MFDataset, netCDF4_classic, glob, numpy</span> </span>
<span class="py-lineno"> 13</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt; # create a series of netCDF files with a variable sharing</span> </span>
<span class="py-lineno"> 14</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt; # the same unlimited dimension.</span> </span>
<span class="py-lineno"> 15</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt; for nfile in range(10):</span> </span>
<span class="py-lineno"> 16</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt;     f = netCDF4_classic.Dataset('mftest'+repr(nfile)+'.nc','w')</span> </span>
<span class="py-lineno"> 17</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt;     f.createDimension('x',None)</span> </span>
<span class="py-lineno"> 18</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt;     x = f.createVariable('x','i',('x',))</span> </span>
<span class="py-lineno"> 19</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt;     x[0:10] = numpy.arange(nfile*10,10*(nfile+1))</span> </span>
<span class="py-lineno"> 20</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt;     f.close()</span> </span>
<span class="py-lineno"> 21</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt; # now read all those files in at once, in one Dataset.</span> </span>
<span class="py-lineno"> 22</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt; files = glob.glob('mftest*.nc')</span> </span>
<span class="py-lineno"> 23</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt; f = MFDataset.Dataset(files)</span> </span>
<span class="py-lineno"> 24</span>  <span class="py-line"><span class="py-docstring">&gt;&gt;&gt; print f.variables['x'][:]</span> </span>
<span class="py-lineno"> 25</span>  <span class="py-line"><span class="py-docstring">[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24</span> </span>
<span class="py-lineno"> 26</span>  <span class="py-line"><span class="py-docstring"> 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49</span> </span>
<span class="py-lineno"> 27</span>  <span class="py-line"><span class="py-docstring"> 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74</span> </span>
<span class="py-lineno"> 28</span>  <span class="py-line"><span class="py-docstring"> 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99]</span> </span>
<span class="py-lineno"> 29</span>  <span class="py-line"><span class="py-docstring">"""</span> </span>
<span class="py-lineno"> 30</span>  <span class="py-line"> </span>
<span class="py-lineno"> 31</span>  <span class="py-line"><span class="py-keyword">import</span> <span id="link-0" class="py-name"><a title="netCDF4_classic" class="py-name" href="#" onclick="doclink('link-0', 'netCDF4_classic', 'Module netCDF4_classic=netCDF4_classic-module.html'); return false;">netCDF4_classic</a></span></span> </span>
<span class="py-lineno"> 32</span>  <span class="py-line"><span class="py-keyword">import</span> <span class="py-name">numpy</span> </span>
<span class="py-lineno"> 33</span>  <span class="py-line"> </span>
<span class="py-lineno"> 34</span>  <span class="py-line"><span id="link-1" class="py-name"><a title="MFDataset.MFDataset.__version__
netCDF4.__version__
netCDF4_classic.__version__
netcdftime.netcdftime.__version__" class="py-name" href="#" onclick="doclink('link-1', '__version__', 'Variable MFDataset.MFDataset.__version__=MFDataset.MFDataset-module.html#__version__,Variable netCDF4.__version__=netCDF4-module.html#__version__,Variable netCDF4_classic.__version__=netCDF4_classic-module.html#__version__,Variable netcdftime.netcdftime.__version__=netcdftime.netcdftime-module.html#__version__'); return false;">__version__</a></span></span> <span class="py-op">=</span> <span class="py-string">"0.5"</span> </span>
<span class="py-lineno"> 35</span>  <span class="py-line"> </span>
<a name="Dataset"></a><div id="Dataset-def"><span class="py-lineno"> 36</span> <a class="py-toggle" href="#" id="Dataset-toggle" onclick="toggle('Dataset'); return false;">-</a><span class="py-line"><span class="py-keyword">class</span> <a class="py-def-name" href="MFDataset.MFDataset.Dataset-class.html">Dataset</a><span class="py-op">(</span><span class="py-base-class">netCDF4_classic</span><span class="py-op">.</span><span class="py-base-class">Dataset</span><span class="py-op">)</span><span class="py-op">:</span>  </span>
</div><span class="py-lineno"> 37</span>  <span class="py-line">    <span class="py-docstring">"""</span> </span>
<span class="py-lineno"> 38</span>  <span class="py-line"><span class="py-docstring">class for reading a multi-file netCDF dataset.</span> </span>
<span class="py-lineno"> 39</span>  <span class="py-line"><span class="py-docstring">    """</span> </span>
<span class="py-lineno"> 40</span>  <span class="py-line"> </span>
<a name="Dataset.__init__"></a><div id="Dataset.__init__-def"><span class="py-lineno"> 41</span> <a class="py-toggle" href="#" id="Dataset.__init__-toggle" onclick="toggle('Dataset.__init__'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset.Dataset-class.html#__init__">__init__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">files</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="Dataset.__init__-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="Dataset.__init__-expanded"><span class="py-lineno"> 42</span>  <span class="py-line">        <span class="py-docstring">"""</span> </span>
<span class="py-lineno"> 43</span>  <span class="py-line"><span class="py-docstring">Open a Dataset spanning multiple files, making it look as if it was a </span> </span>
<span class="py-lineno"> 44</span>  <span class="py-line"><span class="py-docstring">single file. Variables in the list of files that share the same unlimited </span> </span>
<span class="py-lineno"> 45</span>  <span class="py-line"><span class="py-docstring">dimension are aggregated. </span> </span>
<span class="py-lineno"> 46</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="py-lineno"> 47</span>  <span class="py-line"><span class="py-docstring">Adapted from U{pycdf &lt;http://pysclint.sourceforge.net/pycdf&gt;} by Andre Gosselin.</span> </span>
<span class="py-lineno"> 48</span>  <span class="py-line"><span class="py-docstring"></span> </span>
<span class="py-lineno"> 49</span>  <span class="py-line"><span class="py-docstring">@param files: sequence of netCDF files; the first one will become the</span> </span>
<span class="py-lineno"> 50</span>  <span class="py-line"><span class="py-docstring">"master" file, defining all the record variables (variables with an </span> </span>
<span class="py-lineno"> 51</span>  <span class="py-line"><span class="py-docstring">unlimited dimension) which may span subsequent files. Attribute access</span> </span>
<span class="py-lineno"> 52</span>  <span class="py-line"><span class="py-docstring">returns attributes only from "master" file. The files are always opened</span> </span>
<span class="py-lineno"> 53</span>  <span class="py-line"><span class="py-docstring">in read-only mode.</span> </span>
<span class="py-lineno"> 54</span>  <span class="py-line"><span class="py-docstring">       """</span> </span>
<span class="py-lineno"> 55</span>  <span class="py-line"> </span>
<span class="py-lineno"> 56</span>  <span class="py-line">        <span class="py-comment"># Open the master file in the base class, so that the CDFMF instance</span> </span>
<span class="py-lineno"> 57</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># can be used like a CDF instance.</span> </span>
<span class="py-lineno"> 58</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">master</span> <span class="py-op">=</span> <span class="py-name">files</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span> </span>
<span class="py-lineno"> 59</span>  <span class="py-line"> </span>
<span class="py-lineno"> 60</span>  <span class="py-line">        <span class="py-comment"># Open the master again, this time as a classic CDF instance. This will avoid</span> </span>
<span class="py-lineno"> 61</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># calling methods of the CDFMF subclass when querying the master file.</span> </span>
<span class="py-lineno"> 62</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">cdfm</span> <span class="py-op">=</span> <span id="link-2" class="py-name"><a title="netCDF4_classic" class="py-name" href="#" onclick="doclink('link-2', 'netCDF4_classic', 'Module netCDF4_classic=netCDF4_classic-module.html'); return false;">netCDF4_classic</a></span></span><span class="py-op">.</span><span id="link-3" class="py-name"><a title="MFDataset.MFDataset.Dataset
netCDF4.Dataset
netCDF4_classic.Dataset" class="py-name" href="#" onclick="doclink('link-3', 'Dataset', 'Class MFDataset.MFDataset.Dataset=MFDataset.MFDataset.Dataset-class.html,Class netCDF4.Dataset=netCDF4.Dataset-class.html,Class netCDF4_classic.Dataset=netCDF4_classic.Dataset-class.html'); return false;">Dataset</a></span></span><span class="py-op">(</span><span class="py-name">master</span><span class="py-op">)</span> </span>
<span class="py-lineno"> 63</span>  <span class="py-line">        <span class="py-comment"># copy attributes from master.</span> </span>
<span class="py-lineno"> 64</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-keyword">for</span> <span class="py-name">name</span><span class="py-op">,</span> <span class="py-name">value</span> <span class="py-keyword">in</span> <span class="py-name">cdfm</span><span class="py-op">.</span><span class="py-name">__dict__</span><span class="py-op">.</span><span class="py-name">items</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno"> 65</span>  <span class="py-line">            <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">__dict__</span><span class="py-op">[</span><span class="py-name">name</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-name">value</span> </span>
<span class="py-lineno"> 66</span>  <span class="py-line"> </span>
<span class="py-lineno"> 67</span>  <span class="py-line">        <span class="py-comment"># Make sure the master defines an unlimited dimension.</span> </span>
<span class="py-lineno"> 68</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">unlimDimId</span> <span class="py-op">=</span> <span class="py-name">None</span> </span>
<span class="py-lineno"> 69</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">dimname</span><span class="py-op">,</span><span class="py-name">dim</span> <span class="py-keyword">in</span> <span class="py-name">cdfm</span><span class="py-op">.</span><span id="link-4" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-4', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span><span class="py-op">.</span><span class="py-name">items</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno"> 70</span>  <span class="py-line">            <span class="py-keyword">if</span> <span class="py-name">dim</span><span class="py-op">.</span><span id="link-5" class="py-name"><a title="MFDataset.MFDataset._Dimension.isunlimited
netCDF4.Dimension.isunlimited
netCDF4_classic.Dimension.isunlimited" class="py-name" href="#" onclick="doclink('link-5', 'isunlimited', 'Method MFDataset.MFDataset._Dimension.isunlimited()=MFDataset.MFDataset._Dimension-class.html#isunlimited,Method netCDF4.Dimension.isunlimited()=netCDF4.Dimension-class.html#isunlimited,Method netCDF4_classic.Dimension.isunlimited()=netCDF4_classic.Dimension-class.html#isunlimited'); return false;">isunlimited</a></span></span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno"> 71</span>  <span class="py-line">                <span class="py-name">unlimDimId</span> <span class="py-op">=</span> <span class="py-name">dim</span> </span>
<span class="py-lineno"> 72</span>  <span class="py-line">                <span class="py-name">unlimDimName</span> <span class="py-op">=</span> <span class="py-name">dimname</span> </span>
<span class="py-lineno"> 73</span>  <span class="py-line">        <span class="py-keyword">if</span> <span class="py-name">unlimDimId</span> <span class="py-keyword">is</span> <span class="py-name">None</span><span class="py-op">:</span> </span>
<span class="py-lineno"> 74</span>  <span class="py-line">            <span class="py-keyword">raise</span> <span class="py-name">IOError</span><span class="py-op">(</span><span class="py-string">"master dataset %s does not have an unlimited dimension"</span> <span class="py-op">%</span> <span class="py-name">master</span><span class="py-op">)</span> </span>
<span class="py-lineno"> 75</span>  <span class="py-line"> </span>
<span class="py-lineno"> 76</span>  <span class="py-line">        <span class="py-comment"># Get info on all record variables defined in the master.</span> </span>
<span class="py-lineno"> 77</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># Make sure the master defines at least one record variable.</span> </span>
<span class="py-lineno"> 78</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">masterRecVar</span> <span class="py-op">=</span> <span class="py-op">{</span><span class="py-op">}</span> </span>
<span class="py-lineno"> 79</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">vName</span><span class="py-op">,</span><span class="py-name">v</span> <span class="py-keyword">in</span> <span class="py-name">cdfm</span><span class="py-op">.</span><span id="link-6" class="py-name"><a title="netCDF4.Dataset.variables
netCDF4_classic.Dataset.variables" class="py-name" href="#" onclick="doclink('link-6', 'variables', 'Variable netCDF4.Dataset.variables=netCDF4.Dataset-class.html#variables,Variable netCDF4_classic.Dataset.variables=netCDF4_classic.Dataset-class.html#variables'); return false;">variables</a></span></span><span class="py-op">.</span><span class="py-name">items</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno"> 80</span>  <span class="py-line">            <span class="py-name">dims</span> <span class="py-op">=</span> <span class="py-name">v</span><span class="py-op">.</span><span id="link-7" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-7', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span> </span>
<span class="py-lineno"> 81</span>  <span class="py-line">            <span class="py-name">shape</span> <span class="py-op">=</span> <span class="py-name">v</span><span class="py-op">.</span><span class="py-name">shape</span> </span>
<span class="py-lineno"> 82</span>  <span class="py-line">            <span class="py-name">type</span> <span class="py-op">=</span> <span class="py-name">v</span><span class="py-op">.</span><span id="link-8" class="py-name"><a title="netCDF4.Variable.dtype
netCDF4_classic.Variable.dtype" class="py-name" href="#" onclick="doclink('link-8', 'dtype', 'Variable netCDF4.Variable.dtype=netCDF4.Variable-class.html#dtype,Variable netCDF4_classic.Variable.dtype=netCDF4_classic.Variable-class.html#dtype'); return false;">dtype</a></span></span> </span>
<span class="py-lineno"> 83</span>  <span class="py-line">            <span class="py-comment"># Be carefull: we may deal with a scalar (dimensionless) variable.</span> </span>
<span class="py-lineno"> 84</span>  <span class="py-line"><span class="py-comment"></span>            <span class="py-comment"># Unlimited dimension always occupies index 0.</span> </span>
<span class="py-lineno"> 85</span>  <span class="py-line"><span class="py-comment"></span>            <span class="py-keyword">if</span> <span class="py-op">(</span><span class="py-name">len</span><span class="py-op">(</span><span class="py-name">dims</span><span class="py-op">)</span> <span class="py-op">&gt;</span> <span class="py-number">0</span> <span class="py-keyword">and</span> <span class="py-name">unlimDimName</span> <span class="py-op">==</span> <span class="py-name">dims</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno"> 86</span>  <span class="py-line">                <span class="py-name">masterRecVar</span><span class="py-op">[</span><span class="py-name">vName</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-op">(</span><span class="py-name">dims</span><span class="py-op">,</span> <span class="py-name">shape</span><span class="py-op">,</span> <span class="py-name">type</span><span class="py-op">)</span> </span>
<span class="py-lineno"> 87</span>  <span class="py-line">        <span class="py-keyword">if</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">masterRecVar</span><span class="py-op">)</span> <span class="py-op">==</span> <span class="py-number">0</span><span class="py-op">:</span> </span>
<span class="py-lineno"> 88</span>  <span class="py-line">            <span class="py-keyword">raise</span> <span class="py-name">IOError</span><span class="py-op">(</span><span class="py-string">"master dataset %s does not have any record variable"</span> <span class="py-op">%</span> <span class="py-name">master</span><span class="py-op">)</span> </span>
<span class="py-lineno"> 89</span>  <span class="py-line"> </span>
<span class="py-lineno"> 90</span>  <span class="py-line">        <span class="py-comment"># Create the following:</span> </span>
<span class="py-lineno"> 91</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment">#   cdf       list of Dataset instances</span> </span>
<span class="py-lineno"> 92</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment">#   cdfVLen   list unlimited dimension lengths in each CDF instance</span> </span>
<span class="py-lineno"> 93</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment">#   cdfRecVar dictionnary indexed by the record var names; each key holds</span> </span>
<span class="py-lineno"> 94</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment">#             a list of the corresponding Variable instance, one for each</span> </span>
<span class="py-lineno"> 95</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment">#             cdf file of the file set</span> </span>
<span class="py-lineno"> 96</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">cdf</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-name">cdfm</span><span class="py-op">]</span> </span>
<span class="py-lineno"> 97</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdf</span> <span class="py-op">=</span> <span class="py-name">cdf</span>        <span class="py-comment"># Store this now, because dim() method needs it</span> </span>
<span class="py-lineno"> 98</span>  <span class="py-line">        <span class="py-name">cdfVLen</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-name">len</span><span class="py-op">(</span><span class="py-name">unlimDimId</span><span class="py-op">)</span><span class="py-op">]</span> </span>
<span class="py-lineno"> 99</span>  <span class="py-line">        <span class="py-name">cdfRecVar</span> <span class="py-op">=</span> <span class="py-op">{</span><span class="py-op">}</span> </span>
<span class="py-lineno">100</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">v</span> <span class="py-keyword">in</span> <span class="py-name">masterRecVar</span><span class="py-op">.</span><span class="py-name">keys</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">101</span>  <span class="py-line">            <span class="py-name">cdfRecVar</span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-name">cdfm</span><span class="py-op">.</span><span id="link-9" class="py-name"><a title="netCDF4.Dataset.variables
netCDF4_classic.Dataset.variables" class="py-name" href="#" onclick="doclink('link-9', 'variables', 'Variable netCDF4.Dataset.variables=netCDF4.Dataset-class.html#variables,Variable netCDF4_classic.Dataset.variables=netCDF4_classic.Dataset-class.html#variables'); return false;">variables</a></span></span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span><span class="py-op">]</span> </span>
<span class="py-lineno">102</span>  <span class="py-line">         </span>
<span class="py-lineno">103</span>  <span class="py-line">        <span class="py-comment"># Open each remaining file in read-only mode.</span> </span>
<span class="py-lineno">104</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># Make sure each file defines the same record variables as the master</span> </span>
<span class="py-lineno">105</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># and that the variables are defined in the same way (name, shape and type)</span> </span>
<span class="py-lineno">106</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-keyword">for</span> <span class="py-name">f</span> <span class="py-keyword">in</span> <span class="py-name">files</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">:</span><span class="py-op">]</span><span class="py-op">:</span> </span>
<span class="py-lineno">107</span>  <span class="py-line">            <span class="py-name">part</span> <span class="py-op">=</span> <span id="link-10" class="py-name"><a title="netCDF4_classic" class="py-name" href="#" onclick="doclink('link-10', 'netCDF4_classic', 'Module netCDF4_classic=netCDF4_classic-module.html'); return false;">netCDF4_classic</a></span></span><span class="py-op">.</span><span id="link-11" class="py-name"><a title="MFDataset.MFDataset.Dataset
netCDF4.Dataset
netCDF4_classic.Dataset" class="py-name" href="#" onclick="doclink('link-11', 'Dataset', 'Class MFDataset.MFDataset.Dataset=MFDataset.MFDataset.Dataset-class.html,Class netCDF4.Dataset=netCDF4.Dataset-class.html,Class netCDF4_classic.Dataset=netCDF4_classic.Dataset-class.html'); return false;">Dataset</a></span></span><span class="py-op">(</span><span class="py-name">f</span><span class="py-op">)</span> </span>
<span class="py-lineno">108</span>  <span class="py-line">            <span class="py-name">varInfo</span> <span class="py-op">=</span> <span class="py-name">part</span><span class="py-op">.</span><span id="link-12" class="py-name"><a title="netCDF4.Dataset.variables
netCDF4_classic.Dataset.variables" class="py-name" href="#" onclick="doclink('link-12', 'variables', 'Variable netCDF4.Dataset.variables=netCDF4.Dataset-class.html#variables,Variable netCDF4_classic.Dataset.variables=netCDF4_classic.Dataset-class.html#variables'); return false;">variables</a></span></span> </span>
<span class="py-lineno">109</span>  <span class="py-line">            <span class="py-keyword">for</span> <span class="py-name">v</span> <span class="py-keyword">in</span> <span class="py-name">masterRecVar</span><span class="py-op">.</span><span class="py-name">keys</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">110</span>  <span class="py-line">                <span class="py-comment"># Make sure master rec var is also defined here.</span> </span>
<span class="py-lineno">111</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-keyword">if</span> <span class="py-name">v</span> <span class="py-keyword">not</span> <span class="py-keyword">in</span> <span class="py-name">varInfo</span><span class="py-op">.</span><span class="py-name">keys</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">112</span>  <span class="py-line">                    <span class="py-keyword">raise</span> <span class="py-name">IOError</span><span class="py-op">(</span><span class="py-string">"record variable %s not defined in %s"</span> <span class="py-op">%</span> <span class="py-op">(</span><span class="py-name">v</span><span class="py-op">,</span> <span class="py-name">f</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">113</span>  <span class="py-line"> </span>
<span class="py-lineno">114</span>  <span class="py-line">                <span class="py-comment"># Make sure it is a record var.</span> </span>
<span class="py-lineno">115</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-name">vInst</span> <span class="py-op">=</span> <span class="py-name">part</span><span class="py-op">.</span><span id="link-13" class="py-name"><a title="netCDF4.Dataset.variables
netCDF4_classic.Dataset.variables" class="py-name" href="#" onclick="doclink('link-13', 'variables', 'Variable netCDF4.Dataset.variables=netCDF4.Dataset-class.html#variables,Variable netCDF4_classic.Dataset.variables=netCDF4_classic.Dataset-class.html#variables'); return false;">variables</a></span></span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span> </span>
<span class="py-lineno">116</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-keyword">not</span> <span class="py-name">part</span><span class="py-op">.</span><span id="link-14" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-14', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span><span class="py-op">[</span><span class="py-name">vInst</span><span class="py-op">.</span><span id="link-15" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-15', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">]</span><span class="py-op">.</span><span id="link-16" class="py-name"><a title="MFDataset.MFDataset._Dimension.isunlimited
netCDF4.Dimension.isunlimited
netCDF4_classic.Dimension.isunlimited" class="py-name" href="#" onclick="doclink('link-16', 'isunlimited', 'Method MFDataset.MFDataset._Dimension.isunlimited()=MFDataset.MFDataset._Dimension-class.html#isunlimited,Method netCDF4.Dimension.isunlimited()=netCDF4.Dimension-class.html#isunlimited,Method netCDF4_classic.Dimension.isunlimited()=netCDF4_classic.Dimension-class.html#isunlimited'); return false;">isunlimited</a></span></span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">117</span>  <span class="py-line">                    <span class="py-keyword">raise</span> <span id="link-17" class="py-name"><a title="MFDataset.MFDataset" class="py-name" href="#" onclick="doclink('link-17', 'MFDataset', 'Module MFDataset.MFDataset=MFDataset.MFDataset-module.html'); return false;">MFDataset</a></span></span><span class="py-op">(</span><span class="py-string">"variable %s is not a record var inside %s"</span> <span class="py-op">%</span> <span class="py-op">(</span><span class="py-name">v</span><span class="py-op">,</span> <span class="py-name">f</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">118</span>  <span class="py-line"> </span>
<span class="py-lineno">119</span>  <span class="py-line">                <span class="py-name">masterDims</span><span class="py-op">,</span> <span class="py-name">masterShape</span><span class="py-op">,</span> <span class="py-name">masterType</span> <span class="py-op">=</span> <span class="py-name">masterRecVar</span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span><span class="py-op">[</span><span class="py-op">:</span><span class="py-number">3</span><span class="py-op">]</span> </span>
<span class="py-lineno">120</span>  <span class="py-line">                <span class="py-name">extDims</span><span class="py-op">,</span> <span class="py-name">extShape</span><span class="py-op">,</span> <span class="py-name">extType</span> <span class="py-op">=</span> <span class="py-name">varInfo</span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span><span class="py-op">[</span><span class="py-op">:</span><span class="py-number">3</span><span class="py-op">]</span> </span>
<span class="py-lineno">121</span>  <span class="py-line">                <span class="py-name">extDims</span> <span class="py-op">=</span> <span class="py-name">varInfo</span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span><span class="py-op">.</span><span id="link-18" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-18', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span> </span>
<span class="py-lineno">122</span>  <span class="py-line">                <span class="py-name">extShape</span> <span class="py-op">=</span> <span class="py-name">varInfo</span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span><span class="py-op">.</span><span class="py-name">shape</span> </span>
<span class="py-lineno">123</span>  <span class="py-line">                <span class="py-name">extType</span> <span class="py-op">=</span> <span class="py-name">varInfo</span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span><span class="py-op">.</span><span id="link-19" class="py-name"><a title="netCDF4.Variable.dtype
netCDF4_classic.Variable.dtype" class="py-name" href="#" onclick="doclink('link-19', 'dtype', 'Variable netCDF4.Variable.dtype=netCDF4.Variable-class.html#dtype,Variable netCDF4_classic.Variable.dtype=netCDF4_classic.Variable-class.html#dtype'); return false;">dtype</a></span></span> </span>
<span class="py-lineno">124</span>  <span class="py-line">                <span class="py-comment"># Check that dimension names are identical.</span> </span>
<span class="py-lineno">125</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-keyword">if</span> <span class="py-name">masterDims</span> <span class="py-op">!=</span> <span class="py-name">extDims</span><span class="py-op">:</span> </span>
<span class="py-lineno">126</span>  <span class="py-line">                    <span class="py-keyword">raise</span> <span class="py-name">IOError</span><span class="py-op">(</span><span class="py-string">"variable %s : dimensions mismatch between "</span> </span>
<span class="py-lineno">127</span>  <span class="py-line">                                   <span class="py-string">"master %s (%s) and extension %s (%s)"</span> <span class="py-op">%</span> </span>
<span class="py-lineno">128</span>  <span class="py-line">                                   <span class="py-op">(</span><span class="py-name">v</span><span class="py-op">,</span> <span class="py-name">master</span><span class="py-op">,</span> <span class="py-name">masterDims</span><span class="py-op">,</span> <span class="py-name">f</span><span class="py-op">,</span> <span class="py-name">extDims</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">129</span>  <span class="py-line"> </span>
<span class="py-lineno">130</span>  <span class="py-line">                <span class="py-comment"># Check that the ranks are identical, and the dimension lengths are</span> </span>
<span class="py-lineno">131</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-comment"># identical (except for that of the unlimited dimension, which of</span> </span>
<span class="py-lineno">132</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-comment"># course may vary.</span> </span>
<span class="py-lineno">133</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-keyword">if</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">masterShape</span><span class="py-op">)</span> <span class="py-op">!=</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">extShape</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">134</span>  <span class="py-line">                    <span class="py-keyword">raise</span> <span class="py-name">IOError</span><span class="py-op">(</span><span class="py-string">"variable %s : rank mismatch between "</span> </span>
<span class="py-lineno">135</span>  <span class="py-line">                                   <span class="py-string">"master %s (%s) and extension %s (%s)"</span> <span class="py-op">%</span> </span>
<span class="py-lineno">136</span>  <span class="py-line">                                   <span class="py-op">(</span><span class="py-name">v</span><span class="py-op">,</span> <span class="py-name">master</span><span class="py-op">,</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">masterShape</span><span class="py-op">)</span><span class="py-op">,</span> <span class="py-name">f</span><span class="py-op">,</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">extShape</span><span class="py-op">)</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">137</span>  <span class="py-line">                <span class="py-keyword">if</span> <span class="py-name">masterShape</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">:</span><span class="py-op">]</span> <span class="py-op">!=</span> <span class="py-name">extShape</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">:</span><span class="py-op">]</span><span class="py-op">:</span> </span>
<span class="py-lineno">138</span>  <span class="py-line">                    <span class="py-keyword">raise</span> <span class="py-name">IOError</span><span class="py-op">(</span><span class="py-string">"variable %s : shape mismatch between "</span> </span>
<span class="py-lineno">139</span>  <span class="py-line">                                   <span class="py-string">"master %s (%s) and extension %s (%s)"</span> <span class="py-op">%</span> </span>
<span class="py-lineno">140</span>  <span class="py-line">                                   <span class="py-op">(</span><span class="py-name">v</span><span class="py-op">,</span> <span class="py-name">master</span><span class="py-op">,</span> <span class="py-name">masterShape</span><span class="py-op">,</span> <span class="py-name">f</span><span class="py-op">,</span> <span class="py-name">extShape</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">141</span>  <span class="py-line"> </span>
<span class="py-lineno">142</span>  <span class="py-line">                <span class="py-comment"># Check that the data types are identical.</span> </span>
<span class="py-lineno">143</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-keyword">if</span> <span class="py-name">masterType</span> <span class="py-op">!=</span> <span class="py-name">extType</span><span class="py-op">:</span> </span>
<span class="py-lineno">144</span>  <span class="py-line">                    <span class="py-keyword">raise</span> <span class="py-name">IOError</span><span class="py-op">(</span><span class="py-string">"variable %s : data type mismatch between "</span> </span>
<span class="py-lineno">145</span>  <span class="py-line">                                   <span class="py-string">"master %s (%s) and extension %s (%s)"</span> <span class="py-op">%</span> </span>
<span class="py-lineno">146</span>  <span class="py-line">                                   <span class="py-op">(</span><span class="py-name">v</span><span class="py-op">,</span> <span class="py-name">master</span><span class="py-op">,</span> <span class="py-name">masterType</span><span class="py-op">,</span> <span class="py-name">f</span><span class="py-op">,</span> <span class="py-name">extType</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">147</span>  <span class="py-line"> </span>
<span class="py-lineno">148</span>  <span class="py-line">                <span class="py-comment"># Everythig ok.</span> </span>
<span class="py-lineno">149</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-name">cdfRecVar</span><span class="py-op">[</span><span class="py-name">v</span><span class="py-op">]</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-name">vInst</span><span class="py-op">)</span> </span>
<span class="py-lineno">150</span>  <span class="py-line"> </span>
<span class="py-lineno">151</span>  <span class="py-line">            <span class="py-name">cdf</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-name">part</span><span class="py-op">)</span> </span>
<span class="py-lineno">152</span>  <span class="py-line">            <span class="py-name">cdfVLen</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-name">len</span><span class="py-op">(</span><span class="py-name">part</span><span class="py-op">.</span><span id="link-20" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-20', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span><span class="py-op">[</span><span class="py-name">unlimDimName</span><span class="py-op">]</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">153</span>  <span class="py-line"> </span>
<span class="py-lineno">154</span>  <span class="py-line">        <span class="py-comment"># Attach attributes to the MFDataset.Dataset instance.</span> </span>
<span class="py-lineno">155</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># A local __setattr__() method is required for them.</span> </span>
<span class="py-lineno">156</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_files</span> <span class="py-op">=</span> <span class="py-name">files</span>            <span class="py-comment"># list of cdf file names in the set</span> </span>
<span class="py-lineno">157</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdfVLen</span> <span class="py-op">=</span> <span class="py-name">cdfVLen</span>              <span class="py-comment"># list of unlimited lengths</span> </span>
<span class="py-lineno">158</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdfTLen</span> <span class="py-op">=</span> <span class="py-name">reduce</span><span class="py-op">(</span><span class="py-keyword">lambda</span> <span class="py-name">x</span><span class="py-op">,</span> <span class="py-name">y</span><span class="py-op">:</span> <span class="py-name">x</span> <span class="py-op">+</span> <span class="py-name">y</span><span class="py-op">,</span> <span class="py-name">cdfVLen</span><span class="py-op">)</span> <span class="py-comment"># total length</span> </span>
<span class="py-lineno">159</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdfRecVar</span> <span class="py-op">=</span> <span class="py-name">cdfRecVar</span>          <span class="py-comment"># dictionary of Variable instances for all</span> </span>
<span class="py-lineno">160</span>  <span class="py-line">                                             <span class="py-comment"># the record variables</span> </span>
<span class="py-lineno">161</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_dims</span> <span class="py-op">=</span> <span class="py-name">cdfm</span><span class="py-op">.</span><span id="link-21" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-21', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span> </span>
<span class="py-lineno">162</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">dimname</span><span class="py-op">,</span> <span class="py-name">dim</span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_dims</span><span class="py-op">.</span><span class="py-name">items</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">163</span>  <span class="py-line">            <span class="py-keyword">if</span> <span class="py-name">dim</span><span class="py-op">.</span><span id="link-22" class="py-name"><a title="MFDataset.MFDataset._Dimension.isunlimited
netCDF4.Dimension.isunlimited
netCDF4_classic.Dimension.isunlimited" class="py-name" href="#" onclick="doclink('link-22', 'isunlimited', 'Method MFDataset.MFDataset._Dimension.isunlimited()=MFDataset.MFDataset._Dimension-class.html#isunlimited,Method netCDF4.Dimension.isunlimited()=netCDF4.Dimension-class.html#isunlimited,Method netCDF4_classic.Dimension.isunlimited()=netCDF4_classic.Dimension-class.html#isunlimited'); return false;">isunlimited</a></span></span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">164</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_dims</span><span class="py-op">[</span><span class="py-name">dimname</span><span class="py-op">]</span> <span class="py-op">=</span> <span id="link-23" class="py-name"><a title="MFDataset.MFDataset._Dimension" class="py-name" href="#" onclick="doclink('link-23', '_Dimension', 'Class MFDataset.MFDataset._Dimension=MFDataset.MFDataset._Dimension-class.html'); return false;">_Dimension</a></span></span><span class="py-op">(</span><span class="py-name">dimname</span><span class="py-op">,</span> <span class="py-name">dim</span><span class="py-op">,</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdfVLen</span><span class="py-op">,</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdfTLen</span><span class="py-op">)</span> </span>
<span class="py-lineno">165</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_vars</span> <span class="py-op">=</span> <span class="py-name">cdfm</span><span class="py-op">.</span><span id="link-24" class="py-name"><a title="netCDF4.Dataset.variables
netCDF4_classic.Dataset.variables" class="py-name" href="#" onclick="doclink('link-24', 'variables', 'Variable netCDF4.Dataset.variables=netCDF4.Dataset-class.html#variables,Variable netCDF4_classic.Dataset.variables=netCDF4_classic.Dataset-class.html#variables'); return false;">variables</a></span></span> </span>
<span class="py-lineno">166</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">varname</span><span class="py-op">,</span><span class="py-name">var</span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_vars</span><span class="py-op">.</span><span class="py-name">items</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">167</span>  <span class="py-line">            <span class="py-keyword">if</span> <span class="py-name">varname</span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdfRecVar</span><span class="py-op">.</span><span class="py-name">keys</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">168</span>  <span class="py-line">                <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_vars</span><span class="py-op">[</span><span class="py-name">varname</span><span class="py-op">]</span> <span class="py-op">=</span> <span id="link-25" class="py-name"><a title="MFDataset.MFDataset._Variable" class="py-name" href="#" onclick="doclink('link-25', '_Variable', 'Class MFDataset.MFDataset._Variable=MFDataset.MFDataset._Variable-class.html'); return false;">_Variable</a></span></span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span class="py-name">varname</span><span class="py-op">,</span> <span class="py-name">var</span><span class="py-op">,</span> <span class="py-name">unlimDimName</span><span class="py-op">)</span> </span>
<span class="py-lineno">169</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span id="link-26" class="py-name"><a title="netCDF4.Dimension._file_format" class="py-name" href="#" onclick="doclink('link-26', '_file_format', 'Variable netCDF4.Dimension._file_format=netCDF4.Dimension-class.html#_file_format'); return false;">_file_format</a></span></span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">]</span> </span>
<span class="py-lineno">170</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">dset</span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdf</span><span class="py-op">:</span> </span>
<span class="py-lineno">171</span>  <span class="py-line">            <span class="py-name">self</span><span class="py-op">.</span><span id="link-27" class="py-name"><a title="netCDF4.Dimension._file_format" class="py-name" href="#" onclick="doclink('link-27', '_file_format', 'Variable netCDF4.Dimension._file_format=netCDF4.Dimension-class.html#_file_format'); return false;">_file_format</a></span></span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-name">dset</span><span class="py-op">.</span><span id="link-28" class="py-name"><a title="netCDF4.Dataset.file_format
netCDF4_classic.Dataset.file_format" class="py-name" href="#" onclick="doclink('link-28', 'file_format', 'Variable netCDF4.Dataset.file_format=netCDF4.Dataset-class.html#file_format,Variable netCDF4_classic.Dataset.file_format=netCDF4_classic.Dataset-class.html#file_format'); return false;">file_format</a></span></span><span class="py-op">)</span> </span>
</div><span class="py-lineno">172</span>  <span class="py-line"> </span>
<a name="Dataset.__setattr__"></a><div id="Dataset.__setattr__-def"><span class="py-lineno">173</span> <a class="py-toggle" href="#" id="Dataset.__setattr__-toggle" onclick="toggle('Dataset.__setattr__'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset.Dataset-class.html#__setattr__">__setattr__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">name</span><span class="py-op">,</span> <span class="py-param">value</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="Dataset.__setattr__-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="Dataset.__setattr__-expanded"><span class="py-lineno">174</span>  <span class="py-line">        <span class="py-docstring">"""override base class attribute creation"""</span> </span>
<span class="py-lineno">175</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">__dict__</span><span class="py-op">[</span><span class="py-name">name</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-name">value</span> </span>
</div><span class="py-lineno">176</span>  <span class="py-line"> </span>
<a name="Dataset.__getattribute__"></a><div id="Dataset.__getattribute__-def"><span class="py-lineno">177</span> <a class="py-toggle" href="#" id="Dataset.__getattribute__-toggle" onclick="toggle('Dataset.__getattribute__'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset.Dataset-class.html#__getattribute__">__getattribute__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">name</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="Dataset.__getattribute__-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="Dataset.__getattribute__-expanded"><span class="py-lineno">178</span>  <span class="py-line">        <span class="py-keyword">if</span> <span class="py-name">name</span> <span class="py-keyword">in</span> <span class="py-op">[</span><span class="py-string">'variables'</span><span class="py-op">,</span><span class="py-string">'dimensions'</span><span class="py-op">,</span><span class="py-string">'file_format'</span><span class="py-op">]</span><span class="py-op">:</span>  </span>
<span class="py-lineno">179</span>  <span class="py-line">            <span class="py-keyword">if</span> <span class="py-name">name</span> <span class="py-op">==</span> <span class="py-string">'dimensions'</span><span class="py-op">:</span> <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_dims</span> </span>
<span class="py-lineno">180</span>  <span class="py-line">            <span class="py-keyword">if</span> <span class="py-name">name</span> <span class="py-op">==</span> <span class="py-string">'variables'</span><span class="py-op">:</span> <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_vars</span> </span>
<span class="py-lineno">181</span>  <span class="py-line">            <span class="py-keyword">if</span> <span class="py-name">name</span> <span class="py-op">==</span> <span class="py-string">'file_format'</span><span class="py-op">:</span> <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span id="link-29" class="py-name"><a title="netCDF4.Dimension._file_format" class="py-name" href="#" onclick="doclink('link-29', '_file_format', 'Variable netCDF4.Dimension._file_format=netCDF4.Dimension-class.html#_file_format'); return false;">_file_format</a></span></span> </span>
<span class="py-lineno">182</span>  <span class="py-line">        <span class="py-keyword">else</span><span class="py-op">:</span> </span>
<span class="py-lineno">183</span>  <span class="py-line">            <span class="py-keyword">return</span> <span id="link-30" class="py-name"><a title="netCDF4_classic" class="py-name" href="#" onclick="doclink('link-30', 'netCDF4_classic', 'Module netCDF4_classic=netCDF4_classic-module.html'); return false;">netCDF4_classic</a></span></span><span class="py-op">.</span><span id="link-31" class="py-name"><a title="MFDataset.MFDataset.Dataset
netCDF4.Dataset
netCDF4_classic.Dataset" class="py-name" href="#" onclick="doclink('link-31', 'Dataset', 'Class MFDataset.MFDataset.Dataset=MFDataset.MFDataset.Dataset-class.html,Class netCDF4.Dataset=netCDF4.Dataset-class.html,Class netCDF4_classic.Dataset=netCDF4_classic.Dataset-class.html'); return false;">Dataset</a></span></span><span class="py-op">.</span><span id="link-32" class="py-name"><a title="MFDataset.MFDataset.Dataset.__getattribute__
netCDF4.Dataset.__getattribute__
netCDF4.Variable.__getattribute__
netCDF4_classic.Dataset.__getattribute__
netCDF4_classic.Variable.__getattribute__" class="py-name" href="#" onclick="doclink('link-32', '__getattribute__', 'Method MFDataset.MFDataset.Dataset.__getattribute__()=MFDataset.MFDataset.Dataset-class.html#__getattribute__,Method netCDF4.Dataset.__getattribute__()=netCDF4.Dataset-class.html#__getattribute__,Method netCDF4.Variable.__getattribute__()=netCDF4.Variable-class.html#__getattribute__,Method netCDF4_classic.Dataset.__getattribute__()=netCDF4_classic.Dataset-class.html#__getattribute__,Method netCDF4_classic.Variable.__getattribute__()=netCDF4_classic.Variable-class.html#__getattribute__'); return false;">__getattribute__</a></span></span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">,</span> <span class="py-name">name</span><span class="py-op">)</span> </span>
</div><span class="py-lineno">184</span>  <span class="py-line"> </span>
<a name="Dataset.ncattrs"></a><div id="Dataset.ncattrs-def"><span class="py-lineno">185</span> <a class="py-toggle" href="#" id="Dataset.ncattrs-toggle" onclick="toggle('Dataset.ncattrs'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset.Dataset-class.html#ncattrs">ncattrs</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="Dataset.ncattrs-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="Dataset.ncattrs-expanded"><span class="py-lineno">186</span>  <span class="py-line">        <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdf</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">.</span><span class="py-name">__dict__</span><span class="py-op">.</span><span class="py-name">keys</span><span class="py-op">(</span><span class="py-op">)</span> </span>
</div><span class="py-lineno">187</span>  <span class="py-line"> </span>
<a name="Dataset.close"></a><div id="Dataset.close-def"><span class="py-lineno">188</span> <a class="py-toggle" href="#" id="Dataset.close-toggle" onclick="toggle('Dataset.close'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset.Dataset-class.html#close">close</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="Dataset.close-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="Dataset.close-expanded"><span class="py-lineno">189</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">dset</span> <span class="py-keyword">in</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_cdf</span><span class="py-op">:</span> </span>
<span class="py-lineno">190</span>  <span class="py-line">            <span class="py-name">dset</span><span class="py-op">.</span><span id="link-33" class="py-name"><a title="MFDataset.MFDataset.Dataset.close
netCDF4.Dataset.close
netCDF4.Group.close
netCDF4_classic.Dataset.close" class="py-name" href="#" onclick="doclink('link-33', 'close', 'Method MFDataset.MFDataset.Dataset.close()=MFDataset.MFDataset.Dataset-class.html#close,Method netCDF4.Dataset.close()=netCDF4.Dataset-class.html#close,Method netCDF4.Group.close()=netCDF4.Group-class.html#close,Method netCDF4_classic.Dataset.close()=netCDF4_classic.Dataset-class.html#close'); return false;">close</a></span></span><span class="py-op">(</span><span class="py-op">)</span> </span>
</div></div><span class="py-lineno">191</span>  <span class="py-line"> </span>
<a name="_Dimension"></a><div id="_Dimension-def"><span class="py-lineno">192</span> <a class="py-toggle" href="#" id="_Dimension-toggle" onclick="toggle('_Dimension'); return false;">-</a><span class="py-line"><span class="py-keyword">class</span> <a class="py-def-name" href="MFDataset.MFDataset._Dimension-class.html">_Dimension</a><span class="py-op">(</span><span class="py-base-class">object</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Dimension-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="_Dimension-expanded"><a name="_Dimension.__init__"></a><div id="_Dimension.__init__-def"><span class="py-lineno">193</span> <a class="py-toggle" href="#" id="_Dimension.__init__-toggle" onclick="toggle('_Dimension.__init__'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Dimension-class.html#__init__">__init__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">dimname</span><span class="py-op">,</span> <span class="py-param">dim</span><span class="py-op">,</span> <span class="py-param">dimlens</span><span class="py-op">,</span> <span class="py-param">dimtotlen</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Dimension.__init__-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Dimension.__init__-expanded"><span class="py-lineno">194</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">dimlens</span> <span class="py-op">=</span> <span class="py-name">dimlens</span> </span>
<span class="py-lineno">195</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">dimtotlen</span> <span class="py-op">=</span> <span class="py-name">dimtotlen</span> </span>
</div><a name="_Dimension.__len__"></a><div id="_Dimension.__len__-def"><span class="py-lineno">196</span> <a class="py-toggle" href="#" id="_Dimension.__len__-toggle" onclick="toggle('_Dimension.__len__'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Dimension-class.html#__len__">__len__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Dimension.__len__-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Dimension.__len__-expanded"><span class="py-lineno">197</span>  <span class="py-line">        <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">dimtotlen</span> </span>
</div><a name="_Dimension.isunlimited"></a><div id="_Dimension.isunlimited-def"><span class="py-lineno">198</span> <a class="py-toggle" href="#" id="_Dimension.isunlimited-toggle" onclick="toggle('_Dimension.isunlimited'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Dimension-class.html#isunlimited">isunlimited</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Dimension.isunlimited-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Dimension.isunlimited-expanded"><span class="py-lineno">199</span>  <span class="py-line">        <span class="py-keyword">return</span> <span class="py-name">True</span> </span>
</div></div><span class="py-lineno">200</span>  <span class="py-line"> </span>
<a name="_Variable"></a><div id="_Variable-def"><span class="py-lineno">201</span> <a class="py-toggle" href="#" id="_Variable-toggle" onclick="toggle('_Variable'); return false;">-</a><span class="py-line"><span class="py-keyword">class</span> <a class="py-def-name" href="MFDataset.MFDataset._Variable-class.html">_Variable</a><span class="py-op">(</span><span class="py-base-class">object</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Variable-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="_Variable-expanded"><a name="_Variable.__init__"></a><div id="_Variable.__init__-def"><span class="py-lineno">202</span> <a class="py-toggle" href="#" id="_Variable.__init__-toggle" onclick="toggle('_Variable.__init__'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Variable-class.html#__init__">__init__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">dset</span><span class="py-op">,</span> <span class="py-param">varname</span><span class="py-op">,</span> <span class="py-param">var</span><span class="py-op">,</span> <span class="py-param">recdimname</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Variable.__init__-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Variable.__init__-expanded"><span class="py-lineno">203</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span id="link-34" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-34', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span> <span class="py-op">=</span> <span class="py-name">var</span><span class="py-op">.</span><span id="link-35" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-35', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span>  </span>
<span class="py-lineno">204</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_dset</span> <span class="py-op">=</span> <span class="py-name">dset</span> </span>
<span class="py-lineno">205</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_mastervar</span> <span class="py-op">=</span> <span class="py-name">var</span> </span>
<span class="py-lineno">206</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_recVar</span> <span class="py-op">=</span> <span class="py-name">dset</span><span class="py-op">.</span><span class="py-name">_cdfRecVar</span><span class="py-op">[</span><span class="py-name">varname</span><span class="py-op">]</span> </span>
<span class="py-lineno">207</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_recdimname</span> <span class="py-op">=</span> <span class="py-name">recdimname</span> </span>
<span class="py-lineno">208</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_recLen</span> <span class="py-op">=</span> <span class="py-name">dset</span><span class="py-op">.</span><span class="py-name">_cdfVLen</span> </span>
<span class="py-lineno">209</span>  <span class="py-line">        <span class="py-name">self</span><span class="py-op">.</span><span id="link-36" class="py-name"><a title="netCDF4.Variable.dtype
netCDF4_classic.Variable.dtype" class="py-name" href="#" onclick="doclink('link-36', 'dtype', 'Variable netCDF4.Variable.dtype=netCDF4.Variable-class.html#dtype,Variable netCDF4_classic.Variable.dtype=netCDF4_classic.Variable-class.html#dtype'); return false;">dtype</a></span></span> <span class="py-op">=</span> <span class="py-name">var</span><span class="py-op">.</span><span id="link-37" class="py-name"><a title="netCDF4.Variable.dtype
netCDF4_classic.Variable.dtype" class="py-name" href="#" onclick="doclink('link-37', 'dtype', 'Variable netCDF4.Variable.dtype=netCDF4.Variable-class.html#dtype,Variable netCDF4_classic.Variable.dtype=netCDF4_classic.Variable-class.html#dtype'); return false;">dtype</a></span></span> </span>
<span class="py-lineno">210</span>  <span class="py-line">        <span class="py-comment"># copy attributes from master.</span> </span>
<span class="py-lineno">211</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-keyword">for</span> <span class="py-name">name</span><span class="py-op">,</span> <span class="py-name">value</span> <span class="py-keyword">in</span> <span class="py-name">var</span><span class="py-op">.</span><span class="py-name">__dict__</span><span class="py-op">.</span><span class="py-name">items</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">212</span>  <span class="py-line">            <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">__dict__</span><span class="py-op">[</span><span class="py-name">name</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-name">value</span> </span>
</div><a name="_Variable.typecode"></a><div id="_Variable.typecode-def"><span class="py-lineno">213</span> <a class="py-toggle" href="#" id="_Variable.typecode-toggle" onclick="toggle('_Variable.typecode'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Variable-class.html#typecode">typecode</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Variable.typecode-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Variable.typecode-expanded"><span class="py-lineno">214</span>  <span class="py-line">        <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span id="link-38" class="py-name"><a title="netCDF4.Variable.dtype
netCDF4_classic.Variable.dtype" class="py-name" href="#" onclick="doclink('link-38', 'dtype', 'Variable netCDF4.Variable.dtype=netCDF4.Variable-class.html#dtype,Variable netCDF4_classic.Variable.dtype=netCDF4_classic.Variable-class.html#dtype'); return false;">dtype</a></span></span> </span>
</div><a name="_Variable.ncattrs"></a><div id="_Variable.ncattrs-def"><span class="py-lineno">215</span> <a class="py-toggle" href="#" id="_Variable.ncattrs-toggle" onclick="toggle('_Variable.ncattrs'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Variable-class.html#ncattrs">ncattrs</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Variable.ncattrs-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Variable.ncattrs-expanded"><span class="py-lineno">216</span>  <span class="py-line">        <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_mastervar</span><span class="py-op">.</span><span class="py-name">__dict__</span><span class="py-op">.</span><span class="py-name">keys</span><span class="py-op">(</span><span class="py-op">)</span> </span>
</div><a name="_Variable.__getattr__"></a><div id="_Variable.__getattr__-def"><span class="py-lineno">217</span> <a class="py-toggle" href="#" id="_Variable.__getattr__-toggle" onclick="toggle('_Variable.__getattr__'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Variable-class.html#__getattr__">__getattr__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span><span class="py-param">name</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Variable.__getattr__-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Variable.__getattr__-expanded"><span class="py-lineno">218</span>  <span class="py-line">        <span class="py-keyword">if</span> <span class="py-name">name</span> <span class="py-op">==</span> <span class="py-string">'shape'</span><span class="py-op">:</span> <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span id="link-39" class="py-name"><a title="MFDataset.MFDataset._Variable._shape
netCDF4.Variable._shape
netCDF4_classic.Variable._shape" class="py-name" href="#" onclick="doclink('link-39', '_shape', 'Method MFDataset.MFDataset._Variable._shape()=MFDataset.MFDataset._Variable-class.html#_shape,Method netCDF4.Variable._shape()=netCDF4.Variable-class.html#_shape,Method netCDF4_classic.Variable._shape()=netCDF4_classic.Variable-class.html#_shape'); return false;">_shape</a></span></span><span class="py-op">(</span><span class="py-op">)</span> </span>
<span class="py-lineno">219</span>  <span class="py-line">        <span class="py-keyword">return</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">__dict__</span><span class="py-op">[</span><span class="py-name">name</span><span class="py-op">]</span> </span>
</div><a name="_Variable._shape"></a><div id="_Variable._shape-def"><span class="py-lineno">220</span> <a class="py-toggle" href="#" id="_Variable._shape-toggle" onclick="toggle('_Variable._shape'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Variable-class.html#_shape">_shape</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Variable._shape-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Variable._shape-expanded"><span class="py-lineno">221</span>  <span class="py-line">        <span class="py-name">recdimlen</span> <span class="py-op">=</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_dset</span><span class="py-op">.</span><span id="link-40" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-40', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span><span class="py-op">[</span><span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_recdimname</span><span class="py-op">]</span><span class="py-op">)</span> </span>
<span class="py-lineno">222</span>  <span class="py-line">        <span class="py-keyword">return</span> <span class="py-op">(</span><span class="py-name">recdimlen</span><span class="py-op">,</span><span class="py-op">)</span> <span class="py-op">+</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_mastervar</span><span class="py-op">.</span><span class="py-name">shape</span><span class="py-op">[</span><span class="py-number">1</span><span class="py-op">:</span><span class="py-op">]</span> </span>
</div><a name="_Variable.__getitem__"></a><div id="_Variable.__getitem__-def"><span class="py-lineno">223</span> <a class="py-toggle" href="#" id="_Variable.__getitem__-toggle" onclick="toggle('_Variable.__getitem__'); return false;">-</a><span class="py-line">    <span class="py-keyword">def</span> <a class="py-def-name" href="MFDataset.MFDataset._Variable-class.html#__getitem__">__getitem__</a><span class="py-op">(</span><span class="py-param">self</span><span class="py-op">,</span> <span class="py-param">elem</span><span class="py-op">)</span><span class="py-op">:</span> </span>
</div><div id="_Variable.__getitem__-collapsed" style="display:none;" pad="+++" indent="++++++++"></div><div id="_Variable.__getitem__-expanded"><span class="py-lineno">224</span>  <span class="py-line">        <span class="py-docstring">"""Get records from a concatenated set of variables."""</span> </span>
<span class="py-lineno">225</span>  <span class="py-line">        <span class="py-comment"># Number of variables making up the MFVariable.Variable.</span> </span>
<span class="py-lineno">226</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">nv</span> <span class="py-op">=</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_recLen</span><span class="py-op">)</span> </span>
<span class="py-lineno">227</span>  <span class="py-line">        <span class="py-comment"># Parse the slicing expression, needed to properly handle</span> </span>
<span class="py-lineno">228</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># a possible ellipsis.</span> </span>
<span class="py-lineno">229</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">start</span><span class="py-op">,</span> <span class="py-name">count</span><span class="py-op">,</span> <span class="py-name">stride</span> <span class="py-op">=</span> <span id="link-41" class="py-name"><a title="netCDF4_classic" class="py-name" href="#" onclick="doclink('link-41', 'netCDF4_classic', 'Module netCDF4_classic=netCDF4_classic-module.html'); return false;">netCDF4_classic</a></span></span><span class="py-op">.</span><span class="py-name">_buildStartCountStride</span><span class="py-op">(</span><span class="py-name">elem</span><span class="py-op">,</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">shape</span><span class="py-op">,</span> <span class="py-name">self</span><span class="py-op">.</span><span id="link-42" class="py-name"><a title="netCDF4.Dataset.dimensions
netCDF4_classic.Dataset.dimensions" class="py-name" href="#" onclick="doclink('link-42', 'dimensions', 'Variable netCDF4.Dataset.dimensions=netCDF4.Dataset-class.html#dimensions,Variable netCDF4_classic.Dataset.dimensions=netCDF4_classic.Dataset-class.html#dimensions'); return false;">dimensions</a></span></span><span class="py-op">,</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_dset</span><span class="py-op">)</span> </span>
<span class="py-lineno">230</span>  <span class="py-line">        <span class="py-comment"># make sure count=-1 becomes count=1</span> </span>
<span class="py-lineno">231</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">count</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-name">abs</span><span class="py-op">(</span><span class="py-name">cnt</span><span class="py-op">)</span> <span class="py-keyword">for</span> <span class="py-name">cnt</span> <span class="py-keyword">in</span> <span class="py-name">count</span><span class="py-op">]</span> </span>
<span class="py-lineno">232</span>  <span class="py-line">        <span class="py-keyword">if</span> <span class="py-op">(</span><span class="py-name">numpy</span><span class="py-op">.</span><span class="py-name">array</span><span class="py-op">(</span><span class="py-name">stride</span><span class="py-op">)</span> <span class="py-op">&lt;</span> <span class="py-number">0</span><span class="py-op">)</span><span class="py-op">.</span><span class="py-name">any</span><span class="py-op">(</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">233</span>  <span class="py-line">            <span class="py-keyword">raise</span> <span class="py-name">IndexError</span><span class="py-op">(</span><span class="py-string">'negative strides not allowed when slicing MFVariable Variable instance'</span><span class="py-op">)</span> </span>
<span class="py-lineno">234</span>  <span class="py-line">        <span class="py-comment"># Start, stop and step along 1st dimension, eg the unlimited</span> </span>
<span class="py-lineno">235</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># dimension.</span> </span>
<span class="py-lineno">236</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">sta</span> <span class="py-op">=</span> <span class="py-name">start</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span> </span>
<span class="py-lineno">237</span>  <span class="py-line">        <span class="py-name">step</span> <span class="py-op">=</span> <span class="py-name">stride</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span> </span>
<span class="py-lineno">238</span>  <span class="py-line">        <span class="py-name">stop</span> <span class="py-op">=</span> <span class="py-name">sta</span> <span class="py-op">+</span> <span class="py-name">count</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span> <span class="py-op">*</span> <span class="py-name">step</span> </span>
<span class="py-lineno">239</span>  <span class="py-line">         </span>
<span class="py-lineno">240</span>  <span class="py-line">        <span class="py-comment"># Build a list representing the concatenated list of all records in</span> </span>
<span class="py-lineno">241</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># the MFVariable variable set. The list is composed of 2-elem lists</span> </span>
<span class="py-lineno">242</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># each holding:</span> </span>
<span class="py-lineno">243</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment">#  the record index inside the variables, from 0 to n</span> </span>
<span class="py-lineno">244</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment">#  the index of the Variable instance to which each record belongs</span> </span>
<span class="py-lineno">245</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">idx</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">]</span>    <span class="py-comment"># list of record indices</span> </span>
<span class="py-lineno">246</span>  <span class="py-line">        <span class="py-name">vid</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">]</span>    <span class="py-comment"># list of Variable indices</span> </span>
<span class="py-lineno">247</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">n</span> <span class="py-keyword">in</span> <span class="py-name">range</span><span class="py-op">(</span><span class="py-name">nv</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">248</span>  <span class="py-line">            <span class="py-name">k</span> <span class="py-op">=</span> <span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_recLen</span><span class="py-op">[</span><span class="py-name">n</span><span class="py-op">]</span>     <span class="py-comment"># number of records in this variable</span> </span>
<span class="py-lineno">249</span>  <span class="py-line">            <span class="py-name">idx</span><span class="py-op">.</span><span class="py-name">extend</span><span class="py-op">(</span><span class="py-name">range</span><span class="py-op">(</span><span class="py-name">k</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">250</span>  <span class="py-line">            <span class="py-name">vid</span><span class="py-op">.</span><span class="py-name">extend</span><span class="py-op">(</span><span class="py-op">[</span><span class="py-name">n</span><span class="py-op">]</span> <span class="py-op">*</span> <span class="py-name">k</span><span class="py-op">)</span> </span>
<span class="py-lineno">251</span>  <span class="py-line"> </span>
<span class="py-lineno">252</span>  <span class="py-line">        <span class="py-comment"># Merge the two lists to get a list of 2-elem lists.</span> </span>
<span class="py-lineno">253</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># Slice this list along the first dimension.</span> </span>
<span class="py-lineno">254</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">lst</span> <span class="py-op">=</span> <span class="py-name">zip</span><span class="py-op">(</span><span class="py-name">idx</span><span class="py-op">,</span> <span class="py-name">vid</span><span class="py-op">)</span><span class="py-op">.</span><span id="link-43" class="py-name"><a title="MFDataset.MFDataset._Variable.__getitem__
netCDF4.Variable.__getitem__
netCDF4_classic.Variable.__getitem__" class="py-name" href="#" onclick="doclink('link-43', '__getitem__', 'Method MFDataset.MFDataset._Variable.__getitem__()=MFDataset.MFDataset._Variable-class.html#__getitem__,Method netCDF4.Variable.__getitem__()=netCDF4.Variable-class.html#__getitem__,Method netCDF4_classic.Variable.__getitem__()=netCDF4_classic.Variable-class.html#__getitem__'); return false;">__getitem__</a></span></span><span class="py-op">(</span><span class="py-name">slice</span><span class="py-op">(</span><span class="py-name">sta</span><span class="py-op">,</span> <span class="py-name">stop</span><span class="py-op">,</span> <span class="py-name">step</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">255</span>  <span class="py-line"> </span>
<span class="py-lineno">256</span>  <span class="py-line">        <span class="py-comment"># Rebuild the slicing expression for dimensions 1 and ssq.</span> </span>
<span class="py-lineno">257</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">newSlice</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-name">slice</span><span class="py-op">(</span><span class="py-name">None</span><span class="py-op">,</span> <span class="py-name">None</span><span class="py-op">,</span> <span class="py-name">None</span><span class="py-op">)</span><span class="py-op">]</span> </span>
<span class="py-lineno">258</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">n</span> <span class="py-keyword">in</span> <span class="py-name">range</span><span class="py-op">(</span><span class="py-number">1</span><span class="py-op">,</span> <span class="py-name">len</span><span class="py-op">(</span><span class="py-name">start</span><span class="py-op">)</span><span class="py-op">)</span><span class="py-op">:</span>   <span class="py-comment"># skip dimension 0</span> </span>
<span class="py-lineno">259</span>  <span class="py-line">            <span class="py-name">newSlice</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span class="py-name">slice</span><span class="py-op">(</span><span class="py-name">start</span><span class="py-op">[</span><span class="py-name">n</span><span class="py-op">]</span><span class="py-op">,</span> </span>
<span class="py-lineno">260</span>  <span class="py-line">                                  <span class="py-name">start</span><span class="py-op">[</span><span class="py-name">n</span><span class="py-op">]</span> <span class="py-op">+</span> <span class="py-name">count</span><span class="py-op">[</span><span class="py-name">n</span><span class="py-op">]</span> <span class="py-op">*</span> <span class="py-name">stride</span><span class="py-op">[</span><span class="py-name">n</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">stride</span><span class="py-op">[</span><span class="py-name">n</span><span class="py-op">]</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">261</span>  <span class="py-line">             </span>
<span class="py-lineno">262</span>  <span class="py-line">        <span class="py-comment"># Apply the slicing expression to each var in turn, extracting records</span> </span>
<span class="py-lineno">263</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-comment"># in a list of arrays.</span> </span>
<span class="py-lineno">264</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-name">lstArr</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-op">]</span> </span>
<span class="py-lineno">265</span>  <span class="py-line">        <span class="py-keyword">for</span> <span class="py-name">n</span> <span class="py-keyword">in</span> <span class="py-name">range</span><span class="py-op">(</span><span class="py-name">nv</span><span class="py-op">)</span><span class="py-op">:</span> </span>
<span class="py-lineno">266</span>  <span class="py-line">            <span class="py-comment"># Get the list of indices for variable 'n'.</span> </span>
<span class="py-lineno">267</span>  <span class="py-line"><span class="py-comment"></span>            <span class="py-name">idx</span> <span class="py-op">=</span> <span class="py-op">[</span><span class="py-name">i</span> <span class="py-keyword">for</span> <span class="py-name">i</span><span class="py-op">,</span><span class="py-name">numv</span> <span class="py-keyword">in</span> <span class="py-name">lst</span> <span class="py-keyword">if</span> <span class="py-name">numv</span> <span class="py-op">==</span> <span class="py-name">n</span><span class="py-op">]</span> </span>
<span class="py-lineno">268</span>  <span class="py-line">            <span class="py-keyword">if</span> <span class="py-name">idx</span><span class="py-op">:</span> </span>
<span class="py-lineno">269</span>  <span class="py-line">                <span class="py-comment"># Rebuild slicing expression for dimension 0.</span> </span>
<span class="py-lineno">270</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-name">newSlice</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span> <span class="py-op">=</span> <span class="py-name">slice</span><span class="py-op">(</span><span class="py-name">idx</span><span class="py-op">[</span><span class="py-number">0</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">idx</span><span class="py-op">[</span><span class="py-op">-</span><span class="py-number">1</span><span class="py-op">]</span> <span class="py-op">+</span> <span class="py-number">1</span><span class="py-op">,</span> <span class="py-name">step</span><span class="py-op">)</span> </span>
<span class="py-lineno">271</span>  <span class="py-line">                <span class="py-comment"># Extract records from the var, and append them to a list</span> </span>
<span class="py-lineno">272</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-comment"># of arrays.</span> </span>
<span class="py-lineno">273</span>  <span class="py-line"><span class="py-comment"></span>                <span class="py-name">lstArr</span><span class="py-op">.</span><span class="py-name">append</span><span class="py-op">(</span><span id="link-44" class="py-name"><a title="netCDF4_classic" class="py-name" href="#" onclick="doclink('link-44', 'netCDF4_classic', 'Module netCDF4_classic=netCDF4_classic-module.html'); return false;">netCDF4_classic</a></span></span><span class="py-op">.</span><span id="link-45" class="py-name"><a title="netCDF4.Variable
netCDF4_classic.Variable" class="py-name" href="#" onclick="doclink('link-45', 'Variable', 'Class netCDF4.Variable=netCDF4.Variable-class.html,Class netCDF4_classic.Variable=netCDF4_classic.Variable-class.html'); return false;">Variable</a></span></span><span class="py-op">.</span><span id="link-46" class="py-name"><a title="MFDataset.MFDataset._Variable.__getitem__
netCDF4.Variable.__getitem__
netCDF4_classic.Variable.__getitem__" class="py-name" href="#" onclick="doclink('link-46', '__getitem__', 'Method MFDataset.MFDataset._Variable.__getitem__()=MFDataset.MFDataset._Variable-class.html#__getitem__,Method netCDF4.Variable.__getitem__()=netCDF4.Variable-class.html#__getitem__,Method netCDF4_classic.Variable.__getitem__()=netCDF4_classic.Variable-class.html#__getitem__'); return false;">__getitem__</a></span></span><span class="py-op">(</span><span class="py-name">self</span><span class="py-op">.</span><span class="py-name">_recVar</span><span class="py-op">[</span><span class="py-name">n</span><span class="py-op">]</span><span class="py-op">,</span> <span class="py-name">tuple</span><span class="py-op">(</span><span class="py-name">newSlice</span><span class="py-op">)</span><span class="py-op">)</span><span class="py-op">)</span> </span>
<span class="py-lineno">274</span>  <span class="py-line">         </span>
<span class="py-lineno">275</span>  <span class="py-line">        <span class="py-comment"># Return the extracted records as a unified array.</span> </span>
<span class="py-lineno">276</span>  <span class="py-line"><span class="py-comment"></span>        <span class="py-keyword">if</span> <span class="py-name">lstArr</span><span class="py-op">:</span> </span>
<span class="py-lineno">277</span>  <span class="py-line">            <span class="py-name">lstArr</span> <span class="py-op">=</span> <span class="py-name">numpy</span><span class="py-op">.</span><span class="py-name">concatenate</span><span class="py-op">(</span><span class="py-name">lstArr</span><span class="py-op">)</span> </span>
<span class="py-lineno">278</span>  <span class="py-line">        <span class="py-keyword">return</span> <span class="py-name">lstArr</span> </span>
</div></div><span class="py-lineno">279</span>  <span class="py-line"> </span><script type="text/javascript">
<!--
expandto(location.href);
// -->
</script>
</pre>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">Generated by Epydoc
        3.0alpha3 on Tue Nov 21 11:27:14 2006</td>
    <td align="right" class="footer">
      <a href="http://epydoc.sourceforge.net">http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie()
  // -->
</script>
  
</body>
</html>
