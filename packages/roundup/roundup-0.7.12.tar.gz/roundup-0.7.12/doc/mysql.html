<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.3.0: http://docutils.sourceforge.net/" />
<title>MySQL Backend</title>
<link rel="stylesheet" href="default.css" type="text/css" />
</head>
<body>
<div class="document" id="mysql-backend">
<h1 class="title">MySQL Backend</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Version:</th>
<td>$Revision$</td></tr>
</tbody>
</table>
<p>This notes detail the MySQL backend for the Roundup issue tracker.</p>
<div class="section" id="prerequisites">
<h1><a name="prerequisites">Prerequisites</a></h1>
<p>To use MySQL as the backend for storing roundup data, you also need 
to install:</p>
<ol class="arabic simple">
<li>MySQL RDBMS 4.0.16 or higher - <a class="reference" href="http://www.mysql.com">http://www.mysql.com</a>. Your MySQL
installation MUST support InnoDB tables (or Berkeley DB (BDB) tables
if you have no other choice). If you're running &lt; 4.0.16 (but not &lt;4.0)
then you'll need to use BDB to pass all unit tests. Edit the
<tt class="literal"><span class="pre">roundup/backends/back_mysql.py</span></tt> file to enable DBD instead of InnoDB.</li>
<li>Python MySQL interface - <a class="reference" href="http://sourceforge.net/projects/mysql-python">http://sourceforge.net/projects/mysql-python</a></li>
</ol>
<table class="field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Note:</th><td class="field-body">the InnoDB implementation has a bug that Roundup tickles. See
<a class="reference" href="http://bugs.mysql.com/bug.php?id=1810">http://bugs.mysql.com/bug.php?id=1810</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="running-the-mysql-tests">
<h1><a name="running-the-mysql-tests">Running the MySQL tests</a></h1>
<p>Roundup tests expect an empty MySQL database. Two alternate ways to provide 
this:</p>
<ol class="arabic">
<li><p class="first">If you have root permissions on the MySQL server, you can create 
the necessary database entries using the follwing SQL sequence. Use
<tt class="literal"><span class="pre">mysql</span></tt> on the command line to enter:</p>
<pre class="literal-block">
CREATE DATABASE rounduptest;
USE rounduptest;
GRANT ALL PRIVILEGES ON rounduptest.* TO rounduptest&#64;localhost
     IDENTIFIED BY 'rounduptest';
FLUSH PRIVILEGES;
</pre>
</li>
<li><p class="first">If your administrator has provided you with database connection info, 
you can modify MYSQL_* constants in the file test/test_db.py with 
the correct values.</p>
</li>
</ol>
<p>Note that the MySQL database should not contain any tables. Tests will not 
drop the database with existing data.</p>
</div>
<div class="section" id="additional-configuration">
<h1><a name="additional-configuration">Additional configuration</a></h1>
<p>To initialise and use the MySQL database backend, roundup's configuration 
file (config.py in the tracker's home directory) should have the following
entries:</p>
<pre class="literal-block">
MYSQL_DBHOST = 'localhost'
MYSQL_DBUSER = 'rounduptest'
MYSQL_DBPASSWORD = 'rounduptest'
MYSQL_DBNAME = 'rounduptest'
MYSQL_DATABASE = ( MYSQL_DBHOST, MYSQL_DBUSER, MYSQL_DBPASSWORD,
    MYSQL_DBNAME )
</pre>
<p>Fill in the first four entries with values for your local MySQL installation 
before running &quot;roundup-admin initialise&quot;.  Use the commands in the <cite>Running the
MySQL tests</cite> to set up a database if you have privilege, or ask your local
administrator if not.</p>
</div>
<div class="section" id="showing-mysql-who-s-boss">
<h1><a name="showing-mysql-who-s-boss">Showing MySQL who's boss</a></h1>
<p>If things ever get to the point where that test database is totally hosed,
just:</p>
<pre class="literal-block">
$ su -
# /etc/init.d/mysql stop
# rm -rf /var/lib/mysql/rounduptest
# /etc/init.d/mysql start
</pre>
<p>and all will be better (note that on some systems, <tt class="literal"><span class="pre">mysql</span></tt> is spelt
<tt class="literal"><span class="pre">mysqld</span></tt>).</p>
</div>
</div>
<hr class="footer"/>
<div class="footer">
Generated on: 2004-06-08.
</div>
</body>
</html>
