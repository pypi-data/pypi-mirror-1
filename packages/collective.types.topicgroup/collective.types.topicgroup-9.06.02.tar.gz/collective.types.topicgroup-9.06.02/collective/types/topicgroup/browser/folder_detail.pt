<div xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
     xmlns:tal="http://xml.zope.org/namespaces/tal"
     xmlns:metal="http://xml.zope.org/namespaces/metal"
     xmlns:i18n="http://xml.zope.org/namespaces/i18n"
     lang="en"
     class="collective-types-topicgroup"
     i18n:domain="collective.types.topicgroup">
  <div tal:define="templateId template/getId;
                   normalizeString nocall:context/@@plone/normalizeString;
				   site_properties nocall:context/portal_properties/site_properties"
	   class="collective-types-topicgroup-detail">

    <p tal:content="context/Description">
      [Description]
    </p>

    <metal:listingmacro define-macro="listing">
    <tal:foldercontents define="contentFilter contentFilter|request/contentFilter|nothing;
                        limit_display limit_display|request/limit_display|nothing;
                        more_url more_url|request/more_url|string:folder_contents;
                        contentsMethod python:view.if_then_else(here.portal_type=='Topic', here.queryCatalog, here.getFolderContents);
                        folderContents folderContents|python:contentsMethod(contentFilter, batch=True);
                        use_view_action site_properties/typesUseViewActionInListings|python:();
                        over_limit python: limit_display and len(folderContents) > limit_display;
                        folderContents python: (over_limit and folderContents[:limit_display]) or folderContents;
                        batch folderContents">
       <tal:listing condition="folderContents">

           <tal:block tal:repeat="item folderContents">
               <div class="tileItem visualIEFloatFix vevent" 
                    tal:define="item_url item/getURL|item/absolute_url;
                                item_id item/getId|item/id;
                                item_title_or_id item/pretty_title_or_id;
                                item_description item/Description;
                                item_type item/portal_type;
                                item_type_title item/Type;
                                item_type_class python: 'contenttype-' + normalizeString(item_type);
                                item_modified item/ModificationDate;
                                item_created item/CreationDate;
                                item_wf_state        item/review_state|python: wtool.getInfoFor(item, 'review_state', '');
                                item_wf_state_class python:'state-' + normalizeString(item_wf_state);
                                item_creator item/Creator;
                                item_start item/start/ISO|item/StartDate|nothing;
                                item_end item/end/ISO|item/EndDate|nothing;
                                item_object item/getObject;"
                    tal:attributes="class string:tileItem visualIEFloatFix vevent ${item_type_class}">

    			   <div tal:content="structure python:view.displayLayout(item_object)" />

               </div>
           </tal:block>

           <!-- Navigation -->
           <div metal:use-macro="here/batch_macros/macros/navigation" />

       </tal:listing>
       <metal:empty metal:define-slot="no_items_in_listing">
           <p class="discreet"
              tal:condition="not: folderContents"
              i18n:translate="description_no_items_in_folder">
           </p>
       </metal:empty>

       </tal:foldercontents>
       </metal:listingmacro>

   </div>

</div>
