<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone">

  <metal:view_macro define-macro="view"
		    tal:define="html_color python:accessor()">
    <div class="smartcolor-view-value"
	 tal:content="html_color">color</div>
    <div class="smartcolor-view-sample"
	 style="background-color: black"
	 tal:attributes="id string:sample_${fieldName};
			 style python:'background-color: ' + html_color">
    </div>

    <div class="visualClear" style="height: 2px">&nbsp</div>
  </metal:view_macro>

  <metal:edit_macro define-macro="edit">
    <metal:use use-macro="field_macro | here/widgets/field/macros/edit">
      <div metal:fill-slot="widget_body"
	   tal:define="html_color python:edit_accessor()">

	<div class="smartcolor-container"
	     tal:attributes="id string:parent_${fieldName}">

	  <div class="smartcolor_render">
	    <div>
	      <input type="text"
		     class="color-field" id="color-field"
		     value="#FFFFFF"
		     tal:attributes="name fieldName;
				     value html_color;
				     id string:color-field_${fieldName}"/>
	      <input type="hidden"
		     tal:attributes="value html_color;
				     id string:restore-field_${fieldName}"/>
	    </div>

	    <div id="sample" class="sample"
		 style="background-color: black"
		 tal:attributes="id string:sample_${fieldName};
				 style python:'background-color: ' + html_color">&nbsp</div>

	    <div>
	      <div class="smartcolor_edit_button"
		   i18n:translate="label_edit_color"
		   tal:attributes="id string:smartcolor_edit_button_${fieldName}">
		Edit Color
	      </div>
	      <div class="smartcolor_restore_button"
		   i18n:translate="label_restore_color"
		   style="display: none"
		   tal:attributes="id string:smartcolor_restore_button_${fieldName}">
		Restore
	      </div>
	    </div>
	  </div>

	  <div class="visualClear">&nbsp</div>

	  <div class="smartcolor_edit_form"
	       style="display: none"
	       tal:attributes="id string:smartcolor_edit_form_${fieldName}">

	    <!-- LIGHTNESS -->
	    <div id="lightness" class="lightness"
		 tal:attributes="id string:lightness_${fieldName}">
	      <div id="lightness-table" class="lightness-table"
		   tal:attributes="id string:lightness-table_${fieldName}">
		<div class="lightness-slider" id="lightness-picker"
		     tal:attributes="id string:lightness-picker_${fieldName}">&nbsp</div>
	      </div>
	    </div>

	    <!-- COLOR -->
	    <div id="color" class="color"
		 tal:attributes="id string:color_${fieldName}">
	      <div id="color-table" class="color-table"
		   tal:attributes="id string:color-table_${fieldName}">
		<div class="color-selector" id="color-selector"
		     tal:attributes="id string:color-selector_${fieldName}">&nbsp</div>
	      </div>
	    </div>

	    <!-- INPUTS -->
	    <div class="picker-inputs"
		 tal:attributes="id string:picker-inputs_${fieldName}">
	      <div class="discreet"
		   i18n:translate="label_lightness">
		Lightness
	      </div>
	      <div>
		<input type="text" class="lightness-field" id="lightness-field" value="0"
		       tal:attributes="id string:lightness-field_${fieldName}"/>
	      </div>
	      <div class="discreet"
		   i18n:translate="label_hue">
		Hue
	      </div>
	      <div>
		<input type="text" class="hue-field" id="hue-field" value="0"
		       tal:attributes="id string:hue-field_${fieldName}"/>
	      </div>
	      <div class="discreet"
		   i18n:translate="label_saturation">
		Saturation
	      </div>
	      <div>
		<input type="text" class="saturation-field" id="saturation-field" value="0"
		       tal:attributes="id string:saturation-field_${fieldName}"/>
	      </div>
	    </div>
	    <div class="visualClear" style="height: 2px;">&nbsp</div>

    	  </div>

	</div>

      </div>
    </metal:use>
  </metal:edit_macro>

</html>
