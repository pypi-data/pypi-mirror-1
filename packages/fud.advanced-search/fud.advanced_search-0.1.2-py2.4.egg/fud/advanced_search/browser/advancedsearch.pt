<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="de"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="fud.advanced_search">

    <metal:head fill-slot="top_slot"
                tal:define="dummy python:request.set('disable_border',1)" />
    <metal:block fill-slot="column_one_slot" />
    <metal:block fill-slot="column_two_slot" />

<div metal:fill-slot="main"
       tal:define="Batch python:modules['Products.CMFPlone'].Batch;
            b_size request/bsize | python:3; b_start python:0; b_start request/b_start | b_start;
            desc_length site_properties/search_results_description_length;
            desc_ellipsis site_properties/ellipsis;">

    <h1 class="documentFirstHeading">Erweitere Suche der FUD</h1>
    <!--Tooltips-->
    <div id="as-tip1div" class="formHelp as-tooltip">
                                <b>Alle</b> in diesem Feld stehende Wörter sollen im Text entahlten sein.<br />
                                Ein Leerzeichen trennt die Wörter aus einander. <br />z.B: Deutschland Wirtschaft Tendenz
    </div>
     <div id="as-tip2div" class="formHelp as-tooltip">
        <b>Mindestens einer</b> der in diesem Feld stehende Wörter sollen im Text entahlten sein.<br />
        Ein Leerzeichen trennt die Wörter aus einander. z.B: Deutschland Wirtschaft Tendenz
     </div>
     <div id="as-tip3div" class="formHelp as-tooltip">
        Der <b>aus mehreren Wörtern</b> bestehede Begriff soll im Text vollständig entahlten sein.<br />
        z.B: Fremdheit im Mittelalter
     </div>
    <div id="as-tip4div" class="formHelp as-tooltip">
                                <b>Keiner</b> der in diesem Feld stehende Wörter sollen im Text entahlten sein.<br />
                                Ein Leerzeichen trennt die Wörter aus einander. z.B: Deutschland Wirtschaft Tendenz<br />
                                Funktioniert nur wenn einer der oberen Feldern benutzt wurde.
    </div>
     <div id="as-tip5div" class="formHelp as-tooltip">
        Wählen Sie <b>eine oder mehrere Kategorien</b> für ihre Suche.<br />
        Um mehrere auszuwählen halten Sie sie Strg-taste(Ctrl) gedrückt und klicken Sie<br />
        mit der Maustaste auf die gewünschte Kategorien.
     </div>
     <div id="as-tip6div" class="formHelp as-tooltip">
                                Wählen Sie <b>eine/n oder mehrere Autoren</b> für ihre Suche.<br />
                                Falls Sie ausschließlich eine Zusammenarbeit der gewünschten Autoren auflisten
                                möchten,<br /> markieren Sie die 'Kooperation' Kontrollkästchen.
                                Um mehrere auszuwählen halten Sie sie Strg-taste (Ctrl) gedrückt und klicken Sie<br />
                                mit der Maustaste auf die gewünschte Kategorien.
    </div>
        <div class="as-search-form">
            <p i18n:translate="description_advanced_search">
            Nutzen Sie die folgende Form um detailliert Ihre Suche zu beschreiben.
            <br />
            Die Form bietet eine Erweiterung für die normale Suche oben rechts.
            </p>

            <form action="advanced_search"
                  class="enableAutoFocus"
                  method="get"
                  name="search"
                  id="searchform"
                  tal:define="DateTime python:modules['DateTime'].DateTime">
                  <input name="b_start" type="hidden" value="0">
                  <table>
                      
                      <tr>
                        <td class="as-field-label">
                          <b>mit allen Wörtern <a id="as-tip1" class="as-field-tip">[Hilfe]</a></b>
                        </td>
                        <td colspan="2">
                            <div class="field as-field">
                              <input type="text"
                               name="AndWords"
                               size="40"
                               tal:attributes="value request/AndWords|nothing"
                               />
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <td class="as-field-label">
                          <b>mit irgendeinem der Wörter <a id="as-tip2" class="as-field-tip">[Hilfe]</a></b>
                        </td>
                        <td>
                            <div class="field as-field">
                              <input type="text"
                               name="OrWords"
                               size="40"
                               tal:attributes="value request/OrWords|nothing"
                               />
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <td class="as-field-label">
                          <b>mit der genauen Wortgruppe <a id="as-tip3" class="as-field-tip">[Hilfe]</a></b>
                        </td>
                        <td colspan="3">
                            <div class="field as-field">
                              <input type="text"
                               name="Phrase"
                               size="40"
                               tal:attributes="value request/Phrase|nothing"
                               />
                            </div>
                        </td>
                      </tr>
                      <tr>
                        <td class="as-field-label">
                          <b>ohne die Wörter <a id="as-tip4" class="as-field-tip">[Hilfe]</a></b>
                        </td>
                        <td colspan="3">
                            <div class="field as-field">
                              <input type="text"
                               name="NotWords"
                               size="40"
                               tal:attributes="value request/NotWords|nothing"
                               />
                            </div>
                        </td>
                      </tr>
                       <tr>
                          <td></td>
                          <td colspan="2">
                             
                          </td>
                      </tr>
                      <tr>
                        <td class="as-field-label">
                          <b>Mit der/n Kategorie/n <a id="as-tip5" class="as-field-tip">[Hilfe]</a></b>
                        </td>
                        <td>
                            <tal:categories tal:define="categs python:portal.portal_catalog.uniqueValuesFor('Subject')">
                                <select multiple="multiple"
                                        size="3"
                                        name="subjects">
                                    <option  selected value="" >alle Kategorien</option>
                                    <metal:block tal:repeat="cat categs">
                                        <option value="" tal:attributes="value cat" tal:content="cat"> Category </option>
                                    </metal:block>
                                </select>
                            </tal:categories>
                        </td>
                      </tr>
                       
                         

                      <tr>
                          <td class="as-field-label">
                            <b>Autor/en
                              <label for="coop">[Kooperation]</label>
                              <input type="checkbox" name="coop" value="ON" />
                              <input type="hidden" name="coop" value="" />
                              <a id="as-tip6" class="as-field-tip">[Hilfe]</a>
                             </b>
                          </td>

                          <td>
                            <tal:creators tal:define="creators view/getCreators">
                                <select multiple="multiple"
                                        size="3"
                                        name="creators">
                                    <option  selected value="" i18n:translate="label_any_author">nicht betrachten</option>
                                    <metal:block tal:repeat="creator creators">
                                        <option value="" tal:attributes="value creator"
                                                         tal:content="python:mtool.getMemberInfo(creator)['fullname']"> username </option>
                                    </metal:block>
                                </select>
                            </tal:creators>

                            <b>und nicht:</b>
                            <tal:creators tal:define="creators view/getCreators">
                                <select multiple="multiple"
                                        size="3"
                                        name="notcreators">
                                    <option  selected value="" i18n:translate="label_any_author">nicht betrachten</option>
                                    <metal:block tal:repeat="creator creators">
                                        <option value="" tal:attributes="value creator"
                                                         tal:content="python:mtool.getMemberInfo(creator)['fullname']"> username </option>
                                    </metal:block>
                                </select>
                            </tal:creators>
                          </td>
                      </tr>
                      <tr>
                          <td class="as-field-label">
                            <b>Dokument von Typ:</b>
                          </td>
                          <td>
                                    <select name="DocType" id="DocTypes">
                                        <option value="">All Types</option>
                                        <option value="Quellentext">Quellentext</option>
                                        <option value="Fachartikel">Fachartikel</option>
                                    </select>
                          </td>
                      </tr>
                      <tr>
                          <td class="as-field-label">
                            <b>Sortierung nach</b>
                          </td>
                          <td>
                                    <select name="SortBy">
                                        <option value="">nicht sortieren</option>
                                        <option value="Creator">Autor aufsteigend</option>
                                        <option value="Creator desc">Autor absteigend</option>
                                        <option selected value="created">Herstellungsdatum aufsteigent</option>
                                        <option value="created desc">Herstellungsdatum absteigent</option>
                                    </select>
                          </td>
                      </tr>
                      <tr>
                          <td></td>
                          <td>
                              
                            <label for="bsize">gewündchte Anzahl</label>
                            <select name="bsize">
                                <option value="5" >5</option>
                                <metal:block    tal:define="values python:['10','15','20','25','30','50']"
                                                tal:repeat="val values">
                                    <option value="" tal:attributes="value val"
                                                     tal:content="val"> 10 </option>
                                </metal:block>
                            </select>
                            <span class="formControls">
                                <input class="context"
                                       type="submit"
                                       name="submit"
                                       value="Suchen"
                                           i18n:attributes="value label_search;"/>
                              </span>
                          </td>
                      </tr>
                  </table>
                    
            </form>
         </div>
            <tal:search tal:condition="request/submit | nothing">
                <tal:result tal:define="results view/getSearchItems">

                    <div id="as-noresults-msg" tal:condition="not:results">
                            <p><b>Keine Dokumente wurden gefunden.</b></p>
                     </div>
                    <tal:block tal:define="batch python:Batch(results, int(b_size), int(b_start), orphan=0);"
                               tal:condition="batch">
                        <table>
                             <tr>
                                 <th>The Search Results</th>
                             </tr>
                             <tr>
                                 <th>Titel</th>
                                 <th>Ort</th>
                                 <th>geschrieben am</th>
                                 <th>Autors</th>
                                 <th>Katogoeien</th>
                             </tr>
                            <metal:block tal:repeat="bat batch">
                                <tr>
                                    <td><a href="" tal:attributes="href bat/url"
                                                   tal:content="bat/title">result item</a>
                                    </td>
                                    <td>
                                        <<span tal:content="bat/fundort">location</span>>
                                    </td>
                                    <td  tal:content="python:toLocalizedTime(bat.get('created'),long_format=1)">
                                        creation date
                                    </td>
                                    <td>
                                        <metal:block tal:define="creators bat/Creators"
                                                     tal:repeat="creator creators"
                                                     tal:condition="creators">
                                             <<span tal:content="creator"> creator</span>>
                                        </metal:block>
                                    </td>
                                    <td>
                                        <<metal:block tal:define="categs bat/subjects"
                                                     tal:repeat="categ categs"
                                                     tal:condition="categs">
                                             <span tal:content="categ"> category</span>
                                        </metal:block>>
                                    </td>
                                </tr>
                            </metal:block>
                        </table>
                        <tal:is define="batch_base_url string:advanced_search" >
                          <div metal:use-macro="here/batch_macros/macros/navigation" />
                        </tal:is>
                    </tal:block>
                </tal:result >
            </tal:search>

            
        <!--<div tal:replace=" structure request"/>-->

</div>



</html>