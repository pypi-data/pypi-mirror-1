<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="de"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="fud.advanced_search">
    <metal:head fill-slot="top_slot"
                tal:define="dummy python:request.set('disable_border',1)" />
    <metal:block fill-slot="column_one_slot" />
    <metal:block fill-slot="column_two_slot" />

<div metal:fill-slot="main"
       tal:define="Batch python:modules['Products.CMFPlone'].Batch;
            b_size request/bsize | python:3; b_start python:0; b_start request/b_start | b_start;
            title_length python:50;
            desc_ellipsis site_properties/ellipsis;
            comingFromFolder view/getPathToSearch;">

    <h1 class="documentFirstHeading">Erweiterte Suche der FUD</h1>
    <!--Tooltips-->
    
        
        <div id="as-form-wrapper">
            <div class="as-hide-show"><a id="as-hide-show">Form verstecken</a></div>
            <div id="as-search-form">
                <p i18n:translate="description_advanced_search">
                    Nutzen Sie die folgende Form um detailliert Ihre Suche zu beschreiben.
                    <br />
                    Die Form bietet eine Erweiterung für die normale Suche oben rechts.
                </p>
                <form action="advanced_search"
                      class="enableAutoFocus"
                      method="get"
                      name="search"
                      id="searchform"
                      tal:define="DateTime python:modules['DateTime'].DateTime">
                      <input name="b_start" type="hidden" value="0">
                      <table>
                          <tr>
                              <tal:searchpath tal:condition="comingFromFolder">

                                    <td class="as-field-label">
                                      <b>Verzeichnissuche</b>
                                      <input type="checkbox" name="pathsearch" value="on" />
                                      <input type="hidden" name="pathsearch" value="" />
                                    </td>
                                    <td colspan="3"
                                         class="as-field-label">
                                      <b tal:content="comingFromFolder">path</b>
                                      <input type="hidden"
                                             name="searchpath"
                                             tal:attributes="value comingFromFolder" />
                                    </td>
                              </tal:searchpath>
                              <tal:searchpath tal:condition="not:comingFromFolder">
                                      <td class="as-field-label">
                                        <b>Verzeichnissuche</b>
                                      </td>
                                      <td colspan="3">Die Suche wird in alle Verzeichnise ausgeführt.</td>
                              </tal:searchpath>
                                       <td>
                                           <a id="as-tip0" class="as-field-tip">Hilfe</a>
                                       </td>
                              </tr>
                          <tr>
                            <td class="as-field-label">
                              <b>mit allen Wörtern</b>
                            </td>
                            <td colspan="3"
                                 class="field as-field">
                                  <input id="as-text1"
                                  type="text"
                                   name="AndWords"
                                   size="60"
                                   tal:attributes="value request/AndWords|nothing"
                                   />
                            </td>
                            <td>
                                
                                <a id="as-tip1" class="as-field-tip">Hilfe</a>
                            </td>
                          </tr>
                          <tr>
                            <td class="as-field-label">
                              <b>mit irgendeinem der Wörter </b>
                            </td>
                            <td colspan="3" class="field as-field">
                                  <input id="as-text2"
                                   type="text"
                                   name="OrWords"
                                   size="60"
                                   tal:attributes="value request/OrWords|nothing"
                                   />
                            </td>
                            <td>
                                <a id="as-tip2" class="as-field-tip">Hilfe</a>
                            </td>
                          </tr>
                          <tr>
                            <td class="as-field-label">
                              <b>mit der genauen Wortgruppe</b>
                            </td>
                            <td colspan="3" class="field as-field">
                                  <input id="as-text3"
                                          type="text"
                                           name="Phrase"
                                           size="60"
                                           tal:attributes="value request/Phrase|nothing"
                                   />
                            </td>
                             <td>
                                
                                <a id="as-tip3" class="as-field-tip">Hilfe</a>
                            </td>
                          </tr>
                          <tr>
                            <td class="as-field-label">
                              <b>ohne die Wörter </b>
                            </td>
                            <td colspan="3" class="field as-field">
                                  <input id="as-text4"
                                          type="text"
                                           name="NotWords"
                                           size="60"
                                           tal:attributes="value request/NotWords|nothing"
                                   />
                            </td>
                            <td>
                                <a id="as-tip4" class="as-field-tip">Hilfe</a>
                            </td>
                          </tr>
                          <tr>
                            <td class="as-field-label">
                              <b>Mit der/n Kategorie/n</b>
                            </td>
                            <td tal:define="categs python:portal.portal_catalog.uniqueValuesFor('Subject')">
                                    <select id="as-categs1"
                                            class="as-multi-selector"
                                            multiple="multiple"
                                            size="10">
                                        <option value="" disabled>verfügbare Kategorien</option>
                                        <metal:block tal:repeat="cat categs">
                                            <option  value="" tal:attributes="value cat" tal:content="cat"> Category </option>
                                        </metal:block>
                                    </select>
                            </td>
                            <td>
                                <input id="as-addcat" type="button" value=">"><br />
                                <input id="as-removecat" type="button" value="<"><br />
                            </td>
                            <td>
                                    <select id="as-categs2"
                                            class="as-multi-selector"
                                            multiple="multiple"
                                            size="10"
                                            name="subjects">
                                         <option value="" disabled>alle Kategorien suchen</option>
                                    </select>
                            </td>
                            <td><a id="as-tip5" class="as-field-tip">Hilfe</a></td>
                          </tr>


                          <tr tal:define="creators view/getCreators">
                              <td class="as-field-label">
                                <b>Autor/en
                                  <label for="coop">[Kooperation</label>
                                  <input type="checkbox" name="coop" value="ON" />]
                                  <input type="hidden" name="coop" value="" />
                                 </b>
                              </td>

                              <td colspan="3">
                                <select class="as-multi-selector"
                                        id="as-creators"
                                        multiple="multiple"
                                        size="10"
                                        name="creators">
                                <option  selected value="" i18n:translate="label_any_author">nicht betrachten</option>
                                <metal:block tal:repeat="creator creators">
                                    <option value="" tal:attributes="value creator"
                                                     tal:define="mtool python:mtool.getMemberInfo(creator)"
                                                     ><span tal:content="mtool/fullname">fullname</span>
                                                     (<span tal:content="mtool/username">username</span>)
                                    </option>
                                </metal:block>
                                </select>
                              </td>
                              <!--<td>Dieser Teil wurde letzlich (16.2.10) entfernt.
                                <b>und nicht:</b>
                              </td>
                              <td>
                               <select class="as-multi-selector"
                                        multiple="multiple"
                                        size="10"
                                        name="notcreators">
                                    <option  selected value="" i18n:translate="label_any_author">nicht betrachten</option>
                                    <metal:block tal:repeat="creator creators">
                                        <option value="" tal:attributes="value creator"
                                                         tal:content="python:mtool.getMemberInfo(creator)['fullname']"> username </option>
                                    </metal:block>
                                </select>
                              </td>-->
                              <td><a id="as-tip6" class="as-field-tip">Hilfe</a></td>
                          </tr>
                          <tr>
                              <td class="as-field-label">
                                <b>Dokument von Typ:</b>
                              </td>
                              <td>
                                        <select name="DocType" id="DocTypes">
                                            <option value="">Alle</option>
                                            <option value="Quellentext">Quellentext</option>
                                            <option value="Fachartikel">Fachartikel</option>
                                        </select>
                              </td>
                          </tr>
                          <tr>
                              <td class="as-field-label">
                                <b>Sortierung nach</b>
                              </td>
                              <td colspan="2">
                                        <select id="as-sort-selector" name="SortBy">
                                            <option value="">nicht sortieren</option>
                                            <option value="sortable_title">Titel aufsteigend</option>
                                            <option value="sortable_title desc">Titel absteigend</option>
                                            <option value="Savedby">Ersteller aufsteigend</option>
                                            <option value="Savedby desc">Ersteller absteigend</option>
                                            <option value="modified">Änderungsdatum aufsteigend</option>
                                            <option selected value="modified desc">Änderungsdatum absteigend</option>
                                        </select>
                              </td>
                          </tr>
                          <tr>
                              <td class="as-field-label"><b>gewündchte Anzahl</b></td>
                              <td>
                                <select name="bsize">
                                    <option value="10" >10</option>
                                    <metal:block    tal:define="values python:['25','50']"
                                                    tal:repeat="val values">
                                        <option value="" tal:attributes="value val"
                                                         tal:content="val"> 10 </option>
                                    </metal:block>
                                </select>
                              </td>
                          </tr>
                          <tr>
                              <td></td>
                              <td colspan="2">
                                <span class="formControls as-submit">
                                    <input id="as-submit-form"
                                           class="context"
                                           type="submit"
                                           name="submit"
                                           value="Suchen"
                                               i18n:attributes="value label_search;"/>
                                </span>
                                <span class="formControls as-submit">
                                    <input id="as-reset-form"
                                           class="context"
                                           type="reset"
                                           value="zurücksetzen"
                                               i18n:attributes="value label_search;"/>
                                </span>
                              </td>
                          </tr>
                      </table>

                </form>
             </div>
         </div>
            <tal:search tal:condition="request/submit | nothing">
                <h1 id="as-result-heading" class="documentFirstHeading">Suchergebnis(se)</h1>
                <tal:result tal:define="results view/getSearchItems">

                    <div id="as-noresults-msg" tal:condition="not:results">
                            <p><b>Keine Dokumente wurden gefunden.</b></p>
                     </div>
                    <tal:block tal:define="batch python:Batch(results, int(b_size), int(b_start), orphan=0);"
                               tal:condition="batch">
                        <div id="as-number-of-results"
                             tal:condition="python:len(results)>int(b_size)">
                            <span tal:content="batch/length"></span> Treffer aus
                            <span tal:content="python:len(results)"></span> auf allen Ergebnisseiten
                        </div>
                        <table id="as-result-table" class="as-result-list">
                            <th id="as-title-th" colspan="3">
                                <a class="as-tabhead" id="as-tabhead-title">
                                    Titel
                                </a>
                                <span tal:condition="view/isSorterTitle">
                                    <a class="as-tabhead as-tabhead-arrow" id="as-tabhead-title-desc">
                                    &uarr;
                                    </a>
                                </span>
                                <span tal:condition="view/isSorterTitleDesc">
                                    <a class="as-tabhead as-tabhead-arrow" id="as-tabhead-title">
                                    &darr;
                                    </a>
                                </span>
                            </th>
                            <th id="as-creator-th">
                                <a class="as-tabhead" id="as-tabhead-creator">
                                    erstellt von
                                </a>
                                <span tal:condition="view/isSorterCreator">
                                    <a class="as-tabhead as-tabhead-arrow" id="as-tabhead-creator-desc">
                                    &uarr;
                                    </a>
                                </span>
                                <span tal:condition="view/isSorterCreatorDesc">
                                    <a class="as-tabhead as-tabhead-arrow" id="as-tabhead-creator">
                                    &darr;
                                    </a>
                                </span>
                            </th>
                            <th id="as-modified-th">
                                <a class="as-tabhead" id="as-tabhead-modified">
                                    zuletzt verändert
                                </a>
                                
                                <span tal:condition="view/isSorterDate">
                                    <a class="as-tabhead as-tabhead-arrow" id="as-tabhead-modified-desc">
                                    &uarr;
                                    </a>
                                </span>
                                <span tal:condition="view/isSorterDateDesc">
                                    <a class="as-tabhead as-tabhead-arrow" id="as-tabhead-modified">
                                    &darr;
                                    </a>
                                </span>
                            </th>
                            <metal:block tal:repeat="bat batch">
                                <tr id="as-title-">
                                    <td class="as-result-title"
                                        colspan="3"
                                         tal:define="item_title bat/Title">
                                            <a href="" tal:attributes="href bat/url">
                                                <span tal:replace="python:plone_view.cropText(item_title, title_length, desc_ellipsis)">
                                                    Cropped title
                                                </span>
                                            </a>
                                            <a tal:attributes="id bat/uid" class="as-info-hl">mehr</a>
                                    </td>

                                    <td class="as-result-savedby" tal:content="bat/Savedby">
                                        user's full name
                                    </td>
                                    <td class="as-result-date"
                                        tal:content="python:toLocalizedTime(bat.get('modified'),long_format=1)">
                                        date
                                    </td>
                                </tr>
                                <tr class="as-info-row">
                                    <td colspan="3" tal:define="categs bat/subjects;
                                                    creators bat/Creators;
                                                    fundort bat/fundort;
                                                    druckort bat/druckort;
                                                    created python:toLocalizedTime(bat.get('created'),long_format=1)">
                                        <ul>
                                            <li>
                                                <b>Kategorie(n): </b>
                                                <span tal:condition="not:categs"> keine</span>
                                                <metal:block tal:repeat="categ categs">
                                                    <span tal:content="categ"> category</span>
                                                </metal:block>
                                            </li>
                                        </ul>
                                        <ul tal:attributes="class bat/uid"
                                            name="as-result-info">
                                            <li>
                                                <b>Dokumenttyp:</b>
                                                <span tal:content="bat/Type"> doctype</span>
                                            </li>
                                            <li>
                                                <b>Autor(en):</b>
                                                <span tal:condition="not:creators"> keine</span>
                                                    <metal:block tal:repeat="creator creators">
                                                        <span tal:content="creator"> creator</span>&nbsp;
                                                    </metal:block>
                                            </li>
                                            <li>
                                                <b>Fundort:</b>
                                                <span tal:content="fundort"
                                                      tal:condition="fundort"></span>
                                                <span tal:condition="not:fundort">nicht vorhanden</span>
                                            </li>
                                            <li>
                                                <b>Druckort:</b>
                                                <span tal:content="druckort"
                                                      tal:condition="druckort"></span>
                                                <span tal:condition="not:druckort">nicht vorhanden</span>
                                            </li>
                                            <li>
                                                <b>Erstellt am:</b>
                                                <span tal:content="created"
                                                      tal:condition="created"></span>
                                                <span tal:condition="not:created">nicht vorhanden</span>
                                            </li>
                                        </ul>

                                    </td>
                               </tr>
                            </metal:block>
                        </table>
                        <tal:is define="batch_base_url string:advanced_search" >
                          <div class="as-pagination">
                                <div metal:use-macro="here/batch_macros/macros/navigation" />
                          </div>
                        </tal:is>
                    </tal:block>
                </tal:result >
            </tal:search>

        <div id="as-tipdiv" class="as-tooltip">
            <div id="in-tipdiv">
            </div>
            <img width="18" height="9" src="++resource++asresources/as-triang.png" alt="as-triang.png" />
        </div>
     
        <!--<div tal:replace=" structure request"/>-->

</div>



</html>