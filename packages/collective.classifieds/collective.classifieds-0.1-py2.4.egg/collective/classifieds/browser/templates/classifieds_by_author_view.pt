<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<body>

<div metal:fill-slot="main"
             tal:define="results python: view.getClassifiedsByAuthor();
             Batch python:modules['Products.CMFPlone'].Batch;
             b_size python:30;
             b_start python:0;
             b_start request/b_start | b_start;"  id="classifieds">
        
        <div tal:replace="structure provider:plone.abovecontenttitle" />


        <br />
        <br />
       
        <span tal:condition="python: context.REQUEST.get('author') and len(context.REQUEST.get('author')) > 0">
        <span tal:define="modificationDate here/Date;
                             creator here/Creator;
                             author python:mtool.getMemberInfo(context.REQUEST.get('author'));
                             authorName python:author and author['fullname'] or creator;
                             modificationDate python:here.toLocalizedTime(modificationDate)">       
       
                <h1 class="classified_title">
                <span class="classifiedsinfo"  i18n:translate="classifieds_classifieds_all_created_by_header">
                        All classifieds by
                </span>:
                <span tal:content="authorName">author</span>
                
                </h1>
                <br />
        
        </span>
        </span>
        

        <span tal:condition="view/getClassifiedsByAuthor">
        <!-- list classifieds if there is no search -->
        <span tal:define="listresults python:view.getClassifiedsByAuthor();
             Batch python:modules['Products.CMFPlone'].Batch;
             b_size python:30;
             b_start python:0;
             b_start request/b_start | b_start;">
                

                        <div tal:condition="python: listresults" tal:define="batch python:Batch(listresults, b_size, int(b_start), orphan=1);">
                                        <table border="0" width="100%" class="listing">
                                                <tr>
                                                        <th i18n:translate="classifieds_classifiedsclassified_label_image">
                                                                Image
                                                        </th>
                                                        <th>
                                                                <span i18n:translate="classifieds_classifieds_label">Results</span>
                                                                
                                                        </th>
                                                        <th>
                                                                <span tal:omit-tag="" i18n:translate="classifieds_classifiedsclassified_label_price">Price</span>
                                                                
                                                        </th>        
                                                </tr>
                                                <tbody>
                                                        <tr tal:repeat="item batch" tal:attributes="class python:repeat['item'].odd()==1 and 'odd' or 'even'">
                                                                <!-- isExpired checks if a item is expired -->
                                                                <span tal:omit-tag="" tal:condition="python:not portal.isExpired(item)">
                                                                        <td>
                                                                                <span tal:condition="item/hasImage">
                                                                                        <img class="image_tile" tal:attributes="src python:item.getImageTile" />
                                                                                        
                                                                
                                                                                </span>
                                                                                <span tal:condition="not: item/getImageTile">
                                                                                        <img class="image_tile" src="++resource++collective.classifieds.images/no_photo.jpg" />
                                                                                        <span i18n:translate="marketplace_no_image_tile_label">No Image</span>
                                                                                </span>
                                                                        </td>
                                                                        <td>
                                                                                <a tal:attributes="href string:${item/getURL}" tal:content="item/Title">Name</a>
                                                                        </td>
                                                                        <td>
                                                                                <span tal:content="item/price">price</span>
                                                                        </td>
                                                                </span>
                                                        </tr>
                                                </tbody>
                                        </table>
                                <!-- show batch/paging navigation -->
                                <span metal:use-macro="here/batch_macros/macros/navigation" />
                        </div>

                <!-- end classifieds -->
        </span>
        </span>

</div>
</body>
</html>
