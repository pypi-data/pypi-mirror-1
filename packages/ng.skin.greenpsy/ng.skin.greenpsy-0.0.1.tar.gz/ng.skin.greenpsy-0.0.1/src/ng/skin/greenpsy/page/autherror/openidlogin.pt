<html metal:use-macro="views/errorpage/errorpage">
  <body>
   <metal:block metal:fill-slot="title">
     Страница требует авторизации
   </metal:block>
   <metal:block metal:fill-slot="text">

        <p>Страница, к которой вы обратились, требует авторизации. Введите ваш
        openid-идентификатор в форму ниже, выберете провайдера и нажмете
        "Войти". Если вы незарегистрированы на нашем сайте, вам стоит
        прочитать 
	<a href="#" 
		tal:on-error="python:'краткое руководство по регистрации.'" 
		tal:attributes="href context/@@article/registration/@@absolute_url" 
		class="more">краткое руководство по регистрации.</a></p>

        <form action="."  method="post" style="border: 2px solid green; padding: 5px; margin: 20px 100px 20px 100px;"
		 tal:attributes="action request/URL" > 
          <b>OpenID:</b>
          <input type="text" name="openid" 
		tal:attributes="value request/openid | nothing"/>
	  <b>@</b><select name="provider" size="1">
	      <option value="">Не выбран</option>
              <option value="AOL" tal:attributes="selected python:request.get('provider',None)=='AOL' or nothing">AOL</option>
              <option value="Blogger" tal:attributes="selected python:request.get('provider',None)=='Blogger' or nothing">Blogger</option>
              <option value="Flickr" tal:attributes="selected python:request.get('provider',None)=='Flickr' or nothing">Flickr</option>
              <option value="LiveDoor" tal:attributes="selected python:request.get('provider',None)=='LiveDoor' or nothing">LiveDoor</option>
              <option value="LiveJournal" tal:attributes="selected python:request.get('provider',None)=='LiveJournal' or nothing">LiveJournal</option>
              <option value="SmugMug" tal:attributes="selected python:request.get('provider',None)=='SmugMug' or nothing">SmugMug</option>
              <option value="Technorati" tal:attributes="selected python:request.get('provider',None)=='Technorati' or nothing">Technorati</option>
              <option value="Vox" tal:attributes="selected python:request.get('provider',None)=='Vox' or nothing">Vox</option>
              <option value="Yahoo" tal:attributes="selected python:request.get('provider',None)=='Yahoo' or nothing">Yahoo</option>
              <option value="WordPress" tal:attributes="selected python:request.get('provider',None)=='WordPress' or nothing">WordPress</option>
              <option value="Yandex" tal:attributes="selected python:request.get('provider',None)=='Yandex' or nothing">Yandex</option>
	  </select>
          <input type="submit" value="Войти" class="button" />
          <input type="checkbox" name="save"/> запомнить меня
        </form>
        <p>После нажатия на кнопку "Войти" вы будете переадресованы на страницу вашего openid-провайдера,
           который подтвердит ваш допуск к сайту</p>
        <p tal:on-error="python:''"> Если вы не помните ваш пароль, то прочитайте о том
              <a href="#"  tal:attributes="href context/@@article/restorepasswd" class="more">как восстановить пароль</a></p>

        <div style="margin: 5px 5px 5px 5px;  border: solid 1px red; text-align: center;" 
	    tal:define="msg request/++nsinterface++ng.site.greenpsy.openid.interfaces.IOpenIDErrorMessage"
            tal:condition="msg/haserror">
            <b><tal:block content="msg/title"/></b>
            <hr width="50%" align="center"/>
            <tal:block content="msg/message"/>
        </div> 

        <center>
	    <form action="" method="post"><input type="submit" name="login" value="Вход для персонала"></form>
        </center>

 <!--<center><a href="?login=1"><font size="+1" color="green">Вход для персонала</font></a></center> -->

   </metal:block>
  </body>
</html>
