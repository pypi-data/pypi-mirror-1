<?xml version='1.0' encoding="ISO-8859-1" ?>
<schema
   targetNamespace="http://www.ttt.org/myns" 
   xmlns:myns="http://www.ttt.org/myns" 
   xmlns:ogc="http://www.opengis.net/ogc"
   xmlns:tal="http://xml.zope.org/namespaces/tal"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns="http://www.w3.org/2001/XMLSchema"
   xmlns:gml="http://www.opengis.net/gml"
   elementFormDefault="qualified" version="0.1" >

  <import namespace="http://www.opengis.net/gml"
          schemaLocation="http://schemas.opengeospatial.net/gml/2.1.2/feature.xsd" />

  <tal:boucle tal:define="ftypes python:view.getFeaturetypesInfo()" tal:repeat="featuretype python:ftypes.keys()">
  
      <element tal:attributes="name featuretype;type python:'myns:'+featuretype+'Type'"
               substitutionGroup="gml:_Feature"/>
               
	  <complexType tal:attributes="name python:featuretype+'Type'">
	      <complexContent>
	          <extension base="gml:AbstractFeatureType">
	            <sequence>
	               <element name="msGeometry" type="gml:GeometryPropertyType" minOccurs="0" maxOccurs="1"/>
	               <tal:boucle tal:repeat="elem python:ftypes[featuretype]['elements'].keys()">
	                  <element tal:attributes="name elem;type python:ftypes[featuretype]['elements'][elem]"/>
	               </tal:boucle>
	            </sequence>
	          </extension>
	      </complexContent>	  
	  </complexType>
	  
  </tal:boucle>

</schema>
