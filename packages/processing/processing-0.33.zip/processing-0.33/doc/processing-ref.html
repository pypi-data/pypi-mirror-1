<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>processing package reference</title>
<link rel="stylesheet" href="html4css1.css" type="text/css" />
</head>
<body>
<div class="header">
<a class="reference" href="intro.html">Prev</a> &nbsp; &nbsp; &nbsp; &nbsp; <a class="reference" href="index.html">Up</a> &nbsp; &nbsp; &nbsp; &nbsp; <a class="reference" href="process-objects.html">Next</a>
<hr class="header"/>
</div>
<div class="document" id="processing-package-reference">
<h1 class="title">processing package reference</h1>
<p>The <tt class="docutils literal"><span class="pre">processing</span></tt> package mostly replicates the API of the <tt class="docutils literal"><span class="pre">threading</span></tt>
module.</p>
<p>The following functions and classes will always be available in the
<tt class="docutils literal"><span class="pre">processing</span></tt> namespace:</p>
<blockquote>
<dl class="docutils">
<dt><strong>class</strong> <tt class="docutils literal"><span class="pre">Process(group=None,</span> <span class="pre">target=None,</span> <span class="pre">name=None,</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})</span></tt></dt>
<dd><p class="first">An analogue of <tt class="docutils literal"><span class="pre">threading.Thread</span></tt>.</p>
<p class="last">See <a class="reference" href="process-objects.html">Process objects</a>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">currentProcess()</span></tt></dt>
<dd><p class="first">An analogue of <tt class="docutils literal"><span class="pre">threading.currentThread</span></tt></p>
<p class="last">Returns the object corresponding to the current process.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">activeChildren()</span></tt></dt>
<dd><p class="first">Return list of all live children of the current process.</p>
<p class="last">Calling this has the side affect of &quot;joining&quot; any processes
which have already finished.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">cpuCount()</span></tt></dt>
<dd>Returns the number of CPUs in the system.  May raise
<tt class="docutils literal"><span class="pre">NotImplementedError</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">Pipe()</span></tt></dt>
<dd><p class="first">Returns a pair of connection objects representing the ends of
a duplex pipe.</p>
<p>These connection objects can be inherited by child processes
and have methods <tt class="docutils literal"><span class="pre">send()</span></tt> and <tt class="docutils literal"><span class="pre">recv()</span></tt> (among others) for
sending and recveiving picklable objects.  (See <a class="reference" href="connection-ref.html#connection-objects">Connection
objects</a>.)  For
example:</p>
<pre class="literal-block">
&gt;&gt;&gt; from processing import Pipe
&gt;&gt;&gt; a, b = Pipe()
&gt;&gt;&gt; a.send([1, 'hello', None])
&gt;&gt;&gt; b.recv()
[1, 'hello', None]
</pre>
<p class="last">Note that connection objects are not thread/process safe.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">Manager()</span></tt></dt>
<dd><p class="first">Returns a started <tt class="docutils literal"><span class="pre">SyncManager</span></tt> object which can be
used for sharing objects between processes.  The returned
manager object corresponds to a spawned child process and has
methods which will create shared objects and return
corresponding proxies.</p>
<p>The methods for creating shared objects are</p>
<blockquote>
<tt class="docutils literal"><span class="pre">list()</span></tt>, <tt class="docutils literal"><span class="pre">dict()</span></tt>, <tt class="docutils literal"><span class="pre">Namespace()</span></tt>, <tt class="docutils literal"><span class="pre">SharedValue()</span></tt>,
<tt class="docutils literal"><span class="pre">SharedStruct()</span></tt>, <tt class="docutils literal"><span class="pre">SharedArray()</span></tt>, <tt class="docutils literal"><span class="pre">Lock()</span></tt>, <tt class="docutils literal"><span class="pre">RLock()</span></tt>,
<tt class="docutils literal"><span class="pre">Semaphore()</span></tt>, <tt class="docutils literal"><span class="pre">BoundedSemaphore()</span></tt>, <tt class="docutils literal"><span class="pre">Condition()</span></tt>,
<tt class="docutils literal"><span class="pre">Event()</span></tt>, <tt class="docutils literal"><span class="pre">Queue()</span></tt>.</blockquote>
<p>For example:</p>
<pre class="literal-block">
&gt;&gt;&gt; from processing import Manager
&gt;&gt;&gt; manager = Manager()
&gt;&gt;&gt; l = manager.list(range(10))
&gt;&gt;&gt; l.reverse()
&gt;&gt;&gt; print l
[9, 8, 7, 6, 5, 4, 3, 2, 1, 0]
&gt;&gt;&gt; print repr(l)
&lt;Proxy[list] object at 0x00E1B3B0&gt;
</pre>
<p class="last">See <a class="reference" href="manager-objects.html#syncmanager">SyncManager</a> and
<a class="reference" href="proxy-objects.html">Proxy objects</a>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">freezeSupport()</span></tt></dt>
<dd><p class="first">Adds support for when a program which uses the <tt class="docutils literal"><span class="pre">processing</span></tt>
package has been frozen to produce a Windows executable.  (Has
been tested with <tt class="docutils literal"><span class="pre">py2exe</span></tt>, <tt class="docutils literal"><span class="pre">PyInstaller</span></tt> and <tt class="docutils literal"><span class="pre">cx_Freeze</span></tt>.)</p>
<p>One needs to call this function straight after the <tt class="docutils literal"><span class="pre">if</span> <span class="pre">__name__</span>
<span class="pre">==</span> <span class="pre">'__main__'</span></tt> line of the main module.  For example</p>
<pre class="literal-block">
from processing import Process, freezeSupport

def f():
    print &quot;hello world!&quot;

if __name__ == '__main__':
    freezeSupport()
    p = Process(target=f)
    p.start()
</pre>
<p>If the <tt class="docutils literal"><span class="pre">freezeSupport()</span></tt> line is missed out then the frozen
executable produced from this module would (on Windows)
recursively create new processes.</p>
<p class="last">If the module is being run normally by the python interpreter
then <tt class="docutils literal"><span class="pre">freezeSupport()</span></tt> has no effect.</p>
</dd>
<dt><strong>exception</strong> <tt class="docutils literal"><span class="pre">ProcessExit</span></tt></dt>
<dd>Exception raised in another process when the <tt class="docutils literal"><span class="pre">Process.stop()</span></tt>
method is used.  This is a subclass of <tt class="docutils literal"><span class="pre">SystemExit</span></tt>.</dd>
</dl>
</blockquote>
<p>If the <tt class="docutils literal"><span class="pre">_processing</span></tt> extension is available then one also has:</p>
<blockquote>
<dl class="docutils">
<dt><strong>exception</strong> <tt class="docutils literal"><span class="pre">BufferTooShort</span></tt></dt>
<dd><p class="first">Exception raise by the <tt class="docutils literal"><span class="pre">recvbytes_into()</span></tt> method of a
connection object when the supplied buffer object is too small
for the message read.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">e</span></tt> is an instance of <tt class="docutils literal"><span class="pre">BufferTooShort</span></tt> then <tt class="docutils literal"><span class="pre">e.args[0]</span></tt>
will give the message as a byte string.</p>
</dd>
</dl>
</blockquote>
<p>If the <tt class="docutils literal"><span class="pre">_processing</span></tt> extension was compiled with support for the
platforms native semaphores (see <a class="reference" href="../INSTALL.txt">INSTALL.txt</a>) then
the following functions are available:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">LocalManager()</span></tt></dt>
<dd><p class="first">Returns a manager object with instance methods</p>
<blockquote>
<tt class="docutils literal"><span class="pre">SharedValue</span></tt>, <tt class="docutils literal"><span class="pre">SharedStruct</span></tt>, <tt class="docutils literal"><span class="pre">SharedArray</span></tt></blockquote>
<p>for creating objects stored in shared memory map.  Also has
static methods</p>
<blockquote>
<tt class="docutils literal"><span class="pre">Lock</span></tt>, <tt class="docutils literal"><span class="pre">RLock</span></tt>, <tt class="docutils literal"><span class="pre">Semaphore</span></tt>, <tt class="docutils literal"><span class="pre">BoundedSemaphore</span></tt>,
<tt class="docutils literal"><span class="pre">Condition</span></tt>, <tt class="docutils literal"><span class="pre">Event</span></tt>, <tt class="docutils literal"><span class="pre">Queue</span></tt></blockquote>
<p class="last">which are just aliases for other functions in the <tt class="docutils literal"><span class="pre">processing</span></tt>
namespace.  See <a class="reference" href="manager-objects.html#shared-memory-managers">LocalManager</a>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">BoundedSemaphore(value=1)</span></tt></dt>
<dd>Returns a bounded semaphore object: a clone of
<tt class="docutils literal"><span class="pre">threading.BoundedSemaphore</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">Condition(lock=None)</span></tt></dt>
<dd><p class="first">Returns a condition variable: a clone of <tt class="docutils literal"><span class="pre">threading.Condition</span></tt>.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">lock</span></tt> is specified then it should be a <tt class="docutils literal"><span class="pre">Lock</span></tt> or <tt class="docutils literal"><span class="pre">RLock</span></tt>
object from <tt class="docutils literal"><span class="pre">processing</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">Event()</span></tt></dt>
<dd>Returns an event object: a clone of <tt class="docutils literal"><span class="pre">threading.Event</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">Lock()</span></tt></dt>
<dd>Returns a lock object: a clone of <tt class="docutils literal"><span class="pre">threading.Lock</span></tt> except
that acquiring a lock already owned by the calling thread
raises an exception instead of causing a deadlock).</dd>
<dt><tt class="docutils literal"><span class="pre">RLock()</span></tt></dt>
<dd>Returns a recursive lock object: a clone of <tt class="docutils literal"><span class="pre">threading.RLock</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">Semaphore(value=1)</span></tt></dt>
<dd>Returns a bounded semaphore object: a clone of
<tt class="docutils literal"><span class="pre">threading.Semaphore</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">PipeQueue(maxsize=0)</span></tt></dt>
<dd><p class="first">Returns a near clone of <tt class="docutils literal"><span class="pre">Queue.Queue</span></tt> except that the
<tt class="docutils literal"><span class="pre">qsize()</span></tt> method is not implemented.  It is implemented using
a pipe and some locks/semaphores.</p>
<p>On Unix if a client terminates while it is reading or writing
from the queue, other clients reading from the queue may lose
track of where messages boundaries are or may retrieve
incomplete messages.  At least on Windows a keyboard interrupt
(SIGINT) or the use of a process's <tt class="docutils literal"><span class="pre">stop()</span></tt> method should not
cause such a problem.</p>
<p class="last">Placing an object on a <tt class="docutils literal"><span class="pre">PipeQueue</span></tt> can block because of lack
of buffer space even if a zero timeout is used.</p>
</dd>
</dl>
</blockquote>
<p>On Unix if <tt class="docutils literal"><span class="pre">_processing</span></tt> was compiled with support for Posix queues
(see <a class="reference" href="../INSTALL.txt">INSTALL.txt</a>) then one also has:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">PosixQueue(maxsize=0,</span> <span class="pre">msgsize=0)</span></tt></dt>
<dd><p class="first">Returns a near clone of <tt class="docutils literal"><span class="pre">Queue.Queue</span></tt> implemented using a (Unix
only) posix message queue.</p>
<p>If <tt class="docutils literal"><span class="pre">maxsize</span></tt> is non-zero it determines the maximum number of
messages that can be in the queue and if <tt class="docutils literal"><span class="pre">msgsize</span></tt> is non-zero
it determines the maximum size in bytes of a message.  If
either is zero then the system default (which is finite) is
used.  (For instance on my Linux system the default maximum
number of messages in a queue is 10 and the maximum message
size is 8192 bytes.)  A <tt class="docutils literal"><span class="pre">PosixQueue</span></tt> object has attributes
<tt class="docutils literal"><span class="pre">_maxmsg</span></tt> and <tt class="docutils literal"><span class="pre">_maxsize</span></tt> which give these limits for that
queue.</p>
<p class="last">Note that if <tt class="docutils literal"><span class="pre">maxsize</span></tt> or <tt class="docutils literal"><span class="pre">msgsize</span></tt> is larger than the system
maximum then an <tt class="docutils literal"><span class="pre">OSError</span></tt> exception will be thrown.  On Linux
the system maximums can viewed and modified through the
<tt class="docutils literal"><span class="pre">/proc</span></tt> filesystem --- see <tt class="docutils literal"><span class="pre">man</span> <span class="pre">7</span> <span class="pre">mq_overview</span></tt>.</p>
</dd>
</dl>
</blockquote>
<p>In addition <tt class="docutils literal"><span class="pre">Queue()</span></tt> will be an alias for either <tt class="docutils literal"><span class="pre">PosixQueue()</span></tt> or
<tt class="docutils literal"><span class="pre">PipeQueue()</span></tt> if they are available:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">Queue(maxsize=0)</span></tt></dt>
<dd>Alias for either <tt class="docutils literal"><span class="pre">PosixQueue</span></tt> if available or else <tt class="docutils literal"><span class="pre">PipeQueue</span></tt>.</dd>
</dl>
</blockquote>
<p>It should be noted that a queue created by <tt class="docutils literal"><span class="pre">Queue.Queue()</span></tt> will have
infinite capacity and that putting an object on it will never block
(or raise a <tt class="docutils literal"><span class="pre">Full</span></tt> exception).  This is not true of a queue created
with <tt class="docutils literal"><span class="pre">PipeQueue()</span></tt> or <tt class="docutils literal"><span class="pre">PosixQueue()</span></tt> so a little extra care may be
needed to avoid the possibility of deadlocks.</p>
<div class="note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>The <tt class="docutils literal"><span class="pre">processing.dummy</span></tt> package replicates the API of <tt class="docutils literal"><span class="pre">processing</span></tt>
but is no more than a wrapper around the <tt class="docutils literal"><span class="pre">threading</span></tt> module.</li>
<li><tt class="docutils literal"><span class="pre">processing</span></tt> contains no analogues of <tt class="docutils literal"><span class="pre">activeCount</span></tt>,
<tt class="docutils literal"><span class="pre">enumerate</span></tt>, <tt class="docutils literal"><span class="pre">settrace</span></tt>, <tt class="docutils literal"><span class="pre">setprofile</span></tt>, <tt class="docutils literal"><span class="pre">Timer</span></tt>, or
<tt class="docutils literal"><span class="pre">local</span></tt> from the <tt class="docutils literal"><span class="pre">threading</span></tt> module.</li>
</ul>
</div>
<div class="section">
<h1><a id="subsections" name="subsections">Subsections</a></h1>
<ul class="simple">
<li><a class="reference" href="process-objects.html">Process objects</a></li>
<li><a class="reference" href="manager-objects.html">Manager objects</a></li>
<li><a class="reference" href="proxy-objects.html">Proxy objects</a></li>
<li><a class="reference" href="connection-ref.html">connection module</a></li>
</ul>
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference" href="intro.html">Prev</a> &nbsp; &nbsp; &nbsp; &nbsp; <a class="reference" href="index.html">Up</a> &nbsp; &nbsp; &nbsp; &nbsp; <a class="reference" href="process-objects.html">Next</a>
</div>
</body>
</html>
