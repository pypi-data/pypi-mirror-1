<tal:block condition="view/show"
           i18n:domain="topp.remopenid">

  <dl class="portlet portletRemOpenId">
    <dt class="portletHeader">
      <span class="portletTopLeft"></span>
      OpenID Associations
      <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd"
        tal:define="ac_identity string:__ac_identity_url;">
      <form tal:attributes="action python:context.absolute_url()+'/'+template.id"
            method="post"
            class="openidLoginForm">

        <input type="hidden" name="form.submitted" value="1" />
        <input type="hidden" name="came_from" value=""
               tal:attributes="value context/@@plone_context_state/current_base_url" />
        <input type="hidden" name="uuid"
               tal:attributes="value context/UID" />


        <div class="field" tal:define="openid_urls view/openid_urls">
          <label for="" i18n:translate="label_identity_url"
                 tal:attributes="for ac_identity">OpenID URLs</label>
          <br/>
          <ul id="openid_urls" tal:condition="openid_urls">
            <li class="discreet"
                tal:repeat="openid_url openid_urls">
                <span tal:replace="openid_url" />
            </li>
          </ul>
          <em tal:condition="not: openid_urls">None</em>
        </div>

        <dl id="openid_edit" class="collapsible inline collapsedOnLoad">
          <dt class="collapsibleHeader">Add</dt>
          <dd class="collapsibleContent">
            Please enter your OpenID URL and click "Verify" to start verification process.
            <input type="text"
                   size="13"
                   name="__ac_identity_url"
                   style=""
                   tal:attributes="name ac_identity;
                                   id ac_identity;
                                   style string:background: url(${here/portal_url}/openid-icon.gif) no-repeat;; padding-left: 16px;"
                   />

            <div class="formControls">
              <input class="context"
                     type="submit"
                     name="openid_submit"
                     value="Verify"
                     i18n:attributes="value label_openid_verify;"
                     />

            </div>
          </dd>
        </dl>
      </form>
    </dd>
  </dl>
</tal:block>
